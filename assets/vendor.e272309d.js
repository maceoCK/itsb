function gA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var xD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var B={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rc=Symbol.for("react.element"),TD=Symbol.for("react.portal"),PD=Symbol.for("react.fragment"),AD=Symbol.for("react.strict_mode"),CD=Symbol.for("react.profiler"),RD=Symbol.for("react.provider"),LD=Symbol.for("react.context"),MD=Symbol.for("react.forward_ref"),OD=Symbol.for("react.suspense"),kD=Symbol.for("react.memo"),ID=Symbol.for("react.lazy"),fE=Symbol.iterator;function ND(t){return t===null||typeof t!="object"?null:(t=fE&&t[fE]||t["@@iterator"],typeof t=="function"?t:null)}var vA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yA=Object.assign,_A={};function ou(t,e,n){this.props=t,this.context=e,this.refs=_A,this.updater=n||vA}ou.prototype.isReactComponent={};ou.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ou.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bA(){}bA.prototype=ou.prototype;function X_(t,e,n){this.props=t,this.context=e,this.refs=_A,this.updater=n||vA}var q_=X_.prototype=new bA;q_.constructor=X_;yA(q_,ou.prototype);q_.isPureReactComponent=!0;var hE=Array.isArray,wA=Object.prototype.hasOwnProperty,Z_={current:null},EA={key:!0,ref:!0,__self:!0,__source:!0};function SA(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)wA.call(e,r)&&!EA.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:rc,type:t,key:o,ref:s,props:i,_owner:Z_.current}}function DD(t,e){return{$$typeof:rc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function K_(t){return typeof t=="object"&&t!==null&&t.$$typeof===rc}function FD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dE=/\/+/g;function gm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FD(""+t.key):e.toString(36)}function Vf(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case rc:case TD:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+gm(s,0):r,hE(i)?(n="",t!=null&&(n=t.replace(dE,"$&/")+"/"),Vf(i,e,n,"",function(l){return l})):i!=null&&(K_(i)&&(i=DD(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(dE,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",hE(t))for(var a=0;a<t.length;a++){o=t[a];var u=r+gm(o,a);s+=Vf(o,e,n,u,i)}else if(u=ND(t),typeof u=="function")for(t=u.call(t),a=0;!(o=t.next()).done;)o=o.value,u=r+gm(o,a++),s+=Vf(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Yc(t,e,n){if(t==null)return t;var r=[],i=0;return Vf(t,r,"","",function(o){return e.call(n,o,i++)}),r}function UD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bn={current:null},$f={transition:null},zD={ReactCurrentDispatcher:Bn,ReactCurrentBatchConfig:$f,ReactCurrentOwner:Z_};tt.Children={map:Yc,forEach:function(t,e,n){Yc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yc(t,function(){e++}),e},toArray:function(t){return Yc(t,function(e){return e})||[]},only:function(t){if(!K_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tt.Component=ou;tt.Fragment=PD;tt.Profiler=CD;tt.PureComponent=X_;tt.StrictMode=AD;tt.Suspense=OD;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zD;tt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yA({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Z_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)wA.call(e,u)&&!EA.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:rc,type:t.type,key:i,ref:o,props:r,_owner:s}};tt.createContext=function(t){return t={$$typeof:LD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:RD,_context:t},t.Consumer=t};tt.createElement=SA;tt.createFactory=function(t){var e=SA.bind(null,t);return e.type=t,e};tt.createRef=function(){return{current:null}};tt.forwardRef=function(t){return{$$typeof:MD,render:t}};tt.isValidElement=K_;tt.lazy=function(t){return{$$typeof:ID,_payload:{_status:-1,_result:t},_init:UD}};tt.memo=function(t,e){return{$$typeof:kD,type:t,compare:e===void 0?null:e}};tt.startTransition=function(t){var e=$f.transition;$f.transition={};try{t()}finally{$f.transition=e}};tt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};tt.useCallback=function(t,e){return Bn.current.useCallback(t,e)};tt.useContext=function(t){return Bn.current.useContext(t)};tt.useDebugValue=function(){};tt.useDeferredValue=function(t){return Bn.current.useDeferredValue(t)};tt.useEffect=function(t,e){return Bn.current.useEffect(t,e)};tt.useId=function(){return Bn.current.useId()};tt.useImperativeHandle=function(t,e,n){return Bn.current.useImperativeHandle(t,e,n)};tt.useInsertionEffect=function(t,e){return Bn.current.useInsertionEffect(t,e)};tt.useLayoutEffect=function(t,e){return Bn.current.useLayoutEffect(t,e)};tt.useMemo=function(t,e){return Bn.current.useMemo(t,e)};tt.useReducer=function(t,e,n){return Bn.current.useReducer(t,e,n)};tt.useRef=function(t){return Bn.current.useRef(t)};tt.useState=function(t){return Bn.current.useState(t)};tt.useSyncExternalStore=function(t,e,n){return Bn.current.useSyncExternalStore(t,e,n)};tt.useTransition=function(){return Bn.current.useTransition()};tt.version="18.2.0";(function(t){t.exports=tt})(B);const Rt=mA(B.exports),G0=gA({__proto__:null,default:Rt},[B.exports]);var pE={},ic={exports:{}},mr={},xA={exports:{}},TA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ae,ve){var G=ae.length;ae.push(ve);e:for(;0<G;){var X=G-1>>>1,O=ae[X];if(0<i(O,ve))ae[X]=ve,ae[G]=O,G=X;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var ve=ae[0],G=ae.pop();if(G!==ve){ae[0]=G;e:for(var X=0,O=ae.length,q=O>>>1;X<q;){var Q=2*(X+1)-1,de=ae[Q],le=Q+1,_e=ae[le];if(0>i(de,G))le<O&&0>i(_e,de)?(ae[X]=_e,ae[le]=G,X=le):(ae[X]=de,ae[Q]=G,X=Q);else if(le<O&&0>i(_e,G))ae[X]=_e,ae[le]=G,X=le;else break e}}return ve}function i(ae,ve){var G=ae.sortIndex-ve.sortIndex;return G!==0?G:ae.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var u=[],l=[],c=1,f=null,h=3,d=!1,g=!1,m=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(ae){for(var ve=n(l);ve!==null;){if(ve.callback===null)r(l);else if(ve.startTime<=ae)r(l),ve.sortIndex=ve.expirationTime,e(u,ve);else break;ve=n(l)}}function T(ae){if(m=!1,w(ae),!g)if(n(u)!==null)g=!0,De(R);else{var ve=n(l);ve!==null&&He(T,ve.startTime-ae)}}function R(ae,ve){g=!1,m&&(m=!1,_(F),F=-1),d=!0;var G=h;try{for(w(ve),f=n(u);f!==null&&(!(f.expirationTime>ve)||ae&&!H());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var O=X(f.expirationTime<=ve);ve=t.unstable_now(),typeof O=="function"?f.callback=O:f===n(u)&&r(u),w(ve)}else r(u);f=n(u)}if(f!==null)var q=!0;else{var Q=n(l);Q!==null&&He(T,Q.startTime-ve),q=!1}return q}finally{f=null,h=G,d=!1}}var C=!1,D=null,F=-1,W=5,j=-1;function H(){return!(t.unstable_now()-j<W)}function pe(){if(D!==null){var ae=t.unstable_now();j=ae;var ve=!0;try{ve=D(!0,ae)}finally{ve?ue():(C=!1,D=null)}}else C=!1}var ue;if(typeof y=="function")ue=function(){y(pe)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,Ce=se.port2;se.port1.onmessage=pe,ue=function(){Ce.postMessage(null)}}else ue=function(){S(pe,0)};function De(ae){D=ae,C||(C=!0,ue())}function He(ae,ve){F=S(function(){ae(t.unstable_now())},ve)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ae){ae.callback=null},t.unstable_continueExecution=function(){g||d||(g=!0,De(R))},t.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<ae?Math.floor(1e3/ae):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(ae){switch(h){case 1:case 2:case 3:var ve=3;break;default:ve=h}var G=h;h=ve;try{return ae()}finally{h=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ae,ve){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var G=h;h=ae;try{return ve()}finally{h=G}},t.unstable_scheduleCallback=function(ae,ve,G){var X=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?X+G:X):G=X,ae){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=G+O,ae={id:c++,callback:ve,priorityLevel:ae,startTime:G,expirationTime:O,sortIndex:-1},G>X?(ae.sortIndex=G,e(l,ae),n(u)===null&&ae===n(l)&&(m?(_(F),F=-1):m=!0,He(T,G-X))):(ae.sortIndex=O,e(u,ae),g||d||(g=!0,De(R))),ae},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(ae){var ve=h;return function(){var G=h;h=ve;try{return ae.apply(this,arguments)}finally{h=G}}}})(TA);(function(t){t.exports=TA})(xA);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PA=B.exports,pr=xA.exports;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AA=new Set,Tl={};function xs(t,e){Da(t,e),Da(t+"Capture",e)}function Da(t,e){for(Tl[t]=e,t=0;t<e.length;t++)AA.add(e[t])}var Fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),W0=Object.prototype.hasOwnProperty,BD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gE={},mE={};function VD(t){return W0.call(mE,t)?!0:W0.call(gE,t)?!1:BD.test(t)?mE[t]=!0:(gE[t]=!0,!1)}function $D(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jD(t,e,n,r){if(e===null||typeof e>"u"||$D(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vn(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var En={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){En[t]=new Vn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];En[e]=new Vn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){En[t]=new Vn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){En[t]=new Vn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){En[t]=new Vn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){En[t]=new Vn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){En[t]=new Vn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){En[t]=new Vn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){En[t]=new Vn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Q_=/[\-:]([a-z])/g;function J_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Q_,J_);En[e]=new Vn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Q_,J_);En[e]=new Vn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Q_,J_);En[e]=new Vn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){En[t]=new Vn(t,1,!1,t.toLowerCase(),null,!1,!1)});En.xlinkHref=new Vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){En[t]=new Vn(t,1,!1,t.toLowerCase(),null,!0,!0)});function e1(t,e,n,r){var i=En.hasOwnProperty(e)?En[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jD(e,n,i,r)&&(n=null),r||i===null?VD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wi=PA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xc=Symbol.for("react.element"),sa=Symbol.for("react.portal"),aa=Symbol.for("react.fragment"),t1=Symbol.for("react.strict_mode"),H0=Symbol.for("react.profiler"),CA=Symbol.for("react.provider"),RA=Symbol.for("react.context"),n1=Symbol.for("react.forward_ref"),Y0=Symbol.for("react.suspense"),X0=Symbol.for("react.suspense_list"),r1=Symbol.for("react.memo"),lo=Symbol.for("react.lazy"),LA=Symbol.for("react.offscreen"),vE=Symbol.iterator;function Au(t){return t===null||typeof t!="object"?null:(t=vE&&t[vE]||t["@@iterator"],typeof t=="function"?t:null)}var jt=Object.assign,mm;function Qu(t){if(mm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mm=e&&e[1]||""}return`
`+mm+t}var vm=!1;function ym(t,e){if(!t||vm)return"";vm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=a);break}}}finally{vm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qu(t):""}function GD(t){switch(t.tag){case 5:return Qu(t.type);case 16:return Qu("Lazy");case 13:return Qu("Suspense");case 19:return Qu("SuspenseList");case 0:case 2:case 15:return t=ym(t.type,!1),t;case 11:return t=ym(t.type.render,!1),t;case 1:return t=ym(t.type,!0),t;default:return""}}function q0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case aa:return"Fragment";case sa:return"Portal";case H0:return"Profiler";case t1:return"StrictMode";case Y0:return"Suspense";case X0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case RA:return(t.displayName||"Context")+".Consumer";case CA:return(t._context.displayName||"Context")+".Provider";case n1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case r1:return e=t.displayName||null,e!==null?e:q0(t.type)||"Memo";case lo:e=t._payload,t=t._init;try{return q0(t(e))}catch{}}return null}function WD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q0(e);case 8:return e===t1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function MA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function HD(t){var e=MA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qc(t){t._valueTracker||(t._valueTracker=HD(t))}function OA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=MA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Z0(t,e){var n=e.checked;return jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function yE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Lo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kA(t,e){e=e.checked,e!=null&&e1(t,"checked",e,!1)}function K0(t,e){kA(t,e);var n=Lo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Q0(t,e.type,n):e.hasOwnProperty("defaultValue")&&Q0(t,e.type,Lo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _E(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Q0(t,e,n){(e!=="number"||Qh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ju=Array.isArray;function xa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Lo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function J0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Ju(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Lo(n)}}function IA(t,e){var n=Lo(e.value),r=Lo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function wE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function NA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ev(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?NA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zc,DA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zc=Zc||document.createElement("div"),Zc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var al={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YD=["Webkit","ms","Moz","O"];Object.keys(al).forEach(function(t){YD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),al[e]=al[t]})});function FA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||al.hasOwnProperty(t)&&al[t]?(""+e).trim():e+"px"}function UA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=FA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var XD=jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tv(t,e){if(e){if(XD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function nv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rv=null;function i1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var iv=null,Ta=null,Pa=null;function EE(t){if(t=ac(t)){if(typeof iv!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=zp(e),iv(t.stateNode,t.type,e))}}function zA(t){Ta?Pa?Pa.push(t):Pa=[t]:Ta=t}function BA(){if(Ta){var t=Ta,e=Pa;if(Pa=Ta=null,EE(t),e)for(t=0;t<e.length;t++)EE(e[t])}}function VA(t,e){return t(e)}function $A(){}var _m=!1;function jA(t,e,n){if(_m)return t(e,n);_m=!0;try{return VA(t,e,n)}finally{_m=!1,(Ta!==null||Pa!==null)&&($A(),BA())}}function Al(t,e){var n=t.stateNode;if(n===null)return null;var r=zp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var ov=!1;if(Fi)try{var Cu={};Object.defineProperty(Cu,"passive",{get:function(){ov=!0}}),window.addEventListener("test",Cu,Cu),window.removeEventListener("test",Cu,Cu)}catch{ov=!1}function qD(t,e,n,r,i,o,s,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var ul=!1,Jh=null,ed=!1,sv=null,ZD={onError:function(t){ul=!0,Jh=t}};function KD(t,e,n,r,i,o,s,a,u){ul=!1,Jh=null,qD.apply(ZD,arguments)}function QD(t,e,n,r,i,o,s,a,u){if(KD.apply(this,arguments),ul){if(ul){var l=Jh;ul=!1,Jh=null}else throw Error(oe(198));ed||(ed=!0,sv=l)}}function Ts(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function GA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function SE(t){if(Ts(t)!==t)throw Error(oe(188))}function JD(t){var e=t.alternate;if(!e){if(e=Ts(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return SE(i),t;if(o===r)return SE(i),e;o=o.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function WA(t){return t=JD(t),t!==null?HA(t):null}function HA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=HA(t);if(e!==null)return e;t=t.sibling}return null}var YA=pr.unstable_scheduleCallback,xE=pr.unstable_cancelCallback,eF=pr.unstable_shouldYield,tF=pr.unstable_requestPaint,Xt=pr.unstable_now,nF=pr.unstable_getCurrentPriorityLevel,o1=pr.unstable_ImmediatePriority,XA=pr.unstable_UserBlockingPriority,td=pr.unstable_NormalPriority,rF=pr.unstable_LowPriority,qA=pr.unstable_IdlePriority,Np=null,pi=null;function iF(t){if(pi&&typeof pi.onCommitFiberRoot=="function")try{pi.onCommitFiberRoot(Np,t,void 0,(t.current.flags&128)===128)}catch{}}var Hr=Math.clz32?Math.clz32:aF,oF=Math.log,sF=Math.LN2;function aF(t){return t>>>=0,t===0?32:31-(oF(t)/sF|0)|0}var Kc=64,Qc=4194304;function el(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=el(a):(o&=s,o!==0&&(r=el(o)))}else s=n&~i,s!==0?r=el(s):o!==0&&(r=el(o));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Hr(e),i=1<<n,r|=t[n],e&=~i;return r}function uF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Hr(o),a=1<<s,u=i[s];u===-1?((a&n)===0||(a&r)!==0)&&(i[s]=uF(a,e)):u<=e&&(t.expiredLanes|=a),o&=~a}}function av(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ZA(){var t=Kc;return Kc<<=1,(Kc&4194240)===0&&(Kc=64),t}function bm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function oc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hr(e),t[e]=n}function cF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Hr(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function s1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Hr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var yt=0;function KA(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var QA,a1,JA,eC,tC,uv=!1,Jc=[],bo=null,wo=null,Eo=null,Cl=new Map,Rl=new Map,ho=[],fF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function TE(t,e){switch(t){case"focusin":case"focusout":bo=null;break;case"dragenter":case"dragleave":wo=null;break;case"mouseover":case"mouseout":Eo=null;break;case"pointerover":case"pointerout":Cl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(e.pointerId)}}function Ru(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ac(e),e!==null&&a1(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function hF(t,e,n,r,i){switch(e){case"focusin":return bo=Ru(bo,t,e,n,r,i),!0;case"dragenter":return wo=Ru(wo,t,e,n,r,i),!0;case"mouseover":return Eo=Ru(Eo,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Cl.set(o,Ru(Cl.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Rl.set(o,Ru(Rl.get(o)||null,t,e,n,r,i)),!0}return!1}function nC(t){var e=es(t.target);if(e!==null){var n=Ts(e);if(n!==null){if(e=n.tag,e===13){if(e=GA(n),e!==null){t.blockedOn=e,tC(t.priority,function(){JA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=lv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);rv=r,n.target.dispatchEvent(r),rv=null}else return e=ac(n),e!==null&&a1(e),t.blockedOn=n,!1;e.shift()}return!0}function PE(t,e,n){jf(t)&&n.delete(e)}function dF(){uv=!1,bo!==null&&jf(bo)&&(bo=null),wo!==null&&jf(wo)&&(wo=null),Eo!==null&&jf(Eo)&&(Eo=null),Cl.forEach(PE),Rl.forEach(PE)}function Lu(t,e){t.blockedOn===e&&(t.blockedOn=null,uv||(uv=!0,pr.unstable_scheduleCallback(pr.unstable_NormalPriority,dF)))}function Ll(t){function e(i){return Lu(i,t)}if(0<Jc.length){Lu(Jc[0],t);for(var n=1;n<Jc.length;n++){var r=Jc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bo!==null&&Lu(bo,t),wo!==null&&Lu(wo,t),Eo!==null&&Lu(Eo,t),Cl.forEach(e),Rl.forEach(e),n=0;n<ho.length;n++)r=ho[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ho.length&&(n=ho[0],n.blockedOn===null);)nC(n),n.blockedOn===null&&ho.shift()}var Aa=Wi.ReactCurrentBatchConfig,rd=!0;function pF(t,e,n,r){var i=yt,o=Aa.transition;Aa.transition=null;try{yt=1,u1(t,e,n,r)}finally{yt=i,Aa.transition=o}}function gF(t,e,n,r){var i=yt,o=Aa.transition;Aa.transition=null;try{yt=4,u1(t,e,n,r)}finally{yt=i,Aa.transition=o}}function u1(t,e,n,r){if(rd){var i=lv(t,e,n,r);if(i===null)Lm(t,e,r,id,n),TE(t,r);else if(hF(i,t,e,n,r))r.stopPropagation();else if(TE(t,r),e&4&&-1<fF.indexOf(t)){for(;i!==null;){var o=ac(i);if(o!==null&&QA(o),o=lv(t,e,n,r),o===null&&Lm(t,e,r,id,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Lm(t,e,r,null,n)}}var id=null;function lv(t,e,n,r){if(id=null,t=i1(r),t=es(t),t!==null)if(e=Ts(t),e===null)t=null;else if(n=e.tag,n===13){if(t=GA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return id=t,null}function rC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nF()){case o1:return 1;case XA:return 4;case td:case rF:return 16;case qA:return 536870912;default:return 16}default:return 16}}var mo=null,l1=null,Gf=null;function iC(){if(Gf)return Gf;var t,e=l1,n=e.length,r,i="value"in mo?mo.value:mo.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Gf=i.slice(t,1<r?1-r:void 0)}function Wf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ef(){return!0}function AE(){return!1}function vr(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ef:AE,this.isPropagationStopped=AE,this}return jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ef)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ef)},persist:function(){},isPersistent:ef}),e}var su={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},c1=vr(su),sc=jt({},su,{view:0,detail:0}),mF=vr(sc),wm,Em,Mu,Dp=jt({},sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:f1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mu&&(Mu&&t.type==="mousemove"?(wm=t.screenX-Mu.screenX,Em=t.screenY-Mu.screenY):Em=wm=0,Mu=t),wm)},movementY:function(t){return"movementY"in t?t.movementY:Em}}),CE=vr(Dp),vF=jt({},Dp,{dataTransfer:0}),yF=vr(vF),_F=jt({},sc,{relatedTarget:0}),Sm=vr(_F),bF=jt({},su,{animationName:0,elapsedTime:0,pseudoElement:0}),wF=vr(bF),EF=jt({},su,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),SF=vr(EF),xF=jt({},su,{data:0}),RE=vr(xF),TF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=AF[t])?!!e[t]:!1}function f1(){return CF}var RF=jt({},sc,{key:function(t){if(t.key){var e=TF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:f1,charCode:function(t){return t.type==="keypress"?Wf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LF=vr(RF),MF=jt({},Dp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),LE=vr(MF),OF=jt({},sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:f1}),kF=vr(OF),IF=jt({},su,{propertyName:0,elapsedTime:0,pseudoElement:0}),NF=vr(IF),DF=jt({},Dp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FF=vr(DF),UF=[9,13,27,32],h1=Fi&&"CompositionEvent"in window,ll=null;Fi&&"documentMode"in document&&(ll=document.documentMode);var zF=Fi&&"TextEvent"in window&&!ll,oC=Fi&&(!h1||ll&&8<ll&&11>=ll),ME=String.fromCharCode(32),OE=!1;function sC(t,e){switch(t){case"keyup":return UF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ua=!1;function BF(t,e){switch(t){case"compositionend":return aC(e);case"keypress":return e.which!==32?null:(OE=!0,ME);case"textInput":return t=e.data,t===ME&&OE?null:t;default:return null}}function VF(t,e){if(ua)return t==="compositionend"||!h1&&sC(t,e)?(t=iC(),Gf=l1=mo=null,ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oC&&e.locale!=="ko"?null:e.data;default:return null}}var $F={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$F[t.type]:e==="textarea"}function uC(t,e,n,r){zA(r),e=od(e,"onChange"),0<e.length&&(n=new c1("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var cl=null,Ml=null;function jF(t){_C(t,0)}function Fp(t){var e=fa(t);if(OA(e))return t}function GF(t,e){if(t==="change")return e}var lC=!1;if(Fi){var xm;if(Fi){var Tm="oninput"in document;if(!Tm){var IE=document.createElement("div");IE.setAttribute("oninput","return;"),Tm=typeof IE.oninput=="function"}xm=Tm}else xm=!1;lC=xm&&(!document.documentMode||9<document.documentMode)}function NE(){cl&&(cl.detachEvent("onpropertychange",cC),Ml=cl=null)}function cC(t){if(t.propertyName==="value"&&Fp(Ml)){var e=[];uC(e,Ml,t,i1(t)),jA(jF,e)}}function WF(t,e,n){t==="focusin"?(NE(),cl=e,Ml=n,cl.attachEvent("onpropertychange",cC)):t==="focusout"&&NE()}function HF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fp(Ml)}function YF(t,e){if(t==="click")return Fp(e)}function XF(t,e){if(t==="input"||t==="change")return Fp(e)}function qF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qr=typeof Object.is=="function"?Object.is:qF;function Ol(t,e){if(qr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!W0.call(e,i)||!qr(t[i],e[i]))return!1}return!0}function DE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function FE(t,e){var n=DE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=DE(n)}}function fC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hC(){for(var t=window,e=Qh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qh(t.document)}return e}function d1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ZF(t){var e=hC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fC(n.ownerDocument.documentElement,n)){if(r!==null&&d1(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=FE(n,o);var s=FE(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KF=Fi&&"documentMode"in document&&11>=document.documentMode,la=null,cv=null,fl=null,fv=!1;function UE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fv||la==null||la!==Qh(r)||(r=la,"selectionStart"in r&&d1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fl&&Ol(fl,r)||(fl=r,r=od(cv,"onSelect"),0<r.length&&(e=new c1("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=la)))}function tf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ca={animationend:tf("Animation","AnimationEnd"),animationiteration:tf("Animation","AnimationIteration"),animationstart:tf("Animation","AnimationStart"),transitionend:tf("Transition","TransitionEnd")},Pm={},dC={};Fi&&(dC=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function Up(t){if(Pm[t])return Pm[t];if(!ca[t])return t;var e=ca[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dC)return Pm[t]=e[n];return t}var pC=Up("animationend"),gC=Up("animationiteration"),mC=Up("animationstart"),vC=Up("transitionend"),yC=new Map,zE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oo(t,e){yC.set(t,e),xs(e,[t])}for(var Am=0;Am<zE.length;Am++){var Cm=zE[Am],QF=Cm.toLowerCase(),JF=Cm[0].toUpperCase()+Cm.slice(1);Oo(QF,"on"+JF)}Oo(pC,"onAnimationEnd");Oo(gC,"onAnimationIteration");Oo(mC,"onAnimationStart");Oo("dblclick","onDoubleClick");Oo("focusin","onFocus");Oo("focusout","onBlur");Oo(vC,"onTransitionEnd");Da("onMouseEnter",["mouseout","mouseover"]);Da("onMouseLeave",["mouseout","mouseover"]);Da("onPointerEnter",["pointerout","pointerover"]);Da("onPointerLeave",["pointerout","pointerover"]);xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e4=new Set("cancel close invalid load scroll toggle".split(" ").concat(tl));function BE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QD(r,e,void 0,t),t.currentTarget=null}function _C(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==o&&i.isPropagationStopped())break e;BE(i,a,l),o=u}else for(s=0;s<r.length;s++){if(a=r[s],u=a.instance,l=a.currentTarget,a=a.listener,u!==o&&i.isPropagationStopped())break e;BE(i,a,l),o=u}}}if(ed)throw t=sv,ed=!1,sv=null,t}function Ot(t,e){var n=e[mv];n===void 0&&(n=e[mv]=new Set);var r=t+"__bubble";n.has(r)||(bC(e,t,2,!1),n.add(r))}function Rm(t,e,n){var r=0;e&&(r|=4),bC(n,t,r,e)}var nf="_reactListening"+Math.random().toString(36).slice(2);function kl(t){if(!t[nf]){t[nf]=!0,AA.forEach(function(n){n!=="selectionchange"&&(e4.has(n)||Rm(n,!1,t),Rm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nf]||(e[nf]=!0,Rm("selectionchange",!1,e))}}function bC(t,e,n,r){switch(rC(e)){case 1:var i=pF;break;case 4:i=gF;break;default:i=u1}n=i.bind(null,e,n,t),i=void 0,!ov||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Lm(t,e,n,r,i){var o=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;a!==null;){if(s=es(a),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}a=a.parentNode}}r=r.return}jA(function(){var l=o,c=i1(n),f=[];e:{var h=yC.get(t);if(h!==void 0){var d=c1,g=t;switch(t){case"keypress":if(Wf(n)===0)break e;case"keydown":case"keyup":d=LF;break;case"focusin":g="focus",d=Sm;break;case"focusout":g="blur",d=Sm;break;case"beforeblur":case"afterblur":d=Sm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=CE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=yF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=kF;break;case pC:case gC:case mC:d=wF;break;case vC:d=NF;break;case"scroll":d=mF;break;case"wheel":d=FF;break;case"copy":case"cut":case"paste":d=SF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=LE}var m=(e&4)!==0,S=!m&&t==="scroll",_=m?h!==null?h+"Capture":null:h;m=[];for(var y=l,w;y!==null;){w=y;var T=w.stateNode;if(w.tag===5&&T!==null&&(w=T,_!==null&&(T=Al(y,_),T!=null&&m.push(Il(y,T,w)))),S)break;y=y.return}0<m.length&&(h=new d(h,g,null,n,c),f.push({event:h,listeners:m}))}}if((e&7)===0){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==rv&&(g=n.relatedTarget||n.fromElement)&&(es(g)||g[Ui]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(g=n.relatedTarget||n.toElement,d=l,g=g?es(g):null,g!==null&&(S=Ts(g),g!==S||g.tag!==5&&g.tag!==6)&&(g=null)):(d=null,g=l),d!==g)){if(m=CE,T="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=LE,T="onPointerLeave",_="onPointerEnter",y="pointer"),S=d==null?h:fa(d),w=g==null?h:fa(g),h=new m(T,y+"leave",d,n,c),h.target=S,h.relatedTarget=w,T=null,es(c)===l&&(m=new m(_,y+"enter",g,n,c),m.target=w,m.relatedTarget=S,T=m),S=T,d&&g)t:{for(m=d,_=g,y=0,w=m;w;w=qs(w))y++;for(w=0,T=_;T;T=qs(T))w++;for(;0<y-w;)m=qs(m),y--;for(;0<w-y;)_=qs(_),w--;for(;y--;){if(m===_||_!==null&&m===_.alternate)break t;m=qs(m),_=qs(_)}m=null}else m=null;d!==null&&VE(f,h,d,m,!1),g!==null&&S!==null&&VE(f,S,g,m,!0)}}e:{if(h=l?fa(l):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var R=GF;else if(kE(h))if(lC)R=XF;else{R=HF;var C=WF}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(R=YF);if(R&&(R=R(t,l))){uC(f,R,n,c);break e}C&&C(t,h,l),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&Q0(h,"number",h.value)}switch(C=l?fa(l):window,t){case"focusin":(kE(C)||C.contentEditable==="true")&&(la=C,cv=l,fl=null);break;case"focusout":fl=cv=la=null;break;case"mousedown":fv=!0;break;case"contextmenu":case"mouseup":case"dragend":fv=!1,UE(f,n,c);break;case"selectionchange":if(KF)break;case"keydown":case"keyup":UE(f,n,c)}var D;if(h1)e:{switch(t){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else ua?sC(t,n)&&(F="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(oC&&n.locale!=="ko"&&(ua||F!=="onCompositionStart"?F==="onCompositionEnd"&&ua&&(D=iC()):(mo=c,l1="value"in mo?mo.value:mo.textContent,ua=!0)),C=od(l,F),0<C.length&&(F=new RE(F,t,null,n,c),f.push({event:F,listeners:C}),D?F.data=D:(D=aC(n),D!==null&&(F.data=D)))),(D=zF?BF(t,n):VF(t,n))&&(l=od(l,"onBeforeInput"),0<l.length&&(c=new RE("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=D))}_C(f,e)})}function Il(t,e,n){return{instance:t,listener:e,currentTarget:n}}function od(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Al(t,n),o!=null&&r.unshift(Il(t,o,i)),o=Al(t,e),o!=null&&r.push(Il(t,o,i))),t=t.return}return r}function qs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function VE(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=Al(n,o),u!=null&&s.unshift(Il(n,u,a))):i||(u=Al(n,o),u!=null&&s.push(Il(n,u,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var t4=/\r\n?/g,n4=/\u0000|\uFFFD/g;function $E(t){return(typeof t=="string"?t:""+t).replace(t4,`
`).replace(n4,"")}function rf(t,e,n){if(e=$E(e),$E(t)!==e&&n)throw Error(oe(425))}function sd(){}var hv=null,dv=null;function pv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gv=typeof setTimeout=="function"?setTimeout:void 0,r4=typeof clearTimeout=="function"?clearTimeout:void 0,jE=typeof Promise=="function"?Promise:void 0,i4=typeof queueMicrotask=="function"?queueMicrotask:typeof jE<"u"?function(t){return jE.resolve(null).then(t).catch(o4)}:gv;function o4(t){setTimeout(function(){throw t})}function Mm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ll(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ll(e)}function So(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function GE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var au=Math.random().toString(36).slice(2),li="__reactFiber$"+au,Nl="__reactProps$"+au,Ui="__reactContainer$"+au,mv="__reactEvents$"+au,s4="__reactListeners$"+au,a4="__reactHandles$"+au;function es(t){var e=t[li];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ui]||n[li]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=GE(t);t!==null;){if(n=t[li])return n;t=GE(t)}return e}t=n,n=t.parentNode}return null}function ac(t){return t=t[li]||t[Ui],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function zp(t){return t[Nl]||null}var vv=[],ha=-1;function ko(t){return{current:t}}function kt(t){0>ha||(t.current=vv[ha],vv[ha]=null,ha--)}function Ct(t,e){ha++,vv[ha]=t.current,t.current=e}var Mo={},On=ko(Mo),Zn=ko(!1),hs=Mo;function Fa(t,e){var n=t.type.contextTypes;if(!n)return Mo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Kn(t){return t=t.childContextTypes,t!=null}function ad(){kt(Zn),kt(On)}function WE(t,e,n){if(On.current!==Mo)throw Error(oe(168));Ct(On,e),Ct(Zn,n)}function wC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,WD(t)||"Unknown",i));return jt({},n,r)}function ud(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mo,hs=On.current,Ct(On,t),Ct(Zn,Zn.current),!0}function HE(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=wC(t,e,hs),r.__reactInternalMemoizedMergedChildContext=t,kt(Zn),kt(On),Ct(On,t)):kt(Zn),Ct(Zn,n)}var Li=null,Bp=!1,Om=!1;function EC(t){Li===null?Li=[t]:Li.push(t)}function u4(t){Bp=!0,EC(t)}function Io(){if(!Om&&Li!==null){Om=!0;var t=0,e=yt;try{var n=Li;for(yt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Li=null,Bp=!1}catch(i){throw Li!==null&&(Li=Li.slice(t+1)),YA(o1,Io),i}finally{yt=e,Om=!1}}return null}var da=[],pa=0,ld=null,cd=0,br=[],wr=0,ds=null,Oi=1,ki="";function Xo(t,e){da[pa++]=cd,da[pa++]=ld,ld=t,cd=e}function SC(t,e,n){br[wr++]=Oi,br[wr++]=ki,br[wr++]=ds,ds=t;var r=Oi;t=ki;var i=32-Hr(r)-1;r&=~(1<<i),n+=1;var o=32-Hr(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Oi=1<<32-Hr(e)+i|n<<i|r,ki=o+t}else Oi=1<<o|n<<i|r,ki=t}function p1(t){t.return!==null&&(Xo(t,1),SC(t,1,0))}function g1(t){for(;t===ld;)ld=da[--pa],da[pa]=null,cd=da[--pa],da[pa]=null;for(;t===ds;)ds=br[--wr],br[wr]=null,ki=br[--wr],br[wr]=null,Oi=br[--wr],br[wr]=null}var hr=null,fr=null,Nt=!1,Vr=null;function xC(t,e){var n=Sr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function YE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hr=t,fr=So(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hr=t,fr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ds!==null?{id:Oi,overflow:ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hr=t,fr=null,!0):!1;default:return!1}}function yv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _v(t){if(Nt){var e=fr;if(e){var n=e;if(!YE(t,e)){if(yv(t))throw Error(oe(418));e=So(n.nextSibling);var r=hr;e&&YE(t,e)?xC(r,n):(t.flags=t.flags&-4097|2,Nt=!1,hr=t)}}else{if(yv(t))throw Error(oe(418));t.flags=t.flags&-4097|2,Nt=!1,hr=t}}}function XE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hr=t}function of(t){if(t!==hr)return!1;if(!Nt)return XE(t),Nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pv(t.type,t.memoizedProps)),e&&(e=fr)){if(yv(t))throw TC(),Error(oe(418));for(;e;)xC(t,e),e=So(e.nextSibling)}if(XE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){fr=So(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}fr=null}}else fr=hr?So(t.stateNode.nextSibling):null;return!0}function TC(){for(var t=fr;t;)t=So(t.nextSibling)}function Ua(){fr=hr=null,Nt=!1}function m1(t){Vr===null?Vr=[t]:Vr.push(t)}var l4=Wi.ReactCurrentBatchConfig;function zr(t,e){if(t&&t.defaultProps){e=jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var fd=ko(null),hd=null,ga=null,v1=null;function y1(){v1=ga=hd=null}function _1(t){var e=fd.current;kt(fd),t._currentValue=e}function bv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ca(t,e){hd=t,v1=ga=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Yn=!0),t.firstContext=null)}function Pr(t){var e=t._currentValue;if(v1!==t)if(t={context:t,memoizedValue:e,next:null},ga===null){if(hd===null)throw Error(oe(308));ga=t,hd.dependencies={lanes:0,firstContext:t}}else ga=ga.next=t;return e}var ts=null;function b1(t){ts===null?ts=[t]:ts.push(t)}function PC(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,b1(e)):(n.next=i.next,i.next=n),e.interleaved=n,zi(t,r)}function zi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var co=!1;function w1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ii(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(lt&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,zi(t,n)}return i=r.interleaved,i===null?(e.next=e,b1(r)):(e.next=i.next,i.next=e),r.interleaved=e,zi(t,n)}function Hf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,s1(t,n)}}function qE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function dd(t,e,n,r){var i=t.updateQueue;co=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,s===null?o=l:s.next=l,s=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(o!==null){var f=i.baseState;s=0,c=l=u=null,a=o;do{var h=a.lane,d=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(h=e,d=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){f=g.call(d,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,h=typeof g=="function"?g.call(d,f,h):g,h==null)break e;f=jt({},f,h);break e;case 2:co=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else d={eventTime:d,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=d,u=f):c=c.next=d,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);gs|=s,t.lanes=s,t.memoizedState=f}}function ZE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var CC=new PA.Component().refs;function wv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vp={isMounted:function(t){return(t=t._reactInternals)?Ts(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Fn(),i=Po(t),o=Ii(r,i);o.payload=e,n!=null&&(o.callback=n),e=xo(t,o,i),e!==null&&(Yr(e,t,i,r),Hf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Fn(),i=Po(t),o=Ii(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=xo(t,o,i),e!==null&&(Yr(e,t,i,r),Hf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Fn(),r=Po(t),i=Ii(n,r);i.tag=2,e!=null&&(i.callback=e),e=xo(t,i,r),e!==null&&(Yr(e,t,r,n),Hf(e,t,r))}};function KE(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ol(n,r)||!Ol(i,o):!0}function RC(t,e,n){var r=!1,i=Mo,o=e.contextType;return typeof o=="object"&&o!==null?o=Pr(o):(i=Kn(e)?hs:On.current,r=e.contextTypes,o=(r=r!=null)?Fa(t,i):Mo),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function QE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vp.enqueueReplaceState(e,e.state,null)}function Ev(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=CC,w1(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Pr(o):(o=Kn(e)?hs:On.current,i.context=Fa(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(wv(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vp.enqueueReplaceState(i,i.state,null),dd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ou(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===CC&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function sf(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function JE(t){var e=t._init;return e(t._payload)}function LC(t){function e(_,y){if(t){var w=_.deletions;w===null?(_.deletions=[y],_.flags|=16):w.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=Ao(_,y),_.index=0,_.sibling=null,_}function o(_,y,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<y?(_.flags|=2,y):w):(_.flags|=2,y)):(_.flags|=1048576,y)}function s(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,w,T){return y===null||y.tag!==6?(y=zm(w,_.mode,T),y.return=_,y):(y=i(y,w),y.return=_,y)}function u(_,y,w,T){var R=w.type;return R===aa?c(_,y,w.props.children,T,w.key):y!==null&&(y.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===lo&&JE(R)===y.type)?(T=i(y,w.props),T.ref=Ou(_,y,w),T.return=_,T):(T=Qf(w.type,w.key,w.props,null,_.mode,T),T.ref=Ou(_,y,w),T.return=_,T)}function l(_,y,w,T){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Bm(w,_.mode,T),y.return=_,y):(y=i(y,w.children||[]),y.return=_,y)}function c(_,y,w,T,R){return y===null||y.tag!==7?(y=as(w,_.mode,T,R),y.return=_,y):(y=i(y,w),y.return=_,y)}function f(_,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=zm(""+y,_.mode,w),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xc:return w=Qf(y.type,y.key,y.props,null,_.mode,w),w.ref=Ou(_,null,y),w.return=_,w;case sa:return y=Bm(y,_.mode,w),y.return=_,y;case lo:var T=y._init;return f(_,T(y._payload),w)}if(Ju(y)||Au(y))return y=as(y,_.mode,w,null),y.return=_,y;sf(_,y)}return null}function h(_,y,w,T){var R=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return R!==null?null:a(_,y,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xc:return w.key===R?u(_,y,w,T):null;case sa:return w.key===R?l(_,y,w,T):null;case lo:return R=w._init,h(_,y,R(w._payload),T)}if(Ju(w)||Au(w))return R!==null?null:c(_,y,w,T,null);sf(_,w)}return null}function d(_,y,w,T,R){if(typeof T=="string"&&T!==""||typeof T=="number")return _=_.get(w)||null,a(y,_,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Xc:return _=_.get(T.key===null?w:T.key)||null,u(y,_,T,R);case sa:return _=_.get(T.key===null?w:T.key)||null,l(y,_,T,R);case lo:var C=T._init;return d(_,y,w,C(T._payload),R)}if(Ju(T)||Au(T))return _=_.get(w)||null,c(y,_,T,R,null);sf(y,T)}return null}function g(_,y,w,T){for(var R=null,C=null,D=y,F=y=0,W=null;D!==null&&F<w.length;F++){D.index>F?(W=D,D=null):W=D.sibling;var j=h(_,D,w[F],T);if(j===null){D===null&&(D=W);break}t&&D&&j.alternate===null&&e(_,D),y=o(j,y,F),C===null?R=j:C.sibling=j,C=j,D=W}if(F===w.length)return n(_,D),Nt&&Xo(_,F),R;if(D===null){for(;F<w.length;F++)D=f(_,w[F],T),D!==null&&(y=o(D,y,F),C===null?R=D:C.sibling=D,C=D);return Nt&&Xo(_,F),R}for(D=r(_,D);F<w.length;F++)W=d(D,_,F,w[F],T),W!==null&&(t&&W.alternate!==null&&D.delete(W.key===null?F:W.key),y=o(W,y,F),C===null?R=W:C.sibling=W,C=W);return t&&D.forEach(function(H){return e(_,H)}),Nt&&Xo(_,F),R}function m(_,y,w,T){var R=Au(w);if(typeof R!="function")throw Error(oe(150));if(w=R.call(w),w==null)throw Error(oe(151));for(var C=R=null,D=y,F=y=0,W=null,j=w.next();D!==null&&!j.done;F++,j=w.next()){D.index>F?(W=D,D=null):W=D.sibling;var H=h(_,D,j.value,T);if(H===null){D===null&&(D=W);break}t&&D&&H.alternate===null&&e(_,D),y=o(H,y,F),C===null?R=H:C.sibling=H,C=H,D=W}if(j.done)return n(_,D),Nt&&Xo(_,F),R;if(D===null){for(;!j.done;F++,j=w.next())j=f(_,j.value,T),j!==null&&(y=o(j,y,F),C===null?R=j:C.sibling=j,C=j);return Nt&&Xo(_,F),R}for(D=r(_,D);!j.done;F++,j=w.next())j=d(D,_,F,j.value,T),j!==null&&(t&&j.alternate!==null&&D.delete(j.key===null?F:j.key),y=o(j,y,F),C===null?R=j:C.sibling=j,C=j);return t&&D.forEach(function(pe){return e(_,pe)}),Nt&&Xo(_,F),R}function S(_,y,w,T){if(typeof w=="object"&&w!==null&&w.type===aa&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Xc:e:{for(var R=w.key,C=y;C!==null;){if(C.key===R){if(R=w.type,R===aa){if(C.tag===7){n(_,C.sibling),y=i(C,w.props.children),y.return=_,_=y;break e}}else if(C.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===lo&&JE(R)===C.type){n(_,C.sibling),y=i(C,w.props),y.ref=Ou(_,C,w),y.return=_,_=y;break e}n(_,C);break}else e(_,C);C=C.sibling}w.type===aa?(y=as(w.props.children,_.mode,T,w.key),y.return=_,_=y):(T=Qf(w.type,w.key,w.props,null,_.mode,T),T.ref=Ou(_,y,w),T.return=_,_=T)}return s(_);case sa:e:{for(C=w.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(_,y.sibling),y=i(y,w.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=Bm(w,_.mode,T),y.return=_,_=y}return s(_);case lo:return C=w._init,S(_,y,C(w._payload),T)}if(Ju(w))return g(_,y,w,T);if(Au(w))return m(_,y,w,T);sf(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,w),y.return=_,_=y):(n(_,y),y=zm(w,_.mode,T),y.return=_,_=y),s(_)):n(_,y)}return S}var za=LC(!0),MC=LC(!1),uc={},gi=ko(uc),Dl=ko(uc),Fl=ko(uc);function ns(t){if(t===uc)throw Error(oe(174));return t}function E1(t,e){switch(Ct(Fl,e),Ct(Dl,t),Ct(gi,uc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ev(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ev(e,t)}kt(gi),Ct(gi,e)}function Ba(){kt(gi),kt(Dl),kt(Fl)}function OC(t){ns(Fl.current);var e=ns(gi.current),n=ev(e,t.type);e!==n&&(Ct(Dl,t),Ct(gi,n))}function S1(t){Dl.current===t&&(kt(gi),kt(Dl))}var zt=ko(0);function pd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var km=[];function x1(){for(var t=0;t<km.length;t++)km[t]._workInProgressVersionPrimary=null;km.length=0}var Yf=Wi.ReactCurrentDispatcher,Im=Wi.ReactCurrentBatchConfig,ps=0,$t=null,an=null,hn=null,gd=!1,hl=!1,Ul=0,c4=0;function Pn(){throw Error(oe(321))}function T1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qr(t[n],e[n]))return!1;return!0}function P1(t,e,n,r,i,o){if(ps=o,$t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yf.current=t===null||t.memoizedState===null?p4:g4,t=n(r,i),hl){o=0;do{if(hl=!1,Ul=0,25<=o)throw Error(oe(301));o+=1,hn=an=null,e.updateQueue=null,Yf.current=m4,t=n(r,i)}while(hl)}if(Yf.current=md,e=an!==null&&an.next!==null,ps=0,hn=an=$t=null,gd=!1,e)throw Error(oe(300));return t}function A1(){var t=Ul!==0;return Ul=0,t}function ui(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?$t.memoizedState=hn=t:hn=hn.next=t,hn}function Ar(){if(an===null){var t=$t.alternate;t=t!==null?t.memoizedState:null}else t=an.next;var e=hn===null?$t.memoizedState:hn.next;if(e!==null)hn=e,an=t;else{if(t===null)throw Error(oe(310));an=t,t={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},hn===null?$t.memoizedState=hn=t:hn=hn.next=t}return hn}function zl(t,e){return typeof e=="function"?e(t):e}function Nm(t){var e=Ar(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=an,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,u=null,l=o;do{var c=l.lane;if((ps&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,s=r):u=u.next=f,$t.lanes|=c,gs|=c}l=l.next}while(l!==null&&l!==o);u===null?s=r:u.next=a,qr(r,e.memoizedState)||(Yn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,$t.lanes|=o,gs|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dm(t){var e=Ar(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);qr(o,e.memoizedState)||(Yn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function kC(){}function IC(t,e){var n=$t,r=Ar(),i=e(),o=!qr(r.memoizedState,i);if(o&&(r.memoizedState=i,Yn=!0),r=r.queue,C1(FC.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||hn!==null&&hn.memoizedState.tag&1){if(n.flags|=2048,Bl(9,DC.bind(null,n,r,i,e),void 0,null),pn===null)throw Error(oe(349));(ps&30)!==0||NC(n,e,i)}return i}function NC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$t.updateQueue,e===null?(e={lastEffect:null,stores:null},$t.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function DC(t,e,n,r){e.value=n,e.getSnapshot=r,UC(e)&&zC(t)}function FC(t,e,n){return n(function(){UC(e)&&zC(t)})}function UC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qr(t,n)}catch{return!0}}function zC(t){var e=zi(t,1);e!==null&&Yr(e,t,1,-1)}function eS(t){var e=ui();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zl,lastRenderedState:t},e.queue=t,t=t.dispatch=d4.bind(null,$t,t),[e.memoizedState,t]}function Bl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$t.updateQueue,e===null?(e={lastEffect:null,stores:null},$t.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function BC(){return Ar().memoizedState}function Xf(t,e,n,r){var i=ui();$t.flags|=t,i.memoizedState=Bl(1|e,n,void 0,r===void 0?null:r)}function $p(t,e,n,r){var i=Ar();r=r===void 0?null:r;var o=void 0;if(an!==null){var s=an.memoizedState;if(o=s.destroy,r!==null&&T1(r,s.deps)){i.memoizedState=Bl(e,n,o,r);return}}$t.flags|=t,i.memoizedState=Bl(1|e,n,o,r)}function tS(t,e){return Xf(8390656,8,t,e)}function C1(t,e){return $p(2048,8,t,e)}function VC(t,e){return $p(4,2,t,e)}function $C(t,e){return $p(4,4,t,e)}function jC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function GC(t,e,n){return n=n!=null?n.concat([t]):null,$p(4,4,jC.bind(null,e,t),n)}function R1(){}function WC(t,e){var n=Ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&T1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function HC(t,e){var n=Ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&T1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function YC(t,e,n){return(ps&21)===0?(t.baseState&&(t.baseState=!1,Yn=!0),t.memoizedState=n):(qr(n,e)||(n=ZA(),$t.lanes|=n,gs|=n,t.baseState=!0),e)}function f4(t,e){var n=yt;yt=n!==0&&4>n?n:4,t(!0);var r=Im.transition;Im.transition={};try{t(!1),e()}finally{yt=n,Im.transition=r}}function XC(){return Ar().memoizedState}function h4(t,e,n){var r=Po(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qC(t))ZC(e,n);else if(n=PC(t,e,n,r),n!==null){var i=Fn();Yr(n,t,r,i),KC(n,e,r)}}function d4(t,e,n){var r=Po(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qC(t))ZC(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,qr(a,s)){var u=e.interleaved;u===null?(i.next=i,b1(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=PC(t,e,i,r),n!==null&&(i=Fn(),Yr(n,t,r,i),KC(n,e,r))}}function qC(t){var e=t.alternate;return t===$t||e!==null&&e===$t}function ZC(t,e){hl=gd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function KC(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,s1(t,n)}}var md={readContext:Pr,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},p4={readContext:Pr,useCallback:function(t,e){return ui().memoizedState=[t,e===void 0?null:e],t},useContext:Pr,useEffect:tS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xf(4194308,4,jC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xf(4,2,t,e)},useMemo:function(t,e){var n=ui();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ui();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=h4.bind(null,$t,t),[r.memoizedState,t]},useRef:function(t){var e=ui();return t={current:t},e.memoizedState=t},useState:eS,useDebugValue:R1,useDeferredValue:function(t){return ui().memoizedState=t},useTransition:function(){var t=eS(!1),e=t[0];return t=f4.bind(null,t[1]),ui().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$t,i=ui();if(Nt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),pn===null)throw Error(oe(349));(ps&30)!==0||NC(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,tS(FC.bind(null,r,o,t),[t]),r.flags|=2048,Bl(9,DC.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=ui(),e=pn.identifierPrefix;if(Nt){var n=ki,r=Oi;n=(r&~(1<<32-Hr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ul++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=c4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},g4={readContext:Pr,useCallback:WC,useContext:Pr,useEffect:C1,useImperativeHandle:GC,useInsertionEffect:VC,useLayoutEffect:$C,useMemo:HC,useReducer:Nm,useRef:BC,useState:function(){return Nm(zl)},useDebugValue:R1,useDeferredValue:function(t){var e=Ar();return YC(e,an.memoizedState,t)},useTransition:function(){var t=Nm(zl)[0],e=Ar().memoizedState;return[t,e]},useMutableSource:kC,useSyncExternalStore:IC,useId:XC,unstable_isNewReconciler:!1},m4={readContext:Pr,useCallback:WC,useContext:Pr,useEffect:C1,useImperativeHandle:GC,useInsertionEffect:VC,useLayoutEffect:$C,useMemo:HC,useReducer:Dm,useRef:BC,useState:function(){return Dm(zl)},useDebugValue:R1,useDeferredValue:function(t){var e=Ar();return an===null?e.memoizedState=t:YC(e,an.memoizedState,t)},useTransition:function(){var t=Dm(zl)[0],e=Ar().memoizedState;return[t,e]},useMutableSource:kC,useSyncExternalStore:IC,useId:XC,unstable_isNewReconciler:!1};function Va(t,e){try{var n="",r=e;do n+=GD(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Fm(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function Sv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var v4=typeof WeakMap=="function"?WeakMap:Map;function QC(t,e,n){n=Ii(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yd||(yd=!0,kv=r),Sv(t,e)},n}function JC(t,e,n){n=Ii(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Sv(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Sv(t,e),typeof r!="function"&&(To===null?To=new Set([this]):To.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function nS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new v4;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=M4.bind(null,t,e,n),e.then(t,t))}function rS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function iS(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ii(-1,1),e.tag=2,xo(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var y4=Wi.ReactCurrentOwner,Yn=!1;function Nn(t,e,n,r){e.child=t===null?MC(e,null,n,r):za(e,t.child,n,r)}function oS(t,e,n,r,i){n=n.render;var o=e.ref;return Ca(e,i),r=P1(t,e,n,r,o,i),n=A1(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bi(t,e,i)):(Nt&&n&&p1(e),e.flags|=1,Nn(t,e,r,i),e.child)}function sS(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!F1(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,eR(t,e,o,r,i)):(t=Qf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,(t.lanes&i)===0){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ol,n(s,r)&&t.ref===e.ref)return Bi(t,e,i)}return e.flags|=1,t=Ao(o,r),t.ref=e.ref,t.return=e,e.child=t}function eR(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ol(o,r)&&t.ref===e.ref)if(Yn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)(t.flags&131072)!==0&&(Yn=!0);else return e.lanes=t.lanes,Bi(t,e,i)}return xv(t,e,n,r,i)}function tR(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(va,ar),ar|=n;else{if((n&1073741824)===0)return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ct(va,ar),ar|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ct(va,ar),ar|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ct(va,ar),ar|=r;return Nn(t,e,i,n),e.child}function nR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xv(t,e,n,r,i){var o=Kn(n)?hs:On.current;return o=Fa(e,o),Ca(e,i),n=P1(t,e,n,r,o,i),r=A1(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bi(t,e,i)):(Nt&&r&&p1(e),e.flags|=1,Nn(t,e,n,i),e.child)}function aS(t,e,n,r,i){if(Kn(n)){var o=!0;ud(e)}else o=!1;if(Ca(e,i),e.stateNode===null)qf(t,e),RC(e,n,r),Ev(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,l=n.contextType;typeof l=="object"&&l!==null?l=Pr(l):(l=Kn(n)?hs:On.current,l=Fa(e,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||u!==l)&&QE(e,s,r,l),co=!1;var h=e.memoizedState;s.state=h,dd(e,r,s,i),u=e.memoizedState,a!==r||h!==u||Zn.current||co?(typeof c=="function"&&(wv(e,n,c,r),u=e.memoizedState),(a=co||KE(e,n,a,r,h,u,l))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=l,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,AC(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:zr(e.type,a),s.props=l,f=e.pendingProps,h=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Pr(u):(u=Kn(n)?hs:On.current,u=Fa(e,u));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||h!==u)&&QE(e,s,r,u),co=!1,h=e.memoizedState,s.state=h,dd(e,r,s,i);var g=e.memoizedState;a!==f||h!==g||Zn.current||co?(typeof d=="function"&&(wv(e,n,d,r),g=e.memoizedState),(l=co||KE(e,n,l,r,h,g,u)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,g,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,g,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),s.props=r,s.state=g,s.context=u,r=l):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Tv(t,e,n,r,o,i)}function Tv(t,e,n,r,i,o){nR(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&HE(e,n,!1),Bi(t,e,o);r=e.stateNode,y4.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=za(e,t.child,null,o),e.child=za(e,null,a,o)):Nn(t,e,a,o),e.memoizedState=r.state,i&&HE(e,n,!0),e.child}function rR(t){var e=t.stateNode;e.pendingContext?WE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&WE(t,e.context,!1),E1(t,e.containerInfo)}function uS(t,e,n,r,i){return Ua(),m1(i),e.flags|=256,Nn(t,e,n,r),e.child}var Pv={dehydrated:null,treeContext:null,retryLane:0};function Av(t){return{baseLanes:t,cachePool:null,transitions:null}}function iR(t,e,n){var r=e.pendingProps,i=zt.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ct(zt,i&1),t===null)return _v(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},(r&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Wp(s,r,0,null),t=as(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Av(n),e.memoizedState=Pv,t):L1(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return _4(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return(s&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ao(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Ao(a,o):(o=as(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Av(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Pv,r}return o=t.child,t=o.sibling,r=Ao(o,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function L1(t,e){return e=Wp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function af(t,e,n,r){return r!==null&&m1(r),za(e,t.child,null,n),t=L1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _4(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Fm(Error(oe(422))),af(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Wp({mode:"visible",children:r.children},i,0,null),o=as(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,(e.mode&1)!==0&&za(e,t.child,null,s),e.child.memoizedState=Av(s),e.memoizedState=Pv,o);if((e.mode&1)===0)return af(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(oe(419)),r=Fm(o,r,void 0),af(t,e,s,r)}if(a=(s&t.childLanes)!==0,Yn||a){if(r=pn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|s))!==0?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,zi(t,i),Yr(r,t,i,-1))}return D1(),r=Fm(Error(oe(421))),af(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=O4.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,fr=So(i.nextSibling),hr=e,Nt=!0,Vr=null,t!==null&&(br[wr++]=Oi,br[wr++]=ki,br[wr++]=ds,Oi=t.id,ki=t.overflow,ds=e),e=L1(e,r.children),e.flags|=4096,e)}function lS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bv(t.return,e,n)}function Um(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function oR(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Nn(t,e,r.children,n),r=zt.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lS(t,n,e);else if(t.tag===19)lS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ct(zt,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&pd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Um(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&pd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Um(e,!0,n,null,o);break;case"together":Um(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qf(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gs|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=Ao(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ao(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function b4(t,e,n){switch(e.tag){case 3:rR(e),Ua();break;case 5:OC(e);break;case 1:Kn(e.type)&&ud(e);break;case 4:E1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ct(fd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ct(zt,zt.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?iR(t,e,n):(Ct(zt,zt.current&1),t=Bi(t,e,n),t!==null?t.sibling:null);Ct(zt,zt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return oR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ct(zt,zt.current),r)break;return null;case 22:case 23:return e.lanes=0,tR(t,e,n)}return Bi(t,e,n)}var sR,Cv,aR,uR;sR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cv=function(){};aR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ns(gi.current);var o=null;switch(n){case"input":i=Z0(t,i),r=Z0(t,r),o=[];break;case"select":i=jt({},i,{value:void 0}),r=jt({},r,{value:void 0}),o=[];break;case"textarea":i=J0(t,i),r=J0(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sd)}tv(n,r);var s;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Tl.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(s in a)!a.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&a[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Tl.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Ot("scroll",t),o||a===u||(o=[])):(o=o||[]).push(l,u))}n&&(o=o||[]).push("style",n);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};uR=function(t,e,n,r){n!==r&&(e.flags|=4)};function ku(t,e){if(!Nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function An(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function w4(t,e,n){var r=e.pendingProps;switch(g1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(e),null;case 1:return Kn(e.type)&&ad(),An(e),null;case 3:return r=e.stateNode,Ba(),kt(Zn),kt(On),x1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(of(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Vr!==null&&(Dv(Vr),Vr=null))),Cv(t,e),An(e),null;case 5:S1(e);var i=ns(Fl.current);if(n=e.type,t!==null&&e.stateNode!=null)aR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return An(e),null}if(t=ns(gi.current),of(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[li]=e,r[Nl]=o,t=(e.mode&1)!==0,n){case"dialog":Ot("cancel",r),Ot("close",r);break;case"iframe":case"object":case"embed":Ot("load",r);break;case"video":case"audio":for(i=0;i<tl.length;i++)Ot(tl[i],r);break;case"source":Ot("error",r);break;case"img":case"image":case"link":Ot("error",r),Ot("load",r);break;case"details":Ot("toggle",r);break;case"input":yE(r,o),Ot("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ot("invalid",r);break;case"textarea":bE(r,o),Ot("invalid",r)}tv(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&rf(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&rf(r.textContent,a,t),i=["children",""+a]):Tl.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ot("scroll",r)}switch(n){case"input":qc(r),_E(r,o,!0);break;case"textarea":qc(r),wE(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=sd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=NA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[li]=e,t[Nl]=r,sR(t,e,!1,!1),e.stateNode=t;e:{switch(s=nv(n,r),n){case"dialog":Ot("cancel",t),Ot("close",t),i=r;break;case"iframe":case"object":case"embed":Ot("load",t),i=r;break;case"video":case"audio":for(i=0;i<tl.length;i++)Ot(tl[i],t);i=r;break;case"source":Ot("error",t),i=r;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),i=r;break;case"details":Ot("toggle",t),i=r;break;case"input":yE(t,r),i=Z0(t,r),Ot("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=jt({},r,{value:void 0}),Ot("invalid",t);break;case"textarea":bE(t,r),i=J0(t,r),Ot("invalid",t);break;default:i=r}tv(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?UA(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&DA(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Pl(t,u):typeof u=="number"&&Pl(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Tl.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Ot("scroll",t):u!=null&&e1(t,o,u,s))}switch(n){case"input":qc(t),_E(t,r,!1);break;case"textarea":qc(t),wE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Lo(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?xa(t,!!r.multiple,o,!1):r.defaultValue!=null&&xa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=sd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return An(e),null;case 6:if(t&&e.stateNode!=null)uR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=ns(Fl.current),ns(gi.current),of(e)){if(r=e.stateNode,n=e.memoizedProps,r[li]=e,(o=r.nodeValue!==n)&&(t=hr,t!==null))switch(t.tag){case 3:rf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rf(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[li]=e,e.stateNode=r}return An(e),null;case 13:if(kt(zt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Nt&&fr!==null&&(e.mode&1)!==0&&(e.flags&128)===0)TC(),Ua(),e.flags|=98560,o=!1;else if(o=of(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(oe(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(oe(317));o[li]=e}else Ua(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;An(e),o=!1}else Vr!==null&&(Dv(Vr),Vr=null),o=!0;if(!o)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(zt.current&1)!==0?un===0&&(un=3):D1())),e.updateQueue!==null&&(e.flags|=4),An(e),null);case 4:return Ba(),Cv(t,e),t===null&&kl(e.stateNode.containerInfo),An(e),null;case 10:return _1(e.type._context),An(e),null;case 17:return Kn(e.type)&&ad(),An(e),null;case 19:if(kt(zt),o=e.memoizedState,o===null)return An(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)ku(o,!1);else{if(un!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(s=pd(t),s!==null){for(e.flags|=128,ku(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ct(zt,zt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Xt()>$a&&(e.flags|=128,r=!0,ku(o,!1),e.lanes=4194304)}else{if(!r)if(t=pd(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ku(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Nt)return An(e),null}else 2*Xt()-o.renderingStartTime>$a&&n!==1073741824&&(e.flags|=128,r=!0,ku(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Xt(),e.sibling=null,n=zt.current,Ct(zt,r?n&1|2:n&1),e):(An(e),null);case 22:case 23:return N1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(ar&1073741824)!==0&&(An(e),e.subtreeFlags&6&&(e.flags|=8192)):An(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function E4(t,e){switch(g1(e),e.tag){case 1:return Kn(e.type)&&ad(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ba(),kt(Zn),kt(On),x1(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return S1(e),null;case 13:if(kt(zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));Ua()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return kt(zt),null;case 4:return Ba(),null;case 10:return _1(e.type._context),null;case 22:case 23:return N1(),null;case 24:return null;default:return null}}var uf=!1,Ln=!1,S4=typeof WeakSet=="function"?WeakSet:Set,Se=null;function ma(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Wt(t,e,r)}else n.current=null}function Rv(t,e,n){try{n()}catch(r){Wt(t,e,r)}}var cS=!1;function x4(t,e){if(hv=rd,t=hC(),d1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,u=-1,l=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(u=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++l===i&&(a=s),h===o&&++c===r&&(u=s),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(dv={focusedElem:t,selectionRange:n},rd=!1,Se=e;Se!==null;)if(e=Se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Se=t;else for(;Se!==null;){e=Se;try{var g=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,S=g.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?m:zr(e.type,m),S);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(T){Wt(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Se=t;break}Se=e.return}return g=cS,cS=!1,g}function dl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Rv(e,n,o)}i=i.next}while(i!==r)}}function jp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Lv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lR(t){var e=t.alternate;e!==null&&(t.alternate=null,lR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[li],delete e[Nl],delete e[mv],delete e[s4],delete e[a4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cR(t){return t.tag===5||t.tag===3||t.tag===4}function fS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sd));else if(r!==4&&(t=t.child,t!==null))for(Mv(t,e,n),t=t.sibling;t!==null;)Mv(t,e,n),t=t.sibling}function Ov(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ov(t,e,n),t=t.sibling;t!==null;)Ov(t,e,n),t=t.sibling}var _n=null,Br=!1;function no(t,e,n){for(n=n.child;n!==null;)fR(t,e,n),n=n.sibling}function fR(t,e,n){if(pi&&typeof pi.onCommitFiberUnmount=="function")try{pi.onCommitFiberUnmount(Np,n)}catch{}switch(n.tag){case 5:Ln||ma(n,e);case 6:var r=_n,i=Br;_n=null,no(t,e,n),_n=r,Br=i,_n!==null&&(Br?(t=_n,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_n.removeChild(n.stateNode));break;case 18:_n!==null&&(Br?(t=_n,n=n.stateNode,t.nodeType===8?Mm(t.parentNode,n):t.nodeType===1&&Mm(t,n),Ll(t)):Mm(_n,n.stateNode));break;case 4:r=_n,i=Br,_n=n.stateNode.containerInfo,Br=!0,no(t,e,n),_n=r,Br=i;break;case 0:case 11:case 14:case 15:if(!Ln&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&((o&2)!==0||(o&4)!==0)&&Rv(n,e,s),i=i.next}while(i!==r)}no(t,e,n);break;case 1:if(!Ln&&(ma(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Wt(n,e,a)}no(t,e,n);break;case 21:no(t,e,n);break;case 22:n.mode&1?(Ln=(r=Ln)||n.memoizedState!==null,no(t,e,n),Ln=r):no(t,e,n);break;default:no(t,e,n)}}function hS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new S4),e.forEach(function(r){var i=k4.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Fr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:_n=a.stateNode,Br=!1;break e;case 3:_n=a.stateNode.containerInfo,Br=!0;break e;case 4:_n=a.stateNode.containerInfo,Br=!0;break e}a=a.return}if(_n===null)throw Error(oe(160));fR(o,s,i),_n=null,Br=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Wt(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hR(e,t),e=e.sibling}function hR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fr(e,t),ii(t),r&4){try{dl(3,t,t.return),jp(3,t)}catch(m){Wt(t,t.return,m)}try{dl(5,t,t.return)}catch(m){Wt(t,t.return,m)}}break;case 1:Fr(e,t),ii(t),r&512&&n!==null&&ma(n,n.return);break;case 5:if(Fr(e,t),ii(t),r&512&&n!==null&&ma(n,n.return),t.flags&32){var i=t.stateNode;try{Pl(i,"")}catch(m){Wt(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&kA(i,o),nv(a,s);var l=nv(a,o);for(s=0;s<u.length;s+=2){var c=u[s],f=u[s+1];c==="style"?UA(i,f):c==="dangerouslySetInnerHTML"?DA(i,f):c==="children"?Pl(i,f):e1(i,c,f,l)}switch(a){case"input":K0(i,o);break;case"textarea":IA(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?xa(i,!!o.multiple,d,!1):h!==!!o.multiple&&(o.defaultValue!=null?xa(i,!!o.multiple,o.defaultValue,!0):xa(i,!!o.multiple,o.multiple?[]:"",!1))}i[Nl]=o}catch(m){Wt(t,t.return,m)}}break;case 6:if(Fr(e,t),ii(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(m){Wt(t,t.return,m)}}break;case 3:if(Fr(e,t),ii(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ll(e.containerInfo)}catch(m){Wt(t,t.return,m)}break;case 4:Fr(e,t),ii(t);break;case 13:Fr(e,t),ii(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(k1=Xt())),r&4&&hS(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ln=(l=Ln)||c,Fr(e,t),Ln=l):Fr(e,t),ii(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&(t.mode&1)!==0)for(Se=t,c=t.child;c!==null;){for(f=Se=c;Se!==null;){switch(h=Se,d=h.child,h.tag){case 0:case 11:case 14:case 15:dl(4,h,h.return);break;case 1:ma(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Wt(r,n,m)}}break;case 5:ma(h,h.return);break;case 22:if(h.memoizedState!==null){pS(f);continue}}d!==null?(d.return=h,Se=d):pS(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,u=f.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=FA("display",s))}catch(m){Wt(t,t.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Wt(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Fr(e,t),ii(t),r&4&&hS(t);break;case 21:break;default:Fr(e,t),ii(t)}}function ii(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cR(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pl(i,""),r.flags&=-33);var o=fS(t);Ov(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=fS(t);Mv(t,a,s);break;default:throw Error(oe(161))}}catch(u){Wt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function T4(t,e,n){Se=t,dR(t)}function dR(t,e,n){for(var r=(t.mode&1)!==0;Se!==null;){var i=Se,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||uf;if(!s){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Ln;a=uf;var l=Ln;if(uf=s,(Ln=u)&&!l)for(Se=i;Se!==null;)s=Se,u=s.child,s.tag===22&&s.memoizedState!==null?gS(i):u!==null?(u.return=s,Se=u):gS(i);for(;o!==null;)Se=o,dR(o),o=o.sibling;Se=i,uf=a,Ln=l}dS(t)}else(i.subtreeFlags&8772)!==0&&o!==null?(o.return=i,Se=o):dS(t)}}function dS(t){for(;Se!==null;){var e=Se;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Ln||jp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ln)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:zr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&ZE(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ZE(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Ll(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}Ln||e.flags&512&&Lv(e)}catch(h){Wt(e,e.return,h)}}if(e===t){Se=null;break}if(n=e.sibling,n!==null){n.return=e.return,Se=n;break}Se=e.return}}function pS(t){for(;Se!==null;){var e=Se;if(e===t){Se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Se=n;break}Se=e.return}}function gS(t){for(;Se!==null;){var e=Se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{jp(4,e)}catch(u){Wt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Wt(e,i,u)}}var o=e.return;try{Lv(e)}catch(u){Wt(e,o,u)}break;case 5:var s=e.return;try{Lv(e)}catch(u){Wt(e,s,u)}}}catch(u){Wt(e,e.return,u)}if(e===t){Se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Se=a;break}Se=e.return}}var P4=Math.ceil,vd=Wi.ReactCurrentDispatcher,M1=Wi.ReactCurrentOwner,xr=Wi.ReactCurrentBatchConfig,lt=0,pn=null,tn=null,wn=0,ar=0,va=ko(0),un=0,Vl=null,gs=0,Gp=0,O1=0,pl=null,Hn=null,k1=0,$a=1/0,Ri=null,yd=!1,kv=null,To=null,lf=!1,vo=null,_d=0,gl=0,Iv=null,Zf=-1,Kf=0;function Fn(){return(lt&6)!==0?Xt():Zf!==-1?Zf:Zf=Xt()}function Po(t){return(t.mode&1)===0?1:(lt&2)!==0&&wn!==0?wn&-wn:l4.transition!==null?(Kf===0&&(Kf=ZA()),Kf):(t=yt,t!==0||(t=window.event,t=t===void 0?16:rC(t.type)),t)}function Yr(t,e,n,r){if(50<gl)throw gl=0,Iv=null,Error(oe(185));oc(t,n,r),((lt&2)===0||t!==pn)&&(t===pn&&((lt&2)===0&&(Gp|=n),un===4&&po(t,wn)),Qn(t,r),n===1&&lt===0&&(e.mode&1)===0&&($a=Xt()+500,Bp&&Io()))}function Qn(t,e){var n=t.callbackNode;lF(t,e);var r=nd(t,t===pn?wn:0);if(r===0)n!==null&&xE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xE(n),e===1)t.tag===0?u4(mS.bind(null,t)):EC(mS.bind(null,t)),i4(function(){(lt&6)===0&&Io()}),n=null;else{switch(KA(r)){case 1:n=o1;break;case 4:n=XA;break;case 16:n=td;break;case 536870912:n=qA;break;default:n=td}n=wR(n,pR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pR(t,e){if(Zf=-1,Kf=0,(lt&6)!==0)throw Error(oe(327));var n=t.callbackNode;if(Ra()&&t.callbackNode!==n)return null;var r=nd(t,t===pn?wn:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=bd(t,r);else{e=r;var i=lt;lt|=2;var o=mR();(pn!==t||wn!==e)&&(Ri=null,$a=Xt()+500,ss(t,e));do try{R4();break}catch(a){gR(t,a)}while(1);y1(),vd.current=o,lt=i,tn!==null?e=0:(pn=null,wn=0,e=un)}if(e!==0){if(e===2&&(i=av(t),i!==0&&(r=i,e=Nv(t,i))),e===1)throw n=Vl,ss(t,0),po(t,r),Qn(t,Xt()),n;if(e===6)po(t,r);else{if(i=t.current.alternate,(r&30)===0&&!A4(i)&&(e=bd(t,r),e===2&&(o=av(t),o!==0&&(r=o,e=Nv(t,o))),e===1))throw n=Vl,ss(t,0),po(t,r),Qn(t,Xt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:qo(t,Hn,Ri);break;case 3:if(po(t,r),(r&130023424)===r&&(e=k1+500-Xt(),10<e)){if(nd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Fn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=gv(qo.bind(null,t,Hn,Ri),e);break}qo(t,Hn,Ri);break;case 4:if(po(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Hr(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Xt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*P4(r/1960))-r,10<r){t.timeoutHandle=gv(qo.bind(null,t,Hn,Ri),r);break}qo(t,Hn,Ri);break;case 5:qo(t,Hn,Ri);break;default:throw Error(oe(329))}}}return Qn(t,Xt()),t.callbackNode===n?pR.bind(null,t):null}function Nv(t,e){var n=pl;return t.current.memoizedState.isDehydrated&&(ss(t,e).flags|=256),t=bd(t,e),t!==2&&(e=Hn,Hn=n,e!==null&&Dv(e)),t}function Dv(t){Hn===null?Hn=t:Hn.push.apply(Hn,t)}function A4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!qr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function po(t,e){for(e&=~O1,e&=~Gp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Hr(e),r=1<<n;t[n]=-1,e&=~r}}function mS(t){if((lt&6)!==0)throw Error(oe(327));Ra();var e=nd(t,0);if((e&1)===0)return Qn(t,Xt()),null;var n=bd(t,e);if(t.tag!==0&&n===2){var r=av(t);r!==0&&(e=r,n=Nv(t,r))}if(n===1)throw n=Vl,ss(t,0),po(t,e),Qn(t,Xt()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,qo(t,Hn,Ri),Qn(t,Xt()),null}function I1(t,e){var n=lt;lt|=1;try{return t(e)}finally{lt=n,lt===0&&($a=Xt()+500,Bp&&Io())}}function ms(t){vo!==null&&vo.tag===0&&(lt&6)===0&&Ra();var e=lt;lt|=1;var n=xr.transition,r=yt;try{if(xr.transition=null,yt=1,t)return t()}finally{yt=r,xr.transition=n,lt=e,(lt&6)===0&&Io()}}function N1(){ar=va.current,kt(va)}function ss(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,r4(n)),tn!==null)for(n=tn.return;n!==null;){var r=n;switch(g1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ad();break;case 3:Ba(),kt(Zn),kt(On),x1();break;case 5:S1(r);break;case 4:Ba();break;case 13:kt(zt);break;case 19:kt(zt);break;case 10:_1(r.type._context);break;case 22:case 23:N1()}n=n.return}if(pn=t,tn=t=Ao(t.current,null),wn=ar=e,un=0,Vl=null,O1=Gp=gs=0,Hn=pl=null,ts!==null){for(e=0;e<ts.length;e++)if(n=ts[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}ts=null}return t}function gR(t,e){do{var n=tn;try{if(y1(),Yf.current=md,gd){for(var r=$t.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gd=!1}if(ps=0,hn=an=$t=null,hl=!1,Ul=0,M1.current=null,n===null||n.return===null){un=1,Vl=e,tn=null;break}e:{var o=t,s=n.return,a=n,u=e;if(e=wn,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if((c.mode&1)===0&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=rS(s);if(d!==null){d.flags&=-257,iS(d,s,a,o,e),d.mode&1&&nS(o,l,e),e=d,u=l;var g=e.updateQueue;if(g===null){var m=new Set;m.add(u),e.updateQueue=m}else g.add(u);break e}else{if((e&1)===0){nS(o,l,e),D1();break e}u=Error(oe(426))}}else if(Nt&&a.mode&1){var S=rS(s);if(S!==null){(S.flags&65536)===0&&(S.flags|=256),iS(S,s,a,o,e),m1(Va(u,a));break e}}o=u=Va(u,a),un!==4&&(un=2),pl===null?pl=[o]:pl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=QC(o,u,e);qE(o,_);break e;case 1:a=u;var y=o.type,w=o.stateNode;if((o.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(To===null||!To.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var T=JC(o,a,e);qE(o,T);break e}}o=o.return}while(o!==null)}yR(n)}catch(R){e=R,tn===n&&n!==null&&(tn=n=n.return);continue}break}while(1)}function mR(){var t=vd.current;return vd.current=md,t===null?md:t}function D1(){(un===0||un===3||un===2)&&(un=4),pn===null||(gs&268435455)===0&&(Gp&268435455)===0||po(pn,wn)}function bd(t,e){var n=lt;lt|=2;var r=mR();(pn!==t||wn!==e)&&(Ri=null,ss(t,e));do try{C4();break}catch(i){gR(t,i)}while(1);if(y1(),lt=n,vd.current=r,tn!==null)throw Error(oe(261));return pn=null,wn=0,un}function C4(){for(;tn!==null;)vR(tn)}function R4(){for(;tn!==null&&!eF();)vR(tn)}function vR(t){var e=bR(t.alternate,t,ar);t.memoizedProps=t.pendingProps,e===null?yR(t):tn=e,M1.current=null}function yR(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=w4(n,e,ar),n!==null){tn=n;return}}else{if(n=E4(n,e),n!==null){n.flags&=32767,tn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{un=6,tn=null;return}}if(e=e.sibling,e!==null){tn=e;return}tn=e=t}while(e!==null);un===0&&(un=5)}function qo(t,e,n){var r=yt,i=xr.transition;try{xr.transition=null,yt=1,L4(t,e,n,r)}finally{xr.transition=i,yt=r}return null}function L4(t,e,n,r){do Ra();while(vo!==null);if((lt&6)!==0)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(cF(t,o),t===pn&&(tn=pn=null,wn=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||lf||(lf=!0,wR(td,function(){return Ra(),null})),o=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||o){o=xr.transition,xr.transition=null;var s=yt;yt=1;var a=lt;lt|=4,M1.current=null,x4(t,n),hR(n,t),ZF(dv),rd=!!hv,dv=hv=null,t.current=n,T4(n),tF(),lt=a,yt=s,xr.transition=o}else t.current=n;if(lf&&(lf=!1,vo=t,_d=i),o=t.pendingLanes,o===0&&(To=null),iF(n.stateNode),Qn(t,Xt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(yd)throw yd=!1,t=kv,kv=null,t;return(_d&1)!==0&&t.tag!==0&&Ra(),o=t.pendingLanes,(o&1)!==0?t===Iv?gl++:(gl=0,Iv=t):gl=0,Io(),null}function Ra(){if(vo!==null){var t=KA(_d),e=xr.transition,n=yt;try{if(xr.transition=null,yt=16>t?16:t,vo===null)var r=!1;else{if(t=vo,vo=null,_d=0,(lt&6)!==0)throw Error(oe(331));var i=lt;for(lt|=4,Se=t.current;Se!==null;){var o=Se,s=o.child;if((Se.flags&16)!==0){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Se=l;Se!==null;){var c=Se;switch(c.tag){case 0:case 11:case 15:dl(8,c,o)}var f=c.child;if(f!==null)f.return=c,Se=f;else for(;Se!==null;){c=Se;var h=c.sibling,d=c.return;if(lR(c),c===l){Se=null;break}if(h!==null){h.return=d,Se=h;break}Se=d}}}var g=o.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var S=m.sibling;m.sibling=null,m=S}while(m!==null)}}Se=o}}if((o.subtreeFlags&2064)!==0&&s!==null)s.return=o,Se=s;else e:for(;Se!==null;){if(o=Se,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:dl(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,Se=_;break e}Se=o.return}}var y=t.current;for(Se=y;Se!==null;){s=Se;var w=s.child;if((s.subtreeFlags&2064)!==0&&w!==null)w.return=s,Se=w;else e:for(s=y;Se!==null;){if(a=Se,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:jp(9,a)}}catch(R){Wt(a,a.return,R)}if(a===s){Se=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Se=T;break e}Se=a.return}}if(lt=i,Io(),pi&&typeof pi.onPostCommitFiberRoot=="function")try{pi.onPostCommitFiberRoot(Np,t)}catch{}r=!0}return r}finally{yt=n,xr.transition=e}}return!1}function vS(t,e,n){e=Va(n,e),e=QC(t,e,1),t=xo(t,e,1),e=Fn(),t!==null&&(oc(t,1,e),Qn(t,e))}function Wt(t,e,n){if(t.tag===3)vS(t,t,n);else for(;e!==null;){if(e.tag===3){vS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(To===null||!To.has(r))){t=Va(n,t),t=JC(e,t,1),e=xo(e,t,1),t=Fn(),e!==null&&(oc(e,1,t),Qn(e,t));break}}e=e.return}}function M4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Fn(),t.pingedLanes|=t.suspendedLanes&n,pn===t&&(wn&n)===n&&(un===4||un===3&&(wn&130023424)===wn&&500>Xt()-k1?ss(t,0):O1|=n),Qn(t,e)}function _R(t,e){e===0&&((t.mode&1)===0?e=1:(e=Qc,Qc<<=1,(Qc&130023424)===0&&(Qc=4194304)));var n=Fn();t=zi(t,e),t!==null&&(oc(t,e,n),Qn(t,n))}function O4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_R(t,n)}function k4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),_R(t,n)}var bR;bR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zn.current)Yn=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return Yn=!1,b4(t,e,n);Yn=(t.flags&131072)!==0}else Yn=!1,Nt&&(e.flags&1048576)!==0&&SC(e,cd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qf(t,e),t=e.pendingProps;var i=Fa(e,On.current);Ca(e,n),i=P1(null,e,r,t,i,n);var o=A1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kn(r)?(o=!0,ud(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,w1(e),i.updater=Vp,e.stateNode=i,i._reactInternals=e,Ev(e,r,t,n),e=Tv(null,e,r,!0,o,n)):(e.tag=0,Nt&&o&&p1(e),Nn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(qf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=N4(r),t=zr(r,t),i){case 0:e=xv(null,e,r,t,n);break e;case 1:e=aS(null,e,r,t,n);break e;case 11:e=oS(null,e,r,t,n);break e;case 14:e=sS(null,e,r,zr(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zr(r,i),xv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zr(r,i),aS(t,e,r,i,n);case 3:e:{if(rR(e),t===null)throw Error(oe(387));r=e.pendingProps,o=e.memoizedState,i=o.element,AC(t,e),dd(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Va(Error(oe(423)),e),e=uS(t,e,r,n,i);break e}else if(r!==i){i=Va(Error(oe(424)),e),e=uS(t,e,r,n,i);break e}else for(fr=So(e.stateNode.containerInfo.firstChild),hr=e,Nt=!0,Vr=null,n=MC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ua(),r===i){e=Bi(t,e,n);break e}Nn(t,e,r,n)}e=e.child}return e;case 5:return OC(e),t===null&&_v(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,pv(r,i)?s=null:o!==null&&pv(r,o)&&(e.flags|=32),nR(t,e),Nn(t,e,s,n),e.child;case 6:return t===null&&_v(e),null;case 13:return iR(t,e,n);case 4:return E1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=za(e,null,r,n):Nn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zr(r,i),oS(t,e,r,i,n);case 7:return Nn(t,e,e.pendingProps,n),e.child;case 8:return Nn(t,e,e.pendingProps.children,n),e.child;case 12:return Nn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Ct(fd,r._currentValue),r._currentValue=s,o!==null)if(qr(o.value,s)){if(o.children===i.children&&!Zn.current){e=Bi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Ii(-1,n&-n),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),bv(o.return,n,e),a.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(oe(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),bv(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Nn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ca(e,n),i=Pr(i),r=r(i),e.flags|=1,Nn(t,e,r,n),e.child;case 14:return r=e.type,i=zr(r,e.pendingProps),i=zr(r.type,i),sS(t,e,r,i,n);case 15:return eR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zr(r,i),qf(t,e),e.tag=1,Kn(r)?(t=!0,ud(e)):t=!1,Ca(e,n),RC(e,r,i),Ev(e,r,i,n),Tv(null,e,r,!0,t,n);case 19:return oR(t,e,n);case 22:return tR(t,e,n)}throw Error(oe(156,e.tag))};function wR(t,e){return YA(t,e)}function I4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(t,e,n,r){return new I4(t,e,n,r)}function F1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function N4(t){if(typeof t=="function")return F1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===n1)return 11;if(t===r1)return 14}return 2}function Ao(t,e){var n=t.alternate;return n===null?(n=Sr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qf(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")F1(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case aa:return as(n.children,i,o,e);case t1:s=8,i|=8;break;case H0:return t=Sr(12,n,e,i|2),t.elementType=H0,t.lanes=o,t;case Y0:return t=Sr(13,n,e,i),t.elementType=Y0,t.lanes=o,t;case X0:return t=Sr(19,n,e,i),t.elementType=X0,t.lanes=o,t;case LA:return Wp(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case CA:s=10;break e;case RA:s=9;break e;case n1:s=11;break e;case r1:s=14;break e;case lo:s=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=Sr(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function as(t,e,n,r){return t=Sr(7,t,r,e),t.lanes=n,t}function Wp(t,e,n,r){return t=Sr(22,t,r,e),t.elementType=LA,t.lanes=n,t.stateNode={isHidden:!1},t}function zm(t,e,n){return t=Sr(6,t,null,e),t.lanes=n,t}function Bm(t,e,n){return e=Sr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function D4(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bm(0),this.expirationTimes=bm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function U1(t,e,n,r,i,o,s,a,u){return t=new D4(t,e,n,a,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Sr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},w1(o),t}function F4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ER(t){if(!t)return Mo;t=t._reactInternals;e:{if(Ts(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(Kn(n))return wC(t,n,e)}return e}function SR(t,e,n,r,i,o,s,a,u){return t=U1(n,r,!0,t,i,o,s,a,u),t.context=ER(null),n=t.current,r=Fn(),i=Po(n),o=Ii(r,i),o.callback=e!=null?e:null,xo(n,o,i),t.current.lanes=i,oc(t,i,r),Qn(t,r),t}function Hp(t,e,n,r){var i=e.current,o=Fn(),s=Po(i);return n=ER(n),e.context===null?e.context=n:e.pendingContext=n,e=Ii(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xo(i,e,s),t!==null&&(Yr(t,i,s,o),Hf(t,i,s)),s}function wd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function z1(t,e){yS(t,e),(t=t.alternate)&&yS(t,e)}function U4(){return null}var xR=typeof reportError=="function"?reportError:function(t){console.error(t)};function B1(t){this._internalRoot=t}Yp.prototype.render=B1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));Hp(t,e,null,null)};Yp.prototype.unmount=B1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ms(function(){Hp(null,t,null,null)}),e[Ui]=null}};function Yp(t){this._internalRoot=t}Yp.prototype.unstable_scheduleHydration=function(t){if(t){var e=eC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ho.length&&e!==0&&e<ho[n].priority;n++);ho.splice(n,0,t),n===0&&nC(t)}};function V1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _S(){}function z4(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=wd(s);o.call(l)}}var s=SR(e,r,t,0,null,!1,!1,"",_S);return t._reactRootContainer=s,t[Ui]=s.current,kl(t.nodeType===8?t.parentNode:t),ms(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=wd(u);a.call(l)}}var u=U1(t,0,!1,null,null,!1,!1,"",_S);return t._reactRootContainer=u,t[Ui]=u.current,kl(t.nodeType===8?t.parentNode:t),ms(function(){Hp(e,u,n,r)}),u}function qp(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var u=wd(s);a.call(u)}}Hp(e,s,t,i)}else s=z4(n,e,t,i,r);return wd(s)}QA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=el(e.pendingLanes);n!==0&&(s1(e,n|1),Qn(e,Xt()),(lt&6)===0&&($a=Xt()+500,Io()))}break;case 13:ms(function(){var r=zi(t,1);if(r!==null){var i=Fn();Yr(r,t,1,i)}}),z1(t,1)}};a1=function(t){if(t.tag===13){var e=zi(t,134217728);if(e!==null){var n=Fn();Yr(e,t,134217728,n)}z1(t,134217728)}};JA=function(t){if(t.tag===13){var e=Po(t),n=zi(t,e);if(n!==null){var r=Fn();Yr(n,t,e,r)}z1(t,e)}};eC=function(){return yt};tC=function(t,e){var n=yt;try{return yt=t,e()}finally{yt=n}};iv=function(t,e,n){switch(e){case"input":if(K0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=zp(r);if(!i)throw Error(oe(90));OA(r),K0(r,i)}}}break;case"textarea":IA(t,n);break;case"select":e=n.value,e!=null&&xa(t,!!n.multiple,e,!1)}};VA=I1;$A=ms;var B4={usingClientEntryPoint:!1,Events:[ac,fa,zp,zA,BA,I1]},Iu={findFiberByHostInstance:es,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},V4={bundleType:Iu.bundleType,version:Iu.version,rendererPackageName:Iu.rendererPackageName,rendererConfig:Iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=WA(t),t===null?null:t.stateNode},findFiberByHostInstance:Iu.findFiberByHostInstance||U4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cf.isDisabled&&cf.supportsFiber)try{Np=cf.inject(V4),pi=cf}catch{}}mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B4;mr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!V1(e))throw Error(oe(200));return F4(t,e,null,n)};mr.createRoot=function(t,e){if(!V1(t))throw Error(oe(299));var n=!1,r="",i=xR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=U1(t,1,!1,null,null,n,!1,r,i),t[Ui]=e.current,kl(t.nodeType===8?t.parentNode:t),new B1(e)};mr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=WA(e),t=t===null?null:t.stateNode,t};mr.flushSync=function(t){return ms(t)};mr.hydrate=function(t,e,n){if(!Xp(e))throw Error(oe(200));return qp(null,t,e,!0,n)};mr.hydrateRoot=function(t,e,n){if(!V1(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=xR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=SR(e,null,t,1,n!=null?n:null,i,!1,o,s),t[Ui]=e.current,kl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Yp(e)};mr.render=function(t,e,n){if(!Xp(e))throw Error(oe(200));return qp(null,t,e,!1,n)};mr.unmountComponentAtNode=function(t){if(!Xp(t))throw Error(oe(40));return t._reactRootContainer?(ms(function(){qp(null,null,t,!1,function(){t._reactRootContainer=null,t[Ui]=null})}),!0):!1};mr.unstable_batchedUpdates=I1;mr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xp(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return qp(t,e,n,!1,r)};mr.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=mr})(ic);const $4=mA(ic.exports);var bS=ic.exports;pE.createRoot=bS.createRoot,pE.hydrateRoot=bS.hydrateRoot;/**
 * @remix-run/router v1.0.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ut(){return Ut=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ut.apply(this,arguments)}var sn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(sn||(sn={}));const wS="popstate";function j4(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return us("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Zr(i)}return W4(e,n,null,t)}function G4(){return Math.random().toString(36).substr(2,8)}function ES(t){return{usr:t.state,key:t.key}}function us(t,e,n,r){return n===void 0&&(n=null),Ut({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Hi(e):e,{state:n,key:e&&e.key||r||G4()})}function Zr(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Hi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function $l(t){let e=typeof window<"u"&&typeof window.location<"u"&&window.location.origin!=="null"?window.location.origin:"unknown://unknown",n=typeof t=="string"?t:Zr(t);return new URL(n,e)}function W4(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=sn.Pop,u=null;function l(){a=sn.Pop,u&&u({action:a,location:h.location})}function c(d,g){a=sn.Push;let m=us(h.location,d,g);n&&n(m,d);let S=ES(m),_=h.createHref(m);try{s.pushState(S,"",_)}catch{i.location.assign(_)}o&&u&&u({action:a,location:h.location})}function f(d,g){a=sn.Replace;let m=us(h.location,d,g);n&&n(m,d);let S=ES(m),_=h.createHref(m);s.replaceState(S,"",_),o&&u&&u({action:a,location:h.location})}let h={get action(){return a},get location(){return t(i,s)},listen(d){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(wS,l),u=d,()=>{i.removeEventListener(wS,l),u=null}},createHref(d){return e(i,d)},encodeLocation(d){let g=$l(Zr(d));return Ut({},d,{pathname:g.pathname,search:g.search,hash:g.hash})},push:c,replace:f,go(d){return s.go(d)}};return h}var bn;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(bn||(bn={}));function H4(t){return t.index===!0}function TR(t,e,n){return e===void 0&&(e=[]),n===void 0&&(n=new Set),t.map((r,i)=>{let o=[...e,i],s=typeof r.id=="string"?r.id:o.join("-");return Ve(r.index!==!0||!r.children,"Cannot specify children on an index route"),Ve(!n.has(s),'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),n.add(s),H4(r)?Ut({},r,{id:s}):Ut({},r,{id:s,children:r.children?TR(r.children,o,n):void 0})})}function nl(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Hi(e):e,i=CR(r.pathname||"/",n);if(i==null)return null;let o=PR(t);Y4(o);let s=null;for(let a=0;s==null&&a<o.length;++a)s=n6(o[a],i6(i));return s}function PR(t,e,n,r){return e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r=""),t.forEach((i,o)=>{let s={relativePath:i.path||"",caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};s.relativePath.startsWith("/")&&(Ve(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),s.relativePath=s.relativePath.slice(r.length));let a=Ni([r,s.relativePath]),u=n.concat(s);i.children&&i.children.length>0&&(Ve(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+a+'".')),PR(i.children,e,u,a)),!(i.path==null&&!i.index)&&e.push({path:a,score:e6(a,i.index),routesMeta:u})}),e}function Y4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:t6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const X4=/^:\w+$/,q4=3,Z4=2,K4=1,Q4=10,J4=-2,SS=t=>t==="*";function e6(t,e){let n=t.split("/"),r=n.length;return n.some(SS)&&(r+=J4),e&&(r+=Z4),n.filter(i=>!SS(i)).reduce((i,o)=>i+(X4.test(o)?q4:o===""?K4:Q4),r)}function t6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function n6(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let s=0;s<n.length;++s){let a=n[s],u=s===n.length-1,l=i==="/"?e:e.slice(i.length)||"/",c=AR({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;o.push({params:r,pathname:Ni([i,c.pathname]),pathnameBase:u6(Ni([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=Ni([i,c.pathnameBase]))}return o}function AR(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=r6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{if(c==="*"){let h=a[f]||"";s=o.slice(0,o.length-h.length).replace(/(.)\/+$/,"$1")}return l[c]=o6(a[f]||"",c),l},{}),pathname:o,pathnameBase:s,pattern:t}}function r6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(s,a)=>(r.push(a),"([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function i6(t){try{return decodeURI(t)}catch(e){return $1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function o6(t,e){try{return decodeURIComponent(t)}catch(n){return $1(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function CR(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function s6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Hi(t):t;return{pathname:n?n.startsWith("/")?n:a6(n,e):e,search:l6(r),hash:c6(i)}}function a6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Vm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Zp(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function j1(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Hi(t):(i=Ut({},t),Ve(!i.pathname||!i.pathname.includes("?"),Vm("?","pathname","search",i)),Ve(!i.pathname||!i.pathname.includes("#"),Vm("#","pathname","hash",i)),Ve(!i.search||!i.search.includes("#"),Vm("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(r||s==null)a=n;else{let f=e.length-1;if(s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}a=f>=0?e[f]:"/"}let u=s6(i,a),l=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const Ni=t=>t.join("/").replace(/\/\/+/g,"/"),u6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),l6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,c6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class xS extends Error{}class f6{constructor(e){this.pendingKeys=new Set,this.subscriber=void 0,Ve(e&&typeof e=="object"&&!Array.isArray(e),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((i,o)=>n=o),this.controller=new AbortController;let r=()=>n(new xS("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",r),this.controller.signal.addEventListener("abort",r),this.data=Object.entries(e).reduce((i,o)=>{let[s,a]=o;return Object.assign(i,{[s]:this.trackPromise(s,a)})},{})}trackPromise(e,n){if(!(n instanceof Promise))return n;this.pendingKeys.add(e);let r=Promise.race([n,this.abortPromise]).then(i=>this.onSettle(r,e,null,i),i=>this.onSettle(r,e,i));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(e,n,r,i){if(this.controller.signal.aborted&&r instanceof xS)return this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:()=>r}),Promise.reject(r);this.pendingKeys.delete(n),this.done&&this.unlistenAbortSignal();const o=this.subscriber;return r?(Object.defineProperty(e,"_error",{get:()=>r}),o&&o(!1),Promise.reject(r)):(Object.defineProperty(e,"_data",{get:()=>i}),o&&o(!1),i)}subscribe(e){this.subscriber=e}cancel(){this.controller.abort(),this.pendingKeys.forEach((n,r)=>this.pendingKeys.delete(r));let e=this.subscriber;e&&e(!0)}async resolveData(e){let n=!1;if(!this.done){let r=()=>this.cancel();e.addEventListener("abort",r),n=await new Promise(i=>{this.subscribe(o=>{e.removeEventListener("abort",r),(o||this.done)&&i(o)})})}return n}get done(){return this.pendingKeys.size===0}get unwrappedData(){return Ve(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((e,n)=>{let[r,i]=n;return Object.assign(e,{[r]:d6(i)})},{})}}function h6(t){return t instanceof Promise&&t._tracked===!0}function d6(t){if(!h6(t))return t;if(t._error)throw t._error;return t._data}class uu{constructor(e,n,r){this.status=e,this.statusText=n||"",this.data=r}}function RR(t){return t instanceof uu}const $m={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},p6={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},g6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",m6=!g6;function v6(t){Ve(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let e=TR(t.routes),n=null,r=new Set,i=null,o=null,s=null,a=!1,u=nl(e,t.history.location,t.basename),l=null;if(u==null){let{matches:Z,route:re,error:fe}=RS(e);u=Z,l={[re.id]:fe}}let c=!u.some(Z=>Z.route.loader)||t.hydrationData!=null,f,h={historyAction:t.history.action,location:t.history.location,matches:u,initialized:c,navigation:$m,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||l,fetchers:new Map},d=sn.Pop,g=!1,m,S=!1,_=!1,y=[],w=[],T=new Map,R=0,C=-1,D=new Map,F=new Set,W=new Map,j=new Map;function H(){return n=t.history.listen(Z=>{let{action:re,location:fe}=Z;return ae(re,fe)}),h.initialized||ae(sn.Pop,h.location),f}function pe(){n&&n(),r.clear(),m&&m.abort(),h.fetchers.forEach((Z,re)=>J(re))}function ue(Z){return r.add(Z),()=>r.delete(Z)}function se(Z){h=Ut({},h,Z),r.forEach(re=>re(h))}function Ce(Z,re){var fe;let Te=h.actionData!=null&&h.navigation.formMethod!=null&&h.navigation.state==="loading"&&((fe=h.navigation.formAction)==null?void 0:fe.split("?")[0])===Z.pathname,Ne=re.loaderData?{loaderData:Gm(h.loaderData,re.loaderData,re.matches||[])}:{};se(Ut({},Te?{}:{actionData:null},re,Ne,{historyAction:d,location:Z,initialized:!0,navigation:$m,revalidation:"idle",restoreScrollPosition:h.navigation.formData?!1:xt(Z,re.matches||h.matches),preventScrollReset:g})),S||d===sn.Pop||(d===sn.Push?t.history.push(Z,Z.state):d===sn.Replace&&t.history.replace(Z,Z.state)),d=sn.Pop,g=!1,S=!1,_=!1,y=[],w=[]}async function De(Z,re){if(typeof Z=="number"){t.history.go(Z);return}let{path:fe,submission:Te,error:Ne}=TS(Z,re),Ye=us(h.location,fe,re&&re.state);Ye=t.history.encodeLocation(Ye);let Xe=(re&&re.replace)===!0||Te!=null?sn.Replace:sn.Push,et=re&&"preventScrollReset"in re?re.preventScrollReset===!0:void 0;return await ae(Xe,Ye,{submission:Te,pendingError:Ne,preventScrollReset:et,replace:re&&re.replace})}function He(){if(_e(),se({revalidation:"loading"}),h.navigation.state!=="submitting"){if(h.navigation.state==="idle"){ae(h.historyAction,h.location,{startUninterruptedRevalidation:!0});return}ae(d||h.historyAction,h.navigation.location,{overrideNavigation:h.navigation})}}async function ae(Z,re,fe){m&&m.abort(),m=null,d=Z,S=(fe&&fe.startUninterruptedRevalidation)===!0,wt(h.location,h.matches),g=(fe&&fe.preventScrollReset)===!0;let Te=fe&&fe.overrideNavigation,Ne=nl(e,re,t.basename);if(!Ne){let{matches:It,route:$n,error:ln}=RS(e);gt(),Ce(re,{matches:It,loaderData:{},errors:{[$n.id]:ln}});return}if(S6(h.location,re)){Ce(re,{matches:Ne});return}m=new AbortController;let Ye=Du(re,m.signal,fe&&fe.submission),Xe,et;if(fe&&fe.pendingError)et={[ya(Ne).route.id]:fe.pendingError};else if(fe&&fe.submission){let It=await ve(Ye,re,fe.submission,Ne,{replace:fe.replace});if(It.shortCircuited)return;Xe=It.pendingActionData,et=It.pendingActionError,Te=Ut({state:"loading",location:re},fe.submission)}let{shortCircuited:ut,loaderData:it,errors:ct}=await G(Ye,re,Ne,Te,fe&&fe.submission,fe&&fe.replace,Xe,et);ut||(m=null,Ce(re,{matches:Ne,loaderData:it,errors:ct}))}async function ve(Z,re,fe,Te,Ne){_e();let Ye=Ut({state:"submitting",location:re},fe);se({navigation:Ye});let Xe,et=IS(Te,re);if(!et.route.action)Xe=LS(re);else if(Xe=await Nu("action",Z,et,Te,f.basename),Z.signal.aborted)return{shortCircuited:!0};if(La(Xe)){let ut=Ut({state:"loading",location:us(h.location,Xe.location)},fe);return await de(Xe,ut,Ne&&Ne.replace),{shortCircuited:!0}}if(ml(Xe)){let ut=ya(Te,et.route.id);return(Ne&&Ne.replace)!==!0&&(d=sn.Push),{pendingActionError:{[ut.route.id]:Xe.error}}}if(rs(Xe))throw new Error("defer() is not supported in actions");return{pendingActionData:{[et.route.id]:Xe.data}}}async function G(Z,re,fe,Te,Ne,Ye,Xe,et){let ut=Te;ut||(ut={state:"loading",location:re,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0});let[it,ct]=PS(h,fe,Ne,re,_,y,w,Xe,et,W);if(gt(I=>!(fe&&fe.some(K=>K.route.id===I))||it&&it.some(K=>K.route.id===I)),it.length===0&&ct.length===0)return Ce(re,{matches:fe,loaderData:Gm(h.loaderData,{},fe),errors:et||null,actionData:Xe||null}),{shortCircuited:!0};S||(ct.forEach(I=>{let[K]=I,ce=h.fetchers.get(K),he={state:"loading",data:ce&&ce.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};h.fetchers.set(K,he)}),se(Ut({navigation:ut,actionData:Xe||h.actionData||null},ct.length>0?{fetchers:new Map(h.fetchers)}:{}))),C=++R,ct.forEach(I=>{let[K]=I;return T.set(K,m)});let{results:It,loaderResults:$n,fetcherResults:ln}=await le(h.matches,fe,it,ct,Z);if(Z.signal.aborted)return{shortCircuited:!0};ct.forEach(I=>{let[K]=I;return T.delete(K)});let Sn=MS(It);if(Sn){let I=jm(h,Sn);return await de(Sn,I,Ye),{shortCircuited:!0}}let{loaderData:Jr,errors:Lr}=CS(h,fe,it,$n,et,ct,ln,j);j.forEach((I,K)=>{I.subscribe(ce=>{(ce||I.done)&&j.delete(K)})}),ze();let z=Ke(C);return Ut({loaderData:Jr,errors:Lr},z||ct.length>0?{fetchers:new Map(h.fetchers)}:{})}function X(Z){return h.fetchers.get(Z)||p6}function O(Z,re,fe,Te){if(m6)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");T.has(Z)&&Pe(Z);let Ne=nl(e,fe,t.basename);if(!Ne){be(Z,re,new uu(404,"Not Found",null));return}let{path:Ye,submission:Xe}=TS(fe,Te,!0),et=IS(Ne,Ye);if(Xe){q(Z,re,Ye,et,Ne,Xe);return}W.set(Z,[Ye,et,Ne]),Q(Z,re,Ye,et,Ne)}async function q(Z,re,fe,Te,Ne,Ye){if(_e(),W.delete(Z),!Te.route.action){let{error:Oe}=LS(fe);be(Z,re,Oe);return}let Xe=h.fetchers.get(Z),et=Ut({state:"submitting"},Ye,{data:Xe&&Xe.data});h.fetchers.set(Z,et),se({fetchers:new Map(h.fetchers)});let ut=new AbortController,it=Du(fe,ut.signal,Ye);T.set(Z,ut);let ct=await Nu("action",it,Te,Ne,f.basename);if(it.signal.aborted){T.get(Z)===ut&&T.delete(Z);return}if(La(ct)){T.delete(Z),F.add(Z);let Oe=Ut({state:"loading"},Ye,{data:void 0});h.fetchers.set(Z,Oe),se({fetchers:new Map(h.fetchers)});let qe=Ut({state:"loading",location:us(h.location,ct.location)},Ye);await de(ct,qe);return}if(ml(ct)){be(Z,re,ct.error);return}rs(ct)&&Ve(!1,"defer() is not supported in actions");let It=h.navigation.location||h.location,$n=Du(It,ut.signal),ln=h.navigation.state!=="idle"?nl(e,h.navigation.location,t.basename):h.matches;Ve(ln,"Didn't find any matches after fetcher action");let Sn=++R;D.set(Z,Sn);let Jr=Ut({state:"loading",data:ct.data},Ye);h.fetchers.set(Z,Jr);let[Lr,z]=PS(h,ln,Ye,It,_,y,w,{[Te.route.id]:ct.data},void 0,W);z.filter(Oe=>{let[qe]=Oe;return qe!==Z}).forEach(Oe=>{let[qe]=Oe,Yt=h.fetchers.get(qe),Lt={state:"loading",data:Yt&&Yt.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};h.fetchers.set(qe,Lt),T.set(qe,ut)}),se({fetchers:new Map(h.fetchers)});let{results:I,loaderResults:K,fetcherResults:ce}=await le(h.matches,ln,Lr,z,$n);if(ut.signal.aborted)return;D.delete(Z),T.delete(Z),z.forEach(Oe=>{let[qe]=Oe;return T.delete(qe)});let he=MS(I);if(he){let Oe=jm(h,he);await de(he,Oe);return}let{loaderData:ye,errors:Le}=CS(h,h.matches,Lr,K,void 0,z,ce,j),Me={state:"idle",data:ct.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};h.fetchers.set(Z,Me);let Re=Ke(Sn);h.navigation.state==="loading"&&Sn>C?(Ve(d,"Expected pending action"),m&&m.abort(),Ce(h.navigation.location,{matches:ln,loaderData:ye,errors:Le,fetchers:new Map(h.fetchers)})):(se(Ut({errors:Le,loaderData:Gm(h.loaderData,ye,ln)},Re?{fetchers:new Map(h.fetchers)}:{})),_=!1)}async function Q(Z,re,fe,Te,Ne){let Ye=h.fetchers.get(Z),Xe={state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,data:Ye&&Ye.data};h.fetchers.set(Z,Xe),se({fetchers:new Map(h.fetchers)});let et=new AbortController,ut=Du(fe,et.signal);T.set(Z,et);let it=await Nu("loader",ut,Te,Ne,f.basename);if(rs(it)&&(it=await kR(it,ut.signal,!0)||it),T.get(Z)===et&&T.delete(Z),ut.signal.aborted)return;if(La(it)){let It=jm(h,it);await de(it,It);return}if(ml(it)){let It=ya(h.matches,re);h.fetchers.delete(Z),se({fetchers:new Map(h.fetchers),errors:{[It.route.id]:it.error}});return}Ve(!rs(it),"Unhandled fetcher deferred data");let ct={state:"idle",data:it.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};h.fetchers.set(Z,ct),se({fetchers:new Map(h.fetchers)})}async function de(Z,re,fe){Z.revalidate&&(_=!0),Ve(re.location,"Expected a location on the redirect navigation"),m=null;let Te=fe===!0?sn.Replace:sn.Push;await ae(Te,re.location,{overrideNavigation:re})}async function le(Z,re,fe,Te,Ne){let Ye=await Promise.all([...fe.map(ut=>Nu("loader",Ne,ut,re,f.basename)),...Te.map(ut=>{let[,it,ct,It]=ut;return Nu("loader",Du(it,Ne.signal),ct,It,f.basename)})]),Xe=Ye.slice(0,fe.length),et=Ye.slice(fe.length);return await Promise.all([OS(Z,fe,Xe,Ne.signal,!1,h.loaderData),OS(Z,Te.map(ut=>{let[,,it]=ut;return it}),et,Ne.signal,!0)]),{results:Ye,loaderResults:Xe,fetcherResults:et}}function _e(){_=!0,y.push(...gt()),W.forEach((Z,re)=>{T.has(re)&&(w.push(re),Pe(re))})}function be(Z,re,fe){let Te=ya(h.matches,re);J(Z),se({errors:{[Te.route.id]:fe},fetchers:new Map(h.fetchers)})}function J(Z){T.has(Z)&&Pe(Z),W.delete(Z),D.delete(Z),F.delete(Z),h.fetchers.delete(Z)}function Pe(Z){let re=T.get(Z);Ve(re,"Expected fetch controller: "+Z),re.abort(),T.delete(Z)}function rt(Z){for(let re of Z){let Te={state:"idle",data:X(re).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};h.fetchers.set(re,Te)}}function ze(){let Z=[];for(let re of F){let fe=h.fetchers.get(re);Ve(fe,"Expected fetcher: "+re),fe.state==="loading"&&(F.delete(re),Z.push(re))}rt(Z)}function Ke(Z){let re=[];for(let[fe,Te]of D)if(Te<Z){let Ne=h.fetchers.get(fe);Ve(Ne,"Expected fetcher: "+fe),Ne.state==="loading"&&(Pe(fe),D.delete(fe),re.push(fe))}return rt(re),re.length>0}function gt(Z){let re=[];return j.forEach((fe,Te)=>{(!Z||Z(Te))&&(fe.cancel(),re.push(Te),j.delete(Te))}),re}function Qt(Z,re,fe){if(i=Z,s=re,o=fe||(Te=>Te.key),!a&&h.navigation===$m){a=!0;let Te=xt(h.location,h.matches);Te!=null&&se({restoreScrollPosition:Te})}return()=>{i=null,s=null,o=null}}function wt(Z,re){if(i&&o&&s){let fe=re.map(Ne=>kS(Ne,h.loaderData)),Te=o(Z,fe)||Z.key;i[Te]=s()}}function xt(Z,re){if(i&&o&&s){let fe=re.map(Ye=>kS(Ye,h.loaderData)),Te=o(Z,fe)||Z.key,Ne=i[Te];if(typeof Ne=="number")return Ne}return null}return f={get basename(){return t.basename},get state(){return h},get routes(){return e},initialize:H,subscribe:ue,enableScrollRestoration:Qt,navigate:De,fetch:O,revalidate:He,createHref:Z=>t.history.createHref(Z),getFetcher:X,deleteFetcher:J,dispose:pe,_internalFetchControllers:T,_internalActiveDeferreds:j},f}const y6=new Set(["POST","PUT","PATCH","DELETE"]);[...y6];function TS(t,e,n){n===void 0&&(n=!1);let r=typeof t=="string"?t:Zr(t);if(!e||!("formMethod"in e)&&!("formData"in e))return{path:r};if(e.formMethod!=null&&e.formMethod!=="get")return{path:r,submission:{formMethod:e.formMethod,formAction:OR(r),formEncType:e&&e.formEncType||"application/x-www-form-urlencoded",formData:e.formData}};if(!e.formData)return{path:r};let i=Hi(r);try{let o=MR(e.formData);n&&i.search&&IR(i.search)&&o.append("index",""),i.search="?"+o}catch{return{path:r,error:new uu(400,"Bad Request","Cannot submit binary form data using GET")}}return{path:Zr(i)}}function jm(t,e){let{formMethod:n,formAction:r,formEncType:i,formData:o}=t.navigation;return{state:"loading",location:us(t.location,e.location),formMethod:n||void 0,formAction:r||void 0,formEncType:i||void 0,formData:o||void 0}}function _6(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function PS(t,e,n,r,i,o,s,a,u,l){let c=u?Object.values(u)[0]:a?Object.values(a)[0]:null,f=u?Object.keys(u)[0]:void 0,d=_6(e,f).filter((m,S)=>m.route.loader!=null&&(b6(t.loaderData,t.matches[S],m)||o.some(_=>_===m.route.id)||AS(t.location,t.matches[S],n,r,m,i,c))),g=[];return l&&l.forEach((m,S)=>{let[_,y,w]=m;s.includes(S)?g.push([S,_,y,w]):i&&AS(_,y,n,_,y,i,c)&&g.push([S,_,y,w])}),[d,g]}function b6(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function LR(t,e){let n=t.route.path;return t.pathname!==e.pathname||n&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function AS(t,e,n,r,i,o,s){let a=$l(t),u=e.params,l=$l(r),c=i.params,f=LR(e,i)||a.toString()===l.toString()||a.search!==l.search||o;if(i.route.shouldRevalidate){let h=i.route.shouldRevalidate(Ut({currentUrl:a,currentParams:u,nextUrl:l,nextParams:c},n,{actionResult:s,defaultShouldRevalidate:f}));if(typeof h=="boolean")return h}return f}async function Nu(t,e,n,r,i,o,s){o===void 0&&(o=!1),s===void 0&&(s=!1);let a,u,l,c=new Promise((h,d)=>l=d),f=()=>l();e.signal.addEventListener("abort",f);try{let h=n.route[t];Ve(h,"Could not find the "+t+' to run on the "'+n.route.id+'" route'),u=await Promise.race([h({request:e,params:n.params}),c])}catch(h){a=bn.error,u=h}finally{e.signal.removeEventListener("abort",f)}if(u instanceof Response){let h=u.status;if(h>=300&&h<=399){let m=u.headers.get("Location");Ve(m,"Redirects returned/thrown from loaders/actions must have a Location header");let S=r.slice(0,r.indexOf(n)+1),_=Zp(S).map(T=>T.pathnameBase),y=$l(e.url).pathname,w=j1(m,_,y);if(Ve(Zr(w),"Unable to resolve redirect location: "+u.headers.get("Location")),i){let T=w.pathname;w.pathname=T==="/"?i:Ni([i,T])}if(m=Zr(w),o)throw u.headers.set("Location",m),u;return{type:bn.redirect,status:h,location:m,revalidate:u.headers.get("X-Remix-Revalidate")!==null}}if(s)throw{type:a||bn.data,response:u};let d,g=u.headers.get("Content-Type");return g&&g.startsWith("application/json")?d=await u.json():d=await u.text(),a===bn.error?{type:a,error:new uu(h,u.statusText,d),headers:u.headers}:{type:bn.data,data:d,statusCode:u.status,headers:u.headers}}return a===bn.error?{type:a,error:u}:u instanceof f6?{type:bn.deferred,deferredData:u}:{type:bn.data,data:u}}function Du(t,e,n){let r=$l(OR(t)).toString(),i={signal:e};if(n){let{formMethod:o,formEncType:s,formData:a}=n;i.method=o.toUpperCase(),i.body=s==="application/x-www-form-urlencoded"?MR(a):a}return new Request(r,i)}function MR(t){let e=new URLSearchParams;for(let[n,r]of t.entries())Ve(typeof r=="string",'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),e.append(n,r);return e}function w6(t,e,n,r,i){let o={},s=null,a,u=!1,l={};return n.forEach((c,f)=>{let h=e[f].route.id;if(Ve(!La(c),"Cannot handle redirect results in processLoaderData"),ml(c)){let d=ya(t,h),g=c.error;r&&(g=Object.values(r)[0],r=void 0),s=Object.assign(s||{},{[d.route.id]:g}),u||(u=!0,a=RR(c.error)?c.error.status:500),c.headers&&(l[h]=c.headers)}else rs(c)?(i&&i.set(h,c.deferredData),o[h]=c.deferredData.data):(o[h]=c.data,c.statusCode!=null&&c.statusCode!==200&&!u&&(a=c.statusCode),c.headers&&(l[h]=c.headers))}),r&&(s=r),{loaderData:o,errors:s,statusCode:a||200,loaderHeaders:l}}function CS(t,e,n,r,i,o,s,a){let{loaderData:u,errors:l}=w6(e,n,r,i,a);for(let c=0;c<o.length;c++){let[f,,h]=o[c];Ve(s!==void 0&&s[c]!==void 0,"Did not find corresponding fetcher result");let d=s[c];if(ml(d)){let g=ya(t.matches,h.route.id);l&&l[g.route.id]||(l=Ut({},l,{[g.route.id]:d.error})),t.fetchers.delete(f)}else{if(La(d))throw new Error("Unhandled fetcher revalidation redirect");if(rs(d))throw new Error("Unhandled fetcher deferred data");{let g={state:"idle",data:d.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};t.fetchers.set(f,g)}}}return{loaderData:u,errors:l}}function Gm(t,e,n){let r=Ut({},e);return n.forEach(i=>{let o=i.route.id;e[o]===void 0&&t[o]!==void 0&&(r[o]=t[o])}),r}function ya(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function E6(t,e,n){let r=t.find(i=>i.index||!i.path||i.path==="/")||{id:"__shim-"+e+"-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:r}],route:r,error:new uu(e,n,null)}}function RS(t){return E6(t,404,"Not Found")}function LS(t){let e=typeof t=="string"?t:Zr(t);return console.warn("You're trying to submit to a route that does not have an action.  To fix this, please add an `action` function to the route for "+("["+e+"]")),{type:bn.error,error:new uu(405,"Method Not Allowed","")}}function MS(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(La(n))return n}}function OR(t){let e=typeof t=="string"?Hi(t):t;return Zr(Ut({},e,{hash:""}))}function S6(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash!==e.hash}function rs(t){return t.type===bn.deferred}function ml(t){return t.type===bn.error}function La(t){return(t&&t.type)===bn.redirect}async function OS(t,e,n,r,i,o){for(let s=0;s<n.length;s++){let a=n[s],u=e[s],l=t.find(f=>f.route.id===u.route.id),c=l!=null&&!LR(l,u)&&(o&&o[u.route.id])!==void 0;rs(a)&&(i||c)&&await kR(a,r,i).then(f=>{f&&(n[s]=f||n[s])})}}async function kR(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:bn.data,data:t.deferredData.unwrappedData}}catch(i){return{type:bn.error,error:i}}return{type:bn.data,data:t.deferredData.data}}}function IR(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function kS(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function IS(t,e){let n=typeof e=="string"?Hi(e).search:e.search;if(t[t.length-1].route.index&&IR(n||""))return t[t.length-1];let r=Zp(t);return r[r.length-1]}var Kp={exports:{}},Qp={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x6=B.exports,T6=Symbol.for("react.element"),P6=Symbol.for("react.fragment"),A6=Object.prototype.hasOwnProperty,C6=x6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R6={key:!0,ref:!0,__self:!0,__source:!0};function NR(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)A6.call(e,r)&&!R6.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:T6,type:t,key:o,ref:s,props:i,_owner:C6.current}}Qp.Fragment=P6;Qp.jsx=NR;Qp.jsxs=NR;(function(t){t.exports=Qp})(Kp);const L6=Kp.exports.Fragment,ke=Kp.exports.jsx,vs=Kp.exports.jsxs;/**
 * React Router v6.4.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ed(){return Ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ed.apply(this,arguments)}function M6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const O6=typeof Object.is=="function"?Object.is:M6,{useState:k6,useEffect:I6,useLayoutEffect:N6,useDebugValue:D6}=G0;function F6(t,e,n){const r=e(),[{inst:i},o]=k6({inst:{value:r,getSnapshot:e}});return N6(()=>{i.value=r,i.getSnapshot=e,Wm(i)&&o({inst:i})},[t,r,e]),I6(()=>(Wm(i)&&o({inst:i}),t(()=>{Wm(i)&&o({inst:i})})),[t]),D6(r),r}function Wm(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!O6(n,r)}catch{return!0}}function U6(t,e,n){return e()}const z6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",B6=!z6,V6=B6?U6:F6,$6="useSyncExternalStore"in G0?(t=>t.useSyncExternalStore)(G0):V6,j6=B.exports.createContext(null),DR=B.exports.createContext(null),Jp=B.exports.createContext(null),G1=B.exports.createContext(null),eg=B.exports.createContext(null),Ps=B.exports.createContext({outlet:null,matches:[]}),FR=B.exports.createContext(null);function G6(t,e){let{relative:n}=e===void 0?{}:e;lu()||Ve(!1);let{basename:r,navigator:i}=B.exports.useContext(G1),{hash:o,pathname:s,search:a}=W1(t,{relative:n}),u=s;return r!=="/"&&(u=s==="/"?r:Ni([r,s])),i.createHref({pathname:u,search:a,hash:o})}function lu(){return B.exports.useContext(eg)!=null}function cu(){return lu()||Ve(!1),B.exports.useContext(eg).location}function gle(t){lu()||Ve(!1);let{pathname:e}=cu();return B.exports.useMemo(()=>AR(t,e),[e,t])}function W6(){lu()||Ve(!1);let{basename:t,navigator:e}=B.exports.useContext(G1),{matches:n}=B.exports.useContext(Ps),{pathname:r}=cu(),i=JSON.stringify(Zp(n).map(a=>a.pathnameBase)),o=B.exports.useRef(!1);return B.exports.useEffect(()=>{o.current=!0}),B.exports.useCallback(function(a,u){if(u===void 0&&(u={}),!o.current)return;if(typeof a=="number"){e.go(a);return}let l=j1(a,JSON.parse(i),r,u.relative==="path");t!=="/"&&(l.pathname=l.pathname==="/"?t:Ni([t,l.pathname])),(u.replace?e.replace:e.push)(l,u.state,u)},[t,e,i,r])}const UR=B.exports.createContext(null);function mle(){return B.exports.useContext(UR)}function H6(t){let e=B.exports.useContext(Ps).outlet;return e&&ke(UR.Provider,{value:t,children:e})}function W1(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=B.exports.useContext(Ps),{pathname:i}=cu(),o=JSON.stringify(Zp(r).map(s=>s.pathnameBase));return B.exports.useMemo(()=>j1(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Y6(t,e){lu()||Ve(!1);let n=B.exports.useContext(Jp),{matches:r}=B.exports.useContext(Ps),i=r[r.length-1],o=i?i.params:{};i&&i.pathname;let s=i?i.pathnameBase:"/";i&&i.route;let a=cu(),u;if(e){var l;let g=typeof e=="string"?Hi(e):e;s==="/"||((l=g.pathname)==null?void 0:l.startsWith(s))||Ve(!1),u=g}else u=a;let c=u.pathname||"/",f=s==="/"?c:c.slice(s.length)||"/",h=nl(t,{pathname:f}),d=K6(h&&h.map(g=>Object.assign({},g,{params:Object.assign({},o,g.params),pathname:Ni([s,g.pathname]),pathnameBase:g.pathnameBase==="/"?s:Ni([s,g.pathnameBase])})),r,n||void 0);return e&&d?ke(eg.Provider,{value:{location:Ed({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:sn.Pop},children:d}):d}function X6(){let t=Q6(),e=RR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r};return vs(L6,{children:[ke("h2",{children:"Unhandled Thrown Error!"}),ke("h3",{style:{fontStyle:"italic"},children:e}),n?ke("pre",{style:i,children:n}):null,ke("p",{children:"\u{1F4BF} Hey developer \u{1F44B}"}),vs("p",{children:["You can provide a way better UX than this when your app throws errors by providing your own\xA0",ke("code",{style:o,children:"errorElement"})," props on\xA0",ke("code",{style:o,children:"<Route>"})]})]})}class q6 extends B.exports.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location?{error:e.error,location:e.location}:{error:e.error||n.error,location:n.location}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?ke(FR.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function Z6(t){let{routeContext:e,match:n,children:r}=t,i=B.exports.useContext(j6);return i&&n.route.errorElement&&(i._deepestRenderedBoundaryId=n.route.id),ke(Ps.Provider,{value:e,children:r})}function K6(t,e,n){if(e===void 0&&(e=[]),t==null)if(n!=null&&n.errors)t=n.matches;else return null;let r=t,i=n==null?void 0:n.errors;if(i!=null){let o=r.findIndex(s=>s.route.id&&(i==null?void 0:i[s.route.id]));o>=0||Ve(!1),r=r.slice(0,Math.min(r.length,o+1))}return r.reduceRight((o,s,a)=>{let u=s.route.id?i==null?void 0:i[s.route.id]:null,l=n?s.route.errorElement||ke(X6,{}):null,c=()=>ke(Z6,{match:s,routeContext:{outlet:o,matches:e.concat(r.slice(0,a+1))},children:u?l:s.route.element!==void 0?s.route.element:o});return n&&(s.route.errorElement||a===0)?ke(q6,{location:n.location,component:l,error:u,children:c()}):c()},null)}var NS;(function(t){t.UseRevalidator="useRevalidator"})(NS||(NS={}));var Sd;(function(t){t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"})(Sd||(Sd={}));function zR(t){let e=B.exports.useContext(Jp);return e||Ve(!1),e}function vle(){let t=zR(Sd.UseLoaderData),e=B.exports.useContext(Ps);e||Ve(!1);let n=e.matches[e.matches.length-1];return n.route.id||Ve(!1),t.loaderData[n.route.id]}function Q6(){var t;let e=B.exports.useContext(FR),n=zR(Sd.UseRouteError),r=B.exports.useContext(Ps),i=r.matches[r.matches.length-1];return e||(r||Ve(!1),i.route.id||Ve(!1),(t=n.errors)==null?void 0:t[i.route.id])}function yle(t){let{fallbackElement:e,router:n}=t,r=$6(n.subscribe,()=>n.state,()=>n.state),i=B.exports.useMemo(()=>({createHref:n.createHref,go:s=>n.navigate(s),push:(s,a,u)=>n.navigate(s,{state:a,preventScrollReset:u==null?void 0:u.preventScrollReset}),replace:(s,a,u)=>n.navigate(s,{replace:!0,state:a,preventScrollReset:u==null?void 0:u.preventScrollReset})}),[n]),o=n.basename||"/";return ke(DR.Provider,{value:{router:n,navigator:i,static:!1,basename:o},children:ke(Jp.Provider,{value:r,children:ke(eU,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:i,children:n.state.initialized?ke(tU,{}):e})})})}function _le(t){return H6(t.context)}function J6(t){Ve(!1)}function eU(t){let{basename:e="/",children:n=null,location:r,navigationType:i=sn.Pop,navigator:o,static:s=!1}=t;lu()&&Ve(!1);let a=e.replace(/^\/*/,"/"),u=B.exports.useMemo(()=>({basename:a,navigator:o,static:s}),[a,o,s]);typeof r=="string"&&(r=Hi(r));let{pathname:l="/",search:c="",hash:f="",state:h=null,key:d="default"}=r,g=B.exports.useMemo(()=>{let m=CR(l,a);return m==null?null:{pathname:m,search:c,hash:f,state:h,key:d}},[a,l,c,f,h,d]);return g==null?null:ke(G1.Provider,{value:u,children:ke(eg.Provider,{children:n,value:{location:g,navigationType:i}})})}function tU(t){let{children:e,location:n}=t,r=B.exports.useContext(DR),i=r&&!e?r.router.routes:Fv(e);return Y6(i,n)}var DS;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(DS||(DS={}));new Promise(()=>{});function Fv(t,e){e===void 0&&(e=[]);let n=[];return B.exports.Children.forEach(t,(r,i)=>{if(!B.exports.isValidElement(r))return;if(r.type===B.exports.Fragment){n.push.apply(n,Fv(r.props.children,e));return}r.type!==J6&&Ve(!1),!r.props.index||!r.props.children||Ve(!1);let o=[...e,i],s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(s.children=Fv(r.props.children,o)),n.push(s)}),n}function BR(t){return t.map(e=>{let n=Ed({},e);return n.hasErrorBoundary==null&&(n.hasErrorBoundary=n.errorElement!=null),n.children&&(n.children=BR(n.children)),n})}/**
 * React Router DOM v6.4.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function VR(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function nU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rU(t,e){return t.button===0&&(!e||e==="_self")&&!nU(t)}const iU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],oU=["aria-current","caseSensitive","className","end","style","to","children"];function ble(t,e){var n;return v6({basename:e==null?void 0:e.basename,history:j4({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||((n=window)==null?void 0:n.__staticRouterHydrationData),routes:BR(t)}).initialize()}const sU=B.exports.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:a,target:u,to:l,preventScrollReset:c}=e,f=VR(e,iU),h=G6(l,{relative:i}),d=aU(l,{replace:s,state:a,target:u,preventScrollReset:c,relative:i});function g(m){r&&r(m),m.defaultPrevented||d(m)}return ke("a",{...f,href:h,onClick:o?r:g,ref:n,target:u})}),wle=B.exports.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:s=!1,style:a,to:u,children:l}=e,c=VR(e,oU),f=W1(u,{relative:c.relative}),h=cu(),d=B.exports.useContext(Jp),g=f.pathname,m=h.pathname,S=d&&d.navigation&&d.navigation.location?d.navigation.location.pathname:null;i||(m=m.toLowerCase(),S=S?S.toLowerCase():null,g=g.toLowerCase());let _=m===g||!s&&m.startsWith(g)&&m.charAt(g.length)==="/",y=S!=null&&(S===g||!s&&S.startsWith(g)&&S.charAt(g.length)==="/"),w=_?r:void 0,T;typeof o=="function"?T=o({isActive:_,isPending:y}):T=[o,_?"active":null,y?"pending":null].filter(Boolean).join(" ");let R=typeof a=="function"?a({isActive:_,isPending:y}):a;return ke(sU,{...c,"aria-current":w,className:T,ref:n,style:R,to:u,children:typeof l=="function"?l({isActive:_,isPending:y}):l})});var FS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(FS||(FS={}));var US;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(US||(US={}));function aU(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s}=e===void 0?{}:e,a=W6(),u=cu(),l=W1(t,{relative:s});return B.exports.useCallback(c=>{if(rU(c,n)){c.preventDefault();let f=r!==void 0?r:Zr(u)===Zr(l);a(t,{replace:f,state:i,preventScrollReset:o,relative:s})}},[u,a,l,r,i,n,t,o,s])}function uU(t){const e=new Error(t);if(e.stack===void 0)try{throw e}catch{}return e}var lU=uU,Be=lU;function cU(t){return!!t&&typeof t.then=="function"}var Dt=cU;function fU(t,e){if(t!=null)return t;throw Be(e!=null?e:"Got unexpected null or undefined")}var Ft=fU;function Ue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class tg{getValue(){throw Be("BaseLoadable")}toPromise(){throw Be("BaseLoadable")}valueMaybe(){throw Be("BaseLoadable")}valueOrThrow(){throw Be(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Be("BaseLoadable")}promiseOrThrow(){throw Be(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Be("BaseLoadable")}errorOrThrow(){throw Be(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw Be("BaseLoadable")}}class hU extends tg{constructor(e){super(),Ue(this,"state","hasValue"),Ue(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return Dt(n)?ys(n):ja(n)?n:lc(n)}catch(n){return Dt(n)?ys(n.next(()=>this.map(e))):ng(n)}}}class dU extends tg{constructor(e){super(),Ue(this,"state","hasError"),Ue(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class $R extends tg{constructor(e){super(),Ue(this,"state","loading"),Ue(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return ys(this.contents.then(n=>{const r=e(n);if(ja(r)){const i=r;switch(i.state){case"hasValue":return i.contents;case"hasError":throw i.contents;case"loading":return i.contents}}return r}).catch(n=>{if(Dt(n))return n.then(()=>this.map(e).contents);throw n}))}}function lc(t){return Object.freeze(new hU(t))}function ng(t){return Object.freeze(new dU(t))}function ys(t){return Object.freeze(new $R(t))}function jR(){return Object.freeze(new $R(new Promise(()=>{})))}function pU(t){return t.every(e=>e.state==="hasValue")?lc(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?ng(Ft(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):ys(Promise.all(t.map(e=>e.contents)))}function GR(t){const n=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(i=>t[i])).map(i=>ja(i)?i:Dt(i)?ys(i):lc(i)),r=pU(n);return Array.isArray(t)?r:r.map(i=>Object.getOwnPropertyNames(t).reduce((o,s,a)=>({...o,[s]:i[a]}),{}))}function ja(t){return t instanceof tg}const gU={of:t=>Dt(t)?ys(t):ja(t)?t:lc(t),error:t=>ng(t),loading:()=>jR(),all:GR,isLoadable:ja};var As={loadableWithValue:lc,loadableWithError:ng,loadableWithPromise:ys,loadableLoading:jR,loadableAll:GR,isLoadable:ja,RecoilLoadable:gU},mU=As.loadableWithValue,vU=As.loadableWithError,yU=As.loadableWithPromise,_U=As.loadableLoading,bU=As.loadableAll,wU=As.isLoadable,EU=As.RecoilLoadable,cc=Object.freeze({__proto__:null,loadableWithValue:mU,loadableWithError:vU,loadableWithPromise:yU,loadableLoading:_U,loadableAll:bU,isLoadable:wU,RecoilLoadable:EU});const rg=new Map().set("recoil_hamt_2020",!0).set("recoil_sync_external_store",!0).set("recoil_suppress_rerender_in_callback",!0).set("recoil_memory_managament_2020",!0);function ig(t){var e;return(e=rg.get(t))!==null&&e!==void 0?e:!1}ig.setPass=t=>{rg.set(t,!0)};ig.setFail=t=>{rg.set(t,!1)};ig.clear=()=>{rg.clear()};var Et=ig;function SU(t,e,{error:n}={}){return null}var xU=SU,H1=xU,Hm,Ym,Xm;const TU=(Hm=Rt.createMutableSource)!==null&&Hm!==void 0?Hm:Rt.unstable_createMutableSource,WR=(Ym=Rt.useMutableSource)!==null&&Ym!==void 0?Ym:Rt.unstable_useMutableSource,HR=(Xm=Rt.useSyncExternalStore)!==null&&Xm!==void 0?Xm:Rt.unstable_useSyncExternalStore;function PU(){var t;const{ReactCurrentDispatcher:e,ReactCurrentOwner:n}=Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((t=e==null?void 0:e.current)!==null&&t!==void 0?t:n.currentDispatcher).useSyncExternalStore!=null}function AU(){return Et("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:Et("recoil_sync_external_store")&&HR!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:Et("recoil_mutable_source")&&WR!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?Et("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:Et("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function CU(){return!1}var fc={createMutableSource:TU,useMutableSource:WR,useSyncExternalStore:HR,currentRendererSupportsUseSyncExternalStore:PU,reactMode:AU,isFastRefreshEnabled:CU};const YR={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0};function RU(){var t,e,n;if(typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)==null)return;const r=(e=process.env.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED)===null||e===void 0||(n=e.toLowerCase())===null||n===void 0?void 0:n.trim();if(r==null||r==="")return;if(!["true","false"].includes(r))throw Be(`process.env.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED value must be 'true', 'false', or empty: ${r}`);YR.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=r==="true"}RU();var XR=YR;class Y1{constructor(e){Ue(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class qR extends Y1{}class ZR extends Y1{}function LU(t){return t instanceof qR||t instanceof ZR}var og={AbstractRecoilValue:Y1,RecoilState:qR,RecoilValueReadOnly:ZR,isRecoilValue:LU},MU=og.AbstractRecoilValue,OU=og.RecoilState,kU=og.RecoilValueReadOnly,IU=og.isRecoilValue,Ga=Object.freeze({__proto__:null,AbstractRecoilValue:MU,RecoilState:OU,RecoilValueReadOnly:kU,isRecoilValue:IU});function NU(t,e){return function*(){let n=0;for(const r of t)yield e(r,n++)}()}var sg=NU;class KR{}const DU=new KR,_s=new Map,X1=new Map;function FU(t){return sg(t,e=>Ft(X1.get(e)))}function UU(t){if(_s.has(t)){const e=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function zU(t){XR.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&UU(t.key),_s.set(t.key,t);const e=t.set==null?new Ga.RecoilValueReadOnly(t.key):new Ga.RecoilState(t.key);return X1.set(t.key,e),e}class QR extends Error{}function BU(t){const e=_s.get(t);if(e==null)throw new QR(`Missing definition for RecoilValue: "${t}""`);return e}function VU(t){return _s.get(t)}const xd=new Map;function $U(t){var e;if(!Et("recoil_memory_managament_2020"))return;const n=_s.get(t);if(n!=null&&(e=n.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(n)){var r;_s.delete(t),(r=JR(t))===null||r===void 0||r(),xd.delete(t)}}function jU(t,e){!Et("recoil_memory_managament_2020")||(e===void 0?xd.delete(t):xd.set(t,e))}function JR(t){return xd.get(t)}var er={nodes:_s,recoilValues:X1,registerNode:zU,getNode:BU,getNodeMaybe:VU,deleteNodeConfigIfPossible:$U,setConfigDeletionHandler:jU,getConfigDeletionHandler:JR,recoilValuesForKeys:FU,NodeMissingError:QR,DefaultValue:KR,DEFAULT_VALUE:DU};function GU(t,e){e()}var WU={enqueueExecution:GU};function HU(t,e){return e={exports:{}},t(e,e.exports),e.exports}var YU=HU(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},n={},r=5,i=Math.pow(2,r),o=i-1,s=i/2,a=i/4,u={},l=function(I){return function(){return I}},c=n.hash=function(z){var I=typeof z>"u"?"undefined":e(z);if(I==="number")return z;I!=="string"&&(z+="");for(var K=0,ce=0,he=z.length;ce<he;++ce){var ye=z.charCodeAt(ce);K=(K<<5)-K+ye|0}return K},f=function(I){return I-=I>>1&1431655765,I=(I&858993459)+(I>>2&858993459),I=I+(I>>4)&252645135,I+=I>>8,I+=I>>16,I&127},h=function(I,K){return K>>>I&o},d=function(I){return 1<<I},g=function(I,K){return f(I&K-1)},m=function(I,K,ce,he){var ye=he;if(!I){var Le=he.length;ye=new Array(Le);for(var Me=0;Me<Le;++Me)ye[Me]=he[Me]}return ye[K]=ce,ye},S=function(I,K,ce){var he=ce.length-1,ye=0,Le=0,Me=ce;if(I)ye=Le=K;else for(Me=new Array(he);ye<K;)Me[Le++]=ce[ye++];for(++ye;ye<=he;)Me[Le++]=ce[ye++];return I&&(Me.length=he),Me},_=function(I,K,ce,he){var ye=he.length;if(I){for(var Le=ye;Le>=K;)he[Le--]=he[Le];return he[K]=ce,he}for(var Me=0,Re=0,Oe=new Array(ye+1);Me<K;)Oe[Re++]=he[Me++];for(Oe[K]=ce;Me<ye;)Oe[++Re]=he[Me++];return Oe},y=1,w=2,T=3,R=4,C={__hamt_isEmpty:!0},D=function(I){return I===C||I&&I.__hamt_isEmpty},F=function(I,K,ce,he){return{type:y,edit:I,hash:K,key:ce,value:he,_modify:ae}},W=function(I,K,ce){return{type:w,edit:I,hash:K,children:ce,_modify:ve}},j=function(I,K,ce){return{type:T,edit:I,mask:K,children:ce,_modify:G}},H=function(I,K,ce){return{type:R,edit:I,size:K,children:ce,_modify:X}},pe=function(I){return I===C||I.type===y||I.type===w},ue=function(I,K,ce,he,ye){for(var Le=[],Me=he,Re=0,Oe=0;Me;++Oe)Me&1&&(Le[Oe]=ye[Re++]),Me>>>=1;return Le[K]=ce,H(I,Re+1,Le)},se=function(I,K,ce,he){for(var ye=new Array(K-1),Le=0,Me=0,Re=0,Oe=he.length;Re<Oe;++Re)if(Re!==ce){var qe=he[Re];qe&&!D(qe)&&(ye[Le++]=qe,Me|=1<<Re)}return j(I,Me,ye)},Ce=function z(I,K,ce,he,ye,Le){if(ce===ye)return W(I,ce,[Le,he]);var Me=h(K,ce),Re=h(K,ye);return j(I,d(Me)|d(Re),Me===Re?[z(I,K+r,ce,he,ye,Le)]:Me<Re?[he,Le]:[Le,he])},De=function(I,K,ce,he,ye,Le,Me,Re){for(var Oe=ye.length,qe=0;qe<Oe;++qe){var Yt=ye[qe];if(ce(Me,Yt.key)){var Lt=Yt.value,xn=Le(Lt);return xn===Lt?ye:xn===u?(--Re.value,S(I,qe,ye)):m(I,qe,F(K,he,Me,xn),ye)}}var In=Le();return In===u?ye:(++Re.value,m(I,Oe,F(K,he,Me,In),ye))},He=function(I,K){return I===K.edit},ae=function(I,K,ce,he,ye,Le,Me){if(K(Le,this.key)){var Re=he(this.value);return Re===this.value?this:Re===u?(--Me.value,C):He(I,this)?(this.value=Re,this):F(I,ye,Le,Re)}var Oe=he();return Oe===u?this:(++Me.value,Ce(I,ce,this.hash,this,ye,F(I,ye,Le,Oe)))},ve=function(I,K,ce,he,ye,Le,Me){if(ye===this.hash){var Re=He(I,this),Oe=De(Re,I,K,this.hash,this.children,he,Le,Me);return Oe===this.children?this:Oe.length>1?W(I,this.hash,Oe):Oe[0]}var qe=he();return qe===u?this:(++Me.value,Ce(I,ce,this.hash,this,ye,F(I,ye,Le,qe)))},G=function(I,K,ce,he,ye,Le,Me){var Re=this.mask,Oe=this.children,qe=h(ce,ye),Yt=d(qe),Lt=g(Re,Yt),xn=Re&Yt,In=xn?Oe[Lt]:C,ei=In._modify(I,K,ce+r,he,ye,Le,Me);if(In===ei)return this;var Mr=He(I,this),ti=Re,ni=void 0;if(xn&&D(ei)){if(ti&=~Yt,!ti)return C;if(Oe.length<=2&&pe(Oe[Lt^1]))return Oe[Lt^1];ni=S(Mr,Lt,Oe)}else if(!xn&&!D(ei)){if(Oe.length>=s)return ue(I,qe,ei,Re,Oe);ti|=Yt,ni=_(Mr,Lt,ei,Oe)}else ni=m(Mr,Lt,ei,Oe);return Mr?(this.mask=ti,this.children=ni,this):j(I,ti,ni)},X=function(I,K,ce,he,ye,Le,Me){var Re=this.size,Oe=this.children,qe=h(ce,ye),Yt=Oe[qe],Lt=(Yt||C)._modify(I,K,ce+r,he,ye,Le,Me);if(Yt===Lt)return this;var xn=He(I,this),In=void 0;if(D(Yt)&&!D(Lt))++Re,In=m(xn,qe,Lt,Oe);else if(!D(Yt)&&D(Lt)){if(--Re,Re<=a)return se(I,Re,qe,Oe);In=m(xn,qe,C,Oe)}else In=m(xn,qe,Lt,Oe);return xn?(this.size=Re,this.children=In,this):H(I,Re,In)};C._modify=function(z,I,K,ce,he,ye,Le){var Me=ce();return Me===u?C:(++Le.value,F(z,he,ye,Me))};function O(z,I,K,ce,he){this._editable=z,this._edit=I,this._config=K,this._root=ce,this._size=he}O.prototype.setTree=function(z,I){return this._editable?(this._root=z,this._size=I,this):z===this._root?this:new O(this._editable,this._edit,this._config,z,I)};var q=n.tryGetHash=function(z,I,K,ce){for(var he=ce._root,ye=0,Le=ce._config.keyEq;;)switch(he.type){case y:return Le(K,he.key)?he.value:z;case w:{if(I===he.hash)for(var Me=he.children,Re=0,Oe=Me.length;Re<Oe;++Re){var qe=Me[Re];if(Le(K,qe.key))return qe.value}return z}case T:{var Yt=h(ye,I),Lt=d(Yt);if(he.mask&Lt){he=he.children[g(he.mask,Lt)],ye+=r;break}return z}case R:{if(he=he.children[h(ye,I)],he){ye+=r;break}return z}default:return z}};O.prototype.tryGetHash=function(z,I,K){return q(z,I,K,this)};var Q=n.tryGet=function(z,I,K){return q(z,K._config.hash(I),I,K)};O.prototype.tryGet=function(z,I){return Q(z,I,this)};var de=n.getHash=function(z,I,K){return q(void 0,z,I,K)};O.prototype.getHash=function(z,I){return de(z,I,this)},n.get=function(z,I){return q(void 0,I._config.hash(z),z,I)},O.prototype.get=function(z,I){return Q(I,z,this)};var le=n.has=function(z,I,K){return q(u,z,I,K)!==u};O.prototype.hasHash=function(z,I){return le(z,I,this)};var _e=n.has=function(z,I){return le(I._config.hash(z),z,I)};O.prototype.has=function(z){return _e(z,this)};var be=function(I,K){return I===K};n.make=function(z){return new O(0,0,{keyEq:z&&z.keyEq||be,hash:z&&z.hash||c},C,0)},n.empty=n.make();var J=n.isEmpty=function(z){return z&&!!D(z._root)};O.prototype.isEmpty=function(){return J(this)};var Pe=n.modifyHash=function(z,I,K,ce){var he={value:ce._size},ye=ce._root._modify(ce._editable?ce._edit:NaN,ce._config.keyEq,0,z,I,K,he);return ce.setTree(ye,he.value)};O.prototype.modifyHash=function(z,I,K){return Pe(K,z,I,this)};var rt=n.modify=function(z,I,K){return Pe(z,K._config.hash(I),I,K)};O.prototype.modify=function(z,I){return rt(I,z,this)};var ze=n.setHash=function(z,I,K,ce){return Pe(l(K),z,I,ce)};O.prototype.setHash=function(z,I,K){return ze(z,I,K,this)};var Ke=n.set=function(z,I,K){return ze(K._config.hash(z),z,I,K)};O.prototype.set=function(z,I){return Ke(z,I,this)};var gt=l(u),Qt=n.removeHash=function(z,I,K){return Pe(gt,z,I,K)};O.prototype.removeHash=O.prototype.deleteHash=function(z,I){return Qt(z,I,this)};var wt=n.remove=function(z,I){return Qt(I._config.hash(z),z,I)};O.prototype.remove=O.prototype.delete=function(z){return wt(z,this)};var xt=n.beginMutation=function(z){return new O(z._editable+1,z._edit+1,z._config,z._root,z._size)};O.prototype.beginMutation=function(){return xt(this)};var Z=n.endMutation=function(z){return z._editable=z._editable&&z._editable-1,z};O.prototype.endMutation=function(){return Z(this)};var re=n.mutate=function(z,I){var K=xt(I);return z(K),Z(K)};O.prototype.mutate=function(z){return re(z,this)};var fe=function(I){return I&&Te(I[0],I[1],I[2],I[3],I[4])},Te=function(I,K,ce,he,ye){for(;ce<I;){var Le=K[ce++];if(Le&&!D(Le))return Ne(Le,he,[I,K,ce,he,ye])}return fe(ye)},Ne=function(I,K,ce){switch(I.type){case y:return{value:K(I),rest:ce};case w:case R:case T:var he=I.children;return Te(he.length,he,0,K,ce);default:return fe(ce)}},Ye={done:!0};function Xe(z){this.v=z}Xe.prototype.next=function(){if(!this.v)return Ye;var z=this.v;return this.v=fe(z.rest),z},Xe.prototype[Symbol.iterator]=function(){return this};var et=function(I,K){return new Xe(Ne(I._root,K))},ut=function(I){return[I.key,I.value]},it=n.entries=function(z){return et(z,ut)};O.prototype.entries=O.prototype[Symbol.iterator]=function(){return it(this)};var ct=function(I){return I.key},It=n.keys=function(z){return et(z,ct)};O.prototype.keys=function(){return It(this)};var $n=function(I){return I.value},ln=n.values=O.prototype.values=function(z){return et(z,$n)};O.prototype.values=function(){return ln(this)};var Sn=n.fold=function(z,I,K){var ce=K._root;if(ce.type===y)return z(I,ce.value,ce.key);for(var he=[ce.children],ye=void 0;ye=he.pop();)for(var Le=0,Me=ye.length;Le<Me;){var Re=ye[Le++];Re&&Re.type&&(Re.type===y?I=z(I,Re.value,Re.key):he.push(Re.children))}return I};O.prototype.fold=function(z,I){return Sn(z,I,this)};var Jr=n.forEach=function(z,I){return Sn(function(K,ce,he){return z(ce,he,I)},null,I)};O.prototype.forEach=function(z){return Jr(z,this)};var Lr=n.count=function(z){return z._size};O.prototype.count=function(){return Lr(this)},Object.defineProperty(O.prototype,"size",{get:O.prototype.count}),t.exports?t.exports=n:(void 0).hamt=n});class XU{constructor(e){Ue(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,n){return this._map.set(e,n),this}delete(e){return this._map.delete(e),this}clone(){return Z1(this)}toMap(){return new Map(this._map)}}class q1{constructor(e){if(Ue(this,"_hamt",YU.empty.beginMutation()),e instanceof q1){const n=e._hamt.endMutation();e._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(e)for(const[n,r]of e.entries())this._hamt.set(n,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,n){return this._hamt.set(e,n),this}delete(e){return this._hamt.delete(e),this}clone(){return Z1(this)}toMap(){return new Map(this._hamt)}}function Z1(t){return Et("recoil_hamt_2020")?new q1(t):new XU(t)}var qU={persistentMap:Z1},ZU=qU.persistentMap,KU=Object.freeze({__proto__:null,persistentMap:ZU});function QU(t,...e){const n=new Set;e:for(const r of t){for(const i of e)if(i.has(r))continue e;n.add(r)}return n}var vl=QU;function JU(t,e){const n=new Map;return t.forEach((r,i)=>{n.set(i,e(r,i))}),n}var Td=JU;function e5(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function t5(t){return{nodeDeps:Td(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:Td(t.nodeToNodeSubscriptions,e=>new Set(e))}}function qm(t,e,n,r){const{nodeDeps:i,nodeToNodeSubscriptions:o}=n,s=i.get(t);if(s&&r&&s!==r.nodeDeps.get(t))return;i.set(t,e);const a=s==null?e:vl(e,s);for(const u of a)o.has(u)||o.set(u,new Set),Ft(o.get(u)).add(t);if(s){const u=vl(s,e);for(const l of u){if(!o.has(l))return;const c=Ft(o.get(l));c.delete(t),c.size===0&&o.delete(l)}}}function n5(t,e,n,r){var i,o,s,a;const u=n.getState();r===u.currentTree.version||r===((i=u.nextTree)===null||i===void 0?void 0:i.version)||((o=u.previousTree)===null||o===void 0||o.version);const l=n.getGraph(r);if(qm(t,e,l),r===((s=u.previousTree)===null||s===void 0?void 0:s.version)){const f=n.getGraph(u.currentTree.version);qm(t,e,f,l)}if(r===((a=u.previousTree)===null||a===void 0?void 0:a.version)||r===u.currentTree.version){var c;const f=(c=u.nextTree)===null||c===void 0?void 0:c.version;if(f!==void 0){const h=n.getGraph(f);qm(t,e,h,l)}}}var hc={cloneGraph:t5,graph:e5,saveDepsToStore:n5};let r5=0;const i5=()=>r5++;let o5=0;const s5=()=>o5++;let a5=0;const u5=()=>a5++;var ag={getNextTreeStateVersion:i5,getNextStoreID:s5,getNextComponentID:u5};const{persistentMap:zS}=KU,{graph:l5}=hc,{getNextTreeStateVersion:eL}=ag;function tL(){const t=eL();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:zS(),nonvalidatedAtoms:zS()}}function c5(){const t=tL();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,l5()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var nL={makeEmptyTreeState:tL,makeEmptyStoreState:c5,getNextTreeStateVersion:eL};class rL{}function f5(){return new rL}var ug={RetentionZone:rL,retentionZone:f5};function h5(t,e){const n=new Set(t);return n.add(e),n}function d5(t,e){const n=new Set(t);return n.delete(e),n}function p5(t,e,n){const r=new Map(t);return r.set(e,n),r}function g5(t,e,n){const r=new Map(t);return r.set(e,n(r.get(e))),r}function m5(t,e){const n=new Map(t);return n.delete(e),n}function v5(t,e){const n=new Map(t);return e.forEach(r=>n.delete(r)),n}var iL={setByAddingToSet:h5,setByDeletingFromSet:d5,mapBySettingInMap:p5,mapByUpdatingInMap:g5,mapByDeletingFromMap:m5,mapByDeletingMultipleFromMap:v5};function*y5(t,e){let n=0;for(const r of t)e(r,n++)&&(yield r)}var K1=y5;function _5(t,e){return new Proxy(t,{get:(r,i)=>(!(i in r)&&i in e&&(r[i]=e[i]()),r[i]),ownKeys:r=>Object.keys(r)})}var oL=_5;const{getNode:dc,getNodeMaybe:b5,recoilValuesForKeys:BS}=er,{RetentionZone:VS}=ug,{setByAddingToSet:w5}=iL,E5=Object.freeze(new Set);class S5 extends Error{}function x5(t,e,n){if(!Et("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=t.getState().retention;function i(o){let s=r.get(o);s||r.set(o,s=new Set),s.add(e)}if(n instanceof VS)i(n);else if(Array.isArray(n))for(const o of n)i(o);return()=>{if(!Et("recoil_memory_managament_2020"))return;const{retention:o}=t.getState();function s(a){const u=o.nodesRetainedByZone.get(a);u==null||u.delete(e),u&&u.size===0&&o.nodesRetainedByZone.delete(a)}if(n instanceof VS)s(n);else if(Array.isArray(n))for(const a of n)s(a)}}function Q1(t,e,n,r){const i=t.getState();if(i.nodeCleanupFunctions.has(n))return;const o=dc(n),s=x5(t,n,o.retainedBy),a=o.init(t,e,r);i.nodeCleanupFunctions.set(n,()=>{a(),s()})}function T5(t,e,n){Q1(t,t.getState().currentTree,e,n)}function P5(t,e){var n;const r=t.getState();(n=r.nodeCleanupFunctions.get(e))===null||n===void 0||n(),r.nodeCleanupFunctions.delete(e)}function A5(t,e,n){return Q1(t,e,n,"get"),dc(n).get(t,e)}function sL(t,e,n){return dc(n).peek(t,e)}function C5(t,e,n){var r;const i=b5(e);return i==null||(r=i.invalidate)===null||r===void 0||r.call(i,t),{...t,atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,n),dirtyAtoms:w5(t.dirtyAtoms,e)}}function R5(t,e,n,r){const i=dc(n);if(i.set==null)throw new S5(`Attempt to set read-only RecoilValue: ${n}`);const o=i.set;return Q1(t,e,n,"set"),o(t,e,r)}function L5(t,e,n){const r=t.getState(),i=t.getGraph(e.version),o=dc(n).nodeType;return oL({type:o},{loadable:()=>sL(t,e,n),isActive:()=>r.knownAtoms.has(n)||r.knownSelectors.has(n),isSet:()=>o==="selector"?!1:e.atomValues.has(n),isModified:()=>e.dirtyAtoms.has(n),deps:()=>{var s;return BS((s=i.nodeDeps.get(n))!==null&&s!==void 0?s:[])},subscribers:()=>{var s,a;return{nodes:BS(K1(aL(t,e,new Set([n])),u=>u!==n)),components:sg((s=(a=r.nodeToComponentSubscriptions.get(n))===null||a===void 0?void 0:a.values())!==null&&s!==void 0?s:[],([u])=>({name:u}))}}})}function aL(t,e,n){const r=new Set,i=Array.from(n),o=t.getGraph(e.version);for(let a=i.pop();a;a=i.pop()){var s;r.add(a);const u=(s=o.nodeToNodeSubscriptions.get(a))!==null&&s!==void 0?s:E5;for(const l of u)r.has(l)||i.push(l)}return r}var No={getNodeLoadable:A5,peekNodeLoadable:sL,setNodeValue:R5,initializeNode:T5,cleanUpNode:P5,setUnvalidatedAtomValue_DEPRECATED:C5,peekNodeInfo:L5,getDownstreamNodes:aL};let uL=null;function M5(t){uL=t}function O5(){var t;(t=uL)===null||t===void 0||t()}var lL={setInvalidateMemoizedSnapshot:M5,invalidateMemoizedSnapshot:O5};const{getDownstreamNodes:k5,getNodeLoadable:cL,setNodeValue:I5}=No,{getNextComponentID:N5}=ag,{getNode:D5,getNodeMaybe:fL}=er,{DefaultValue:J1}=er,{reactMode:F5}=fc,{AbstractRecoilValue:U5,RecoilState:z5,RecoilValueReadOnly:B5,isRecoilValue:V5}=Ga,{invalidateMemoizedSnapshot:$5}=lL;function j5(t,{key:e},n=t.getState().currentTree){var r,i;const o=t.getState();n.version===o.currentTree.version||n.version===((r=o.nextTree)===null||r===void 0?void 0:r.version)||(n.version,(i=o.previousTree)===null||i===void 0||i.version);const s=cL(t,n,e);return s.state==="loading"&&s.contents.catch(()=>{}),s}function G5(t,e){const n=t.clone();return e.forEach((r,i)=>{r.state==="hasValue"&&r.contents instanceof J1?n.delete(i):n.set(i,r)}),n}function W5(t,e,{key:n},r){if(typeof r=="function"){const i=cL(t,e,n);if(i.state==="loading"){const o=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw Be(o)}else if(i.state==="hasError")throw i.contents;return r(i.contents)}else return r}function H5(t,e,n){if(n.type==="set"){const{recoilValue:i,valueOrUpdater:o}=n,s=W5(t,e,i,o),a=I5(t,e,i.key,s);for(const[u,l]of a.entries())Uv(e,u,l)}else if(n.type==="setLoadable"){const{recoilValue:{key:i},loadable:o}=n;Uv(e,i,o)}else if(n.type==="markModified"){const{recoilValue:{key:i}}=n;e.dirtyAtoms.add(i)}else if(n.type==="setUnvalidated"){var r;const{recoilValue:{key:i},unvalidatedValue:o}=n,s=fL(i);s==null||(r=s.invalidate)===null||r===void 0||r.call(s,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,o),e.dirtyAtoms.add(i)}else H1(`Unknown action ${n.type}`)}function Uv(t,e,n){n.state==="hasValue"&&n.contents instanceof J1?t.atomValues.delete(e):t.atomValues.set(e,n),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function hL(t,e){t.replaceState(n=>{const r=dL(n);for(const i of e)H5(t,r,i);return pL(t,r),$5(),r})}function lg(t,e){if(yl.length){const n=yl[yl.length-1];let r=n.get(t);r||n.set(t,r=[]),r.push(e)}else hL(t,[e])}const yl=[];function Y5(){const t=new Map;return yl.push(t),()=>{for(const[e,n]of t)hL(e,n);yl.pop()}}function dL(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function pL(t,e){const n=k5(t,e,e.dirtyAtoms);for(const o of n){var r,i;(r=fL(o))===null||r===void 0||(i=r.invalidate)===null||i===void 0||i.call(r,e)}}function gL(t,e,n){lg(t,{type:"set",recoilValue:e,valueOrUpdater:n})}function X5(t,e,n){if(n instanceof J1)return gL(t,e,n);lg(t,{type:"setLoadable",recoilValue:e,loadable:n})}function q5(t,e){lg(t,{type:"markModified",recoilValue:e})}function Z5(t,e,n){lg(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:n})}function K5(t,{key:e},n,r=null){const i=N5(),o=t.getState();o.nodeToComponentSubscriptions.has(e)||o.nodeToComponentSubscriptions.set(e,new Map),Ft(o.nodeToComponentSubscriptions.get(e)).set(i,[r!=null?r:"<not captured>",n]);const s=F5();if(s.early&&(s.mode==="LEGACY"||s.mode==="MUTABLE_SOURCE")){const a=t.getState().nextTree;a&&a.dirtyAtoms.has(e)&&n(a)}return{release:()=>{const a=t.getState(),u=a.nodeToComponentSubscriptions.get(e);u===void 0||!u.has(i)||(u.delete(i),u.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function Q5(t,e){var n;const{currentTree:r}=t.getState(),i=D5(e.key);(n=i.clearCache)===null||n===void 0||n.call(i,t,r)}var _i={RecoilValueReadOnly:B5,AbstractRecoilValue:U5,RecoilState:z5,getRecoilValueAsLoadable:j5,setRecoilValue:gL,setRecoilValueLoadable:X5,markRecoilValueModified:q5,setUnvalidatedRecoilValue:Z5,subscribeToRecoilValue:K5,isRecoilValue:V5,applyAtomValueWrites:G5,batchStart:Y5,writeLoadableToTreeState:Uv,invalidateDownstreams:pL,copyTreeState:dL,refreshRecoilValue:Q5};function J5(t,e,n){const r=t.entries();let i=r.next();for(;!i.done;){const o=i.value;if(e.call(n,o[1],o[0],t))return!0;i=r.next()}return!1}var ez=J5;const{cleanUpNode:tz}=No,{deleteNodeConfigIfPossible:nz,getNode:mL}=er,{RetentionZone:vL}=ug,rz=12e4,yL=new Set;function _L(t,e){const n=t.getState(),r=n.currentTree;if(n.nextTree)return;const i=new Set;for(const s of e)if(s instanceof vL)for(const a of az(n,s))i.add(a);else i.add(s);const o=iz(t,i);for(const s of o)sz(t,r,s)}function iz(t,e){const n=t.getState(),r=n.currentTree,i=t.getGraph(r.version),o=new Set,s=new Set;return a(e),o;function a(u){const l=new Set,c=oz(t,r,u,o,s);for(const g of c){var f;if(mL(g).retainedBy==="recoilRoot"){s.add(g);continue}if(((f=n.retention.referenceCounts.get(g))!==null&&f!==void 0?f:0)>0){s.add(g);continue}if(bL(g).some(S=>n.retention.referenceCounts.get(S))){s.add(g);continue}const m=i.nodeToNodeSubscriptions.get(g);if(m&&ez(m,S=>s.has(S))){s.add(g);continue}o.add(g),l.add(g)}const h=new Set;for(const g of l)for(const m of(d=i.nodeDeps.get(g))!==null&&d!==void 0?d:yL){var d;o.has(m)||h.add(m)}h.size&&a(h)}}function oz(t,e,n,r,i){const o=t.getGraph(e.version),s=[],a=new Set;for(;n.size>0;)u(Ft(n.values().next().value));return s;function u(l){if(r.has(l)||i.has(l)){n.delete(l);return}if(a.has(l))return;const c=o.nodeToNodeSubscriptions.get(l);if(c)for(const f of c)u(f);a.add(l),n.delete(l),s.push(l)}}function sz(t,e,n){if(!Et("recoil_memory_managament_2020"))return;tz(t,n);const r=t.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const i=bL(n);for(const u of i){var o;(o=r.retention.nodesRetainedByZone.get(u))===null||o===void 0||o.delete(n)}e.atomValues.delete(n),e.dirtyAtoms.delete(n),e.nonvalidatedAtoms.delete(n);const s=r.graphsByVersion.get(e.version);if(s){const u=s.nodeDeps.get(n);if(u!==void 0){s.nodeDeps.delete(n);for(const l of u){var a;(a=s.nodeToNodeSubscriptions.get(l))===null||a===void 0||a.delete(n)}}s.nodeToNodeSubscriptions.delete(n)}nz(n)}function az(t,e){var n;return(n=t.retention.nodesRetainedByZone.get(e))!==null&&n!==void 0?n:yL}function bL(t){const e=mL(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof vL?[e]:e}function uz(t,e){const n=t.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(e):_L(t,new Set([e]))}function lz(t,e,n){var r;if(!Et("recoil_memory_managament_2020"))return;const i=t.getState().retention.referenceCounts,o=((r=i.get(e))!==null&&r!==void 0?r:0)+n;o===0?wL(t,e):i.set(e,o)}function wL(t,e){if(!Et("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),uz(t,e)}function cz(t){if(!Et("recoil_memory_managament_2020"))return;const e=t.getState();_L(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function fz(t){return t===void 0?"recoilRoot":t}var Cs={SUSPENSE_TIMEOUT_MS:rz,updateRetainCount:lz,updateRetainCountToZero:wL,releaseScheduledRetainablesNow:cz,retainedByOptionWithDefault:fz};const{unstable_batchedUpdates:hz}=$4;var dz={unstable_batchedUpdates:hz};const{unstable_batchedUpdates:pz}=dz;var gz={unstable_batchedUpdates:pz};const{batchStart:mz}=_i,{unstable_batchedUpdates:vz}=gz;let eb=vz;const yz=t=>{eb=t},_z=()=>eb,bz=t=>{eb(()=>{let e=()=>{};try{e=mz(),t()}finally{e()}})};var cg={getBatcher:_z,setBatcher:yz,batchUpdates:bz};function*wz(t){for(const e of t)for(const n of e)yield n}var EL=wz;const SL=typeof Window>"u"||typeof window>"u",Ez=t=>!SL&&(t===window||t instanceof Window),Sz=typeof navigator<"u"&&navigator.product==="ReactNative";var tb={isSSR:SL,isReactNative:Sz,isWindow:Ez};function xz(t,e){let n;return(...i)=>{n||(n={});const o=e(...i);return Object.hasOwnProperty.call(n,o)||(n[o]=t(...i)),n[o]}}function Tz(t,e){let n,r;return(...o)=>{const s=e(...o);return n===s||(n=s,r=t(...o)),r}}function Pz(t,e){let n,r;return[(...s)=>{const a=e(...s);return n===a||(n=a,r=t(...s)),r},()=>{n=null}]}var Az={memoizeWithArgsHash:xz,memoizeOneWithArgsHash:Tz,memoizeOneWithArgsHashAndInvalidation:Pz};const{batchUpdates:zv}=cg,{initializeNode:Cz,peekNodeInfo:Rz}=No,{graph:Lz}=hc,{getNextStoreID:Mz}=ag,{DEFAULT_VALUE:Oz,recoilValues:$S,recoilValuesForKeys:jS}=er,{AbstractRecoilValue:kz,getRecoilValueAsLoadable:Iz,setRecoilValue:GS,setUnvalidatedRecoilValue:Nz}=_i,{updateRetainCount:Jf}=Cs,{setInvalidateMemoizedSnapshot:Dz}=lL,{getNextTreeStateVersion:Fz,makeEmptyStoreState:Uz}=nL,{isSSR:zz}=tb,{memoizeOneWithArgsHashAndInvalidation:Bz}=Az;class fg{constructor(e,n){Ue(this,"_store",void 0),Ue(this,"_refCount",1),Ue(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),Iz(this._store,r))),Ue(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),Ue(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const s=this._store.getState().currentTree;return jS(s.dirtyAtoms)}const i=this._store.getState().knownAtoms,o=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?$S.values():r.isInitialized===!0?jS(EL([i,o])):K1($S.values(),({key:s})=>!i.has(s)&&!o.has(s))}),Ue(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),Rz(this._store,this._store.getState().currentTree,r))),Ue(this,"map",r=>{this.checkRefCount_INTERNAL();const i=new Bv(this,zv);return r(i),i}),Ue(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const i=new Bv(this,zv);return i.retain(),await r(i),i.autoRelease_INTERNAL(),i}),this._store={storeID:Mz(),parentStoreID:n,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const i=e.graphsByVersion;if(i.has(r))return Ft(i.get(r));const o=Lz();return i.set(r,o),o},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Be("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)Cz(this._store,r,"get"),Jf(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){zz||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!Et("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){Et("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function xL(t,e,n=!1){const r=t.getState(),i=n?Fz():e.version;return{currentTree:{version:n?i:e.version,stateID:n?i:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,t.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(sg(r.nodeCleanupFunctions.entries(),([o])=>[o,()=>{}]))}}function Vz(t){const e=new fg(Uz());return t!=null?e.map(t):e}const[WS,TL]=Bz((t,e)=>{var n;const r=t.getState(),i=e==="latest"?(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree:Ft(r.previousTree);return new fg(xL(t,i),t.storeID)},(t,e)=>{var n,r;return String(e)+String(t.storeID)+String((n=t.getState().nextTree)===null||n===void 0?void 0:n.version)+String(t.getState().currentTree.version)+String((r=t.getState().previousTree)===null||r===void 0?void 0:r.version)});Dz(TL);function $z(t,e="latest"){const n=WS(t,e);return n.isRetained()?n:(TL(),WS(t,e))}class Bv extends fg{constructor(e,n){super(xL(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),Ue(this,"_batch",void 0),Ue(this,"set",(r,i)=>{this.checkRefCount_INTERNAL();const o=this.getStore_INTERNAL();this._batch(()=>{Jf(o,r.key,1),GS(this.getStore_INTERNAL(),r,i)})}),Ue(this,"reset",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();this._batch(()=>{Jf(i,r.key,1),GS(this.getStore_INTERNAL(),r,Oz)})}),Ue(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();zv(()=>{for(const[o,s]of r.entries())Jf(i,o,1),Nz(i,new kz(o),s)})}),this._batch=n}}var hg={Snapshot:fg,MutableSnapshot:Bv,freshSnapshot:Vz,cloneSnapshot:$z},jz=hg.Snapshot,Gz=hg.MutableSnapshot,Wz=hg.freshSnapshot,Hz=hg.cloneSnapshot,dg=Object.freeze({__proto__:null,Snapshot:jz,MutableSnapshot:Gz,freshSnapshot:Wz,cloneSnapshot:Hz});function Yz(...t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}var Xz=Yz;const{useRef:qz}=Rt;function Zz(t){const e=qz(t);return e.current===t&&typeof t=="function"&&(e.current=t()),e}var HS=Zz;const{getNextTreeStateVersion:Kz,makeEmptyStoreState:PL}=nL,{cleanUpNode:Qz,getDownstreamNodes:Jz,initializeNode:eB,setNodeValue:tB,setUnvalidatedAtomValue_DEPRECATED:nB}=No,{graph:rB}=hc,{cloneGraph:iB}=hc,{getNextStoreID:AL}=ag,{createMutableSource:Zm,reactMode:CL}=fc,{applyAtomValueWrites:oB}=_i,{releaseScheduledRetainablesNow:RL}=Cs,{freshSnapshot:sB}=dg,{useCallback:aB,useContext:LL,useEffect:Vv,useMemo:uB,useRef:lB,useState:cB}=Rt;function Fu(){throw Be("This component must be used inside a <RecoilRoot> component.")}const ML=Object.freeze({storeID:AL(),getState:Fu,replaceState:Fu,getGraph:Fu,subscribeToTransactions:Fu,addTransactionMetadata:Fu});let $v=!1;function YS(t){if($v)throw Be("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=t.getState();if(e.nextTree===null){Et("recoil_memory_managament_2020")&&Et("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&RL(t);const n=e.currentTree.version,r=Kz();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,iB(Ft(e.graphsByVersion.get(n))))}}const OL=Rt.createContext({current:ML}),pg=()=>LL(OL),kL=Rt.createContext(null);function fB(){return LL(kL)}function nb(t,e,n){const r=Jz(t,n,n.dirtyAtoms);for(const i of r){const o=e.nodeToComponentSubscriptions.get(i);if(o)for(const[s,[a,u]]of o)u(n)}}function IL(t){const e=t.getState(),n=e.currentTree,r=n.dirtyAtoms;if(r.size){for(const[i,o]of e.nodeTransactionSubscriptions)if(r.has(i))for(const[s,a]of o)a(t);for(const[i,o]of e.transactionSubscriptions)o(t);(!CL().early||e.suspendedComponentResolvers.size>0)&&(nb(t,e,n),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(n)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function hB(t){const e=t.getState();e.commitDepth++;try{const{nextTree:n}=e;if(n==null)return;e.previousTree=e.currentTree,e.currentTree=n,e.nextTree=null,IL(t),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):H1("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,Et("recoil_memory_managament_2020")&&n==null&&RL(t)}finally{e.commitDepth--}}function dB({setNotifyBatcherOfChange:t}){const e=pg(),[,n]=cB([]);return t(()=>n({})),Vv(()=>(t(()=>n({})),()=>{t(()=>{})}),[t]),Vv(()=>{WU.enqueueExecution("Batcher",()=>{hB(e.current)})}),null}function pB(t,e){const n=PL();return e({set:(r,i)=>{const o=n.currentTree,s=tB(t,o,r.key,i),a=new Set(s.keys()),u=o.nonvalidatedAtoms.clone();for(const l of a)u.delete(l);n.currentTree={...o,dirtyAtoms:Xz(o.dirtyAtoms,a),atomValues:oB(o.atomValues,s),nonvalidatedAtoms:u}},setUnvalidatedAtomValues:r=>{r.forEach((i,o)=>{n.currentTree=nB(n.currentTree,o,i)})}}),n}function gB(t){const e=sB(t),n=e.getStore_INTERNAL().getState();return e.retain(),n.nodeCleanupFunctions.forEach(r=>r()),n.nodeCleanupFunctions.clear(),n}let XS=0;function mB({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:n,children:r}){let i;const o=d=>{const g=i.current.graphsByVersion;if(g.has(d))return Ft(g.get(d));const m=rB();return g.set(d,m),m},s=(d,g)=>{if(g==null){const{transactionSubscriptions:m}=f.current.getState(),S=XS++;return m.set(S,d),{release:()=>{m.delete(S)}}}else{const{nodeTransactionSubscriptions:m}=f.current.getState();m.has(g)||m.set(g,new Map);const S=XS++;return Ft(m.get(g)).set(S,d),{release:()=>{const _=m.get(g);_&&(_.delete(S),_.size===0&&m.delete(g))}}}},a=d=>{YS(f.current);for(const g of Object.keys(d))Ft(f.current.getState().nextTree).transactionMetadata[g]=d[g]},u=d=>{YS(f.current);const g=Ft(i.current.nextTree);let m;try{$v=!0,m=d(g)}finally{$v=!1}m!==g&&(i.current.nextTree=m,CL().early&&nb(f.current,i.current,m),Ft(l.current)())},l=lB(null),c=aB(d=>{l.current=d},[l]),f=HS(()=>n!=null?n:{storeID:AL(),getState:()=>i.current,replaceState:u,getGraph:o,subscribeToTransactions:s,addTransactionMetadata:a});n!=null&&(f.current=n),i=HS(()=>t!=null?pB(f.current,t):e!=null?gB(e):PL());const h=uB(()=>Zm==null?void 0:Zm(i,()=>i.current.currentTree.version),[i]);return Vv(()=>{const d=f.current;for(const g of new Set(d.getState().knownAtoms))eB(d,g,"get");return()=>{for(const g of d.getState().knownAtoms)Qz(d,g)}},[f]),ke(OL.Provider,{value:f,children:vs(kL.Provider,{value:h,children:[ke(dB,{setNotifyBatcherOfChange:c}),r]})})}function vB(t){const{override:e,...n}=t,r=pg();return e===!1&&r.current!==ML?t.children:ke(mB,{...n})}function yB(){return pg().current.storeID}var Yi={RecoilRoot:vB,useStoreRef:pg,useRecoilMutableSource:fB,useRecoilStoreID:yB,notifyComponents_FOR_TESTING:nb,sendEndOfBatchNotifications_FOR_TESTING:IL};function _B(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}var bB=_B;const{useEffect:wB,useRef:EB}=Rt;function SB(t){const e=EB();return wB(()=>{e.current=t}),e.current}var NL=SB;const{useStoreRef:xB}=Yi,{SUSPENSE_TIMEOUT_MS:TB}=Cs,{updateRetainCount:Uu}=Cs,{RetentionZone:PB}=ug,{useEffect:AB,useRef:CB}=Rt,{isSSR:qS}=tb;function RB(t){if(!!Et("recoil_memory_managament_2020"))return LB(t)}function LB(t){const n=(Array.isArray(t)?t:[t]).map(s=>s instanceof PB?s:s.key),r=xB();AB(()=>{if(!Et("recoil_memory_managament_2020"))return;const s=r.current;if(i.current&&!qS)window.clearTimeout(i.current),i.current=null;else for(const a of n)Uu(s,a,1);return()=>{for(const a of n)Uu(s,a,-1)}},[r,...n]);const i=CB(),o=NL(n);if(!qS&&(o===void 0||!bB(o,n))){const s=r.current;for(const a of n)Uu(s,a,1);if(o)for(const a of o)Uu(s,a,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(const a of n)Uu(s,a,-1)},TB)}}var rb=RB;function MB(){return"<component name not available>"}var pc=MB;const{batchUpdates:OB}=cg,{DEFAULT_VALUE:DL}=er,{currentRendererSupportsUseSyncExternalStore:kB,reactMode:fu,useMutableSource:IB,useSyncExternalStore:NB}=fc,{useRecoilMutableSource:DB,useStoreRef:bi}=Yi,{AbstractRecoilValue:jv,getRecoilValueAsLoadable:gc,setRecoilValue:Pd,setUnvalidatedRecoilValue:FB,subscribeToRecoilValue:Wa}=_i,{useCallback:Jn,useEffect:Ha,useMemo:FL,useRef:_l,useState:ib}=Rt,{setByAddingToSet:UB}=iL;function ob(t,e,n){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(i=>{n.current.getState().suspendedComponentResolvers.add(i)}):t.state==="hasError"?t.contents:Be(`Invalid value of loadable atom "${e.key}"`)}function zB(){const t=pc(),e=bi(),[,n]=ib([]),r=_l(new Set);r.current=new Set;const i=_l(new Set),o=_l(new Map),s=Jn(u=>{const l=o.current.get(u);l&&(l.release(),o.current.delete(u))},[o]),a=Jn((u,l)=>{o.current.has(l)&&n([])},[]);return Ha(()=>{const u=e.current;vl(r.current,i.current).forEach(l=>{if(o.current.has(l))return;const c=Wa(u,new jv(l),h=>a(h,l),t);o.current.set(l,c),u.getState().nextTree?u.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(u.getState(),l)}):a(u.getState(),l)}),vl(i.current,r.current).forEach(l=>{s(l)}),i.current=r.current}),Ha(()=>{const u=o.current;return vl(r.current,new Set(u.keys())).forEach(l=>{const c=Wa(e.current,new jv(l),f=>a(f,l),t);u.set(l,c)}),()=>u.forEach((l,c)=>s(c))},[t,e,s,a]),FL(()=>{function u(g){return m=>{Pd(e.current,g,m)}}function l(g){return()=>Pd(e.current,g,DL)}function c(g){var m;r.current.has(g.key)||(r.current=UB(r.current,g.key));const S=e.current.getState();return gc(e.current,g,fu().early&&(m=S.nextTree)!==null&&m!==void 0?m:S.currentTree)}function f(g){const m=c(g);return ob(m,g,e)}function h(g){return[f(g),u(g)]}function d(g){return[c(g),u(g)]}return{getRecoilValue:f,getRecoilValueLoadable:c,getRecoilState:h,getRecoilStateLoadable:d,getSetRecoilState:u,getResetRecoilState:l}},[r,e])}const BB={current:0};function VB(t){const e=bi(),n=pc(),r=Jn(()=>{var a;const u=e.current,l=u.getState(),c=fu().early&&(a=l.nextTree)!==null&&a!==void 0?a:l.currentTree;return{loadable:gc(u,t,c),key:t.key}},[e,t]),i=Jn(a=>{let u;return()=>{var l,c;const f=a();return(l=u)!==null&&l!==void 0&&l.loadable.is(f.loadable)&&((c=u)===null||c===void 0?void 0:c.key)===f.key?u:(u=f,f)}},[]),o=FL(()=>i(r),[r,i]),s=Jn(a=>{const u=e.current;return Wa(u,t,a,n).release},[e,t,n]);return NB(s,o,o).loadable}function $B(t){const e=bi(),n=Jn(()=>{var l;const c=e.current,f=c.getState(),h=fu().early&&(l=f.nextTree)!==null&&l!==void 0?l:f.currentTree;return gc(c,t,h)},[e,t]),r=Jn(()=>n(),[n]),i=pc(),o=Jn((l,c)=>{const f=e.current;return Wa(f,t,()=>{if(!Et("recoil_suppress_rerender_in_callback"))return c();const d=n();u.current.is(d)||c(),u.current=d},i).release},[e,t,i,n]),s=DB();if(s==null)throw Be("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=IB(s,r,o),u=_l(a);return Ha(()=>{u.current=a}),a}function Gv(t){const e=bi(),n=pc(),r=Jn(()=>{var u;const l=e.current,c=l.getState(),f=fu().early&&(u=c.nextTree)!==null&&u!==void 0?u:c.currentTree;return gc(l,t,f)},[e,t]),i=Jn(()=>({loadable:r(),key:t.key}),[r,t.key]),o=Jn(u=>{const l=i();return u.loadable.is(l.loadable)&&u.key===l.key?u:l},[i]);Ha(()=>{const u=Wa(e.current,t,l=>{a(o)},n);return a(o),u.release},[n,t,e,o]);const[s,a]=ib(i);return s.key!==t.key?i().loadable:s.loadable}function jB(t){const e=bi(),[,n]=ib([]),r=pc(),i=Jn(()=>{var a;const u=e.current,l=u.getState(),c=fu().early&&(a=l.nextTree)!==null&&a!==void 0?a:l.currentTree;return gc(u,t,c)},[e,t]),o=i(),s=_l(o);return Ha(()=>{s.current=o}),Ha(()=>{const a=e.current,u=a.getState(),l=Wa(a,t,f=>{var h;if(!Et("recoil_suppress_rerender_in_callback"))return n([]);const d=i();(h=s.current)!==null&&h!==void 0&&h.is(d)||n(d),s.current=d},r);if(u.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{s.current=null,n([])});else{var c;if(!Et("recoil_suppress_rerender_in_callback"))return n([]);const f=i();(c=s.current)!==null&&c!==void 0&&c.is(f)||n(f),s.current=f}return l.release},[r,i,t,e]),o}function sb(t){return Et("recoil_memory_managament_2020")&&rb(t),{TRANSITION_SUPPORT:Gv,SYNC_EXTERNAL_STORE:kB()?VB:Gv,MUTABLE_SOURCE:$B,LEGACY:jB}[fu().mode](t)}function UL(t){const e=bi(),n=sb(t);return ob(n,t,e)}function gg(t){const e=bi();return Jn(n=>{Pd(e.current,t,n)},[e,t])}function GB(t){const e=bi();return Jn(()=>{Pd(e.current,t,DL)},[e,t])}function WB(t){return[UL(t),gg(t)]}function HB(t){return[sb(t),gg(t)]}function YB(){const t=bi();return(e,n={})=>{OB(()=>{t.current.addTransactionMetadata(n),e.forEach((r,i)=>FB(t.current,new jv(i),r))})}}function zL(t){return Et("recoil_memory_managament_2020")&&rb(t),Gv(t)}function BL(t){const e=bi(),n=zL(t);return ob(n,t,e)}function XB(t){return[BL(t),gg(t)]}var qB={recoilComponentGetRecoilValueCount_FOR_TESTING:BB,useRecoilInterface:zB,useRecoilState:WB,useRecoilStateLoadable:HB,useRecoilValue:UL,useRecoilValueLoadable:sb,useResetRecoilState:GB,useSetRecoilState:gg,useSetUnvalidatedAtomValues:YB,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:zL,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:BL,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:XB};function ZB(t,e){const n=new Map;for(const[r,i]of t)e(i,r)&&n.set(r,i);return n}var KB=ZB;function QB(t,e){const n=new Set;for(const r of t)e(r)&&n.add(r);return n}var JB=QB;function eV(...t){const e=new Map;for(let n=0;n<t.length;n++){const r=t[n].keys();let i;for(;!(i=r.next()).done;)e.set(i.value,t[n].get(i.value))}return e}var tV=eV;const{batchUpdates:nV}=cg,{DEFAULT_VALUE:rV,getNode:VL,nodes:iV}=er,{useStoreRef:ab}=Yi,{AbstractRecoilValue:oV,setRecoilValueLoadable:sV}=_i,{SUSPENSE_TIMEOUT_MS:aV}=Cs,{cloneSnapshot:Ad}=dg,{useCallback:mg,useEffect:$L,useRef:ZS,useState:uV}=Rt,{isSSR:KS}=tb;function vg(t){const e=ab();$L(()=>e.current.subscribeToTransactions(t).release,[t,e])}function QS(t){const e=t.atomValues.toMap(),n=Td(KB(e,(r,i)=>{const s=VL(i).persistence_UNSTABLE;return s!=null&&s.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return tV(t.nonvalidatedAtoms.toMap(),n)}function lV(t){vg(mg(e=>{let n=e.getState().previousTree;const r=e.getState().currentTree;n||(n=e.getState().currentTree);const i=QS(r),o=QS(n),s=Td(iV,u=>{var l,c,f,h;return{persistence_UNSTABLE:{type:(l=(c=u.persistence_UNSTABLE)===null||c===void 0?void 0:c.type)!==null&&l!==void 0?l:"none",backButton:(f=(h=u.persistence_UNSTABLE)===null||h===void 0?void 0:h.backButton)!==null&&f!==void 0?f:!1}}}),a=JB(r.dirtyAtoms,u=>i.has(u)||o.has(u));t({atomValues:i,previousAtomValues:o,atomInfo:s,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[t]))}function cV(t){vg(mg(e=>{const n=Ad(e,"latest"),r=Ad(e,"previous");t({snapshot:n,previousSnapshot:r})},[t]))}function fV(){const t=ab(),[e,n]=uV(()=>Ad(t.current)),r=NL(e),i=ZS(),o=ZS();if(vg(mg(a=>n(Ad(a)),[])),$L(()=>{const a=e.retain();if(i.current&&!KS){var u;window.clearTimeout(i.current),i.current=null,(u=o.current)===null||u===void 0||u.call(o),o.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!KS){if(i.current){var s;window.clearTimeout(i.current),i.current=null,(s=o.current)===null||s===void 0||s.call(o),o.current=null}o.current=e.retain(),i.current=window.setTimeout(()=>{var a;i.current=null,(a=o.current)===null||a===void 0||a.call(o),o.current=null},aV)}return e}function jL(t,e){var n;const r=t.getState(),i=(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree,o=e.getStore_INTERNAL().getState().currentTree;nV(()=>{const s=new Set;for(const l of[i.atomValues.keys(),o.atomValues.keys()])for(const c of l){var a,u;((a=i.atomValues.get(c))===null||a===void 0?void 0:a.contents)!==((u=o.atomValues.get(c))===null||u===void 0?void 0:u.contents)&&VL(c).shouldRestoreFromSnapshots&&s.add(c)}s.forEach(l=>{sV(t,new oV(l),o.atomValues.has(l)?Ft(o.atomValues.get(l)):rV)}),t.replaceState(l=>({...l,stateID:e.getID()}))})}function hV(){const t=ab();return mg(e=>jL(t.current,e),[t])}var GL={useRecoilSnapshot:fV,gotoSnapshot:jL,useGotoRecoilSnapshot:hV,useRecoilTransactionObserver:cV,useTransactionObservation_DEPRECATED:lV,useTransactionSubscription_DEPRECATED:vg};const{peekNodeInfo:dV}=No,{useStoreRef:pV}=Yi;function gV(){const t=pV();return({key:e})=>dV(t.current,t.current.getState().currentTree,e)}var mV=gV;const{reactMode:vV}=fc,{RecoilRoot:yV,useStoreRef:_V}=Yi,{useMemo:bV}=Rt;function wV(){vV().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=_V().current;return bV(()=>{function e({children:n}){return ke(yV,{store_INTERNAL:t,children:n})}return e},[t])}var EV=wV;const{loadableWithValue:SV}=cc,{initializeNode:xV}=No,{DEFAULT_VALUE:TV,getNode:PV}=er,{copyTreeState:AV,getRecoilValueAsLoadable:CV,invalidateDownstreams:RV,writeLoadableToTreeState:LV}=_i;function JS(t){return PV(t.key).nodeType==="atom"}class MV{constructor(e,n){Ue(this,"_store",void 0),Ue(this,"_treeState",void 0),Ue(this,"_changes",void 0),Ue(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!JS(r))throw Be("Reading selectors within atomicUpdate is not supported");const i=CV(this._store,r,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:Be(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),Ue(this,"set",(r,i)=>{if(!JS(r))throw Be("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){const o=this.get(r);this._changes.set(r.key,i(o))}else xV(this._store,r.key,"set"),this._changes.set(r.key,i)}),Ue(this,"reset",r=>{this.set(r,TV)}),this._store=e,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=AV(this._treeState);for(const[n,r]of this._changes)LV(e,n,SV(r));return RV(this._store,e),e}}function OV(t){return e=>{t.replaceState(n=>{const r=new MV(t,n);return e(r),r.newTreeState_INTERNAL()})}}var kV={atomicUpdater:OV},IV=kV.atomicUpdater,WL=Object.freeze({__proto__:null,atomicUpdater:IV});function NV(t,e){if(!t)throw new Error(e)}var DV=NV,rl=DV;const{atomicUpdater:FV}=WL,{batchUpdates:UV}=cg,{DEFAULT_VALUE:zV}=er,{useStoreRef:BV}=Yi,{refreshRecoilValue:VV,setRecoilValue:ex}=_i,{cloneSnapshot:$V}=dg,{gotoSnapshot:jV}=GL,{useCallback:GV}=Rt;class HL{}const WV=new HL;function YL(t,e,n,r){let i=WV,o;if(UV(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw Be(a);const u=oL({...r!=null?r:{},set:(c,f)=>ex(t,c,f),reset:c=>ex(t,c,zV),refresh:c=>VV(t,c),gotoSnapshot:c=>jV(t,c),transact_UNSTABLE:c=>FV(t)(c)},{snapshot:()=>{const c=$V(t);return o=c.retain(),c}}),l=e(u);if(typeof l!="function")throw Be(a);i=l(...n)}),i instanceof HL&&rl(!1),Dt(i))i.finally(()=>{var a;(a=o)===null||a===void 0||a()});else{var s;(s=o)===null||s===void 0||s()}return i}function HV(t,e){const n=BV();return GV((...r)=>YL(n.current,t,r),e!=null?[...e,n]:void 0)}var XL={recoilCallback:YL,useRecoilCallback:HV};const{useStoreRef:YV}=Yi,{refreshRecoilValue:XV}=_i,{useCallback:qV}=Rt;function ZV(t){const e=YV();return qV(()=>{const n=e.current;XV(n,t)},[t,e])}var KV=ZV;const{atomicUpdater:QV}=WL,{useStoreRef:JV}=Yi,{useMemo:e$}=Rt;function t$(t,e){const n=JV();return e$(()=>(...r)=>{QV(n.current)(o=>{t(o)(...r)})},e!=null?[...e,n]:void 0)}var n$=t$;class r${constructor(e){Ue(this,"value",void 0),this.value=e}}var i$={WrappedValue:r$},o$=i$.WrappedValue,qL=Object.freeze({__proto__:null,WrappedValue:o$});const{isFastRefreshEnabled:s$}=fc;class tx extends Error{}class a${constructor(e){var n,r,i;Ue(this,"_name",void 0),Ue(this,"_numLeafs",void 0),Ue(this,"_root",void 0),Ue(this,"_onHit",void 0),Ue(this,"_onSet",void 0),Ue(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(n=e==null?void 0:e.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:o=>o}size(){return this._numLeafs}root(){return this._root}get(e,n){var r;return(r=this.getLeafNode(e,n))===null||r===void 0?void 0:r.value}getLeafNode(e,n){if(this._root==null)return;let r=this._root;for(;r;){if(n==null||n.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const i=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(i)}}set(e,n,r){const i=()=>{var o,s,a,u;let l,c;for(const[S,_]of e){var f,h,d;const y=this._root;if((y==null?void 0:y.type)==="leaf")throw this.invalidCacheError();const w=l;if(l=w?w.branches.get(c):y,l=(f=l)!==null&&f!==void 0?f:{type:"branch",nodeKey:S,parent:w,branches:new Map,branchKey:c},l.type!=="branch"||l.nodeKey!==S)throw this.invalidCacheError();w==null||w.branches.set(c,l),r==null||(h=r.onNodeVisit)===null||h===void 0||h.call(r,l),c=this._mapNodeValue(_),this._root=(d=this._root)!==null&&d!==void 0?d:l}const g=l?(o=l)===null||o===void 0?void 0:o.branches.get(c):this._root;if(g!=null&&(g.type!=="leaf"||g.branchKey!==c))throw this.invalidCacheError();const m={type:"leaf",value:n,parent:l,branchKey:c};(s=l)===null||s===void 0||s.branches.set(c,m),this._root=(a=this._root)!==null&&a!==void 0?a:m,this._numLeafs++,this._onSet(m),r==null||(u=r.onNodeVisit)===null||u===void 0||u.call(r,m)};try{i()}catch(o){if(o instanceof tx)this.clear(),i();else throw o}}delete(e){const n=this.root();if(!n)return!1;if(e===n)return this._root=null,this._numLeafs=0,!0;let r=e.parent,i=e.branchKey;for(;r;){var o;if(r.branches.delete(i),r===n)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;i=(o=r)===null||o===void 0?void 0:o.branchKey,r=r.parent}for(;r!==n;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=s$()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw H1(e+(this._name!=null?` - ${this._name}`:"")),new tx}}var u$={TreeCache:a$},l$=u$.TreeCache,ZL=Object.freeze({__proto__:null,TreeCache:l$});class c${constructor(e){var n;Ue(this,"_maxSize",void 0),Ue(this,"_size",void 0),Ue(this,"_head",void 0),Ue(this,"_tail",void 0),Ue(this,"_map",void 0),Ue(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=e.mapKey)!==null&&n!==void 0?n:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const n=this._keyMapper(e),r=this._map.get(n);if(!!r)return this.set(e,r.value),r.value}set(e,n){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const o=this.head(),s={key:e,right:o,left:null,value:n};o?o.left=s:this._tail=s,this._map.set(r,s),this._head=s,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const n=this._keyMapper(e);if(!this._size||!this._map.has(n))return;const r=Ft(this._map.get(n)),i=r.right,o=r.left;i&&(i.left=r.left),o&&(o.right=r.right),r===this.head()&&(this._head=i),r===this.tail()&&(this._tail=o),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var f$={LRUCache:c$},h$=f$.LRUCache,KL=Object.freeze({__proto__:null,LRUCache:h$});const{LRUCache:d$}=KL,{TreeCache:p$}=ZL;function g$({name:t,maxSize:e,mapNodeValue:n=r=>r}){const r=new d$({maxSize:e}),i=new p$({name:t,mapNodeValue:n,onHit:o=>{r.set(o,!0)},onSet:o=>{const s=r.tail();r.set(o,!0),s&&i.size()>e&&i.delete(s.key)}});return i}var nx=g$;function Ur(t,e,n){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw Be("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var r;return(r=JSON.stringify(t))!==null&&r!==void 0?r:""}if(Dt(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((i,o)=>Ur(i,e,o.toString()))}]`;if(typeof t.toJSON=="function")return Ur(t.toJSON(n),e,n);if(t instanceof Map){const i={};for(const[o,s]of t)i[typeof o=="string"?o:Ur(o,e)]=s;return Ur(i,e,n)}return t instanceof Set?Ur(Array.from(t).sort((i,o)=>Ur(i,e).localeCompare(Ur(o,e))),e,n):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?Ur(Array.from(t),e,n):`{${Object.keys(t).filter(i=>t[i]!==void 0).sort().map(i=>`${Ur(i,e)}:${Ur(t[i],e,i)}`).join(",")}}`}function m$(t,e={allowFunctions:!1}){return Ur(t,e)}var yg=m$;const{TreeCache:v$}=ZL,ff={equality:"reference",eviction:"keep-all",maxSize:1/0};function y$({equality:t=ff.equality,eviction:e=ff.eviction,maxSize:n=ff.maxSize}=ff,r){const i=_$(t);return b$(e,n,i,r)}function _$(t){switch(t){case"reference":return e=>e;case"value":return e=>yg(e)}throw Be(`Unrecognized equality policy ${t}`)}function b$(t,e,n,r){switch(t){case"keep-all":return new v$({name:r,mapNodeValue:n});case"lru":return nx({name:r,maxSize:Ft(e),mapNodeValue:n});case"most-recent":return nx({name:r,maxSize:1,mapNodeValue:n})}throw Be(`Unrecognized eviction policy ${t}`)}var w$=y$;function E$(t){return()=>null}var S$={startPerfBlock:E$};const{isLoadable:x$,loadableWithError:hf,loadableWithPromise:T$,loadableWithValue:Km}=cc,{WrappedValue:QL}=qL,{getNodeLoadable:df,peekNodeLoadable:P$,setNodeValue:A$}=No,{saveDepsToStore:C$}=hc,{DEFAULT_VALUE:R$,getConfigDeletionHandler:L$,getNode:M$,registerNode:rx}=er,{isRecoilValue:O$}=Ga,{markRecoilValueModified:ix}=_i,{retainedByOptionWithDefault:k$}=Cs,{recoilCallback:I$}=XL,{startPerfBlock:N$}=S$;class JL{}const zu=new JL,Bu=[],pf=new Map,D$=(()=>{let t=0;return()=>t++})();function eM(t){let e=null;const{key:n,get:r,cachePolicy_UNSTABLE:i}=t,o=t.set!=null?t.set:void 0,s=new Set,a=w$(i!=null?i:{equality:"reference",eviction:"keep-all"},n),u=k$(t.retainedBy_UNSTABLE),l=new Map;let c=0;function f(){return!Et("recoil_memory_managament_2020")||c>0}function h(O){return O.getState().knownSelectors.add(n),c++,()=>{c--}}function d(){return L$(n)!==void 0&&!f()}function g(O,q,Q,de,le){De(q,de,le),m(O,Q)}function m(O,q){se(O,q)&&ue(O),_(q,!0)}function S(O,q){se(O,q)&&(Ft(j(O)).stateVersions.clear(),_(q,!1))}function _(O,q){const Q=pf.get(O);if(Q!=null){for(const de of Q)ix(de,Ft(e));q&&pf.delete(O)}}function y(O,q){let Q=pf.get(q);Q==null&&pf.set(q,Q=new Set),Q.add(O)}function w(O,q,Q,de,le,_e){return q.then(be=>{if(!f())throw ue(O),zu;const J=Km(be);return g(O,Q,le,J,de),be}).catch(be=>{if(!f())throw ue(O),zu;if(Dt(be))return T(O,be,Q,de,le,_e);const J=hf(be);throw g(O,Q,le,J,de),be})}function T(O,q,Q,de,le,_e){return q.then(be=>{if(!f())throw ue(O),zu;_e.loadingDepKey!=null&&_e.loadingDepPromise===q?Q.atomValues.set(_e.loadingDepKey,Km(be)):O.getState().knownSelectors.forEach(ze=>{Q.atomValues.delete(ze)});const J=D(O,Q);if(J&&J.state!=="loading"){if((se(O,le)||j(O)==null)&&m(O,le),J.state==="hasValue")return J.contents;throw J.contents}if(!se(O,le)){const ze=W(O,Q);if(ze!=null)return ze.loadingLoadable.contents}const[Pe,rt]=C(O,Q,le);if(Pe.state!=="loading"&&g(O,Q,le,Pe,rt),Pe.state==="hasError")throw Pe.contents;return Pe.contents}).catch(be=>{if(be instanceof JL)throw zu;if(!f())throw ue(O),zu;const J=hf(be);throw g(O,Q,le,J,de),be})}function R(O,q,Q,de){var le,_e,be,J;if(se(O,de)||q.version===((le=O.getState())===null||le===void 0||(_e=le.currentTree)===null||_e===void 0?void 0:_e.version)||q.version===((be=O.getState())===null||be===void 0||(J=be.nextTree)===null||J===void 0?void 0:J.version)){var Pe,rt,ze;C$(n,Q,O,(Pe=(rt=O.getState())===null||rt===void 0||(ze=rt.nextTree)===null||ze===void 0?void 0:ze.version)!==null&&Pe!==void 0?Pe:O.getState().currentTree.version)}for(const Ke of Q)s.add(Ke)}function C(O,q,Q){const de=N$(n);let le=!0,_e=!0;const be=()=>{de(),_e=!1};let J,Pe=!1,rt;const ze={loadingDepKey:null,loadingDepPromise:null},Ke=new Map;function gt({key:wt}){const xt=df(O,q,wt);switch(Ke.set(wt,xt),le||(R(O,q,new Set(Ke.keys()),Q),S(O,Q)),xt.state){case"hasValue":return xt.contents;case"hasError":throw xt.contents;case"loading":throw ze.loadingDepKey=wt,ze.loadingDepPromise=xt.contents,xt.contents}throw Be("Invalid Loadable state")}const Qt=wt=>(...xt)=>{if(_e)throw Be("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&rl(!1),I$(O,wt,xt,{node:e})};try{J=r({get:gt,getCallback:Qt}),J=O$(J)?gt(J):J,x$(J)&&(J.state==="hasError"&&(Pe=!0),J=J.contents),Dt(J)?J=w(O,J,q,Ke,Q,ze).finally(be):be(),J=J instanceof QL?J.value:J}catch(wt){J=wt,Dt(J)?J=T(O,J,q,Ke,Q,ze).finally(be):(Pe=!0,be())}return Pe?rt=hf(J):Dt(J)?rt=T$(J):rt=Km(J),le=!1,pe(O,Q,Ke),R(O,q,new Set(Ke.keys()),Q),[rt,Ke]}function D(O,q){let Q=q.atomValues.get(n);if(Q!=null)return Q;const de=new Set;try{Q=a.get(_e=>(typeof _e!="string"&&rl(!1),df(O,q,_e).contents),{onNodeVisit:_e=>{_e.type==="branch"&&_e.nodeKey!==n&&de.add(_e.nodeKey)}})}catch(_e){throw Be(`Problem with cache lookup for selector "${n}": ${_e.message}`)}if(Q){var le;q.atomValues.set(n,Q),R(O,q,de,(le=j(O))===null||le===void 0?void 0:le.executionID)}return Q}function F(O,q){const Q=D(O,q);if(Q!=null)return ue(O),Q;const de=W(O,q);if(de!=null){var le;return((le=de.loadingLoadable)===null||le===void 0?void 0:le.state)==="loading"&&y(O,de.executionID),de.loadingLoadable}const _e=D$(),[be,J]=C(O,q,_e);return be.state==="loading"?(H(O,_e,be,J,q),y(O,_e)):(ue(O),De(q,be,J)),be}function W(O,q){const Q=EL([l.has(O)?[Ft(l.get(O))]:[],sg(K1(l,([le])=>le!==O),([,le])=>le)]);function de(le){for(const[_e,be]of le)if(!df(O,q,_e).is(be))return!0;return!1}for(const le of Q){if(le.stateVersions.get(q.version)||!de(le.depValuesDiscoveredSoFarDuringAsyncWork))return le.stateVersions.set(q.version,!0),le;le.stateVersions.set(q.version,!1)}}function j(O){return l.get(O)}function H(O,q,Q,de,le){l.set(O,{depValuesDiscoveredSoFarDuringAsyncWork:de,executionID:q,loadingLoadable:Q,stateVersions:new Map([[le.version,!0]])})}function pe(O,q,Q){if(se(O,q)){const de=j(O);de!=null&&(de.depValuesDiscoveredSoFarDuringAsyncWork=Q)}}function ue(O){l.delete(O)}function se(O,q){var Q;return q===((Q=j(O))===null||Q===void 0?void 0:Q.executionID)}function Ce(O){return Array.from(O.entries()).map(([q,Q])=>[q,Q.contents])}function De(O,q,Q){O.atomValues.set(n,q);try{a.set(Ce(Q),q)}catch(de){throw Be(`Problem with setting cache for selector "${n}": ${de.message}`)}}function He(O){if(Bu.includes(n)){const q=`Recoil selector has circular dependencies: ${Bu.slice(Bu.indexOf(n)).join(" \u2192 ")}`;return hf(Be(q))}Bu.push(n);try{return O()}finally{Bu.pop()}}function ae(O,q){const Q=q.atomValues.get(n);return Q!=null?Q:a.get(de=>{var le;return typeof de!="string"&&rl(!1),(le=P$(O,q,de))===null||le===void 0?void 0:le.contents})}function ve(O,q){return He(()=>F(O,q))}function G(O){O.atomValues.delete(n)}function X(O,q){e==null&&rl(!1);for(const de of s){var Q;const le=M$(de);(Q=le.clearCache)===null||Q===void 0||Q.call(le,O,q)}s.clear(),G(q),a.clear(),ix(O,e)}return o!=null?e=rx({key:n,nodeType:"selector",peek:ae,get:ve,set:(q,Q,de)=>{let le=!1;const _e=new Map;function be({key:ze}){if(le)throw Be("Recoil: Async selector sets are not currently supported.");const Ke=df(q,Q,ze);if(Ke.state==="hasValue")return Ke.contents;if(Ke.state==="loading"){const gt=`Getting value of asynchronous atom or selector "${ze}" in a pending state while setting selector "${n}" is not yet supported.`;throw Be(gt)}else throw Ke.contents}function J(ze,Ke){if(le)throw Be("Recoil: Async selector sets are not currently supported.");const gt=typeof Ke=="function"?Ke(be(ze)):Ke;A$(q,Q,ze.key,gt).forEach((wt,xt)=>_e.set(xt,wt))}function Pe(ze){J(ze,R$)}const rt=o({set:J,get:be,reset:Pe},de);if(rt!==void 0)throw Dt(rt)?Be("Recoil: Async selector sets are not currently supported."):Be("Recoil: selector set should be a void function.");return le=!0,_e},init:h,invalidate:G,clearCache:X,shouldDeleteConfigOnRelease:d,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:u}):e=rx({key:n,nodeType:"selector",peek:ae,get:ve,init:h,invalidate:G,clearCache:X,shouldDeleteConfigOnRelease:d,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:u})}eM.value=t=>new QL(t);var Ya=eM;const{isLoadable:F$,loadableWithError:Qm,loadableWithPromise:Jm,loadableWithValue:Zs}=cc,{WrappedValue:tM}=qL,{peekNodeInfo:U$}=No,{DEFAULT_VALUE:Qo,DefaultValue:fo,getConfigDeletionHandler:nM,registerNode:z$,setConfigDeletionHandler:B$}=er,{isRecoilValue:V$}=Ga,{getRecoilValueAsLoadable:$$,markRecoilValueModified:j$,setRecoilValue:ox,setRecoilValueLoadable:G$}=_i,{retainedByOptionWithDefault:W$}=Cs,Vu=t=>t instanceof tM?t.value:t;function H$(t){const{key:e,persistence_UNSTABLE:n}=t,r=W$(t.retainedBy_UNSTABLE);let i=0;function o(y){return Jm(y.then(w=>(s=Zs(w),w)).catch(w=>{throw s=Qm(w),w}))}let s=Dt(t.default)?o(t.default):F$(t.default)?t.default.state==="loading"?o(t.default.contents):t.default:Zs(Vu(t.default));s.contents;let a;const u=new Map;function l(y){return y}function c(y,w){const T=w.then(R=>{var C,D;return((D=((C=y.getState().nextTree)!==null&&C!==void 0?C:y.getState().currentTree).atomValues.get(e))===null||D===void 0?void 0:D.contents)===T&&ox(y,_,R),R}).catch(R=>{var C,D;throw((D=((C=y.getState().nextTree)!==null&&C!==void 0?C:y.getState().currentTree).atomValues.get(e))===null||D===void 0?void 0:D.contents)===T&&G$(y,_,Qm(R)),R});return T}function f(y,w,T){var R;i++;const C=()=>{var j;i--,(j=u.get(y))===null||j===void 0||j.forEach(H=>H()),u.delete(y)};if(y.getState().knownAtoms.add(e),s.state==="loading"){const j=()=>{var H;((H=y.getState().nextTree)!==null&&H!==void 0?H:y.getState().currentTree).atomValues.has(e)||j$(y,_)};s.contents.finally(j)}const D=(R=t.effects)!==null&&R!==void 0?R:t.effects_UNSTABLE;if(D!=null){let se=function(G){if(H&&G.key===e){const X=j;return X instanceof fo?h(y,w):Dt(X)?Jm(X.then(O=>O instanceof fo?s.toPromise():O)):Zs(X)}return $$(y,G)},Ce=function(G){return se(G).toPromise()},De=function(G){var X;const O=U$(y,(X=y.getState().nextTree)!==null&&X!==void 0?X:y.getState().currentTree,G.key);return H&&G.key===e&&!(j instanceof fo)?{...O,isSet:!0,loadable:se(G)}:O},j=Qo,H=!0,pe=!1,ue=null;const He=G=>X=>{if(H){const O=se(_),q=O.state==="hasValue"?O.contents:Qo;j=typeof X=="function"?X(q):X,Dt(j)&&(j=j.then(Q=>(ue={effect:G,value:Q},Q)))}else{if(Dt(X))throw Be("Setting atoms to async values is not implemented.");typeof X!="function"&&(ue={effect:G,value:Vu(X)}),ox(y,_,typeof X=="function"?O=>{const q=Vu(X(O));return ue={effect:G,value:q},q}:Vu(X))}},ae=G=>()=>He(G)(Qo),ve=G=>X=>{var O;const{release:q}=y.subscribeToTransactions(Q=>{var de;let{currentTree:le,previousTree:_e}=Q.getState();_e||(_e=le);const be=(de=le.atomValues.get(e))!==null&&de!==void 0?de:s;if(be.state==="hasValue"){var J,Pe,rt,ze;const Ke=be.contents,gt=(J=_e.atomValues.get(e))!==null&&J!==void 0?J:s,Qt=gt.state==="hasValue"?gt.contents:Qo;((Pe=ue)===null||Pe===void 0?void 0:Pe.effect)!==G||((rt=ue)===null||rt===void 0?void 0:rt.value)!==Ke?X(Ke,Qt,!le.atomValues.has(e)):((ze=ue)===null||ze===void 0?void 0:ze.effect)===G&&(ue=null)}},e);u.set(y,[...(O=u.get(y))!==null&&O!==void 0?O:[],q])};for(const G of D)try{const X=G({node:_,storeID:y.storeID,parentStoreID_UNSTABLE:y.parentStoreID,trigger:T,setSelf:He(G),resetSelf:ae(G),onSet:ve(G),getPromise:Ce,getLoadable:se,getInfo_UNSTABLE:De});if(X!=null){var F;u.set(y,[...(F=u.get(y))!==null&&F!==void 0?F:[],X])}}catch(X){j=X,pe=!0}if(H=!1,!(j instanceof fo)){var W;const G=pe?Qm(j):Dt(j)?Jm(c(y,j)):Zs(Vu(j));G.contents,w.atomValues.set(e,G),(W=y.getState().nextTree)===null||W===void 0||W.atomValues.set(e,G)}}return C}function h(y,w){var T,R;return(T=(R=w.atomValues.get(e))!==null&&R!==void 0?R:a)!==null&&T!==void 0?T:s}function d(y,w){if(w.atomValues.has(e))return Ft(w.atomValues.get(e));if(w.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(n==null)return s;const T=w.nonvalidatedAtoms.get(e),R=n.validator(T,Qo);return a=R instanceof fo?s:Zs(R),a}else return s}function g(){a=void 0}function m(y,w,T){if(w.atomValues.has(e)){const R=Ft(w.atomValues.get(e));if(R.state==="hasValue"&&T===R.contents)return new Map}else if(!w.nonvalidatedAtoms.has(e)&&T instanceof fo)return new Map;return a=void 0,new Map().set(e,Zs(T))}function S(){return nM(e)!==void 0&&i<=0}const _=z$({key:e,nodeType:"atom",peek:h,get:d,set:m,init:f,invalidate:g,shouldDeleteConfigOnRelease:S,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return _}function ub(t){const{...e}=t,n="default"in t?t.default:new Promise(()=>{});return V$(n)?Y$({...e,default:n}):H$({...e,default:n})}function Y$(t){const e=ub({...t,default:Qo,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:r=>r instanceof fo?r:Ft(t.persistence_UNSTABLE).validator(r,Qo)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),n=Ya({key:`${t.key}__withFallback`,get:({get:r})=>{const i=r(e);return i instanceof fo?t.default:i},set:({set:r},i)=>r(e,i),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return B$(n.key,nM(t.key)),n}ub.value=t=>new tM(t);var rM=ub;class X${constructor(e){var n;Ue(this,"_map",void 0),Ue(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=e==null?void 0:e.mapKey)!==null&&n!==void 0?n:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,n){this._map.set(this._keyMapper(e),n)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var q$={MapCache:X$},Z$=q$.MapCache,K$=Object.freeze({__proto__:null,MapCache:Z$});const{LRUCache:sx}=KL,{MapCache:Q$}=K$,gf={equality:"reference",eviction:"none",maxSize:1/0};function J$({equality:t=gf.equality,eviction:e=gf.eviction,maxSize:n=gf.maxSize}=gf){const r=e8(t);return t8(e,n,r)}function e8(t){switch(t){case"reference":return e=>e;case"value":return e=>yg(e)}throw Be(`Unrecognized equality policy ${t}`)}function t8(t,e,n){switch(t){case"keep-all":return new Q$({mapKey:n});case"lru":return new sx({mapKey:n,maxSize:Ft(e)});case"most-recent":return new sx({mapKey:n,maxSize:1})}throw Be(`Unrecognized eviction policy ${t}`)}var iM=J$;const{setConfigDeletionHandler:n8}=er;function r8(t){var e,n;const r=iM({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var o,s;const a=r.get(i);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:u,...l}=t,c="default"in t?t.default:new Promise(()=>{}),f=rM({...l,key:`${t.key}__${(o=yg(i))!==null&&o!==void 0?o:"void"}`,default:typeof c=="function"?c(i):c,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(i):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(i):(s=t.effects)!==null&&s!==void 0?s:t.effects_UNSTABLE});return r.set(i,f),n8(f.key,()=>{r.delete(i)}),f}}var i8=r8;const{setConfigDeletionHandler:o8}=er;let s8=0;function a8(t){var e,n;const r=iM({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var o;let s;try{s=r.get(i)}catch(h){throw Be(`Problem with cache lookup for selector ${t.key}: ${h.message}`)}if(s!=null)return s;const a=`${t.key}__selectorFamily/${(o=yg(i,{allowFunctions:!0}))!==null&&o!==void 0?o:"void"}/${s8++}`,u=h=>t.get(i)(h),l=t.cachePolicy_UNSTABLE,c=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE;let f;if(t.set!=null){const h=t.set;f=Ya({key:a,get:u,set:(g,m)=>h(i)(g,m),cachePolicy_UNSTABLE:l,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:c})}else f=Ya({key:a,get:u,cachePolicy_UNSTABLE:l,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:c});return r.set(i,f),o8(f.key,()=>{r.delete(i)}),f}}var Do=a8;const u8=Do({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function l8(t){return u8(t)}var c8=l8;const f8=Do({key:"__error",get:t=>()=>{throw Be(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function h8(t){return f8(t)}var d8=h8;function p8(t){return t}var g8=p8;const{loadableWithError:oM,loadableWithPromise:sM,loadableWithValue:aM}=cc;function _g(t,e){const n=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[i,o]of e.entries())try{n[i]=t(o)}catch(s){r[i]=s}return[n,r]}function m8(t){return t!=null&&!Dt(t)}function bg(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function Wv(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,r,i)=>({...n,[r]:e[i]}),{})}function Ma(t,e,n){const r=n.map((i,o)=>i==null?aM(e[o]):Dt(i)?sM(i):oM(i));return Wv(t,r)}function v8(t,e){return e.map((n,r)=>n===void 0?t[r]:n)}const y8=Do({key:"__waitForNone",get:t=>({get:e})=>{const n=bg(t),[r,i]=_g(e,n);return Ma(t,r,i)},dangerouslyAllowMutability:!0}),_8=Do({key:"__waitForAny",get:t=>({get:e})=>{const n=bg(t),[r,i]=_g(e,n);return i.some(o=>!Dt(o))?Ma(t,r,i):new Promise(o=>{for(const[s,a]of i.entries())Dt(a)&&a.then(u=>{r[s]=u,i[s]=void 0,o(Ma(t,r,i))}).catch(u=>{i[s]=u,o(Ma(t,r,i))})})},dangerouslyAllowMutability:!0}),b8=Do({key:"__waitForAll",get:t=>({get:e})=>{const n=bg(t),[r,i]=_g(e,n);if(i.every(s=>s==null))return Wv(t,r);const o=i.find(m8);if(o!=null)throw o;return Promise.all(i).then(s=>Wv(t,v8(r,s)))},dangerouslyAllowMutability:!0}),w8=Do({key:"__waitForAllSettled",get:t=>({get:e})=>{const n=bg(t),[r,i]=_g(e,n);return i.every(o=>!Dt(o))?Ma(t,r,i):Promise.all(i.map((o,s)=>Dt(o)?o.then(a=>{r[s]=a,i[s]=void 0}).catch(a=>{r[s]=void 0,i[s]=a}):null)).then(()=>Ma(t,r,i))},dangerouslyAllowMutability:!0}),E8=Do({key:"__noWait",get:t=>({get:e})=>{try{return Ya.value(aM(e(t)))}catch(n){return Ya.value(Dt(n)?sM(n):oM(n))}},dangerouslyAllowMutability:!0});var S8={waitForNone:y8,waitForAny:_8,waitForAll:b8,waitForAllSettled:w8,noWait:E8};const{RecoilLoadable:x8}=cc,{DefaultValue:T8}=er,{RecoilRoot:P8,useRecoilStoreID:A8}=Yi,{isRecoilValue:C8}=Ga,{retentionZone:R8}=ug,{freshSnapshot:L8}=dg,{useRecoilState:M8,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:O8,useRecoilStateLoadable:k8,useRecoilValue:I8,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:N8,useRecoilValueLoadable:D8,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:F8,useResetRecoilState:U8,useSetRecoilState:z8}=qB,{useGotoRecoilSnapshot:B8,useRecoilSnapshot:V8,useRecoilTransactionObserver:$8}=GL,{useRecoilCallback:j8}=XL,{noWait:G8,waitForAll:W8,waitForAllSettled:H8,waitForAny:Y8,waitForNone:X8}=S8;var lb={DefaultValue:T8,isRecoilValue:C8,RecoilLoadable:x8,RecoilEnv:XR,RecoilRoot:P8,useRecoilStoreID:A8,useRecoilBridgeAcrossReactRoots_UNSTABLE:EV,atom:rM,selector:Ya,atomFamily:i8,selectorFamily:Do,constSelector:c8,errorSelector:d8,readOnlySelector:g8,noWait:G8,waitForNone:X8,waitForAny:Y8,waitForAll:W8,waitForAllSettled:H8,useRecoilValue:I8,useRecoilValueLoadable:D8,useRecoilState:M8,useRecoilStateLoadable:k8,useSetRecoilState:z8,useResetRecoilState:U8,useGetRecoilValueInfo_UNSTABLE:mV,useRecoilRefresher_UNSTABLE:KV,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:F8,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:N8,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:O8,useRecoilCallback:j8,useRecoilTransaction_UNSTABLE:n$,useGotoRecoilSnapshot:B8,useRecoilSnapshot:V8,useRecoilTransactionObserver_UNSTABLE:$8,snapshot_UNSTABLE:L8,useRetain:rb,retentionZone:R8},q8=lb.RecoilRoot,cb=lb.atom,jl=lb.useRecoilState;const Z8="modulepreload",K8=function(t){return"/"+t},ax={},Q8=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=K8(o),o in ax)return;ax[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const f=i[c];if(f.href===o&&(!s||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const l=document.createElement("link");if(l.rel=s?"stylesheet":Z8,s||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),s)return new Promise((c,f)=>{l.addEventListener("load",c),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())},fb=B.exports.createContext(null),J8=t=>{const[e,n]=B.exports.useState({}),r=B.exports.useCallback((o,s="default")=>{n(a=>{if(s==="current")throw new Error("'current' cannot be used as map id");if(a[s])throw new Error(`Multiple maps with the same id: ${s}`);return{...a,[s]:o}})},[]),i=B.exports.useCallback((o="default")=>{n(s=>{if(s[o]){const a={...s};return delete a[o],a}return s})},[]);return ke(fb.Provider,{value:{maps:e,onMapMount:r,onMapUnmount:i},children:t.children})};function ej(){var t;const e=(t=B.exports.useContext(fb))===null||t===void 0?void 0:t.maps,n=B.exports.useContext(mc);return B.exports.useMemo(()=>({...e,current:n==null?void 0:n.map}),[e,n])}function tj(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function ux(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function lx(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const i=t.center;t.center=new i.constructor(n.longitude,n.latitude),r=r||i!==t.center}if("zoom"in n){const i=t.zoom;t.zoom=n.zoom,r=r||i!==t.zoom}if("bearing"in n){const i=t.bearing;t.bearing=n.bearing,r=r||i!==t.bearing}if("pitch"in n){const i=t.pitch;t.pitch=n.pitch,r=r||i!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const nj=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function cx(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{const i=e[r.ref];let o=null;if("interactive"in r&&(o={...r},delete o.interactive),i){o=o||{...r},delete o.ref;for(const s of nj)s in i&&(o[s]=i[s])}return o||r});return{...t,layers:n}}function rj(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===o}function go(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!go(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!e.hasOwnProperty(i)||!go(t[i],e[i]))return!1;return!0}return!1}const fx={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},e0={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},hx={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},ij=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],oj=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Xa{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const o=this.props[hx[i.type]];o&&o(i)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const o=this.props[fx[i.type]];if(o){if(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"){const s=this._hoveredFeatures||this._map.queryRenderedFeatures(i.point,{layers:this.props.interactiveLayerIds});i.features=s}o(i),delete i.features}},this._onCameraEvent=i=>{if(!this._internalUpdate){const o=this.props[e0[i.type]];o&&o(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n);r&&this._createShadowTransform(this._map);const i=this._updateSize(e),o=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(r||i||o&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=Xa.savedMaps.pop();if(!r)return null;const i=r.map,o=i.getContainer();for(n.className=o.className;o.childNodes.length>0;)n.appendChild(o.childNodes[0]);i._container=n,r.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:s}=e;return s&&(s.bounds?i.fitBounds(s.bounds,{...s.fitBoundsOptions,duration:0}):r._updateViewState(s,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),r}_initialize(e){const{props:n}=this,r={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||sj()||null,container:e,style:cx(n.mapStyle)},i=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),n.gl){const l=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=l,n.gl)}const o=new this._MapClass(r);i.padding&&o.setPadding(i.padding),n.cursor&&(o.getCanvas().style.cursor=n.cursor),this._createShadowTransform(o);const s=o._render;o._render=l=>{this._inRender=!0,s.call(o,l),this._inRender=!1};const a=o._renderTaskQueue.run;o._renderTaskQueue.run=l=>{a.call(o._renderTaskQueue,l),this._onBeforeRepaint()},o.on("render",()=>this._onAfterRepaint());const u=o.fire;o.fire=this._fireEvent.bind(this,u),o.on("resize",()=>{this._renderTransform.resize(o.transform.width,o.transform.height)}),o.on("styledata",()=>this._updateStyleComponents(this.props,{})),o.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const l in fx)o.on(l,this._onPointerEvent);for(const l in e0)o.on(l,this._onCameraEvent);for(const l in hx)o.on(l,this._onEvent);this._map=o}recycle(){Xa.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=tj(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const r=this._map,i=this._renderTransform,{zoom:o,pitch:s,bearing:a}=i,u=r.isMoving();u&&(i.cameraElevationReference="sea");const l=lx(i,{...ux(r.transform),...e});if(u&&(i.cameraElevationReference="ground"),l&&n){const c=this._deferredEvents;c.move=!0,c.zoom||(c.zoom=o!==i.zoom),c.rotate||(c.rotate=a!==i.bearing),c.pitch||(c.pitch=s!==i.pitch)}return u||lx(r.transform,e),l}_updateSettings(e,n){const r=this._map;let i=!1;for(const o of ij)o in e&&!go(e[o],n[o])&&(i=!0,r[`set${o[0].toUpperCase()}${o.slice(1)}`](e[o]));return i}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor),e.mapStyle!==n.mapStyle){const r={diff:e.styleDiffing};return"localIdeographFontFamily"in e&&(r.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(cx(e.mapStyle),r),!0}return!1}_updateStyleComponents(e,n){const r=this._map;let i=!1;return r.style.loaded()&&("light"in e&&!go(e.light,n.light)&&(i=!0,r.setLight(e.light)),"fog"in e&&!go(e.fog,n.fog)&&(i=!0,r.setFog(e.fog)),"terrain"in e&&!go(e.terrain,n.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(i=!0,r.setTerrain(e.terrain))),i}_updateHandlers(e,n){const r=this._map;let i=!1;for(const o of oj){const s=e[o];go(s,n[o])||(i=!0,s?r[o].enable(s):r[o].disable())}return i}_updateHover(e){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const o=e.type,s=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0;let a;if(o==="mousemove")try{a=this._map.queryRenderedFeatures(e.point,{layers:r.interactiveLayerIds})}catch{a=[]}else a=[];const u=a.length>0;!u&&s&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,u&&!s&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=o}else this._hoveredFeatures=null}_fireEvent(e,n,r){const i=this._map,o=i.transform,s=typeof n=="string"?n:n.type;return s==="move"&&this._updateViewState(this.props,!1),s in e0&&(typeof n=="object"&&(n.viewState=ux(o)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,n,r),i.transform=o,i):(e.call(i,n,r),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const n=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=n}}}Xa.savedMaps=[];function sj(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||process.env.MapboxAccessToken}catch{}try{t=t||process.env.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const aj=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function uj(t,e){if(!t)return null;const n=t.map,r={getMap:()=>n,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:i=>t.transform.locationPoint(e.LngLat.convert(i)),unproject:i=>t.transform.pointLocation(e.Point.convert(i)),queryTerrainElevation:(i,o)=>{const s=n.transform;n.transform=t.transform;const a=n.queryTerrainElevation(i,o);return n.transform=s,a}};for(const i of lj(n))!(i in r)&&!aj.includes(i)&&(r[i]=n[i].bind(n));return r}function lj(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const cj=typeof document<"u"?B.exports.useLayoutEffect:B.exports.useEffect,fj=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function hj(t,e){for(const n of fj)n in e&&(t[n]=e[n]);e.RTLTextPlugin&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(e.RTLTextPlugin,n=>{n&&console.error(n)},!1)}const mc=B.exports.createContext(null),dj={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:t=>console.error(t.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},wg=B.exports.forwardRef((t,e)=>{const n=B.exports.useContext(fb),[r,i]=B.exports.useState(null),o=B.exports.useRef(),{current:s}=B.exports.useRef({mapLib:null,map:null});B.exports.useEffect(()=>{const u=t.mapLib;let l=!0,c;return Promise.resolve(u||Q8(()=>import("./maplibre-gl.ceb82247.js").then(f=>f.m),[])).then(f=>{if(!!l){if(f.Map||(f=f.default),!f||!f.Map)throw new Error("Invalid mapLib");if(f.supported(t))hj(f,t),t.reuseMaps&&(c=Xa.reuse(t,o.current)),c||(c=new Xa(f.Map,t,o.current)),s.map=uj(c,f),s.mapLib=f,i(c),n==null||n.onMapMount(s.map,t.id);else throw new Error("Map is not supported by this browser")}}).catch(f=>{t.onError({type:"error",target:null,originalEvent:null,error:f})}),()=>{l=!1,c&&(n==null||n.onMapUnmount(t.id),t.reuseMaps?c.recycle():c.destroy())}},[]),cj(()=>{r&&r.setProps(t)}),B.exports.useImperativeHandle(e,()=>s.map,[r]);const a=B.exports.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]);return ke("div",{id:t.id,ref:o,style:a,children:r&&ke(mc.Provider,{value:s,children:t.children})})});wg.displayName="Map";wg.defaultProps=dj;const pj=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Rs(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!pj.test(r)?n[r]=`${i}px`:n[r]=i}}const gj={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function uM(t){const{map:e,mapLib:n}=B.exports.useContext(mc),r=B.exports.useRef({props:t});r.current.props=t;const i=B.exports.useMemo(()=>{let o=!1;B.exports.Children.forEach(t.children,u=>{u&&(o=!0)});const s={...t,element:o?document.createElement("div"):null},a=new n.Marker(s).setLngLat([t.longitude,t.latitude]);return a.getElement().addEventListener("click",u=>{var l,c;(c=(l=r.current.props).onClick)===null||c===void 0||c.call(l,{type:"click",target:a,originalEvent:u})}),a.on("dragstart",u=>{var l,c;const f=u;f.lngLat=i.getLngLat(),(c=(l=r.current.props).onDragStart)===null||c===void 0||c.call(l,f)}),a.on("drag",u=>{var l,c;const f=u;f.lngLat=i.getLngLat(),(c=(l=r.current.props).onDrag)===null||c===void 0||c.call(l,f)}),a.on("dragend",u=>{var l,c;const f=u;f.lngLat=i.getLngLat(),(c=(l=r.current.props).onDragEnd)===null||c===void 0||c.call(l,f)}),a},[]);return B.exports.useEffect(()=>(i.addTo(e.getMap()),()=>{i.remove()}),[]),B.exports.useEffect(()=>{Rs(i.getElement(),t.style)},[t.style]),(i.getLngLat().lng!==t.longitude||i.getLngLat().lat!==t.latitude)&&i.setLngLat([t.longitude,t.latitude]),t.offset&&!rj(i.getOffset(),t.offset)&&i.setOffset(t.offset),i.isDraggable()!==t.draggable&&i.setDraggable(t.draggable),i.getRotation()!==t.rotation&&i.setRotation(t.rotation),i.getRotationAlignment()!==t.rotationAlignment&&i.setRotationAlignment(t.rotationAlignment),i.getPitchAlignment()!==t.pitchAlignment&&i.setPitchAlignment(t.pitchAlignment),i.getPopup()!==t.popup&&i.setPopup(t.popup),ic.exports.createPortal(t.children,i.getElement())}uM.defaultProps=gj;B.exports.memo(uM);function dx(t){return new Set(t?t.trim().split(/\s+/):[])}function mj(t){const{map:e,mapLib:n}=B.exports.useContext(mc),r=B.exports.useMemo(()=>document.createElement("div"),[]),i=B.exports.useRef({props:t});i.current.props=t;const o=B.exports.useMemo(()=>{const s={...t},a=new n.Popup(s).setLngLat([t.longitude,t.latitude]);return a.once("open",u=>{var l,c;(c=(l=i.current.props).onOpen)===null||c===void 0||c.call(l,u)}),a},[]);if(B.exports.useEffect(()=>{const s=a=>{var u,l;(l=(u=i.current.props).onClose)===null||l===void 0||l.call(u,a)};return o.on("close",s),o.setDOMContent(r).addTo(e.getMap()),()=>{o.off("close",s),o.isOpen()&&o.remove()}},[]),B.exports.useEffect(()=>{Rs(o.getElement(),t.style)},[t.style]),o.isOpen()&&((o.getLngLat().lng!==t.longitude||o.getLngLat().lat!==t.latitude)&&o.setLngLat([t.longitude,t.latitude]),t.offset&&!go(o.options.offset,t.offset)&&o.setOffset(t.offset),(o.options.anchor!==t.anchor||o.options.maxWidth!==t.maxWidth)&&(o.options.anchor=t.anchor,o.setMaxWidth(t.maxWidth)),o.options.className!==t.className)){const s=dx(o.options.className),a=dx(t.className);for(const u of s)a.has(u)||o.removeClassName(u);for(const u of a)s.has(u)||o.addClassName(u);o.options.className=t.className}return ic.exports.createPortal(t.children,r)}B.exports.memo(mj);function vc(t,e,n,r){const i=B.exports.useContext(mc),o=B.exports.useMemo(()=>t(i),[]);return B.exports.useEffect(()=>{const s=r||n||e,a=typeof e=="function"&&typeof n=="function"?e:null,u=typeof n=="function"?n:typeof e=="function"?e:null,{map:l}=i;return l.hasControl(o)||(l.addControl(o,s==null?void 0:s.position),a&&a(i)),()=>{u&&u(i),l.hasControl(o)&&l.removeControl(o)}},[]),o}function vj(t){const e=vc(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return B.exports.useEffect(()=>{Rs(e._container,t.style)},[t.style]),null}B.exports.memo(vj);function yj(t){const e=vc(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return B.exports.useEffect(()=>{Rs(e._controlContainer,t.style)},[t.style]),null}B.exports.memo(yj);const lM=B.exports.forwardRef((t,e)=>{const n=B.exports.useRef({props:t}),r=vc(({mapLib:i})=>{const o=new i.GeolocateControl(t),s=o._setupUI;return o._setupUI=a=>{o._container.hasChildNodes()||s(a)},o.on("geolocate",a=>{var u,l;(l=(u=n.current.props).onGeolocate)===null||l===void 0||l.call(u,a)}),o.on("error",a=>{var u,l;(l=(u=n.current.props).onError)===null||l===void 0||l.call(u,a)}),o.on("outofmaxbounds",a=>{var u,l;(l=(u=n.current.props).onOutOfMaxBounds)===null||l===void 0||l.call(u,a)}),o.on("trackuserlocationstart",a=>{var u,l;(l=(u=n.current.props).onTrackUserLocationStart)===null||l===void 0||l.call(u,a)}),o.on("trackuserlocationend",a=>{var u,l;(l=(u=n.current.props).onTrackUserLocationEnd)===null||l===void 0||l.call(u,a)}),o},{position:t.position});return n.current.props=t,B.exports.useImperativeHandle(e,()=>({trigger:()=>r.trigger()}),[]),B.exports.useEffect(()=>{Rs(r._container,t.style)},[t.style]),null});lM.displayName="GeolocateControl";B.exports.memo(lM);function _j(t){const e=vc(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return B.exports.useEffect(()=>{Rs(e._container,t.style)},[t.style]),null}B.exports.memo(_j);const bj={unit:"metric",maxWidth:100};function cM(t){const e=vc(({mapLib:n})=>new n.ScaleControl(t),{position:t.position});return(e.options.unit!==t.unit||e.options.maxWidth!==t.maxWidth)&&(e.options.maxWidth=t.maxWidth,e.setUnit(t.unit)),B.exports.useEffect(()=>{Rs(e._container,t.style)},[t.style]),null}cM.defaultProps=bj;B.exports.memo(cM);var Er;(function(t){t.MOBILE="MOBILE",t.DESKTOP="DESKTOP"})(Er||(Er={}));const fM="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,hM=B.exports.createContext({size:Er.DESKTOP,isTouchDevice:fM}),wj=t=>{const[e,n]=B.exports.useState({size:window.innerWidth>t.breakPoint?Er.DESKTOP:Er.MOBILE,isTouchDevice:fM});return B.exports.useLayoutEffect(()=>{const r=i=>{const o=window.innerWidth;o>t.breakPoint&&e.size===Er.MOBILE?n({...e,size:Er.DESKTOP}):o<t.breakPoint&&e.size===Er.DESKTOP&&n({...e,size:Er.MOBILE})};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[t.breakPoint,e]),ke(hM.Provider,{value:e,children:t.children})},dM=()=>B.exports.useContext(hM),Ele=t=>ke(q8,{children:ke(wj,{breakPoint:t.breakPoint||540,children:ke(J8,{children:t.children})})});const Ej=B.exports.createContext({}),pM=()=>B.exports.useContext(Ej);var Cd;(function(t){t.PENDING="PENDING",t.OK="OK",t.FAILED="FAILED"})(Cd||(Cd={}));const Sj=cb({key:"search",default:{args:{},status:Cd.OK}}),gM=()=>{const[t,e]=jl(Sj),n=(u={})=>e({args:u,status:Cd.PENDING,result:t.result});return{changeSearchQuery:u=>n({...t.args,query:u}),clearSearchQuery:()=>n({...t.args,query:void 0}),refreshSearch:()=>n({...t.args}),search:t,setActiveAggregation:u=>e({args:{...t.args,activeAggregation:u},status:t.status,result:t.result}),setFilter:u=>{const l=[...(t.args.filters||[]).filter(c=>c.name!==u.name),u];n({...t.args,filters:l})},setSearchState:e}};var xj=function(e){Pj(e);var n=Tj(e);return e.on=n.on,e.off=n.off,e.fire=n.fire,e};function Tj(t){var e=Object.create(null);return{on:function(n,r,i){if(typeof r!="function")throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:r,ctx:i}),t},off:function(n,r){var i=typeof n>"u";if(i)return e=Object.create(null),t;if(e[n]){var o=typeof r!="function";if(o)delete e[n];else for(var s=e[n],a=0;a<s.length;++a)s[a].callback===r&&s.splice(a,1)}return t},fire:function(n){var r=e[n];if(!r)return t;var i;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var o=0;o<r.length;++o){var s=r[o];s.callback.apply(s.ctx,i)}return t}}}function Pj(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}var Sle=Cj,Aj=xj;function Cj(t){if(t=t||{},"uniqueLinkId"in t&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),t.multigraph=t.uniqueLinkId),t.multigraph===void 0&&(t.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,n=new Map,r={},i=0,o=t.multigraph?T:w,s=[],a=De,u=De,l=De,c=De,f={version:20,addNode:m,addLink:y,removeLink:F,removeNode:_,getNode:S,getNodeCount:R,getLinkCount:C,getEdgeCount:C,getLinksCount:C,getNodesCount:R,getLinks:D,forEachNode:ve,forEachLinkedNode:ue,forEachLink:pe,beginUpdate:l,endUpdate:c,clear:H,hasLink:j,hasNode:S,getLink:j};return Aj(f),h(),f;function h(){var G=f.on;f.on=X;function X(){return f.beginUpdate=l=He,f.endUpdate=c=ae,a=d,u=g,f.on=G,G.apply(f,arguments)}}function d(G,X){s.push({link:G,changeType:X})}function g(G,X){s.push({node:G,changeType:X})}function m(G,X){if(G===void 0)throw new Error("Invalid node identifier");l();var O=S(G);return O?(O.data=X,u(O,"update")):(O=new Rj(G,X),u(O,"add")),e.set(G,O),c(),O}function S(G){return e.get(G)}function _(G){var X=S(G);if(!X)return!1;l();var O=X.links;return O&&(O.forEach(W),X.links=null),e.delete(G),u(X,"remove"),c(),!0}function y(G,X,O){l();var q=S(G)||m(G),Q=S(X)||m(X),de=o(G,X,O),le=n.has(de.id);return n.set(de.id,de),px(q,de),G!==X&&px(Q,de),a(de,le?"update":"add"),c(),de}function w(G,X,O){var q=mf(G,X),Q=n.get(q);return Q?(Q.data=O,Q):new gx(G,X,O,q)}function T(G,X,O){var q=mf(G,X),Q=r.hasOwnProperty(q);if(Q||j(G,X)){Q||(r[q]=0);var de="@"+ ++r[q];q=mf(G+de,X+de)}return new gx(G,X,O,q)}function R(){return e.size}function C(){return n.size}function D(G){var X=S(G);return X?X.links:null}function F(G,X){return X!==void 0&&(G=j(G,X)),W(G)}function W(G){if(!G||!n.get(G.id))return!1;l(),n.delete(G.id);var X=S(G.fromId),O=S(G.toId);return X&&X.links.delete(G),O&&O.links.delete(G),a(G,"remove"),c(),!0}function j(G,X){if(!(G===void 0||X===void 0))return n.get(mf(G,X))}function H(){l(),ve(function(G){_(G.id)}),c()}function pe(G){if(typeof G=="function")for(var X=n.values(),O=X.next();!O.done;){if(G(O.value))return!0;O=X.next()}}function ue(G,X,O){var q=S(G);if(q&&q.links&&typeof X=="function")return O?Ce(q.links,G,X):se(q.links,G,X)}function se(G,X,O){for(var q,Q=G.values(),de=Q.next();!de.done;){var le=de.value,_e=le.fromId===X?le.toId:le.fromId;if(q=O(e.get(_e),le),q)return!0;de=Q.next()}}function Ce(G,X,O){for(var q,Q=G.values(),de=Q.next();!de.done;){var le=de.value;if(le.fromId===X&&(q=O(e.get(le.toId),le),q))return!0;de=Q.next()}}function De(){}function He(){i+=1}function ae(){i-=1,i===0&&s.length>0&&(f.fire("changed",s),s.length=0)}function ve(G){if(typeof G!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+G);for(var X=e.values(),O=X.next();!O.done;){if(G(O.value))return!0;O=X.next()}}}function Rj(t,e){this.id=t,this.links=null,this.data=e}function px(t,e){t.links?t.links.add(e):t.links=new Set([e])}function gx(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function mf(t,e){return t.toString()+"\u{1F449} "+e.toString()}function Vi(t){return Array.isArray?Array.isArray(t):yM(t)==="[object Array]"}const Lj=1/0;function Mj(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-Lj?"-0":e}function Oj(t){return t==null?"":Mj(t)}function di(t){return typeof t=="string"}function mM(t){return typeof t=="number"}function kj(t){return t===!0||t===!1||Ij(t)&&yM(t)=="[object Boolean]"}function vM(t){return typeof t=="object"}function Ij(t){return vM(t)&&t!==null}function lr(t){return t!=null}function t0(t){return!t.trim().length}function yM(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Nj="Incorrect 'index' type",Dj=t=>`Invalid value for key ${t}`,Fj=t=>`Pattern length exceeds max of ${t}.`,Uj=t=>`Missing ${t} property in key`,zj=t=>`Property 'weight' in key '${t}' must be a positive integer`,mx=Object.prototype.hasOwnProperty;class Bj{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let i=_M(r);n+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function _M(t){let e=null,n=null,r=null,i=1,o=null;if(di(t)||Vi(t))r=t,e=vx(t),n=Hv(t);else{if(!mx.call(t,"name"))throw new Error(Uj("name"));const s=t.name;if(r=s,mx.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(zj(s));e=vx(s),n=Hv(s),o=t.getFn}return{path:e,id:n,weight:i,src:r,getFn:o}}function vx(t){return Vi(t)?t:t.split(".")}function Hv(t){return Vi(t)?t.join("."):t}function Vj(t,e){let n=[],r=!1;const i=(o,s,a)=>{if(!!lr(o))if(!s[a])n.push(o);else{let u=s[a];const l=o[u];if(!lr(l))return;if(a===s.length-1&&(di(l)||mM(l)||kj(l)))n.push(Oj(l));else if(Vi(l)){r=!0;for(let c=0,f=l.length;c<f;c+=1)i(l[c],s,a+1)}else s.length&&i(l,s,a+1)}};return i(t,di(e)?e.split("."):e,0),r?n:n[0]}const $j={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},jj={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Gj={location:0,threshold:.6,distance:100},Wj={useExtendedSearch:!1,getFn:Vj,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Fe={...jj,...$j,...Gj,...Wj};const Hj=/[^ ]+/g;function Yj(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(i){const o=i.match(Hj).length;if(n.has(o))return n.get(o);const s=1/Math.pow(o,.5*t),a=parseFloat(Math.round(s*r)/r);return n.set(o,a),a},clear(){n.clear()}}}class hb{constructor({getFn:e=Fe.getFn,fieldNormWeight:n=Fe.fieldNormWeight}={}){this.norm=Yj(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,di(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();di(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!lr(e)||t0(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((i,o)=>{let s=i.getFn?i.getFn(e):this.getFn(e,i.path);if(!!lr(s)){if(Vi(s)){let a=[];const u=[{nestedArrIndex:-1,value:s}];for(;u.length;){const{nestedArrIndex:l,value:c}=u.pop();if(!!lr(c))if(di(c)&&!t0(c)){let f={v:c,i:l,n:this.norm.get(c)};a.push(f)}else Vi(c)&&c.forEach((f,h)=>{u.push({nestedArrIndex:h,value:f})})}r.$[o]=a}else if(di(s)&&!t0(s)){let a={v:s,n:this.norm.get(s)};r.$[o]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function bM(t,e,{getFn:n=Fe.getFn,fieldNormWeight:r=Fe.fieldNormWeight}={}){const i=new hb({getFn:n,fieldNormWeight:r});return i.setKeys(t.map(_M)),i.setSources(e),i.create(),i}function Xj(t,{getFn:e=Fe.getFn,fieldNormWeight:n=Fe.fieldNormWeight}={}){const{keys:r,records:i}=t,o=new hb({getFn:e,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(i),o}function vf(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Fe.distance,ignoreLocation:o=Fe.ignoreLocation}={}){const s=e/t.length;if(o)return s;const a=Math.abs(r-n);return i?s+a/i:a?1:s}function qj(t=[],e=Fe.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let s=t.length;o<s;o+=1){let a=t[o];a&&r===-1?r=o:!a&&r!==-1&&(i=o-1,i-r+1>=e&&n.push([r,i]),r=-1)}return t[o-1]&&o-r>=e&&n.push([r,o-1]),n}const Jo=32;function Zj(t,e,n,{location:r=Fe.location,distance:i=Fe.distance,threshold:o=Fe.threshold,findAllMatches:s=Fe.findAllMatches,minMatchCharLength:a=Fe.minMatchCharLength,includeMatches:u=Fe.includeMatches,ignoreLocation:l=Fe.ignoreLocation}={}){if(e.length>Jo)throw new Error(Fj(Jo));const c=e.length,f=t.length,h=Math.max(0,Math.min(r,f));let d=o,g=h;const m=a>1||u,S=m?Array(f):[];let _;for(;(_=t.indexOf(e,g))>-1;){let D=vf(e,{currentLocation:_,expectedLocation:h,distance:i,ignoreLocation:l});if(d=Math.min(D,d),g=_+c,m){let F=0;for(;F<c;)S[_+F]=1,F+=1}}g=-1;let y=[],w=1,T=c+f;const R=1<<c-1;for(let D=0;D<c;D+=1){let F=0,W=T;for(;F<W;)vf(e,{errors:D,currentLocation:h+W,expectedLocation:h,distance:i,ignoreLocation:l})<=d?F=W:T=W,W=Math.floor((T-F)/2+F);T=W;let j=Math.max(1,h-W+1),H=s?f:Math.min(h+W,f)+c,pe=Array(H+2);pe[H+1]=(1<<D)-1;for(let se=H;se>=j;se-=1){let Ce=se-1,De=n[t.charAt(Ce)];if(m&&(S[Ce]=+!!De),pe[se]=(pe[se+1]<<1|1)&De,D&&(pe[se]|=(y[se+1]|y[se])<<1|1|y[se+1]),pe[se]&R&&(w=vf(e,{errors:D,currentLocation:Ce,expectedLocation:h,distance:i,ignoreLocation:l}),w<=d)){if(d=w,g=Ce,g<=h)break;j=Math.max(1,2*h-g)}}if(vf(e,{errors:D+1,currentLocation:h,expectedLocation:h,distance:i,ignoreLocation:l})>d)break;y=pe}const C={isMatch:g>=0,score:Math.max(.001,w)};if(m){const D=qj(S,a);D.length?u&&(C.indices=D):C.isMatch=!1}return C}function Kj(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}class wM{constructor(e,{location:n=Fe.location,threshold:r=Fe.threshold,distance:i=Fe.distance,includeMatches:o=Fe.includeMatches,findAllMatches:s=Fe.findAllMatches,minMatchCharLength:a=Fe.minMatchCharLength,isCaseSensitive:u=Fe.isCaseSensitive,ignoreLocation:l=Fe.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:l},this.pattern=u?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(h,d)=>{this.chunks.push({pattern:h,alphabet:Kj(h),startIndex:d})},f=this.pattern.length;if(f>Jo){let h=0;const d=f%Jo,g=f-d;for(;h<g;)c(this.pattern.substr(h,Jo),h),h+=Jo;if(d){const m=f-Jo;c(this.pattern.substr(m),m)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let g={isMatch:!0,score:0};return r&&(g.indices=[[0,e.length-1]]),g}const{location:i,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:u,ignoreLocation:l}=this.options;let c=[],f=0,h=!1;this.chunks.forEach(({pattern:g,alphabet:m,startIndex:S})=>{const{isMatch:_,score:y,indices:w}=Zj(e,g,m,{location:i+S,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:u,includeMatches:r,ignoreLocation:l});_&&(h=!0),f+=y,_&&w&&(c=[...c,...w])});let d={isMatch:h,score:h?f/this.chunks.length:1};return h&&r&&(d.indices=c),d}}class Fo{constructor(e){this.pattern=e}static isMultiMatch(e){return yx(e,this.multiRegex)}static isSingleMatch(e){return yx(e,this.singleRegex)}search(){}}function yx(t,e){const n=t.match(e);return n?n[1]:null}class Qj extends Fo{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Jj extends Fo{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class e7 extends Fo{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class t7 extends Fo{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class n7 extends Fo{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class r7 extends Fo{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class EM extends Fo{constructor(e,{location:n=Fe.location,threshold:r=Fe.threshold,distance:i=Fe.distance,includeMatches:o=Fe.includeMatches,findAllMatches:s=Fe.findAllMatches,minMatchCharLength:a=Fe.minMatchCharLength,isCaseSensitive:u=Fe.isCaseSensitive,ignoreLocation:l=Fe.ignoreLocation}={}){super(e),this._bitapSearch=new wM(e,{location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class SM extends Fo{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const i=[],o=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+o,i.push([r,n-1]);const s=!!i.length;return{isMatch:s,score:s?0:1,indices:i}}}const Yv=[Qj,SM,e7,t7,r7,n7,Jj,EM],_x=Yv.length,i7=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,o7="|";function s7(t,e={}){return t.split(o7).map(n=>{let r=n.trim().split(i7).filter(o=>o&&!!o.trim()),i=[];for(let o=0,s=r.length;o<s;o+=1){const a=r[o];let u=!1,l=-1;for(;!u&&++l<_x;){const c=Yv[l];let f=c.isMultiMatch(a);f&&(i.push(new c(f,e)),u=!0)}if(!u)for(l=-1;++l<_x;){const c=Yv[l];let f=c.isSingleMatch(a);if(f){i.push(new c(f,e));break}}}return i})}const a7=new Set([EM.type,SM.type]);class u7{constructor(e,{isCaseSensitive:n=Fe.isCaseSensitive,includeMatches:r=Fe.includeMatches,minMatchCharLength:i=Fe.minMatchCharLength,ignoreLocation:o=Fe.ignoreLocation,findAllMatches:s=Fe.findAllMatches,location:a=Fe.location,threshold:u=Fe.threshold,distance:l=Fe.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:s,ignoreLocation:o,location:a,threshold:u,distance:l},this.pattern=n?e:e.toLowerCase(),this.query=s7(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let o=0,s=[],a=0;for(let u=0,l=n.length;u<l;u+=1){const c=n[u];s.length=0,o=0;for(let f=0,h=c.length;f<h;f+=1){const d=c[f],{isMatch:g,indices:m,score:S}=d.search(e);if(g){if(o+=1,a+=S,r){const _=d.constructor.type;a7.has(_)?s=[...s,...m]:s.push(m)}}else{a=0,o=0,s.length=0;break}}if(o){let f={isMatch:!0,score:a/o};return r&&(f.indices=s),f}}return{isMatch:!1,score:1}}}const Xv=[];function l7(...t){Xv.push(...t)}function qv(t,e){for(let n=0,r=Xv.length;n<r;n+=1){let i=Xv[n];if(i.condition(t,e))return new i(t,e)}return new wM(t,e)}const Rd={AND:"$and",OR:"$or"},Zv={PATH:"$path",PATTERN:"$val"},Kv=t=>!!(t[Rd.AND]||t[Rd.OR]),c7=t=>!!t[Zv.PATH],f7=t=>!Vi(t)&&vM(t)&&!Kv(t),bx=t=>({[Rd.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function xM(t,e,{auto:n=!0}={}){const r=i=>{let o=Object.keys(i);const s=c7(i);if(!s&&o.length>1&&!Kv(i))return r(bx(i));if(f7(i)){const u=s?i[Zv.PATH]:o[0],l=s?i[Zv.PATTERN]:i[u];if(!di(l))throw new Error(Dj(u));const c={keyId:Hv(u),pattern:l};return n&&(c.searcher=qv(l,e)),c}let a={children:[],operator:o[0]};return o.forEach(u=>{const l=i[u];Vi(l)&&l.forEach(c=>{a.children.push(r(c))})}),a};return Kv(t)||(t=bx(t)),r(t)}function h7(t,{ignoreFieldNorm:e=Fe.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:o,score:s})=>{const a=i?i.weight:null;r*=Math.pow(s===0&&a?Number.EPSILON:s,(a||1)*(e?1:o))}),n.score=r})}function d7(t,e){const n=t.matches;e.matches=[],lr(n)&&n.forEach(r=>{if(!lr(r.indices)||!r.indices.length)return;const{indices:i,value:o}=r;let s={indices:i,value:o};r.key&&(s.key=r.key.src),r.idx>-1&&(s.refIndex=r.idx),e.matches.push(s)})}function p7(t,e){e.score=t.score}function g7(t,e,{includeMatches:n=Fe.includeMatches,includeScore:r=Fe.includeScore}={}){const i=[];return n&&i.push(d7),r&&i.push(p7),t.map(o=>{const{idx:s}=o,a={item:e[s],refIndex:s};return i.length&&i.forEach(u=>{u(o,a)}),a})}class yc{constructor(e,n={},r){this.options={...Fe,...n},this.options.useExtendedSearch,this._keyStore=new Bj(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof hb))throw new Error(Nj);this._myIndex=n||bM(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){!lr(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const o=this._docs[r];e(o,r)&&(this.removeAt(r),r-=1,i-=1,n.push(o))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:o,sortFn:s,ignoreFieldNorm:a}=this.options;let u=di(e)?di(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return h7(u,{ignoreFieldNorm:a}),o&&u.sort(s),mM(n)&&n>-1&&(u=u.slice(0,n)),g7(u,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){const n=qv(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:o,i:s,n:a})=>{if(!lr(o))return;const{isMatch:u,score:l,indices:c}=n.searchIn(o);u&&i.push({item:o,idx:s,matches:[{score:l,value:o,norm:a,indices:c}]})}),i}_searchLogical(e){const n=xM(e,this.options),r=(a,u,l)=>{if(!a.children){const{keyId:f,searcher:h}=a,d=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(u,f),searcher:h});return d&&d.length?[{idx:l,item:u,matches:d}]:[]}const c=[];for(let f=0,h=a.children.length;f<h;f+=1){const d=a.children[f],g=r(d,u,l);if(g.length)c.push(...g);else if(a.operator===Rd.AND)return[]}return c},i=this._myIndex.records,o={},s=[];return i.forEach(({$:a,i:u})=>{if(lr(a)){let l=r(n,a,u);l.length&&(o[u]||(o[u]={idx:u,item:a,matches:[]},s.push(o[u])),l.forEach(({matches:c})=>{o[u].matches.push(...c)}))}}),s}_searchObjectList(e){const n=qv(e,this.options),{keys:r,records:i}=this._myIndex,o=[];return i.forEach(({$:s,i:a})=>{if(!lr(s))return;let u=[];r.forEach((l,c)=>{u.push(...this._findMatches({key:l,value:s[c],searcher:n}))}),u.length&&o.push({idx:a,item:s,matches:u})}),o}_findMatches({key:e,value:n,searcher:r}){if(!lr(n))return[];let i=[];if(Vi(n))n.forEach(({v:o,i:s,n:a})=>{if(!lr(o))return;const{isMatch:u,score:l,indices:c}=r.searchIn(o);u&&i.push({score:l,key:e,value:o,idx:s,norm:a,indices:c})});else{const{v:o,n:s}=n,{isMatch:a,score:u,indices:l}=r.searchIn(o);a&&i.push({score:u,key:e,value:o,norm:s,indices:l})}return i}}yc.version="6.6.2";yc.createIndex=bM;yc.parseIndex=Xj;yc.config=Fe;yc.parseQuery=xM;l7(u7);function m7(t,e,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function v7(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!wx(t[0])||!wx(t[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:t};return m7(r,e,n)}function wx(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function TM(t,e,n){if(t!==null)for(var r,i,o,s,a,u,l,c=0,f=0,h,d=t.type,g=d==="FeatureCollection",m=d==="Feature",S=g?t.features.length:1,_=0;_<S;_++){l=g?t.features[_].geometry:m?t.geometry:t,h=l?l.type==="GeometryCollection":!1,a=h?l.geometries.length:1;for(var y=0;y<a;y++){var w=0,T=0;if(s=h?l.geometries[y]:l,s!==null){u=s.coordinates;var R=s.type;switch(c=n&&(R==="Polygon"||R==="MultiPolygon")?1:0,R){case null:break;case"Point":if(e(u,f,_,w,T)===!1)return!1;f++,w++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(e(u[r],f,_,w,T)===!1)return!1;f++,R==="MultiPoint"&&w++}R==="LineString"&&w++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(e(u[r][i],f,_,w,T)===!1)return!1;f++}R==="MultiLineString"&&w++,R==="Polygon"&&T++}R==="Polygon"&&w++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(T=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(e(u[r][i][o],f,_,w,T)===!1)return!1;f++}T++}w++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(TM(s.geometries[r],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var PM={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ex=Rt.createContext&&Rt.createContext(PM),Co=globalThis&&globalThis.__assign||function(){return Co=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Co.apply(this,arguments)},y7=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function AM(t){return t&&t.map(function(e,n){return Rt.createElement(e.tag,Co({key:n},e.attr),AM(e.child))})}function _c(t){return function(e){return ke(_7,{...Co({attr:Co({},t.attr)},e),children:AM(t.child)})}}function _7(t){var e=function(n){var r=t.attr,i=t.size,o=t.title,s=y7(t,["attr","size","title"]),a=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),vs("svg",{...Co({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:u,style:Co(Co({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),children:[o&&ke("title",{children:o}),t.children]})};return Ex!==void 0?ke(Ex.Consumer,{children:function(n){return e(n)}}):e(PM)}var b7={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(t,e){(function(n,r){t.exports=r()})(xD,function(){for(var n=function(p,v,E){return v===void 0&&(v=0),E===void 0&&(E=1),p<v?v:p>E?E:p},r=n,i=function(p){p._clipped=!1,p._unclipped=p.slice(0);for(var v=0;v<=3;v++)v<3?((p[v]<0||p[v]>255)&&(p._clipped=!0),p[v]=r(p[v],0,255)):v===3&&(p[v]=r(p[v],0,1));return p},o={},s=0,a=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];s<a.length;s+=1){var u=a[s];o["[object "+u+"]"]=u.toLowerCase()}var l=function(p){return o[Object.prototype.toString.call(p)]||"object"},c=l,f=function(p,v){return v===void 0&&(v=null),p.length>=3?Array.prototype.slice.call(p):c(p[0])=="object"&&v?v.split("").filter(function(E){return p[0][E]!==void 0}).map(function(E){return p[0][E]}):p[0]},h=l,d=function(p){if(p.length<2)return null;var v=p.length-1;return h(p[v])=="string"?p[v].toLowerCase():null},g=Math.PI,m={clip_rgb:i,limit:n,type:l,unpack:f,last:d,PI:g,TWOPI:g*2,PITHIRD:g/3,DEG2RAD:g/180,RAD2DEG:180/g},S={format:{},autodetect:[]},_=m.last,y=m.clip_rgb,w=m.type,T=S,R=function(){for(var v=[],E=arguments.length;E--;)v[E]=arguments[E];var A=this;if(w(v[0])==="object"&&v[0].constructor&&v[0].constructor===this.constructor)return v[0];var k=_(v),N=!1;if(!k){N=!0,T.sorted||(T.autodetect=T.autodetect.sort(function(ee,ge){return ge.p-ee.p}),T.sorted=!0);for(var L=0,U=T.autodetect;L<U.length;L+=1){var V=U[L];if(k=V.test.apply(V,v),k)break}}if(T.format[k]){var Y=T.format[k].apply(null,N?v:v.slice(0,-1));A._rgb=y(Y)}else throw new Error("unknown format: "+v);A._rgb.length===3&&A._rgb.push(1)};R.prototype.toString=function(){return w(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var C=R,D=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(D.Color,[null].concat(p)))};D.Color=C,D.version="2.4.2";var F=D,W=m.unpack,j=Math.max,H=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=W(p,"rgb"),A=E[0],k=E[1],N=E[2];A=A/255,k=k/255,N=N/255;var L=1-j(A,j(k,N)),U=L<1?1/(1-L):0,V=(1-A-L)*U,Y=(1-k-L)*U,ee=(1-N-L)*U;return[V,Y,ee,L]},pe=H,ue=m.unpack,se=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=ue(p,"cmyk");var E=p[0],A=p[1],k=p[2],N=p[3],L=p.length>4?p[4]:1;return N===1?[0,0,0,L]:[E>=1?0:255*(1-E)*(1-N),A>=1?0:255*(1-A)*(1-N),k>=1?0:255*(1-k)*(1-N),L]},Ce=se,De=F,He=C,ae=S,ve=m.unpack,G=m.type,X=pe;He.prototype.cmyk=function(){return X(this._rgb)},De.cmyk=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(He,[null].concat(p,["cmyk"])))},ae.format.cmyk=Ce,ae.autodetect.push({p:2,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=ve(p,"cmyk"),G(p)==="array"&&p.length===4)return"cmyk"}});var O=m.unpack,q=m.last,Q=function(p){return Math.round(p*100)/100},de=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=O(p,"hsla"),A=q(p)||"lsa";return E[0]=Q(E[0]||0),E[1]=Q(E[1]*100)+"%",E[2]=Q(E[2]*100)+"%",A==="hsla"||E.length>3&&E[3]<1?(E[3]=E.length>3?E[3]:1,A="hsla"):E.length=3,A+"("+E.join(",")+")"},le=de,_e=m.unpack,be=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=_e(p,"rgba");var E=p[0],A=p[1],k=p[2];E/=255,A/=255,k/=255;var N=Math.min(E,A,k),L=Math.max(E,A,k),U=(L+N)/2,V,Y;return L===N?(V=0,Y=Number.NaN):V=U<.5?(L-N)/(L+N):(L-N)/(2-L-N),E==L?Y=(A-k)/(L-N):A==L?Y=2+(k-E)/(L-N):k==L&&(Y=4+(E-A)/(L-N)),Y*=60,Y<0&&(Y+=360),p.length>3&&p[3]!==void 0?[Y,V,U,p[3]]:[Y,V,U]},J=be,Pe=m.unpack,rt=m.last,ze=le,Ke=J,gt=Math.round,Qt=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=Pe(p,"rgba"),A=rt(p)||"rgb";return A.substr(0,3)=="hsl"?ze(Ke(E),A):(E[0]=gt(E[0]),E[1]=gt(E[1]),E[2]=gt(E[2]),(A==="rgba"||E.length>3&&E[3]<1)&&(E[3]=E.length>3?E[3]:1,A="rgba"),A+"("+E.slice(0,A==="rgb"?3:4).join(",")+")")},wt=Qt,xt=m.unpack,Z=Math.round,re=function(){for(var p,v=[],E=arguments.length;E--;)v[E]=arguments[E];v=xt(v,"hsl");var A=v[0],k=v[1],N=v[2],L,U,V;if(k===0)L=U=V=N*255;else{var Y=[0,0,0],ee=[0,0,0],ge=N<.5?N*(1+k):N+k-N*k,ne=2*N-ge,xe=A/360;Y[0]=xe+1/3,Y[1]=xe,Y[2]=xe-1/3;for(var Ee=0;Ee<3;Ee++)Y[Ee]<0&&(Y[Ee]+=1),Y[Ee]>1&&(Y[Ee]-=1),6*Y[Ee]<1?ee[Ee]=ne+(ge-ne)*6*Y[Ee]:2*Y[Ee]<1?ee[Ee]=ge:3*Y[Ee]<2?ee[Ee]=ne+(ge-ne)*(2/3-Y[Ee])*6:ee[Ee]=ne;p=[Z(ee[0]*255),Z(ee[1]*255),Z(ee[2]*255)],L=p[0],U=p[1],V=p[2]}return v.length>3?[L,U,V,v[3]]:[L,U,V,1]},fe=re,Te=fe,Ne=S,Ye=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Xe=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,et=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ut=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,it=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ct=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,It=Math.round,$n=function(p){p=p.toLowerCase().trim();var v;if(Ne.format.named)try{return Ne.format.named(p)}catch{}if(v=p.match(Ye)){for(var E=v.slice(1,4),A=0;A<3;A++)E[A]=+E[A];return E[3]=1,E}if(v=p.match(Xe)){for(var k=v.slice(1,5),N=0;N<4;N++)k[N]=+k[N];return k}if(v=p.match(et)){for(var L=v.slice(1,4),U=0;U<3;U++)L[U]=It(L[U]*2.55);return L[3]=1,L}if(v=p.match(ut)){for(var V=v.slice(1,5),Y=0;Y<3;Y++)V[Y]=It(V[Y]*2.55);return V[3]=+V[3],V}if(v=p.match(it)){var ee=v.slice(1,4);ee[1]*=.01,ee[2]*=.01;var ge=Te(ee);return ge[3]=1,ge}if(v=p.match(ct)){var ne=v.slice(1,4);ne[1]*=.01,ne[2]*=.01;var xe=Te(ne);return xe[3]=+v[4],xe}};$n.test=function(p){return Ye.test(p)||Xe.test(p)||et.test(p)||ut.test(p)||it.test(p)||ct.test(p)};var ln=$n,Sn=F,Jr=C,Lr=S,z=m.type,I=wt,K=ln;Jr.prototype.css=function(p){return I(this._rgb,p)},Sn.css=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Jr,[null].concat(p,["css"])))},Lr.format.css=K,Lr.autodetect.push({p:5,test:function(p){for(var v=[],E=arguments.length-1;E-- >0;)v[E]=arguments[E+1];if(!v.length&&z(p)==="string"&&K.test(p))return"css"}});var ce=C,he=F,ye=S,Le=m.unpack;ye.format.gl=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=Le(p,"rgba");return E[0]*=255,E[1]*=255,E[2]*=255,E},he.gl=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(ce,[null].concat(p,["gl"])))},ce.prototype.gl=function(){var p=this._rgb;return[p[0]/255,p[1]/255,p[2]/255,p[3]]};var Me=m.unpack,Re=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=Me(p,"rgb"),A=E[0],k=E[1],N=E[2],L=Math.min(A,k,N),U=Math.max(A,k,N),V=U-L,Y=V*100/255,ee=L/(255-V)*100,ge;return V===0?ge=Number.NaN:(A===U&&(ge=(k-N)/V),k===U&&(ge=2+(N-A)/V),N===U&&(ge=4+(A-k)/V),ge*=60,ge<0&&(ge+=360)),[ge,Y,ee]},Oe=Re,qe=m.unpack,Yt=Math.floor,Lt=function(){for(var p,v,E,A,k,N,L=[],U=arguments.length;U--;)L[U]=arguments[U];L=qe(L,"hcg");var V=L[0],Y=L[1],ee=L[2],ge,ne,xe;ee=ee*255;var Ee=Y*255;if(Y===0)ge=ne=xe=ee;else{V===360&&(V=0),V>360&&(V-=360),V<0&&(V+=360),V/=60;var Ge=Yt(V),Qe=V-Ge,ot=ee*(1-Y),ft=ot+Ee*(1-Qe),mn=ot+Ee*Qe,fn=ot+Ee;switch(Ge){case 0:p=[fn,mn,ot],ge=p[0],ne=p[1],xe=p[2];break;case 1:v=[ft,fn,ot],ge=v[0],ne=v[1],xe=v[2];break;case 2:E=[ot,fn,mn],ge=E[0],ne=E[1],xe=E[2];break;case 3:A=[ot,ft,fn],ge=A[0],ne=A[1],xe=A[2];break;case 4:k=[mn,ot,fn],ge=k[0],ne=k[1],xe=k[2];break;case 5:N=[fn,ot,ft],ge=N[0],ne=N[1],xe=N[2];break}}return[ge,ne,xe,L.length>3?L[3]:1]},xn=Lt,In=m.unpack,ei=m.type,Mr=F,ti=C,ni=S,kc=Oe;ti.prototype.hcg=function(){return kc(this._rgb)},Mr.hcg=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(ti,[null].concat(p,["hcg"])))},ni.format.hcg=xn,ni.autodetect.push({p:1,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=In(p,"hcg"),ei(p)==="array"&&p.length===3)return"hcg"}});var yu=m.unpack,Ug=m.last,Uo=Math.round,zg=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=yu(p,"rgba"),A=E[0],k=E[1],N=E[2],L=E[3],U=Ug(p)||"auto";L===void 0&&(L=1),U==="auto"&&(U=L<1?"rgba":"rgb"),A=Uo(A),k=Uo(k),N=Uo(N);var V=A<<16|k<<8|N,Y="000000"+V.toString(16);Y=Y.substr(Y.length-6);var ee="0"+Uo(L*255).toString(16);switch(ee=ee.substr(ee.length-2),U.toLowerCase()){case"rgba":return"#"+Y+ee;case"argb":return"#"+ee+Y;default:return"#"+Y}},_u=zg,Ic=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Nc=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Dc=function(p){if(p.match(Ic)){(p.length===4||p.length===7)&&(p=p.substr(1)),p.length===3&&(p=p.split(""),p=p[0]+p[0]+p[1]+p[1]+p[2]+p[2]);var v=parseInt(p,16),E=v>>16,A=v>>8&255,k=v&255;return[E,A,k,1]}if(p.match(Nc)){(p.length===5||p.length===9)&&(p=p.substr(1)),p.length===4&&(p=p.split(""),p=p[0]+p[0]+p[1]+p[1]+p[2]+p[2]+p[3]+p[3]);var N=parseInt(p,16),L=N>>24&255,U=N>>16&255,V=N>>8&255,Y=Math.round((N&255)/255*100)/100;return[L,U,V,Y]}throw new Error("unknown hex color: "+p)},Os=Dc,xi=F,Zi=C,zo=m.type,Bo=S,bu=_u;Zi.prototype.hex=function(p){return bu(this._rgb,p)},xi.hex=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Zi,[null].concat(p,["hex"])))},Bo.format.hex=Os,Bo.autodetect.push({p:4,test:function(p){for(var v=[],E=arguments.length-1;E-- >0;)v[E]=arguments[E+1];if(!v.length&&zo(p)==="string"&&[3,4,5,6,7,8,9].indexOf(p.length)>=0)return"hex"}});var Bg=m.unpack,Fc=m.TWOPI,ks=Math.min,jn=Math.sqrt,Ki=Math.acos,ri=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=Bg(p,"rgb"),A=E[0],k=E[1],N=E[2];A/=255,k/=255,N/=255;var L,U=ks(A,k,N),V=(A+k+N)/3,Y=V>0?1-U/V:0;return Y===0?L=NaN:(L=(A-k+(A-N))/2,L/=jn((A-k)*(A-k)+(A-N)*(k-N)),L=Ki(L),N>k&&(L=Fc-L),L/=Fc),[L*360,Y,V]},Or=ri,Vo=m.unpack,Gn=m.limit,Tn=m.TWOPI,Is=m.PITHIRD,Ti=Math.cos,Ns=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=Vo(p,"hsi");var E=p[0],A=p[1],k=p[2],N,L,U;return isNaN(E)&&(E=0),isNaN(A)&&(A=0),E>360&&(E-=360),E<0&&(E+=360),E/=360,E<1/3?(U=(1-A)/3,N=(1+A*Ti(Tn*E)/Ti(Is-Tn*E))/3,L=1-(U+N)):E<2/3?(E-=1/3,N=(1-A)/3,L=(1+A*Ti(Tn*E)/Ti(Is-Tn*E))/3,U=1-(N+L)):(E-=2/3,L=(1-A)/3,U=(1+A*Ti(Tn*E)/Ti(Is-Tn*E))/3,N=1-(L+U)),N=Gn(k*N*3),L=Gn(k*L*3),U=Gn(k*U*3),[N*255,L*255,U*255,p.length>3?p[3]:1]},nr=Ns,Ds=m.unpack,wu=m.type,Eu=F,Fs=C,Us=S,zs=Or;Fs.prototype.hsi=function(){return zs(this._rgb)},Eu.hsi=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Fs,[null].concat(p,["hsi"])))},Us.format.hsi=nr,Us.autodetect.push({p:2,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=Ds(p,"hsi"),wu(p)==="array"&&p.length===3)return"hsi"}});var kr=m.unpack,Vg=m.type,Uc=F,Bs=C,Su=S,$g=J;Bs.prototype.hsl=function(){return $g(this._rgb)},Uc.hsl=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Bs,[null].concat(p,["hsl"])))},Su.format.hsl=fe,Su.autodetect.push({p:2,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=kr(p,"hsl"),Vg(p)==="array"&&p.length===3)return"hsl"}});var jg=m.unpack,x=Math.min,P=Math.max,M=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=jg(p,"rgb");var E=p[0],A=p[1],k=p[2],N=x(E,A,k),L=P(E,A,k),U=L-N,V,Y,ee;return ee=L/255,L===0?(V=Number.NaN,Y=0):(Y=U/L,E===L&&(V=(A-k)/U),A===L&&(V=2+(k-E)/U),k===L&&(V=4+(E-A)/U),V*=60,V<0&&(V+=360)),[V,Y,ee]},$=M,te=m.unpack,we=Math.floor,je=function(){for(var p,v,E,A,k,N,L=[],U=arguments.length;U--;)L[U]=arguments[U];L=te(L,"hsv");var V=L[0],Y=L[1],ee=L[2],ge,ne,xe;if(ee*=255,Y===0)ge=ne=xe=ee;else{V===360&&(V=0),V>360&&(V-=360),V<0&&(V+=360),V/=60;var Ee=we(V),Ge=V-Ee,Qe=ee*(1-Y),ot=ee*(1-Y*Ge),ft=ee*(1-Y*(1-Ge));switch(Ee){case 0:p=[ee,ft,Qe],ge=p[0],ne=p[1],xe=p[2];break;case 1:v=[ot,ee,Qe],ge=v[0],ne=v[1],xe=v[2];break;case 2:E=[Qe,ee,ft],ge=E[0],ne=E[1],xe=E[2];break;case 3:A=[Qe,ot,ee],ge=A[0],ne=A[1],xe=A[2];break;case 4:k=[ft,Qe,ee],ge=k[0],ne=k[1],xe=k[2];break;case 5:N=[ee,Qe,ot],ge=N[0],ne=N[1],xe=N[2];break}}return[ge,ne,xe,L.length>3?L[3]:1]},Jt=je,rn=m.unpack,gn=m.type,yr=F,cw=C,fw=S,Pk=$;cw.prototype.hsv=function(){return Pk(this._rgb)},yr.hsv=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(cw,[null].concat(p,["hsv"])))},fw.format.hsv=Jt,fw.autodetect.push({p:2,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=rn(p,"hsv"),gn(p)==="array"&&p.length===3)return"hsv"}});var zc={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Vs=zc,Ak=m.unpack,hw=Math.pow,Ck=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=Ak(p,"rgb"),A=E[0],k=E[1],N=E[2],L=Rk(A,k,N),U=L[0],V=L[1],Y=L[2],ee=116*V-16;return[ee<0?0:ee,500*(U-V),200*(V-Y)]},Gg=function(p){return(p/=255)<=.04045?p/12.92:hw((p+.055)/1.055,2.4)},Wg=function(p){return p>Vs.t3?hw(p,1/3):p/Vs.t2+Vs.t0},Rk=function(p,v,E){p=Gg(p),v=Gg(v),E=Gg(E);var A=Wg((.4124564*p+.3575761*v+.1804375*E)/Vs.Xn),k=Wg((.2126729*p+.7151522*v+.072175*E)/Vs.Yn),N=Wg((.0193339*p+.119192*v+.9503041*E)/Vs.Zn);return[A,k,N]},dw=Ck,$s=zc,Lk=m.unpack,Mk=Math.pow,Ok=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=Lk(p,"lab");var E=p[0],A=p[1],k=p[2],N,L,U,V,Y,ee;return L=(E+16)/116,N=isNaN(A)?L:L+A/500,U=isNaN(k)?L:L-k/200,L=$s.Yn*Yg(L),N=$s.Xn*Yg(N),U=$s.Zn*Yg(U),V=Hg(3.2404542*N-1.5371385*L-.4985314*U),Y=Hg(-.969266*N+1.8760108*L+.041556*U),ee=Hg(.0556434*N-.2040259*L+1.0572252*U),[V,Y,ee,p.length>3?p[3]:1]},Hg=function(p){return 255*(p<=.00304?12.92*p:1.055*Mk(p,1/2.4)-.055)},Yg=function(p){return p>$s.t1?p*p*p:$s.t2*(p-$s.t0)},pw=Ok,kk=m.unpack,Ik=m.type,Nk=F,gw=C,mw=S,Dk=dw;gw.prototype.lab=function(){return Dk(this._rgb)},Nk.lab=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(gw,[null].concat(p,["lab"])))},mw.format.lab=pw,mw.autodetect.push({p:2,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=kk(p,"lab"),Ik(p)==="array"&&p.length===3)return"lab"}});var Fk=m.unpack,Uk=m.RAD2DEG,zk=Math.sqrt,Bk=Math.atan2,Vk=Math.round,$k=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=Fk(p,"lab"),A=E[0],k=E[1],N=E[2],L=zk(k*k+N*N),U=(Bk(N,k)*Uk+360)%360;return Vk(L*1e4)===0&&(U=Number.NaN),[A,L,U]},vw=$k,jk=m.unpack,Gk=dw,Wk=vw,Hk=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=jk(p,"rgb"),A=E[0],k=E[1],N=E[2],L=Gk(A,k,N),U=L[0],V=L[1],Y=L[2];return Wk(U,V,Y)},Yk=Hk,Xk=m.unpack,qk=m.DEG2RAD,Zk=Math.sin,Kk=Math.cos,Qk=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=Xk(p,"lch"),A=E[0],k=E[1],N=E[2];return isNaN(N)&&(N=0),N=N*qk,[A,Kk(N)*k,Zk(N)*k]},yw=Qk,Jk=m.unpack,eI=yw,tI=pw,nI=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=Jk(p,"lch");var E=p[0],A=p[1],k=p[2],N=eI(E,A,k),L=N[0],U=N[1],V=N[2],Y=tI(L,U,V),ee=Y[0],ge=Y[1],ne=Y[2];return[ee,ge,ne,p.length>3?p[3]:1]},_w=nI,rI=m.unpack,iI=_w,oI=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=rI(p,"hcl").reverse();return iI.apply(void 0,E)},sI=oI,aI=m.unpack,uI=m.type,bw=F,Bc=C,Xg=S,ww=Yk;Bc.prototype.lch=function(){return ww(this._rgb)},Bc.prototype.hcl=function(){return ww(this._rgb).reverse()},bw.lch=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Bc,[null].concat(p,["lch"])))},bw.hcl=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Bc,[null].concat(p,["hcl"])))},Xg.format.lch=_w,Xg.format.hcl=sI,["lch","hcl"].forEach(function(p){return Xg.autodetect.push({p:2,test:function(){for(var v=[],E=arguments.length;E--;)v[E]=arguments[E];if(v=aI(v,p),uI(v)==="array"&&v.length===3)return p}})});var lI={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Ew=lI,cI=C,Sw=S,fI=m.type,xu=Ew,hI=Os,dI=_u;cI.prototype.name=function(){for(var p=dI(this._rgb,"rgb"),v=0,E=Object.keys(xu);v<E.length;v+=1){var A=E[v];if(xu[A]===p)return A.toLowerCase()}return p},Sw.format.named=function(p){if(p=p.toLowerCase(),xu[p])return hI(xu[p]);throw new Error("unknown color name: "+p)},Sw.autodetect.push({p:5,test:function(p){for(var v=[],E=arguments.length-1;E-- >0;)v[E]=arguments[E+1];if(!v.length&&fI(p)==="string"&&xu[p.toLowerCase()])return"named"}});var pI=m.unpack,gI=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=pI(p,"rgb"),A=E[0],k=E[1],N=E[2];return(A<<16)+(k<<8)+N},mI=gI,vI=m.type,yI=function(p){if(vI(p)=="number"&&p>=0&&p<=16777215){var v=p>>16,E=p>>8&255,A=p&255;return[v,E,A,1]}throw new Error("unknown num color: "+p)},_I=yI,bI=F,xw=C,Tw=S,wI=m.type,EI=mI;xw.prototype.num=function(){return EI(this._rgb)},bI.num=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(xw,[null].concat(p,["num"])))},Tw.format.num=_I,Tw.autodetect.push({p:5,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p.length===1&&wI(p[0])==="number"&&p[0]>=0&&p[0]<=16777215)return"num"}});var SI=F,qg=C,Pw=S,Aw=m.unpack,Cw=m.type,Rw=Math.round;qg.prototype.rgb=function(p){return p===void 0&&(p=!0),p===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Rw)},qg.prototype.rgba=function(p){return p===void 0&&(p=!0),this._rgb.slice(0,4).map(function(v,E){return E<3?p===!1?v:Rw(v):v})},SI.rgb=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(qg,[null].concat(p,["rgb"])))},Pw.format.rgb=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=Aw(p,"rgba");return E[3]===void 0&&(E[3]=1),E},Pw.autodetect.push({p:3,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=Aw(p,"rgba"),Cw(p)==="array"&&(p.length===3||p.length===4&&Cw(p[3])=="number"&&p[3]>=0&&p[3]<=1))return"rgb"}});var Vc=Math.log,xI=function(p){var v=p/100,E,A,k;return v<66?(E=255,A=v<6?0:-155.25485562709179-.44596950469579133*(A=v-2)+104.49216199393888*Vc(A),k=v<20?0:-254.76935184120902+.8274096064007395*(k=v-10)+115.67994401066147*Vc(k)):(E=351.97690566805693+.114206453784165*(E=v-55)-40.25366309332127*Vc(E),A=325.4494125711974+.07943456536662342*(A=v-50)-28.0852963507957*Vc(A),k=255),[E,A,k,1]},Lw=xI,TI=Lw,PI=m.unpack,AI=Math.round,CI=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];for(var E=PI(p,"rgb"),A=E[0],k=E[2],N=1e3,L=4e4,U=.4,V;L-N>U;){V=(L+N)*.5;var Y=TI(V);Y[2]/Y[0]>=k/A?L=V:N=V}return AI(V)},RI=CI,Zg=F,$c=C,Kg=S,LI=RI;$c.prototype.temp=$c.prototype.kelvin=$c.prototype.temperature=function(){return LI(this._rgb)},Zg.temp=Zg.kelvin=Zg.temperature=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply($c,[null].concat(p,["temp"])))},Kg.format.temp=Kg.format.kelvin=Kg.format.temperature=Lw;var MI=m.unpack,Qg=Math.cbrt,OI=Math.pow,kI=Math.sign,II=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=MI(p,"rgb"),A=E[0],k=E[1],N=E[2],L=[Jg(A/255),Jg(k/255),Jg(N/255)],U=L[0],V=L[1],Y=L[2],ee=Qg(.4122214708*U+.5363325363*V+.0514459929*Y),ge=Qg(.2119034982*U+.6806995451*V+.1073969566*Y),ne=Qg(.0883024619*U+.2817188376*V+.6299787005*Y);return[.2104542553*ee+.793617785*ge-.0040720468*ne,1.9779984951*ee-2.428592205*ge+.4505937099*ne,.0259040371*ee+.7827717662*ge-.808675766*ne]},Mw=II;function Jg(p){var v=Math.abs(p);return v<.04045?p/12.92:(kI(p)||1)*OI((v+.055)/1.055,2.4)}var NI=m.unpack,jc=Math.pow,DI=Math.sign,FI=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=NI(p,"lab");var E=p[0],A=p[1],k=p[2],N=jc(E+.3963377774*A+.2158037573*k,3),L=jc(E-.1055613458*A-.0638541728*k,3),U=jc(E-.0894841775*A-1.291485548*k,3);return[255*em(4.0767416621*N-3.3077115913*L+.2309699292*U),255*em(-1.2684380046*N+2.6097574011*L-.3413193965*U),255*em(-.0041960863*N-.7034186147*L+1.707614701*U),p.length>3?p[3]:1]},Ow=FI;function em(p){var v=Math.abs(p);return v>.0031308?(DI(p)||1)*(1.055*jc(v,1/2.4)-.055):p*12.92}var UI=m.unpack,zI=m.type,BI=F,kw=C,Iw=S,VI=Mw;kw.prototype.oklab=function(){return VI(this._rgb)},BI.oklab=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(kw,[null].concat(p,["oklab"])))},Iw.format.oklab=Ow,Iw.autodetect.push({p:3,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=UI(p,"oklab"),zI(p)==="array"&&p.length===3)return"oklab"}});var $I=m.unpack,jI=Mw,GI=vw,WI=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=$I(p,"rgb"),A=E[0],k=E[1],N=E[2],L=jI(A,k,N),U=L[0],V=L[1],Y=L[2];return GI(U,V,Y)},HI=WI,YI=m.unpack,XI=yw,qI=Ow,ZI=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=YI(p,"lch");var E=p[0],A=p[1],k=p[2],N=XI(E,A,k),L=N[0],U=N[1],V=N[2],Y=qI(L,U,V),ee=Y[0],ge=Y[1],ne=Y[2];return[ee,ge,ne,p.length>3?p[3]:1]},KI=ZI,QI=m.unpack,JI=m.type,eN=F,Nw=C,Dw=S,tN=HI;Nw.prototype.oklch=function(){return tN(this._rgb)},eN.oklch=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Nw,[null].concat(p,["oklch"])))},Dw.format.oklch=KI,Dw.autodetect.push({p:3,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=QI(p,"oklch"),JI(p)==="array"&&p.length===3)return"oklch"}});var Fw=C,nN=m.type;Fw.prototype.alpha=function(p,v){return v===void 0&&(v=!1),p!==void 0&&nN(p)==="number"?v?(this._rgb[3]=p,this):new Fw([this._rgb[0],this._rgb[1],this._rgb[2],p],"rgb"):this._rgb[3]};var rN=C;rN.prototype.clipped=function(){return this._rgb._clipped||!1};var $o=C,iN=zc;$o.prototype.darken=function(p){p===void 0&&(p=1);var v=this,E=v.lab();return E[0]-=iN.Kn*p,new $o(E,"lab").alpha(v.alpha(),!0)},$o.prototype.brighten=function(p){return p===void 0&&(p=1),this.darken(-p)},$o.prototype.darker=$o.prototype.darken,$o.prototype.brighter=$o.prototype.brighten;var oN=C;oN.prototype.get=function(p){var v=p.split("."),E=v[0],A=v[1],k=this[E]();if(A){var N=E.indexOf(A)-(E.substr(0,2)==="ok"?2:0);if(N>-1)return k[N];throw new Error("unknown channel "+A+" in mode "+E)}else return k};var js=C,sN=m.type,aN=Math.pow,uN=1e-7,lN=20;js.prototype.luminance=function(p){if(p!==void 0&&sN(p)==="number"){if(p===0)return new js([0,0,0,this._rgb[3]],"rgb");if(p===1)return new js([255,255,255,this._rgb[3]],"rgb");var v=this.luminance(),E="rgb",A=lN,k=function(L,U){var V=L.interpolate(U,.5,E),Y=V.luminance();return Math.abs(p-Y)<uN||!A--?V:Y>p?k(L,V):k(V,U)},N=(v>p?k(new js([0,0,0]),this):k(this,new js([255,255,255]))).rgb();return new js(N.concat([this._rgb[3]]))}return cN.apply(void 0,this._rgb.slice(0,3))};var cN=function(p,v,E){return p=tm(p),v=tm(v),E=tm(E),.2126*p+.7152*v+.0722*E},tm=function(p){return p/=255,p<=.03928?p/12.92:aN((p+.055)/1.055,2.4)},rr={},Uw=C,zw=m.type,Gc=rr,Bw=function(p,v,E){E===void 0&&(E=.5);for(var A=[],k=arguments.length-3;k-- >0;)A[k]=arguments[k+3];var N=A[0]||"lrgb";if(!Gc[N]&&!A.length&&(N=Object.keys(Gc)[0]),!Gc[N])throw new Error("interpolation mode "+N+" is not defined");return zw(p)!=="object"&&(p=new Uw(p)),zw(v)!=="object"&&(v=new Uw(v)),Gc[N](p,v,E).alpha(p.alpha()+E*(v.alpha()-p.alpha()))},Vw=C,fN=Bw;Vw.prototype.mix=Vw.prototype.interpolate=function(p,v){v===void 0&&(v=.5);for(var E=[],A=arguments.length-2;A-- >0;)E[A]=arguments[A+2];return fN.apply(void 0,[this,p,v].concat(E))};var $w=C;$w.prototype.premultiply=function(p){p===void 0&&(p=!1);var v=this._rgb,E=v[3];return p?(this._rgb=[v[0]*E,v[1]*E,v[2]*E,E],this):new $w([v[0]*E,v[1]*E,v[2]*E,E],"rgb")};var nm=C,hN=zc;nm.prototype.saturate=function(p){p===void 0&&(p=1);var v=this,E=v.lch();return E[1]+=hN.Kn*p,E[1]<0&&(E[1]=0),new nm(E,"lch").alpha(v.alpha(),!0)},nm.prototype.desaturate=function(p){return p===void 0&&(p=1),this.saturate(-p)};var jw=C,Gw=m.type;jw.prototype.set=function(p,v,E){E===void 0&&(E=!1);var A=p.split("."),k=A[0],N=A[1],L=this[k]();if(N){var U=k.indexOf(N)-(k.substr(0,2)==="ok"?2:0);if(U>-1){if(Gw(v)=="string")switch(v.charAt(0)){case"+":L[U]+=+v;break;case"-":L[U]+=+v;break;case"*":L[U]*=+v.substr(1);break;case"/":L[U]/=+v.substr(1);break;default:L[U]=+v}else if(Gw(v)==="number")L[U]=v;else throw new Error("unsupported value for Color.set");var V=new jw(L,k);return E?(this._rgb=V._rgb,this):V}throw new Error("unknown channel "+N+" in mode "+k)}else return L};var dN=C,pN=function(p,v,E){var A=p._rgb,k=v._rgb;return new dN(A[0]+E*(k[0]-A[0]),A[1]+E*(k[1]-A[1]),A[2]+E*(k[2]-A[2]),"rgb")};rr.rgb=pN;var gN=C,rm=Math.sqrt,Gs=Math.pow,mN=function(p,v,E){var A=p._rgb,k=A[0],N=A[1],L=A[2],U=v._rgb,V=U[0],Y=U[1],ee=U[2];return new gN(rm(Gs(k,2)*(1-E)+Gs(V,2)*E),rm(Gs(N,2)*(1-E)+Gs(Y,2)*E),rm(Gs(L,2)*(1-E)+Gs(ee,2)*E),"rgb")};rr.lrgb=mN;var vN=C,yN=function(p,v,E){var A=p.lab(),k=v.lab();return new vN(A[0]+E*(k[0]-A[0]),A[1]+E*(k[1]-A[1]),A[2]+E*(k[2]-A[2]),"lab")};rr.lab=yN;var Ww=C,Ws=function(p,v,E,A){var k,N,L,U;A==="hsl"?(L=p.hsl(),U=v.hsl()):A==="hsv"?(L=p.hsv(),U=v.hsv()):A==="hcg"?(L=p.hcg(),U=v.hcg()):A==="hsi"?(L=p.hsi(),U=v.hsi()):A==="lch"||A==="hcl"?(A="hcl",L=p.hcl(),U=v.hcl()):A==="oklch"&&(L=p.oklch().reverse(),U=v.oklch().reverse());var V,Y,ee,ge,ne,xe;(A.substr(0,1)==="h"||A==="oklch")&&(k=L,V=k[0],ee=k[1],ne=k[2],N=U,Y=N[0],ge=N[1],xe=N[2]);var Ee,Ge,Qe,ot;return!isNaN(V)&&!isNaN(Y)?(Y>V&&Y-V>180?ot=Y-(V+360):Y<V&&V-Y>180?ot=Y+360-V:ot=Y-V,Ge=V+E*ot):isNaN(V)?isNaN(Y)?Ge=Number.NaN:(Ge=Y,(ne==1||ne==0)&&A!="hsv"&&(Ee=ge)):(Ge=V,(xe==1||xe==0)&&A!="hsv"&&(Ee=ee)),Ee===void 0&&(Ee=ee+E*(ge-ee)),Qe=ne+E*(xe-ne),A==="oklch"?new Ww([Qe,Ee,Ge],A):new Ww([Ge,Ee,Qe],A)},_N=Ws,Hw=function(p,v,E){return _N(p,v,E,"lch")};rr.lch=Hw,rr.hcl=Hw;var bN=C,wN=function(p,v,E){var A=p.num(),k=v.num();return new bN(A+E*(k-A),"num")};rr.num=wN;var EN=Ws,SN=function(p,v,E){return EN(p,v,E,"hcg")};rr.hcg=SN;var xN=Ws,TN=function(p,v,E){return xN(p,v,E,"hsi")};rr.hsi=TN;var PN=Ws,AN=function(p,v,E){return PN(p,v,E,"hsl")};rr.hsl=AN;var CN=Ws,RN=function(p,v,E){return CN(p,v,E,"hsv")};rr.hsv=RN;var LN=C,MN=function(p,v,E){var A=p.oklab(),k=v.oklab();return new LN(A[0]+E*(k[0]-A[0]),A[1]+E*(k[1]-A[1]),A[2]+E*(k[2]-A[2]),"oklab")};rr.oklab=MN;var ON=Ws,kN=function(p,v,E){return ON(p,v,E,"oklch")};rr.oklch=kN;var im=C,IN=m.clip_rgb,om=Math.pow,sm=Math.sqrt,am=Math.PI,Yw=Math.cos,Xw=Math.sin,NN=Math.atan2,DN=function(p,v,E){v===void 0&&(v="lrgb"),E===void 0&&(E=null);var A=p.length;E||(E=Array.from(new Array(A)).map(function(){return 1}));var k=A/E.reduce(function(Ge,Qe){return Ge+Qe});if(E.forEach(function(Ge,Qe){E[Qe]*=k}),p=p.map(function(Ge){return new im(Ge)}),v==="lrgb")return FN(p,E);for(var N=p.shift(),L=N.get(v),U=[],V=0,Y=0,ee=0;ee<L.length;ee++)if(L[ee]=(L[ee]||0)*E[0],U.push(isNaN(L[ee])?0:E[0]),v.charAt(ee)==="h"&&!isNaN(L[ee])){var ge=L[ee]/180*am;V+=Yw(ge)*E[0],Y+=Xw(ge)*E[0]}var ne=N.alpha()*E[0];p.forEach(function(Ge,Qe){var ot=Ge.get(v);ne+=Ge.alpha()*E[Qe+1];for(var ft=0;ft<L.length;ft++)if(!isNaN(ot[ft]))if(U[ft]+=E[Qe+1],v.charAt(ft)==="h"){var mn=ot[ft]/180*am;V+=Yw(mn)*E[Qe+1],Y+=Xw(mn)*E[Qe+1]}else L[ft]+=ot[ft]*E[Qe+1]});for(var xe=0;xe<L.length;xe++)if(v.charAt(xe)==="h"){for(var Ee=NN(Y/U[xe],V/U[xe])/am*180;Ee<0;)Ee+=360;for(;Ee>=360;)Ee-=360;L[xe]=Ee}else L[xe]=L[xe]/U[xe];return ne/=A,new im(L,v).alpha(ne>.99999?1:ne,!0)},FN=function(p,v){for(var E=p.length,A=[0,0,0,0],k=0;k<p.length;k++){var N=p[k],L=v[k]/E,U=N._rgb;A[0]+=om(U[0],2)*L,A[1]+=om(U[1],2)*L,A[2]+=om(U[2],2)*L,A[3]+=U[3]*L}return A[0]=sm(A[0]),A[1]=sm(A[1]),A[2]=sm(A[2]),A[3]>.9999999&&(A[3]=1),new im(IN(A))},Ir=F,Hs=m.type,UN=Math.pow,um=function(p){var v="rgb",E=Ir("#ccc"),A=0,k=[0,1],N=[],L=[0,0],U=!1,V=[],Y=!1,ee=0,ge=1,ne=!1,xe={},Ee=!0,Ge=1,Qe=function(ie){if(ie=ie||["#fff","#000"],ie&&Hs(ie)==="string"&&Ir.brewer&&Ir.brewer[ie.toLowerCase()]&&(ie=Ir.brewer[ie.toLowerCase()]),Hs(ie)==="array"){ie.length===1&&(ie=[ie[0],ie[0]]),ie=ie.slice(0);for(var Ie=0;Ie<ie.length;Ie++)ie[Ie]=Ir(ie[Ie]);N.length=0;for(var Ze=0;Ze<ie.length;Ze++)N.push(Ze/(ie.length-1))}return Wn(),V=ie},ot=function(ie){if(U!=null){for(var Ie=U.length-1,Ze=0;Ze<Ie&&ie>=U[Ze];)Ze++;return Ze-1}return 0},ft=function(ie){return ie},mn=function(ie){return ie},fn=function(ie,Ie){var Ze,We;if(Ie==null&&(Ie=!1),isNaN(ie)||ie===null)return E;if(Ie)We=ie;else if(U&&U.length>2){var vn=ot(ie);We=vn/(U.length-2)}else ge!==ee?We=(ie-ee)/(ge-ee):We=1;We=mn(We),Ie||(We=ft(We)),Ge!==1&&(We=UN(We,Ge)),We=L[0]+We*(1-L[0]-L[1]),We=Math.min(1,Math.max(0,We));var Tt=Math.floor(We*1e4);if(Ee&&xe[Tt])Ze=xe[Tt];else{if(Hs(V)==="array")for(var st=0;st<N.length;st++){var dt=N[st];if(We<=dt){Ze=V[st];break}if(We>=dt&&st===N.length-1){Ze=V[st];break}if(We>dt&&We<N[st+1]){We=(We-dt)/(N[st+1]-dt),Ze=Ir.interpolate(V[st],V[st+1],We,v);break}}else Hs(V)==="function"&&(Ze=V(We));Ee&&(xe[Tt]=Ze)}return Ze},Wn=function(){return xe={}};Qe(p);var nt=function(ie){var Ie=Ir(fn(ie));return Y&&Ie[Y]?Ie[Y]():Ie};return nt.classes=function(ie){if(ie!=null){if(Hs(ie)==="array")U=ie,k=[ie[0],ie[ie.length-1]];else{var Ie=Ir.analyze(k);ie===0?U=[Ie.min,Ie.max]:U=Ir.limits(Ie,"e",ie)}return nt}return U},nt.domain=function(ie){if(!arguments.length)return k;ee=ie[0],ge=ie[ie.length-1],N=[];var Ie=V.length;if(ie.length===Ie&&ee!==ge)for(var Ze=0,We=Array.from(ie);Ze<We.length;Ze+=1){var vn=We[Ze];N.push((vn-ee)/(ge-ee))}else{for(var Tt=0;Tt<Ie;Tt++)N.push(Tt/(Ie-1));if(ie.length>2){var st=ie.map(function(pt,mt){return mt/(ie.length-1)}),dt=ie.map(function(pt){return(pt-ee)/(ge-ee)});dt.every(function(pt,mt){return st[mt]===pt})||(mn=function(pt){if(pt<=0||pt>=1)return pt;for(var mt=0;pt>=dt[mt+1];)mt++;var Dr=(pt-dt[mt])/(dt[mt+1]-dt[mt]),eo=st[mt]+Dr*(st[mt+1]-st[mt]);return eo})}}return k=[ee,ge],nt},nt.mode=function(ie){return arguments.length?(v=ie,Wn(),nt):v},nt.range=function(ie,Ie){return Qe(ie),nt},nt.out=function(ie){return Y=ie,nt},nt.spread=function(ie){return arguments.length?(A=ie,nt):A},nt.correctLightness=function(ie){return ie==null&&(ie=!0),ne=ie,Wn(),ne?ft=function(Ie){for(var Ze=fn(0,!0).lab()[0],We=fn(1,!0).lab()[0],vn=Ze>We,Tt=fn(Ie,!0).lab()[0],st=Ze+(We-Ze)*Ie,dt=Tt-st,pt=0,mt=1,Dr=20;Math.abs(dt)>.01&&Dr-- >0;)(function(){return vn&&(dt*=-1),dt<0?(pt=Ie,Ie+=(mt-Ie)*.5):(mt=Ie,Ie+=(pt-Ie)*.5),Tt=fn(Ie,!0).lab()[0],dt=Tt-st})();return Ie}:ft=function(Ie){return Ie},nt},nt.padding=function(ie){return ie!=null?(Hs(ie)==="number"&&(ie=[ie,ie]),L=ie,nt):L},nt.colors=function(ie,Ie){arguments.length<2&&(Ie="hex");var Ze=[];if(arguments.length===0)Ze=V.slice(0);else if(ie===1)Ze=[nt(.5)];else if(ie>1){var We=k[0],vn=k[1]-We;Ze=zN(0,ie,!1).map(function(mt){return nt(We+mt/(ie-1)*vn)})}else{p=[];var Tt=[];if(U&&U.length>2)for(var st=1,dt=U.length,pt=1<=dt;pt?st<dt:st>dt;pt?st++:st--)Tt.push((U[st-1]+U[st])*.5);else Tt=k;Ze=Tt.map(function(mt){return nt(mt)})}return Ir[Ie]&&(Ze=Ze.map(function(mt){return mt[Ie]()})),Ze},nt.cache=function(ie){return ie!=null?(Ee=ie,nt):Ee},nt.gamma=function(ie){return ie!=null?(Ge=ie,nt):Ge},nt.nodata=function(ie){return ie!=null?(E=Ir(ie),nt):E},nt};function zN(p,v,E){for(var A=[],k=p<v,N=E?k?v+1:v-1:v,L=p;k?L<N:L>N;k?L++:L--)A.push(L);return A}var Tu=C,BN=um,VN=function(p){for(var v=[1,1],E=1;E<p;E++){for(var A=[1],k=1;k<=v.length;k++)A[k]=(v[k]||0)+v[k-1];v=A}return v},$N=function(p){var v,E,A,k,N,L,U;if(p=p.map(function(ne){return new Tu(ne)}),p.length===2)v=p.map(function(ne){return ne.lab()}),N=v[0],L=v[1],k=function(ne){var xe=[0,1,2].map(function(Ee){return N[Ee]+ne*(L[Ee]-N[Ee])});return new Tu(xe,"lab")};else if(p.length===3)E=p.map(function(ne){return ne.lab()}),N=E[0],L=E[1],U=E[2],k=function(ne){var xe=[0,1,2].map(function(Ee){return(1-ne)*(1-ne)*N[Ee]+2*(1-ne)*ne*L[Ee]+ne*ne*U[Ee]});return new Tu(xe,"lab")};else if(p.length===4){var V;A=p.map(function(ne){return ne.lab()}),N=A[0],L=A[1],U=A[2],V=A[3],k=function(ne){var xe=[0,1,2].map(function(Ee){return(1-ne)*(1-ne)*(1-ne)*N[Ee]+3*(1-ne)*(1-ne)*ne*L[Ee]+3*(1-ne)*ne*ne*U[Ee]+ne*ne*ne*V[Ee]});return new Tu(xe,"lab")}}else if(p.length>=5){var Y,ee,ge;Y=p.map(function(ne){return ne.lab()}),ge=p.length-1,ee=VN(ge),k=function(ne){var xe=1-ne,Ee=[0,1,2].map(function(Ge){return Y.reduce(function(Qe,ot,ft){return Qe+ee[ft]*Math.pow(xe,ge-ft)*Math.pow(ne,ft)*ot[Ge]},0)});return new Tu(Ee,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return k},jN=function(p){var v=$N(p);return v.scale=function(){return BN(v)},v},lm=F,Nr=function(p,v,E){if(!Nr[E])throw new Error("unknown blend mode "+E);return Nr[E](p,v)},Qi=function(p){return function(v,E){var A=lm(E).rgb(),k=lm(v).rgb();return lm.rgb(p(A,k))}},Ji=function(p){return function(v,E){var A=[];return A[0]=p(v[0],E[0]),A[1]=p(v[1],E[1]),A[2]=p(v[2],E[2]),A}},GN=function(p){return p},WN=function(p,v){return p*v/255},HN=function(p,v){return p>v?v:p},YN=function(p,v){return p>v?p:v},XN=function(p,v){return 255*(1-(1-p/255)*(1-v/255))},qN=function(p,v){return v<128?2*p*v/255:255*(1-2*(1-p/255)*(1-v/255))},ZN=function(p,v){return 255*(1-(1-v/255)/(p/255))},KN=function(p,v){return p===255?255:(p=255*(v/255)/(1-p/255),p>255?255:p)};Nr.normal=Qi(Ji(GN)),Nr.multiply=Qi(Ji(WN)),Nr.screen=Qi(Ji(XN)),Nr.overlay=Qi(Ji(qN)),Nr.darken=Qi(Ji(HN)),Nr.lighten=Qi(Ji(YN)),Nr.dodge=Qi(Ji(KN)),Nr.burn=Qi(Ji(ZN));for(var QN=Nr,cm=m.type,JN=m.clip_rgb,eD=m.TWOPI,tD=Math.pow,nD=Math.sin,rD=Math.cos,qw=F,iD=function(p,v,E,A,k){p===void 0&&(p=300),v===void 0&&(v=-1.5),E===void 0&&(E=1),A===void 0&&(A=1),k===void 0&&(k=[0,1]);var N=0,L;cm(k)==="array"?L=k[1]-k[0]:(L=0,k=[k,k]);var U=function(V){var Y=eD*((p+120)/360+v*V),ee=tD(k[0]+L*V,A),ge=N!==0?E[0]+V*N:E,ne=ge*ee*(1-ee)/2,xe=rD(Y),Ee=nD(Y),Ge=ee+ne*(-.14861*xe+1.78277*Ee),Qe=ee+ne*(-.29227*xe-.90649*Ee),ot=ee+ne*(1.97294*xe);return qw(JN([Ge*255,Qe*255,ot*255,1]))};return U.start=function(V){return V==null?p:(p=V,U)},U.rotations=function(V){return V==null?v:(v=V,U)},U.gamma=function(V){return V==null?A:(A=V,U)},U.hue=function(V){return V==null?E:(E=V,cm(E)==="array"?(N=E[1]-E[0],N===0&&(E=E[1])):N=0,U)},U.lightness=function(V){return V==null?k:(cm(V)==="array"?(k=V,L=V[1]-V[0]):(k=[V,V],L=0),U)},U.scale=function(){return qw.scale(U)},U.hue(E),U},oD=C,sD="0123456789abcdef",aD=Math.floor,uD=Math.random,lD=function(){for(var p="#",v=0;v<6;v++)p+=sD.charAt(aD(uD()*16));return new oD(p,"hex")},fm=l,Zw=Math.log,cD=Math.pow,fD=Math.floor,hD=Math.abs,Kw=function(p,v){v===void 0&&(v=null);var E={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return fm(p)==="object"&&(p=Object.values(p)),p.forEach(function(A){v&&fm(A)==="object"&&(A=A[v]),A!=null&&!isNaN(A)&&(E.values.push(A),E.sum+=A,A<E.min&&(E.min=A),A>E.max&&(E.max=A),E.count+=1)}),E.domain=[E.min,E.max],E.limits=function(A,k){return Qw(E,A,k)},E},Qw=function(p,v,E){v===void 0&&(v="equal"),E===void 0&&(E=7),fm(p)=="array"&&(p=Kw(p));var A=p.min,k=p.max,N=p.values.sort(function(dm,pm){return dm-pm});if(E===1)return[A,k];var L=[];if(v.substr(0,1)==="c"&&(L.push(A),L.push(k)),v.substr(0,1)==="e"){L.push(A);for(var U=1;U<E;U++)L.push(A+U/E*(k-A));L.push(k)}else if(v.substr(0,1)==="l"){if(A<=0)throw new Error("Logarithmic scales are only possible for values > 0");var V=Math.LOG10E*Zw(A),Y=Math.LOG10E*Zw(k);L.push(A);for(var ee=1;ee<E;ee++)L.push(cD(10,V+ee/E*(Y-V)));L.push(k)}else if(v.substr(0,1)==="q"){L.push(A);for(var ge=1;ge<E;ge++){var ne=(N.length-1)*ge/E,xe=fD(ne);if(xe===ne)L.push(N[xe]);else{var Ee=ne-xe;L.push(N[xe]*(1-Ee)+N[xe+1]*Ee)}}L.push(k)}else if(v.substr(0,1)==="k"){var Ge,Qe=N.length,ot=new Array(Qe),ft=new Array(E),mn=!0,fn=0,Wn=null;Wn=[],Wn.push(A);for(var nt=1;nt<E;nt++)Wn.push(A+nt/E*(k-A));for(Wn.push(k);mn;){for(var ie=0;ie<E;ie++)ft[ie]=0;for(var Ie=0;Ie<Qe;Ie++)for(var Ze=N[Ie],We=Number.MAX_VALUE,vn=void 0,Tt=0;Tt<E;Tt++){var st=hD(Wn[Tt]-Ze);st<We&&(We=st,vn=Tt),ft[vn]++,ot[Ie]=vn}for(var dt=new Array(E),pt=0;pt<E;pt++)dt[pt]=null;for(var mt=0;mt<Qe;mt++)Ge=ot[mt],dt[Ge]===null?dt[Ge]=N[mt]:dt[Ge]+=N[mt];for(var Dr=0;Dr<E;Dr++)dt[Dr]*=1/ft[Dr];mn=!1;for(var eo=0;eo<E;eo++)if(dt[eo]!==Wn[eo]){mn=!0;break}Wn=dt,fn++,fn>200&&(mn=!1)}for(var to={},Ys=0;Ys<E;Ys++)to[Ys]=[];for(var Xs=0;Xs<Qe;Xs++)Ge=ot[Xs],to[Ge].push(N[Xs]);for(var Ai=[],jo=0;jo<E;jo++)Ai.push(to[jo][0]),Ai.push(to[jo][to[jo].length-1]);Ai=Ai.sort(function(dm,pm){return dm-pm}),L.push(Ai[0]);for(var Pu=1;Pu<Ai.length;Pu+=2){var Go=Ai[Pu];!isNaN(Go)&&L.indexOf(Go)===-1&&L.push(Go)}}return L},Jw={analyze:Kw,limits:Qw},eE=C,dD=function(p,v){p=new eE(p),v=new eE(v);var E=p.luminance(),A=v.luminance();return E>A?(E+.05)/(A+.05):(A+.05)/(E+.05)},tE=C,Pi=Math.sqrt,en=Math.pow,pD=Math.min,gD=Math.max,nE=Math.atan2,rE=Math.abs,Wc=Math.cos,iE=Math.sin,mD=Math.exp,oE=Math.PI,vD=function(p,v,E,A,k){E===void 0&&(E=1),A===void 0&&(A=1),k===void 0&&(k=1);var N=function(Go){return 360*Go/(2*oE)},L=function(Go){return 2*oE*Go/360};p=new tE(p),v=new tE(v);var U=Array.from(p.lab()),V=U[0],Y=U[1],ee=U[2],ge=Array.from(v.lab()),ne=ge[0],xe=ge[1],Ee=ge[2],Ge=(V+ne)/2,Qe=Pi(en(Y,2)+en(ee,2)),ot=Pi(en(xe,2)+en(Ee,2)),ft=(Qe+ot)/2,mn=.5*(1-Pi(en(ft,7)/(en(ft,7)+en(25,7)))),fn=Y*(1+mn),Wn=xe*(1+mn),nt=Pi(en(fn,2)+en(ee,2)),ie=Pi(en(Wn,2)+en(Ee,2)),Ie=(nt+ie)/2,Ze=N(nE(ee,fn)),We=N(nE(Ee,Wn)),vn=Ze>=0?Ze:Ze+360,Tt=We>=0?We:We+360,st=rE(vn-Tt)>180?(vn+Tt+360)/2:(vn+Tt)/2,dt=1-.17*Wc(L(st-30))+.24*Wc(L(2*st))+.32*Wc(L(3*st+6))-.2*Wc(L(4*st-63)),pt=Tt-vn;pt=rE(pt)<=180?pt:Tt<=vn?pt+360:pt-360,pt=2*Pi(nt*ie)*iE(L(pt)/2);var mt=ne-V,Dr=ie-nt,eo=1+.015*en(Ge-50,2)/Pi(20+en(Ge-50,2)),to=1+.045*Ie,Ys=1+.015*Ie*dt,Xs=30*mD(-en((st-275)/25,2)),Ai=2*Pi(en(Ie,7)/(en(Ie,7)+en(25,7))),jo=-Ai*iE(2*L(Xs)),Pu=Pi(en(mt/(E*eo),2)+en(Dr/(A*to),2)+en(pt/(k*Ys),2)+jo*(Dr/(A*to))*(pt/(k*Ys)));return gD(0,pD(100,Pu))},sE=C,yD=function(p,v,E){E===void 0&&(E="lab"),p=new sE(p),v=new sE(v);var A=p.get(E),k=v.get(E),N=0;for(var L in A){var U=(A[L]||0)-(k[L]||0);N+=U*U}return Math.sqrt(N)},_D=C,bD=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];try{return new(Function.prototype.bind.apply(_D,[null].concat(p))),!0}catch{return!1}},aE=F,uE=um,wD={cool:function(){return uE([aE.hsl(180,1,.9),aE.hsl(250,.7,.4)])},hot:function(){return uE(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Hc={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},hm=0,lE=Object.keys(Hc);hm<lE.length;hm+=1){var cE=lE[hm];Hc[cE.toLowerCase()]=Hc[cE]}var ED=Hc,cn=F;cn.average=DN,cn.bezier=jN,cn.blend=QN,cn.cubehelix=iD,cn.mix=cn.interpolate=Bw,cn.random=lD,cn.scale=um,cn.analyze=Jw.analyze,cn.contrast=dD,cn.deltaE=vD,cn.distance=yD,cn.limits=Jw.limits,cn.valid=bD,cn.scales=wD,cn.colors=Ew,cn.brewer=ED;var SD=cn;return SD})})(b7);function w7(t){return _c({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144m224 0L144 368"}}]})(t)}function E7(t){return _c({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(t)}function S7(t){return _c({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(t)}const db=cb({key:"mapView",default:{}}),x7=cb({key:"selected",default:null});function Ld(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const pb=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),Sx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Sx&&parseFloat(Sx[1]);const T7="3.2.11";function $i(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const eh=typeof process!="object"||String(process)!=="[object process]"||process.browser,P7=typeof window<"u"&&typeof window.orientation<"u",xx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);xx&&parseFloat(xx[1]);function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class A7{constructor(e,n){b(this,"name",void 0),b(this,"workerThread",void 0),b(this,"isRunning",!0),b(this,"result",void 0),b(this,"_resolve",()=>{}),b(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){$i(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){$i(this.isRunning),this.isRunning=!1,this._reject(e)}}class n0{}const r0=new Map;function C7(t){$i(t.source&&!t.url||!t.source&&t.url);let e=r0.get(t.source||t.url);return e||(t.url&&(e=R7(t.url),r0.set(t.url,e)),t.source&&(e=CM(t.source),r0.set(t.source,e))),$i(e),e}function R7(t){if(!t.startsWith("http"))return t;const e=L7(t);return CM(e)}function CM(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function L7(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function RM(t,e=!0,n){const r=n||new Set;if(t){if(Tx(t))r.add(t);else if(Tx(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)RM(t[i],e,r)}}return n===void 0?Array.from(r):[]}function Tx(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const i0=()=>{};class Qv{static isSupported(){return typeof Worker<"u"&&eh||typeof n0<"u"&&!eh}constructor(e){b(this,"name",void 0),b(this,"source",void 0),b(this,"url",void 0),b(this,"terminated",!1),b(this,"worker",void 0),b(this,"onMessage",void 0),b(this,"onError",void 0),b(this,"_loadableURL","");const{name:n,source:r,url:i}=e;$i(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=i0,this.onError=o=>console.log(o),this.worker=eh?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=i0,this.onError=i0,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,n){n=n||RM(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=C7({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new n0(r,{eval:!1})}else if(this.source)e=new n0(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class M7{static isSupported(){return Qv.isSupported()}constructor(e){b(this,"name","unnamed"),b(this,"source",void 0),b(this,"url",void 0),b(this,"maxConcurrency",1),b(this,"maxMobileConcurrency",1),b(this,"onDebug",()=>{}),b(this,"reuseWorkers",!0),b(this,"props",{}),b(this,"jobQueue",[]),b(this,"idleQueue",[]),b(this,"count",0),b(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,n=(i,o,s)=>i.done(s),r=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new A7(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Qv({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return P7?this.maxMobileConcurrency:this.maxConcurrency}}const O7={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Mi{static isSupported(){return Qv.isSupported()}static getWorkerFarm(e={}){return Mi._workerFarm=Mi._workerFarm||new Mi({}),Mi._workerFarm.setProps(e),Mi._workerFarm}constructor(e){b(this,"props",void 0),b(this,"workerPools",new Map),this.props={...O7},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let o=this.workerPools.get(n);return o||(o=new M7({name:n,source:r,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}b(Mi,"_workerFarm",void 0);const k7="latest";function I7(t,e={}){const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let o=t.version;o==="latest"&&(o=k7);const s=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(s,"/dist/").concat(r)}return $i(i),i}function N7(t,e=T7){$i(t,"no worker provided");const n=t.version;return!(!e||!n)}function D7(t,e){return!Mi.isSupported()||!eh&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function F7(t,e,n,r,i){const o=t.id,s=I7(t,n),u=Mi.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const l=await u.startJob("process-on-worker",U7.bind(null,i));return l.postMessage("process",{input:e,options:n,context:r}),await(await l.result).result}async function U7(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:o,options:s}=r;try{const a=await t(o,s);e.postMessage("done",{id:i,result:a})}catch(a){const u=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:u})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function LM(t){return t&&typeof t=="object"&&t.isBuffer}function z7(t){return LM(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}function MM(t){if(LM(t))return z7(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function B7(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}function V7(...t){const e=t.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),n=e.reduce((o,s)=>o+s.byteLength,0),r=new Uint8Array(n);let i=0;for(const o of e)r.set(o,i),i+=o.byteLength;return r.buffer}async function $7(t){const e=[];for await(const n of t)e.push(n);return V7(...e)}function Px(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class Ax{constructor(e,n){b(this,"name",void 0),b(this,"type",void 0),b(this,"sampleSize",1),b(this,"time",void 0),b(this,"count",void 0),b(this,"samples",void 0),b(this,"lastTiming",void 0),b(this,"lastSampleTime",void 0),b(this,"lastSampleCount",void 0),b(this,"_count",0),b(this,"_time",0),b(this,"_samples",0),b(this,"_startTime",0),b(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Px(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Px()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class gb{constructor(e){b(this,"id",void 0),b(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof Ax?this.stats[n]=e:this.stats[n]=new Ax(n,r)),this.stats[n]}}let j7="";const Cx={};function G7(t){for(const e in Cx)if(t.startsWith(e)){const n=Cx[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(j7).concat(t)),t}function W7(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}const H7=t=>typeof t=="boolean",bl=t=>typeof t=="function",bc=t=>t!==null&&typeof t=="object",Rx=t=>bc(t)&&t.constructor==={}.constructor,Y7=t=>t&&typeof t[Symbol.iterator]=="function",X7=t=>t&&typeof t[Symbol.asyncIterator]=="function",hu=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,du=t=>typeof Blob<"u"&&t instanceof Blob,q7=t=>t&&typeof t=="object"&&t.isBuffer,Z7=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||bc(t)&&bl(t.tee)&&bl(t.cancel)&&bl(t.getReader),K7=t=>bc(t)&&bl(t.read)&&bl(t.pipe)&&H7(t.readable),OM=t=>Z7(t)||K7(t),Q7=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,J7=/^([-\w.]+\/[-\w.+]+)/;function e9(t){const e=J7.exec(t);return e?e[1]:t}function Lx(t){const e=Q7.exec(t);return e?e[1]:""}const t9=/\?.*/;function Eg(t){if(hu(t)){const e=o0(t.url||""),n=t.headers.get("content-type")||"";return{url:e,type:e9(n)||Lx(e)}}return du(t)?{url:o0(t.name||""),type:t.type||""}:typeof t=="string"?{url:o0(t),type:Lx(t)}:{url:"",type:""}}function n9(t){return hu(t)?t.headers["content-length"]||-1:du(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function o0(t){return t.replace(t9,"")}async function kM(t){if(hu(t))return t;const e={},n=n9(t);n>=0&&(e["content-length"]=String(n));const{url:r,type:i}=Eg(t);i&&(e["content-type"]=i);const o=await o9(t);o&&(e["x-first-bytes"]=o),typeof t=="string"&&(t=new TextEncoder().encode(t));const s=new Response(t,{headers:e});return Object.defineProperty(s,"url",{value:r}),s}async function r9(t){if(!t.ok){const e=await i9(t);throw new Error(e)}}async function i9(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function o9(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=o=>{var s;return r(o==null||(s=o.target)===null||s===void 0?void 0:s.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=s9(n);return"data:base64,".concat(r)}return null}function s9(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function Mx(t,e){if(typeof t=="string"){t=G7(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await kM(t)}function IM(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Xi(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||IM()}const th={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},yf=th.window||th.self||th.global,$u=th.process||{},NM=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Xi();const s0=globalThis;function DM(t){if(!t&&!Xi())return"Node";if(IM(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":s0.chrome?"Chrome":s0.safari?"Safari":s0.mozInnerScreenX?"Firefox":"Unknown"}function a9(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class u9{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";b(this,"storage",void 0),b(this,"id",void 0),b(this,"config",{}),this.storage=a9(r),this.id=e,this.config={},Object.assign(this.config,n),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}return this}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function l9(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function c9(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function a0(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let Md;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Md||(Md={}));function Ox(t){return typeof t=="string"?Md[t.toUpperCase()]||Md.WHITE:t}function f9(t,e,n){return!Xi&&typeof t=="string"&&(e&&(e=Ox(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=Ox(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function h9(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(o=>i===o)||(t[i]=t[i].bind(t)))}function Od(t,e){if(!t)throw new Error(e||"Assertion failed")}function Ks(){let t;if(Xi&&"performance"in yf){var e,n;t=yf==null||(e=yf.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in $u){var r;const i=$u==null||(r=$u.hrtime)===null||r===void 0?void 0:r.call($u);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Qs={debug:Xi&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},d9={enabled:!0,level:0};function _r(){}const kx={},Ix={once:!0};class wc{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};b(this,"id",void 0),b(this,"VERSION",NM),b(this,"_startTs",Ks()),b(this,"_deltaTs",Ks()),b(this,"_storage",void 0),b(this,"userData",{}),b(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this._storage=new u9("__probe-".concat(this.id,"__"),d9),this.userData={},this.timeStamp("".concat(this.id," started")),h9(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Ks()-this._startTs).toPrecision(10))}getDelta(){return Number((Ks()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:e}),this}setLevel(e){return this._storage.updateConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.updateConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){Od(e,n)}warn(e){return this._getLogFunction(0,e,Qs.warn,arguments,Ix)}error(e){return this._getLogFunction(0,e,Qs.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Qs.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Qs.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return this._getLogFunction(e,n,Qs.debug||Qs.info,arguments,Ix)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||_r,r&&[r],{tag:v9(n)}):_r}image(e){let{logLevel:n,priority:r,image:i,message:o="",scale:s=1}=e;return this._shouldLog(n||r)?Xi?m9({image:i,message:o,scale:s}):g9({image:i,message:o,scale:s}):_r}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||_r)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=Nx({logLevel:e,message:n,opts:r}),{collapsed:o}=r;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||_r)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=FM(e)}_getLogFunction(e,n,r,i,o){if(this._shouldLog(e)){o=Nx({logLevel:e,message:n,args:i,opts:o}),r=r||o.method,Od(r),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Ks();const s=o.tag||o.message;if(o.once)if(!kx[s])kx[s]=Ks();else return _r;return n=p9(this.id,o.message,o),r.bind(console,n,...o.args)}return _r}}b(wc,"VERSION",NM);function FM(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Od(Number.isFinite(e)&&e>=0),e}function Nx(t){const{logLevel:e,message:n}=t;t.logLevel=FM(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return Od(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function p9(t,e,n){if(typeof e=="string"){const r=n.time?c9(l9(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=f9(e,n.color,n.background)}return e}function g9(t){let{image:e,message:n="",scale:r=1}=t;return(void 0)({image:e,message:n,scale:r}),_r}function m9(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const o=new Image;return o.onload=()=>{const s=a0(o,n,r);console.log(...s)},o.src=e,_r}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...a0(e,n,r)),_r;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...a0(o,n,r)),o.src=e.toDataURL(),_r}return _r}function v9(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const Dx=new wc({id:"loaders.gl"});class y9{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class _9{constructor(){b(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const UM={fetch:null,mimeType:void 0,nothrow:!1,log:new _9,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:pb,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},b9={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function zM(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const BM=()=>{const t=zM();return t.globalOptions=t.globalOptions||{...UM},t.globalOptions};function w9(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],E9(t,n),x9(e,t,r)}function VM(t,e){const n=BM(),r=t||n;return typeof r.fetch=="function"?r.fetch:bc(r.fetch)?i=>Mx(i,r):e!=null&&e.fetch?e==null?void 0:e.fetch:Mx}function E9(t,e){Fx(t,null,UM,b9,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};Fx(r,n.id,i,o,e)}}function Fx(t,e,n,r,i){const o=e||"Top level",s=e?"".concat(e,"."):"";for(const a in t){const u=!e&&bc(t[a]),l=a==="baseUri"&&!e,c=a==="workerUrl"&&e;if(!(a in n)&&!l&&!c){if(a in r)Dx.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!u){const f=S9(a,i);Dx.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(f))()}}}}function S9(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const o in i.options){if(t===o)return"Did you mean '".concat(i.id,".").concat(o,"'?");const s=o.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(o,"'?"))}return r}function x9(t,e,n){const i={...t.options||{}};return T9(i,n),i.log===null&&(i.log=new y9),Ux(i,BM()),Ux(i,e),i}function Ux(t,e){for(const n in e)if(n in e){const r=e[n];Rx(r)&&Rx(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function T9(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function mb(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function vb(t){var e,n;Ld(t,"null loader"),Ld(mb(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const $M=()=>{const t=zM();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function P9(t){const e=$M();t=Array.isArray(t)?t:[t];for(const n of t){const r=vb(n);e.find(i=>r===i)||e.unshift(r)}}function A9(){return $M()}const C9=new wc({id:"loaders.gl"}),R9=/\.([^.]+)$/;async function L9(t,e=[],n,r){if(!jM(t))return null;let i=zx(t,e,{...n,nothrow:!0},r);if(i)return i;if(du(t)&&(t=await t.slice(0,10).arrayBuffer(),i=zx(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(GM(t));return i}function zx(t,e=[],n,r){if(!jM(t))return null;if(e&&!Array.isArray(e))return vb(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...A9()),O9(i);const o=M9(t,i,n,r);if(!o&&!(n!=null&&n.nothrow))throw new Error(GM(t));return o}function M9(t,e,n,r){const{url:i,type:o}=Eg(t),s=i||(r==null?void 0:r.url);let a=null,u="";if(n!=null&&n.mimeType&&(a=u0(e,n==null?void 0:n.mimeType),u="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),a=a||k9(e,s),u=u||(a?"matched url ".concat(s):""),a=a||u0(e,o),u=u||(a?"matched MIME type ".concat(o):""),a=a||N9(e,t),u=u||(a?"matched initial data ".concat(WM(t)):""),a=a||u0(e,n==null?void 0:n.fallbackMimeType),u=u||(a?"matched fallback MIME type ".concat(o):""),u){var l;C9.log(1,"selectLoader selected ".concat((l=a)===null||l===void 0?void 0:l.name,": ").concat(u,"."))}return a}function jM(t){return!(t instanceof Response&&t.status===204)}function GM(t){const{url:e,type:n}=Eg(t);let r="No valid loader found (";r+=e?"".concat(W7(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?WM(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function O9(t){for(const e of t)vb(e)}function k9(t,e){const n=e&&R9.exec(e),r=n&&n[1];return r?I9(t,r):null}function I9(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function u0(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function N9(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(D9(e,n))return n}else if(ArrayBuffer.isView(e)){if(Bx(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&Bx(e,0,n))return n;return null}function D9(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function Bx(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>F9(t,e,n,i))}function F9(t,e,n,r){if(r instanceof ArrayBuffer)return B7(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const i=Jv(t,e,r.length);return r===i;default:return!1}}function WM(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?Jv(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?Jv(t,0,e):""}function Jv(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}const U9=256*1024;function*z9(t,e){const n=(e==null?void 0:e.chunkSize)||U9;let r=0;const i=new TextEncoder;for(;r<t.length;){const o=Math.min(t.length-r,n),s=t.slice(r,r+o);r+=o,yield i.encode(s)}}const B9=256*1024;function*V9(t,e={}){const{chunkSize:n=B9}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),o=new ArrayBuffer(i),s=new Uint8Array(t,r,i);new Uint8Array(o).set(s),r+=i,yield o}}const $9=1024*1024;async function*j9(t,e){const n=(e==null?void 0:e.chunkSize)||$9;let r=0;for(;r<t.size;){const i=r+n,o=await t.slice(r,i).arrayBuffer();r=i,yield o}}function Vx(t,e){return pb?G9(t,e):W9(t)}async function*G9(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:o,value:s}=await i;if(o)return;yield MM(s)}}catch{n.releaseLock()}}async function*W9(t,e){for await(const n of t)yield MM(n)}function H9(t,e){if(typeof t=="string")return z9(t,e);if(t instanceof ArrayBuffer)return V9(t,e);if(du(t))return j9(t,e);if(OM(t))return Vx(t,e);if(hu(t))return Vx(t.body,e);throw new Error("makeIterator")}const HM="Cannot convert supplied data type";function Y9(t,e,n){if(e.text&&typeof t=="string")return t;if(q7(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(HM)}async function X9(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return Y9(t,e);if(du(t)&&(t=await kM(t)),hu(t)){const i=t;return await r9(i),e.binary?await i.arrayBuffer():await i.text()}if(OM(t)&&(t=H9(t,n)),Y7(t)||X7(t))return $7(t);throw new Error(HM)}function q9(t,e,n=null){if(n)return n;const r={fetch:VM(e,t),...t};return Array.isArray(r.loaders)||(r.loaders=null),r}function Z9(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function yb(t,e,n,r){$i(!r||typeof r=="object"),e&&!Array.isArray(e)&&!mb(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const{url:i}=Eg(t),s=Z9(e,r),a=await L9(t,s,n);return a?(n=w9(n,a,s,i),r=q9({url:i,parse:yb,loaders:s},n,r),await K9(a,t,n,r)):null}async function K9(t,e,n,r){if(N7(t),hu(e)){const i=e,{ok:o,redirected:s,status:a,statusText:u,type:l,url:c}=i,f=Object.fromEntries(i.headers.entries());r.response={headers:f,ok:o,redirected:s,status:a,statusText:u,type:l,url:c}}if(e=await X9(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(D7(t,n))return await F7(t,e,n,r,yb);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw $i(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function kd(t,e,n,r){!Array.isArray(e)&&!mb(e)&&(n=e,e=void 0);const i=VM(n);let o=t;return typeof t=="string"&&(o=await i(t)),du(t)&&(o=await i(t)),await yb(o,e,n)}const Q9="3.2.11",{_parseImageNode:J9}=globalThis,ey=typeof Image<"u",ty=typeof ImageBitmap<"u",eG=Boolean(J9),ny=pb?!0:eG;function tG(t){switch(t){case"auto":return ty||ey||ny;case"imagebitmap":return ty;case"image":return ey;case"data":return ny;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function nG(){if(ty)return"imagebitmap";if(ey)return"image";if(ny)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function rG(t){const e=oG(t);if(!e)throw new Error("Not an image");return e}function iG(t){switch(rG(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function oG(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const sG=/^data:image\/svg\+xml/,aG=/\.svg((\?|#).*)?$/;function _b(t){return t&&(sG.test(t)||aG.test(t))}function uG(t,e){if(_b(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return YM(t,e)}function YM(t,e){if(_b(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function XM(t,e,n){const r=uG(t,n),i=self.URL||self.webkitURL,o=typeof r!="string"&&i.createObjectURL(r);try{return await lG(o||r,e)}finally{o&&i.revokeObjectURL(o)}}async function lG(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=o=>i(new Error("Could not load image ".concat(t,": ").concat(o)))}catch(o){i(o)}})}const cG={};let $x=!0;async function fG(t,e,n){let r;_b(n)?r=await XM(t,e,n):r=YM(t,n);const i=e&&e.imagebitmap;return await hG(r,i)}async function hG(t,e=null){if((dG(e)||!$x)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),$x=!1}return await createImageBitmap(t)}function dG(t){for(const e in t||cG)return!1;return!0}const ci=!1,wl=!0;function qM(t){const e=Ec(t);return pG(e)||vG(e)||gG(e)||mG(e)}function pG(t){const e=Ec(t);return e.byteLength>=24&&e.getUint32(0,ci)===2303741511?{mimeType:"image/png",width:e.getUint32(16,ci),height:e.getUint32(20,ci)}:null}function gG(t){const e=Ec(t);return e.byteLength>=10&&e.getUint32(0,ci)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,wl),height:e.getUint16(8,wl)}:null}function mG(t){const e=Ec(t);return e.byteLength>=14&&e.getUint16(0,ci)===16973&&e.getUint32(2,wl)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,wl),height:e.getUint32(22,wl)}:null}function vG(t){const e=Ec(t);if(!(e.byteLength>=3&&e.getUint16(0,ci)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=yG();let o=2;for(;o+9<e.byteLength;){const s=e.getUint16(o,ci);if(i.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,ci),width:e.getUint16(o+7,ci)};if(!r.has(s))return null;o+=2,o+=e.getUint16(o,ci)}return null}function yG(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Ec(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function _G(t,e){const{mimeType:n}=qM(t)||{},r=globalThis._parseImageNode;return Ld(r),await r(t,n)}async function bG(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:o}=n||{},s=wG(i);let a;switch(s){case"imagebitmap":a=await fG(t,e,o);break;case"image":a=await XM(t,e,o);break;case"data":a=await _G(t);break;default:Ld(!1)}return i==="data"&&(a=iG(a)),a}function wG(t){switch(t){case"auto":case"data":return nG();default:return tG(t),t}}const EG=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],SG=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],xG={image:{type:"auto",decode:!0}},ZM={id:"image",module:"images",name:"Images",version:Q9,mimeTypes:SG,extensions:EG,parse:bG,tests:[t=>Boolean(qM(new DataView(t)))],options:xG},$e=new wc({id:"deck"});let ry={};function TG(t){ry=t}function Rn(t,e,n,r){$e.level>0&&ry[t]&&ry[t].call(null,e,n,r)}function PG(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const AG={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:PG,parseTextSync:JSON.parse},El="8.8.16",nh=globalThis.deck&&globalThis.deck.VERSION;if(nh&&nh!==El)throw new Error("deck.gl - multiple versions detected: ".concat(nh," vs ").concat(El));nh||($e.log(1,"deck.gl ".concat(El))(),globalThis.deck={...globalThis.deck,VERSION:El,version:El,log:$e,_registerLoggers:TG},P9([AG,[ZM,{imagebitmap:{premultiplyAlpha:"none"}}]]));const CG=globalThis.deck,Ae=new wc({id:"luma.gl"});function Dn(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const RG="Invalid WebGLRenderingContext",LG="Requires WebGL2";function Sg(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&Number.isFinite(t._version))}function Je(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function MG(t){return Je(t)?t:null}function xg(t){return Dn(Sg(t),RG),t}function Mn(t){return Dn(Je(t),LG),t}const il={};function OG(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function kG(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function IG(t,e){il[t]=!0,e!==void 0&&OG(e)}function NG(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(il[r]=!0);while(r!==0);for(r in il)if(il[r])return delete il[r],parseInt(r,10);return 0}}const Sc=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};Sc.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};Sc.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Ls=function(e){const n=this;this.gl=e,NG(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(o){return o===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(o){const s=n.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,o);const a=s.attribs[o];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(o){const s=n.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,o);const a=s.attribs[o];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(o,s){switch(o){case 34962:n.currentArrayBuffer=s;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=s;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(o,s){const u=n.currentVertexArrayObject.attribs[o];switch(s){case 34975:return u.buffer;case 34338:return u.enabled;case 34339:return u.size;case 34340:return u.stride;case 34341:return u.type;case 34922:return u.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(o,s,a,u,l,c){const f=n.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,o);const h=f.attribs[o];return h.buffer=n.currentArrayBuffer,h.size=s,h.type=a,h.normalized=u,h.stride=l,h.offset=c,h.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{kG("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Ls.prototype.VERTEX_ARRAY_BINDING_OES=34229;Ls.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new Sc(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Ls.prototype.createVertexArrayOES=function(){const e=new Sc(this);return this.vertexArrayObjects.push(e),e};Ls.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};Ls.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Sc&&e.hasBeenBound&&e.ext===this)};Ls.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){IG(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(i===o)return;(!i||o.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,o.elementArrayBuffer);let s=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,o.maxAttrib);for(let u=0;u<=a;u++){const l=o.attribs[u],c=i?i.attribs[u]:null;if((!i||l.enabled!==c.enabled)&&(l.enabled?r.enableVertexAttribArray.call(n,u):r.disableVertexAttribArray.call(n,u)),l.enabled){let f=!1;(!i||l.buffer!==c.buffer)&&(s!==l.buffer&&(r.bindBuffer.call(n,34962,l.buffer),s=l.buffer),f=!0),(f||l.cached!==c.cached)&&r.vertexAttribPointer.call(n,u,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==s&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function DG(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const n=t.getExtension;t.getExtension=function(i){const o=n.call(this,i);return o||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Ls(this)),this.__OESVertexArrayObject))}}const jx="OES_element_index",Gx="WEBGL_draw_buffers",FG="EXT_disjoint_timer_query",UG="EXT_disjoint_timer_query_webgl2",zG="EXT_texture_filter_anisotropic",Wx="WEBGL_debug_renderer_info",BG=35723,VG=4352,$G=36795,jG=34047,GG=37445,WG=37446,Pt=t=>Je(t)?void 0:0,HG={[3074]:t=>Je(t)?void 0:36064,[BG]:t=>Je(t)?void 0:VG,[35977]:Pt,[32937]:Pt,[$G]:(t,e)=>{const n=Je(t)?t.getExtension(UG):t.getExtension(FG);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[GG]:(t,e)=>{const n=t.getExtension(Wx);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[WG]:(t,e)=>{const n=t.getExtension(Wx);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[jG]:(t,e)=>{const n=t.luma.extensions[zG];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:Pt,[35071]:Pt,[37447]:Pt,[36063]:(t,e)=>{if(!Je(t)){const n=t.getExtension(Gx);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:Pt,[35374]:Pt,[35377]:Pt,[34852]:t=>{if(!Je(t)){const e=t.getExtension(Gx);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:t=>t.getExtension(jx)?2147483647:65535,[33001]:t=>t.getExtension(jx)?16777216:65535,[33e3]:t=>16777216,[37157]:Pt,[35373]:Pt,[35657]:Pt,[36183]:Pt,[37137]:Pt,[34045]:Pt,[35978]:Pt,[35979]:Pt,[35968]:Pt,[35376]:Pt,[35375]:Pt,[35659]:Pt,[37154]:Pt,[35371]:Pt,[35658]:Pt,[35076]:Pt,[35077]:Pt,[35380]:Pt};function YG(t,e,n){const r=HG[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}const XG="OES_vertex_array_object",KM="ANGLE_instanced_arrays",qG="WEBGL_draw_buffers",ZG="EXT_disjoint_timer_query",KG="EXT_texture_filter_anisotropic",QG="VertexArray requires WebGL2 or OES_vertex_array_object extension";function JG(t,e){return{webgl2:Je(t),ext:t.getExtension(e)}}const QM={[XG]:{meta:{suffix:"OES"},createVertexArray:()=>{Dn(!1,QG)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[KM]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Dn(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[qG]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Dn(!1)}},[ZG]:{meta:{suffix:"EXT"},createQuery:()=>{Dn(!1)},deleteQuery:()=>{Dn(!1)},beginQuery:()=>{Dn(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},l0={readBuffer:(t,e,n)=>{Je(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:o}=JG(t,KM);let s;switch(r){case 35069:s=i?void 0:!1;break;case 35070:s=!i&&!o?0:void 0;break}return s!==void 0?s:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!Je(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!Je(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:i}=t.luma,o=i[KG];r=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:YG,hint(t,e,n,r){return e(n,r)}};function eW(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(DG(t),tW(t),rW(t,QM),nW(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=eW;function tW(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function nW(t,e){let{target:n,target2:r}=e;Object.keys(l0).forEach(i=>{if(typeof l0[i]=="function"){const o=t[i]?t[i].bind(t):()=>{},s=l0[i].bind(null,t,o);n[i]=s,r[i]=s}})}function rW(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&iW(t,{extension:n,target:t.luma,target2:t})}function iW(t,e){let{extension:n,target:r,target2:i}=e;const o=QM[n];Dn(o);const{meta:s={}}=o,{suffix:a=""}=s,u=t.getExtension(n);for(const l of Object.keys(o)){const c="".concat(l).concat(a);let f=null;l==="meta"||typeof t[l]=="function"||(u&&typeof u[c]=="function"?f=function(){return u[c](...arguments)}:typeof o[l]=="function"&&(f=o[l].bind(r))),f&&(r[l]=f,i[l]=f)}}const bb={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},ro=(t,e,n)=>e?t.enable(n):t.disable(n),Hx=(t,e,n)=>t.hint(n,e),ir=(t,e,n)=>t.pixelStorei(n,e),oW=(t,e)=>{const n=Je(t)?36009:36160;return t.bindFramebuffer(n,e)},sW=(t,e)=>t.bindFramebuffer(36008,e);function ju(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const aW={[3042]:ro,[32773]:(t,e)=>t.blendColor(...e),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(t,e)=>t.clearColor(...e),[3107]:(t,e)=>t.colorMask(...e),[2884]:ro,[2885]:(t,e)=>t.cullFace(e),[2929]:ro,[2931]:(t,e)=>t.clearDepth(e),[2932]:(t,e)=>t.depthFunc(e),[2928]:(t,e)=>t.depthRange(...e),[2930]:(t,e)=>t.depthMask(e),[3024]:ro,[35723]:Hx,[36006]:oW,[2886]:(t,e)=>t.frontFace(e),[33170]:Hx,[2849]:(t,e)=>t.lineWidth(e),[32823]:ro,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:ro,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:ro,[3088]:(t,e)=>t.scissor(...e),[2960]:ro,[2961]:(t,e)=>t.clearStencil(e),[2968]:(t,e)=>t.stencilMaskSeparate(1028,e),[36005]:(t,e)=>t.stencilMaskSeparate(1029,e),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(t,e)=>t.viewport(...e),[3333]:ir,[3317]:ir,[37440]:ir,[37441]:ir,[37443]:ir,[3330]:ir,[3332]:ir,[3331]:ir,[36010]:sW,[3314]:ir,[32878]:ir,[3316]:ir,[3315]:ir,[32877]:ir,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=ju(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=ju(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=ju(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=ju(e)&&e.length===3?[...e,...e]:e;const[n,r,i,o,s,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,o,s,a)},stencilOp:(t,e)=>{e=ju(e)&&e.length===3?[...e,...e]:e;const[n,r,i,o,s,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,o,s,a)},viewport:(t,e)=>t.viewport(...e)};function Gt(t,e,n){return e[t]!==void 0?e[t]:n[t]}const uW={blendEquation:(t,e,n)=>t.blendEquationSeparate(Gt(32777,e,n),Gt(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Gt(32969,e,n),Gt(32968,e,n),Gt(32971,e,n),Gt(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Gt(32824,e,n),Gt(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Gt(32938,e,n),Gt(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Gt(2962,e,n),Gt(2967,e,n),Gt(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Gt(34816,e,n),Gt(36003,e,n),Gt(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Gt(2964,e,n),Gt(2965,e,n),Gt(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Gt(34817,e,n),Gt(34818,e,n),Gt(34819,e,n))},Yx={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({[36006]:n,[36010]:n});case 36009:return t({[36006]:n});case 36008:return t({[36010]:n});default:return null}},blendColor:(t,e,n,r,i)=>t({[32773]:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({[32777]:e,[34877]:e}),blendEquationSeparate:(t,e,n)=>t({[32777]:e,[34877]:n}),blendFunc:(t,e,n)=>t({[32969]:e,[32968]:n,[32971]:e,[32970]:n}),blendFuncSeparate:(t,e,n,r,i)=>t({[32969]:e,[32968]:n,[32971]:r,[32970]:i}),clearColor:(t,e,n,r,i)=>t({[3106]:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({[2931]:e}),clearStencil:(t,e)=>t({[2961]:e}),colorMask:(t,e,n,r,i)=>t({[3107]:[e,n,r,i]}),cullFace:(t,e)=>t({[2885]:e}),depthFunc:(t,e)=>t({[2932]:e}),depthRange:(t,e,n)=>t({[2928]:new Float32Array([e,n])}),depthMask:(t,e)=>t({[2930]:e}),frontFace:(t,e)=>t({[2886]:e}),lineWidth:(t,e)=>t({[2849]:e}),polygonOffset:(t,e,n)=>t({[32824]:e,[10752]:n}),sampleCoverage:(t,e,n)=>t({[32938]:e,[32939]:n}),scissor:(t,e,n,r,i)=>t({[3088]:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({[2968]:e,[36005]:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({[2962]:e,[2967]:n,[2963]:r,[34816]:e,[36003]:n,[36004]:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({[2964]:e,[2965]:n,[2966]:r,[34817]:e,[34818]:n,[34819]:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({[2978]:[e,n,r,i]})},oi=(t,e)=>t.isEnabled(e),Xx={[3042]:oi,[2884]:oi,[2929]:oi,[3024]:oi,[32823]:oi,[32926]:oi,[32928]:oi,[3089]:oi,[2960]:oi,[35977]:oi};function JM(t){for(const e in t)return!1;return!0}function lW(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function qx(t,e){const n=t[e].bind(t);t[e]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache?t.state.enable?t.state.cache[i]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function cW(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];const{valueChanged:u,oldValue:l}=n(t.state._updateCache,...s);return u&&r(...s),l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function fW(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class hW{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?pW(e):Object.assign({},bb),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Dn(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];ji(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in e){Dn(o!==void 0);const s=e[o],a=this.cache[o];lW(s,a)||(n=!0,r=a,i&&!(o in i)&&(i[o]=a),this.cache[o]=s)}return{valueChanged:n,oldValue:r}}}function eO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(Dn(r!==void 0),!t.state){const{polyfillContext:i}=globalThis;i&&i(t),t.state=new hW(t,{copyState:r}),fW(t);for(const o in Yx){const s=Yx[o];cW(t,o,s)}qx(t,"getParameter"),qx(t,"isEnabled")}return t.state.enable=n,t}function dW(t){t.state||eO(t,{copyState:!1}),t.state.push()}function Zx(t){Dn(t.state),t.state.pop()}function ji(t,e){if(Dn(Sg(t),"setParameters requires a WebGL context"),JM(e))return;const n={};for(const i in e){const o=Number(i),s=aW[i];s&&(typeof s=="string"?n[s]=!0:s(t,e[i],o))}const r=t.state&&t.state.cache;if(r)for(const i in n){const o=uW[i];o(t,e,r)}}function pW(t,e){if(e=e||bb,typeof e=="number"){const i=e,o=Xx[i];return o?o(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const o=Xx[i];r[i]=o?o(t,Number(i)):t.getParameter(Number(i))}return r}function gW(t){ji(t,bb)}function Tr(t,e,n){if(JM(e))return n(t);const{nocatch:r=!0}=e;dW(t),ji(t,e);let i;if(r)i=n(t),Zx(t);else try{i=n(t)}finally{Zx(t)}return i}function qa(t){const{luma:e}=t;if(t.canvas&&e){const{clientWidth:n}=e.canvasSizeInfo;return n?t.drawingBufferWidth/n:1}return 1}function c0(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=qa(t),i=t.drawingBufferWidth,o=t.drawingBufferHeight;return vW(e,r,i,o,n)}function mW(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function vW(t,e,n,r,i){const o=Kx(t[0],e,n);let s=Qx(t[1],e,r,i),a=Kx(t[0]+1,e,n);const u=a===n-1?a:a-1;a=Qx(t[1]+1,e,r,i);let l;return i?(a=a===0?a:a+1,l=s,s=a):l=a===r-1?a:a-1,{x:o,y:s,width:Math.max(u-o+1,1),height:Math.max(l-s+1,1)}}function Kx(t,e,n){return Math.min(Math.round(t*e),n-1)}function Qx(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const wb=Xi(),yW=wb&&typeof document<"u",tO={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function nO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Dn(wb,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},tO,t);const{width:e,height:n}=t;function r(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=r;let i;const{canvas:o}=t,s=EW({canvas:o,width:e,height:n,onError:r});return i=wW(s,t),i?(i=Eb(i,t),SW(i),i):null}function Eb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||xW(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},tO,e);const{manageState:n,debug:r}=e;return n&&eO(t,{copyState:!1,log:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return Ae.log(1,...o)()}}),wb&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),Ae.level=Math.max(Ae.level,1)):Ae.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function _W(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),o=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:o||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function bW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const r=mW(e.useDevicePixels);TW(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function wW(t,e){const{onError:n}=e;let r=null;const i=u=>r=u.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;return s&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),o&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function EW(t){let{canvas:e,width:n=800,height:r=600,onError:i}=t,o;return typeof e=="string"?(yW&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(e,"' before page was loaded")),o=document.getElementById(e)):e?o=e:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",o.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function SW(t){const e=Je(t)?"WebGL2":"WebGL1",n=_W(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";Ae.info(1,"".concat(e).concat(i," context ").concat(r))()}function xW(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function TW(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&(Ae.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const o=t.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==e){let s=e;const a=Math.floor(r*s),u=Math.floor(i*s);t.canvas.width=a,t.canvas.height=u,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==u)&&(Ae.warn("Device pixel ratio clamped")(),s=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*s),t.canvas.height=Math.floor(i*s)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}const Sl="8.5.17",PW="set luma.log.level=1 (or higher) to trace rendering";class AW{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new gb({id:e})),this.stats.get(e)}}const is=new AW;if(globalThis.luma&&globalThis.luma.VERSION!==Sl)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Sl));globalThis.luma||(Xi()&&Ae.log(1,"luma.gl ".concat(Sl," - ").concat(PW))(),globalThis.luma=globalThis.luma||{VERSION:Sl,version:Sl,log:Ae,stats:is,globals:{modules:{},nodeIO:{}}});function CW(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function RW(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function me(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function f0(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return me(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function Ro(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const h0={};function vi(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";h0[t]=h0[t]||1;const e=h0[t]++;return"".concat(t,"-").concat(e)}function Jx(t){return me(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function Za(t){let e=!0;for(const n in t){e=!1;break}return e}function rO(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);r.forEach(s=>{o.methodName||(o[s]=()=>{throw Ae.removed("Calling removed method ".concat(e,".").concat(s,": "),i)(),new Error(s)})})}const Js="Resource subclass must define virtual methods";class qi{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xg(e);const{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||vi(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=f0(this.gl,e),me(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const o=Je(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,u="webgl2"in i?i.webgl2:i.webgl1;return o?u:a}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},o=Je(this.gl),s={},a=n||Object.keys(i);for(const u of a){const l=i[u];if(l&&(!("webgl2"in l)||o)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const f=r?Ro(this.gl,u):u;s[f]=this.getParameter(u,e),r&&l.type==="GLenum"&&(s[f]=Ro(this.gl,s[f]))}}return s}setParameter(e,n){e=f0(this.gl,e),me(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const o=Je(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=f0(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return rO(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(Js)}_deleteHandle(){throw new Error(Js)}_bindHandle(e){throw new Error(Js)}_getOptsFromHandle(){throw new Error(Js)}_getParameter(e,n){throw new Error(Js)}_setParameter(e,n){throw new Error(Js)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=is.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];is.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id)}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const i=is.get("Memory Usage".concat(r));i.get("GPU Memory").addCount(e),i.get("".concat(n," Memory")).addCount(e),this.byteLength=e}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id)}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=is.get("Memory Usage".concat(n));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const LW="Failed to deduce GL constant from typed array";function iy(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(LW)}}function Gl(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function MW(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:o}=t;const s=n*i;o=o||new Uint8Array(s);for(let a=0;a<r/2;++a){const u=a*s,l=(r-a-1)*s;o.set(e.subarray(u,u+s)),e.copyWithin(u,l,l+s),e.set(o,l)}}function OW(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),o=Math.round(r/2),s=new Uint8Array(i*o*4);for(let a=0;a<o;a++)for(let u=0;u<i;u++)for(let l=0;l<4;l++)s[(a*i+u)*4+l]=e[(a*2*n+u*2)*4+l];return{data:s,width:i,height:o}}function oy(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:o={}}=n;for(const a in r)if(a in e){const l=r[a]?"".concat(t,".").concat(r[a]):"N/A";Ae.removed("".concat(t,".").concat(a),l)()}for(const a in i)if(a in e){const u=i[a];Ae.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(u))()}let s=null;for(const a in o)if(a in e){const u=o[a];Ae.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(u))(),s=s||Object.assign({},e),s[u]=e[a],delete s[a]}return s||e}const kW={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},IW={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class cr{static getBytesPerElement(e){return Gl(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return me(e.size),Gl(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new cr(kW,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return cr.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return cr.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=oy("Accessor",e,IW),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const eT=10,iO={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},NW={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:iO},DW={removedProps:iO};class _t extends qi{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/cr.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/cr.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=oy("Buffer",e,NW),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=oy("Buffer",e,DW),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new cr(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:i=0}=e,o=e.byteLength||e.length;me(n);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),i!==0||o!==void 0?(Mn(this.gl),this.gl.bufferSubData(this.target,r,n,i,o)):this.gl.bufferSubData(s,r,n),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:i=0,size:o}=e;const{gl:s}=this;return Mn(s),s.bindBuffer(36662,n.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,i,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Mn(this.gl);const o=Gl(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(n),a=r;let u,l;e?(l=e.length,u=l-a):(u=Math.min(s,i||s),l=a+u);const c=Math.min(s,u);return i=i||c,me(i<=c),e=e||new o(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):(me(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(eT,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;me(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,eT),this.bytesUsed=r,this._trackAllocatedMemory(r);const o=iy(e);return me(o),this.setAccessor(new cr(this.accessor,{type:o})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;me(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=Gl(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new cr(this.accessor,{type:iy(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return Ae.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Ae.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return Ae.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return Ae.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new cr(this.accessor,e),this}}const Sb={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},oO={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},sO={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function FW(t,e){const n=Sb[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=Je(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function UW(t,e){const n=Sb[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const zW=[9729,9728],tT=globalThis.WebGLBuffer||function(){};class bs extends qi{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:i}=n;let o=!0;return r&&(o=o&&FW(e,r),o=o&&(!i||UW(e,r))),o}constructor(e,n){const{id:r=vi("texture"),handle:i,target:o}=n;super(e,{id:r,handle:i}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(y=>this.initialize(Object.assign({},e,{pixels:y,data:y}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:o=6408,border:s=0,recreate:a=!1,parameters:u={},pixelStore:l={},textureUnit:c=void 0}=e;n||(n=i);let{width:f,height:h,dataFormat:d,type:g,compressed:m=!1,mipmaps:S=!0}=e;const{depth:_=0}=e;return{width:f,height:h,compressed:m,dataFormat:d,type:g}=this._deduceParameters({format:o,type:g,dataFormat:d,compressed:m,data:n,width:f,height:h}),this.width=f,this.height=h,this.depth=_,this.format=o,this.type=g,this.dataFormat=d,this.border=s,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),S&&this._isNPOT()&&(Ae.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),S=!1,this._updateForNPOT(u)),this.mipmaps=S,this.setImageData({data:n,width:f,height:h,depth:_,format:o,type:g,dataFormat:d,border:s,mipmaps:S,parameters:l,compressed:m}),S&&this.generateMipmap(),this.setParameters(u),a&&(this.data=n),r&&(this._video={video:n,parameters:u,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:i=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Ae.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Tr(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:i=0,format:o=this.format,border:s=this.border,offset:a=0,parameters:u={}}=e;let{data:l=null,type:c=this.type,width:f=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:g=!1}=e;l||(l=r),{type:c,dataFormat:d,compressed:g,width:f,height:h}=this._deduceParameters({format:o,type:c,dataFormat:d,compressed:g,data:l,width:f,height:h});const{gl:m}=this;m.bindTexture(this.target,this.handle);let S=null;({data:l,dataType:S}=this._getDataType({data:l,compressed:g}));let _,y=0;if(Tr(this.gl,u,()=>{switch(S){case"null":m.texImage2D(n,i,o,f,h,s,d,c,l);break;case"typed-array":m.texImage2D(n,i,o,f,h,s,d,c,l,a);break;case"buffer":_=Mn(m),_.bindBuffer(35052,l.handle||l),_.texImage2D(n,i,o,f,h,s,d,c,a),_.bindBuffer(35052,null);break;case"browser-object":Je(m)?m.texImage2D(n,i,o,f,h,s,d,c,l):m.texImage2D(n,i,o,d,c,l);break;case"compressed":for(const[w,T]of l.entries())m.compressedTexImage2D(n,w,T.format,T.width,T.height,s,T.data),y+=T.levelSize;break;default:me(!1,"Unknown image data type")}}),S==="compressed")this._trackAllocatedMemory(y,"Texture");else if(l&&l.byteLength)this._trackAllocatedMemory(l.byteLength,"Texture");else{const w=oO[this.dataFormat]||4,T=sO[this.type]||1;this._trackAllocatedMemory(this.width*this.height*w*T,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:i=null,x:o=0,y:s=0,width:a=this.width,height:u=this.height,level:l=0,format:c=this.format,type:f=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:g=0,border:m=this.border,parameters:S={}}=e;if({type:f,dataFormat:h,compressed:d,width:a,height:u}=this._deduceParameters({format:c,type:f,dataFormat:h,compressed:d,data:i,width:a,height:u}),me(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const _=i;i=_.data,a=_.shape[0],u=_.shape[1]}i instanceof _t&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),Tr(this.gl,S,()=>{if(d)this.gl.compressedTexSubImage2D(n,l,o,s,a,u,c,i);else if(i===null)this.gl.texSubImage2D(n,l,o,s,a,u,h,f,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(n,l,o,s,a,u,h,f,i,g);else if(i instanceof tT){const _=Mn(this.gl);_.bindBuffer(35052,i),_.texSubImage2D(n,l,o,s,a,u,h,f,g),_.bindBuffer(35052,null)}else Je(this.gl)?Mn(this.gl).texSubImage2D(n,l,o,s,a,u,h,f,i):this.gl.texSubImage2D(n,l,o,s,h,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Ae.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof _t?{data:n.handle,dataType:"buffer"}:n instanceof tT?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:i,height:o,dataFormat:s,type:a,compressed:u}=e;const l=Sb[n];return s=s||l&&l.dataFormat,a=a||l&&l.types[0],u=u||l&&l.compressed,{width:i,height:o}=this._deduceImageSize(r,i,o),{dataFormat:s,type:a,compressed:u,width:i,height:o,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},me(i,"Could not deduced texture size"),me(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),me(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:me(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Je(this.gl)||!this.width||!this.height?!1:!Jx(this.width)||!Jx(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:zW.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let BW="";function VW(t,e){return me(typeof t=="string"),t=BW+t,new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}class Un extends bs{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return bs.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xg(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:VW(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const sy=[34069,34070,34071,34072,34073,34074];class aO extends bs{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xg(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:n,data:r,x:i=0,y:o=0,mipmapLevel:s=0}=e;return this._subImage({target:n,data:r,x:i,y:o,mipmapLevel:s})}async setCubeMapImageData(e){let{width:n,height:r,pixels:i,data:o,border:s=0,format:a=6408,type:u=5121}=e;const{gl:l}=this,c=i||o,f=await Promise.all(sy.map(h=>{const d=c[h];return Promise.all(Array.isArray(d)?d:[d])}));this.bind(),sy.forEach((h,d)=>{f[d].length>1&&this.opts.mipmaps!==!1&&Ae.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[d].forEach((g,m)=>{n&&r?l.texImage2D(h,m,a,n,r,s,a,u,g):l.texImage2D(h,m,a,a,u,g)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:i,pixels:o,data:s,border:a=0,format:u=6408,type:l=5121}=e,{gl:c}=this,f=o||s;return this.bind(),f instanceof Promise?f.then(h=>this.setImageDataForFace(Object.assign({},e,{face:n,data:h,pixels:h}))):this.width||this.height?c.texImage2D(n,0,u,r,i,a,u,l,f):c.texImage2D(n,0,u,u,l,f),this}}aO.FACES=sy;class $W extends bs{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return Je(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Mn(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:i,height:o,depth:s=1,border:a=0,format:u,type:l=5121,offset:c=0,data:f,parameters:h={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Tr(this.gl,h,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,n,r,i,o,s,a,u,l,f),f instanceof _t&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,n,r,i,o,s,a,u,l,c))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const d=oO[this.dataFormat]||4,g=sO[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*d*g,"Texture")}return this.loaded=!0,this}}const Wo="EXT_color_buffer_float",nT={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:Wo,bpp:2},[33327]:{gl2:Wo,bpp:4},[34842]:{gl2:Wo,bpp:8},[33326]:{gl2:Wo,bpp:4},[33328]:{gl2:Wo,bpp:8},[34836]:{gl2:Wo,bpp:16},[35898]:{gl2:Wo,bpp:4}};function jW(t,e,n){const r=n[e];if(!r)return!1;const i=Je(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}class _a extends qi{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||jW(e,n,nT)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:i=1,samples:o=0}=e;return me(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&Je(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,n,r,i):this.gl.renderbufferStorage(36161,n,r,i),this.format=n,this.width=r,this.height=i,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*nT[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const GW=256,WW=1024,HW=16384,rT=6144,iT=6145,oT=6146,sT=34041,uO="clear: bad arguments";function xb(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o={};e&&(o.framebuffer=e);let s=0;n&&(s|=HW,n!==!0&&(o.clearColor=n)),r&&(s|=GW,r!==!0&&(o.clearDepth=r)),i&&(s|=WW,r!==!0&&(o.clearStencil=r)),me(s!==0,uO),Tr(t,o,()=>{t.clear(s)})}function YW(t){let{framebuffer:e=null,buffer:n=rT,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Mn(t),Tr(t,{framebuffer:e},()=>{switch(n){case rT:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case iT:t.clearBufferfv(iT,0,[i]);break;case oT:t.clearBufferiv(oT,0,[i]);break;case sT:const[o,s]=i;t.clearBufferfi(sT,0,o,s);break;default:me(!1,uO)}})}function XW(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return me(!1),0}}function Tg(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:u,sourceType:l}=e;const{framebuffer:c,deleteFramebuffer:f}=lO(t);me(c);const{gl:h,handle:d,attachments:g}=c;a=a||c.width,u=u||c.height,o===36064&&d===null&&(o=1028),me(g[o]),l=l||g[o].type,s=ZW(s,l,i,a,u),l=l||iy(s);const m=h.bindFramebuffer(36160,d);return h.readPixels(n,r,a,u,i,l,s),h.bindFramebuffer(36160,m||null),f&&c.delete(),s}function aT(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Tg(t,{sourceAttachment:e}),{width:i,height:o}=t;for(;o>n;)({data:r,width:i,height:o}=OW({data:r,width:i,height:o}));MW({data:r,width:i,height:o});const s=document.createElement("canvas");s.width=i,s.height=o;const a=s.getContext("2d"),u=a.createImageData(i,o);return u.data.set(r),a.putImageData(u,0,0),s.toDataURL()}function qW(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=n;let{targetX:a,targetY:u,targetZ:l,width:c,height:f}=n;const{framebuffer:h,deleteFramebuffer:d}=lO(t);me(h);const{gl:g,handle:m}=h,S=typeof a<"u"||typeof u<"u"||typeof l<"u";a=a||0,u=u||0,l=l||0;const _=g.bindFramebuffer(36160,m);me(e);let y=null;if(e instanceof bs&&(y=e,c=Number.isFinite(c)?c:y.width,f=Number.isFinite(f)?f:y.height,y.bind(0),e=y.target),!S)g.copyTexImage2D(e,o,s,r,i,c,f,0);else switch(e){case 3553:case 34067:g.copyTexSubImage2D(e,o,a,u,r,i,c,f);break;case 35866:case 32879:Mn(g).copyTexSubImage3D(e,o,a,u,l,r,i,c,f);break}return y&&y.unbind(),g.bindFramebuffer(36160,_||null),d&&h.delete(),y}function lO(t){return t instanceof nn?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:oH(t),deleteFramebuffer:!0}}function ZW(t,e,n,r,i){if(t)return t;e=e||5121;const o=Gl(e,{clamped:!1}),s=XW(n);return new o(r*i*s)}const At={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function KW(t){const e=new Un(t,{format:6408,type:5126,dataFormat:6408}),n=new nn(t,{id:"test-framebuffer",check:!1,attachments:{[36064]:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const cO={[At.WEBGL2]:[!1,!0],[At.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[At.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[At.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[At.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[At.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[At.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[At.FLOAT_BLEND]:["EXT_float_blend"],[At.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[At.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[At.TEXTURE_FLOAT]:["OES_texture_float",!0],[At.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[At.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[At.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[At.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[At.COLOR_ATTACHMENT_RGBA32F]:[KW,"EXT_color_buffer_float"],[At.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[At.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[At.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[At.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[At.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[At.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},QW=2;function fO(t,e){return Tb(t,e)}function Tb(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>hO(t,n))}function JW(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in cO)t.luma.caps[e]===void 0&&(t.luma.caps[e]=hO(t,e));return t.luma.caps}function hO(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=eH(t,e)),t.luma.caps[e]||Ae.log(QW,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function eH(t,e){const n=cO[e];me(n,e);let r;const i=Je(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(const o of i)r=r&&Boolean(t.getExtension(o))}else typeof i=="string"?r=Boolean(t.getExtension(i)):typeof i=="boolean"?r=i:me(!1);return r}const uT="Multiple render targets not supported";class nn extends qi{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:i}=n;let o=!0;return r&&(o=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(o=o&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new nn(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Mn(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Mn(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:i=null,color:o=!0,depth:s=!0,stencil:a=!1,check:u=!0,readBuffer:l=void 0,drawBuffers:c=void 0}=e;if(me(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,i)for(const f in i){const h=i[f];(Array.isArray(h)?h[0]:h).resize({width:n,height:r})}else i=this._createDefaultAttachments(o,s,a,n,r);this.update({clearAttachments:!0,attachments:i,readBuffer:l,drawBuffers:c}),i&&u&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:i,clearAttachments:o=!1,resizeAttachments:s=!0}=e;this.attach(n,{clearAttachments:o,resizeAttachments:s});const{gl:a}=this,u=a.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,u||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return me(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&Ae.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(const i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};n&&Object.keys(this.attachments).forEach(s=>{i[s]=null}),Object.assign(i,e);const o=this.gl.bindFramebuffer(36160,this.handle);for(const s in i){me(s!==void 0,"Misspelled framebuffer binding point?");const a=Number(s),u=i[a];let l=u;if(!l)this._unattach(a);else if(l instanceof _a)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(u)){const[c,f=0,h=0]=u;l=c,this._attachTexture({attachment:a,texture:c,layer:f,level:h})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});r&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(s=>!this.attachments[s]).forEach(s=>{delete this.attachments[s]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(nH(e));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:r,stencil:i,drawBuffers:o=[]}=e,s=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&xb(this.gl,{color:n,depth:r,stencil:i}),o.forEach((a,u)=>{YW(this.gl,{drawBuffer:u,value:a})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return Ae.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Ae.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Ae.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Ae.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Ae.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Ae.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:i=0,width:o,height:s}=e;const a=Mn(this.gl),u=a.bindFramebuffer(36008,this.handle);return r===0&&i===0&&o===void 0&&s===void 0?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,r,i,o,s),a.bindFramebuffer(36008,u),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=Ro(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const o of r){const s=n?Ro(this.gl,o):o;i[s]=this.getAttachmentParameter(e,o,n)}return i}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),r={};for(const i of n){const o=Number(i),s=e?Ro(this.gl,o):o;r[s]=this.getAttachmentParameters(o,e)}return r}show(){return typeof window<"u"&&window.open(aT(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>Ae.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const r=aT(this,{targetMaxHeight:100});return Ae.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,o){let s=null;return e&&(s=s||{},s[36064]=new Un(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(s[36064])),n&&r?(s=s||{},s[33306]=new _a(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(s[33306])):n?(s=s||{},s[36096]=new _a(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(s[36096])):r&&me(!1),s}_unattach(e){const n=this.attachments[e];!n||(n instanceof _a?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e;const{gl:i}=this;i.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:i,level:o}=e;const{gl:s}=this;switch(s.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:Mn(s).framebufferTextureLayer(36160,n,r.target,o,i);break;case 34067:const u=tH(i);s.framebufferTexture2D(36160,n,u,r.handle,o);break;case 3553:s.framebufferTexture2D(36160,n,3553,r.handle,o);break;default:me(!1,"Illegal texture type")}s.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){const n=MG(this.gl);n?n.readBuffer(e):me(e===36064||e===1029,uT),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=Mn(n);if(r)r.drawBuffers(e);else{const i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):me(e.length===1&&(e[0]===36064||e[0]===1029),uT)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=JW(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function tH(t){return t<34069?t+34069:t}function nH(t){return(nn.STATUS||{})[t]||"Framebuffer error ".concat(t)}const rH=[36049,36048,33296,33298,33299,33300,33301,33302,33303];nn.ATTACHMENT_PARAMETERS=rH;function iH(t,e){me(t instanceof Un||t instanceof aO||t instanceof $W);const n=t.constructor,{gl:r,width:i,height:o,format:s,type:a,dataFormat:u,border:l,mipmaps:c}=t,f=Object.assign({width:i,height:o,format:s,type:a,dataFormat:u,border:l,mipmaps:c},e);return new n(r,f)}function oH(t,e){const{gl:n,width:r,height:i,id:o}=t;return new nn(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:r,height:i,attachments:{[36064]:t}}))}function rh(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const sH=35632,aH=35633;function uH(t){switch(t){case sH:return"fragment";case aH:return"vertex";default:return"unknown type"}}function lH(t,e,n,r){const i=t.split(/\r?\n/),o={},s={},a=r||rh(e)||"(unnamed)",u="".concat(uH(n)," shader ").concat(a);for(let c=0;c<i.length;c++){const f=i[c];if(f.length<=1)continue;const h=f.split(":"),d=h[0],g=parseInt(h[2],10);if(isNaN(g))throw new Error("GLSL compilation error in ".concat(u,": ").concat(t));d!=="WARNING"?o[g]=f:s[g]=f}const l=cH(e);return{shaderName:u,errors:lT(o,l),warnings:lT(s,l)}}function lT(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(i,`
`),t[r+1])){const o=t[r+1],s=o.split(":",3),a=s[0],u=parseInt(s[1],10)||0,l=o.substring(s.join(":").length+1).trim();n+=dO("^^^ ".concat(a,": ").concat(l,`

`),u)}}return n}function cH(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((o,s)=>{const a=String(s+e),u=a.length;return dO(a,i-u)+n+o})}function dO(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function pO(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const fH="Shader: GLSL source code must be a JavaScript string";class Wl extends qi{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return me(!1),"unknown"}}constructor(e,n){xg(e),me(typeof n.source=="string",fH);const r=rh(n.source,null)||n.id||vi("unnamed ".concat(Wl.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const r=rh(n,null);r&&(this.id=vi(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(Wl.getTypeName(this.shaderType),":").concat(this.id)}getName(){return rh(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:o,warnings:s}=lH(r,this.source,this.shaderType,this.id);throw Ae.error("GLSL compilation errors in ".concat(i,`
`).concat(o))(),Ae.warn("GLSL compilation warnings in ".concat(i,`
`).concat(s))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class d0 extends Wl{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class p0 extends Wl{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const hH={[5126]:Mt.bind(null,"uniform1fv",or,1,Cn),[35664]:Mt.bind(null,"uniform2fv",or,2,Cn),[35665]:Mt.bind(null,"uniform3fv",or,3,Cn),[35666]:Mt.bind(null,"uniform4fv",or,4,Cn),[5124]:Mt.bind(null,"uniform1iv",io,1,Cn),[35667]:Mt.bind(null,"uniform2iv",io,2,Cn),[35668]:Mt.bind(null,"uniform3iv",io,3,Cn),[35669]:Mt.bind(null,"uniform4iv",io,4,Cn),[35670]:Mt.bind(null,"uniform1iv",io,1,Cn),[35671]:Mt.bind(null,"uniform2iv",io,2,Cn),[35672]:Mt.bind(null,"uniform3iv",io,3,Cn),[35673]:Mt.bind(null,"uniform4iv",io,4,Cn),[35674]:Mt.bind(null,"uniformMatrix2fv",or,4,Ci),[35675]:Mt.bind(null,"uniformMatrix3fv",or,9,Ci),[35676]:Mt.bind(null,"uniformMatrix4fv",or,16,Ci),[35678]:yn,[35680]:yn,[5125]:Mt.bind(null,"uniform1uiv",_f,1,Cn),[36294]:Mt.bind(null,"uniform2uiv",_f,2,Cn),[36295]:Mt.bind(null,"uniform3uiv",_f,3,Cn),[36296]:Mt.bind(null,"uniform4uiv",_f,4,Cn),[35685]:Mt.bind(null,"uniformMatrix2x3fv",or,6,Ci),[35686]:Mt.bind(null,"uniformMatrix2x4fv",or,8,Ci),[35687]:Mt.bind(null,"uniformMatrix3x2fv",or,6,Ci),[35688]:Mt.bind(null,"uniformMatrix3x4fv",or,12,Ci),[35689]:Mt.bind(null,"uniformMatrix4x2fv",or,8,Ci),[35690]:Mt.bind(null,"uniformMatrix4x3fv",or,12,Ci),[35678]:yn,[35680]:yn,[35679]:yn,[35682]:yn,[36289]:yn,[36292]:yn,[36293]:yn,[36298]:yn,[36299]:yn,[36300]:yn,[36303]:yn,[36306]:yn,[36307]:yn,[36308]:yn,[36311]:yn},dH={},pH={},gH={},cT=[0];function Pb(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(cT[0]=t,t=cT);const i=t.length;if(i%e&&Ae.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let o=r[i];o||(o=new n(i),r[i]=o);for(let s=0;s<i;s++)o[s]=t[s];return o}function or(t,e){return Pb(t,e,Float32Array,dH)}function io(t,e){return Pb(t,e,Int32Array,pH)}function _f(t,e){return Pb(t,e,Uint32Array,gH)}function fT(t,e,n){const r=hH[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function mH(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:Boolean(n[2])}}function vH(t,e,n){for(const r in t){const i=t[r];if((!n||Boolean(n[r]))&&!yH(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function yH(t){return Array.isArray(t)||ArrayBuffer.isView(t)?bH(t):isFinite(t)||t===!0||t===!1||t instanceof bs||t instanceof _a?!0:t instanceof nn?Boolean(t.texture):!1}function _H(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let i=0,o=n.length;i<o;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function bH(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function yn(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function Mt(t,e,n,r){let i=null,o=null;return(s,a,u)=>{const l=e(u,n),c=l.length;let f=!1;if(i===null)i=new Float32Array(c),o=c,f=!0;else{me(o===c,"Uniform length cannot change.");for(let h=0;h<c;++h)if(l[h]!==i[h]){f=!0;break}}return f&&(r(s,t,a,l),i.set(l)),f}}function Cn(t,e,n,r){t[e](n,r)}function Ci(t,e,n,r){t[e](n,!1,r)}const wH=5120,EH=5121,SH=5122,xH=5123,hT=0,bf=1,TH=2,PH=3,wf=4,AH=5,CH=6,on=5126,RH=35664,LH=35665,MH=35666,Gu=5124,OH=35667,kH=35668,IH=35669,Wu=5125,NH=36294,DH=36295,FH=36296,UH=35670,zH=35671,BH=35672,VH=35673,$H=35674,jH=35675,GH=35676,WH=35685,HH=35686,YH=35687,XH=35688,qH=35689,ZH=35690,ay={[on]:[on,1,"float"],[RH]:[on,2,"vec2"],[LH]:[on,3,"vec3"],[MH]:[on,4,"vec4"],[Gu]:[Gu,1,"int"],[OH]:[Gu,2,"ivec2"],[kH]:[Gu,3,"ivec3"],[IH]:[Gu,4,"ivec4"],[Wu]:[Wu,1,"uint"],[NH]:[Wu,2,"uvec2"],[DH]:[Wu,3,"uvec3"],[FH]:[Wu,4,"uvec4"],[UH]:[on,1,"bool"],[zH]:[on,2,"bvec2"],[BH]:[on,3,"bvec3"],[VH]:[on,4,"bvec4"],[$H]:[on,8,"mat2"],[WH]:[on,8,"mat2x3"],[HH]:[on,8,"mat2x4"],[jH]:[on,12,"mat3"],[YH]:[on,12,"mat3x2"],[XH]:[on,12,"mat3x4"],[GH]:[on,16,"mat4"],[qH]:[on,16,"mat4x2"],[ZH]:[on,16,"mat4x3"]};function KH(t){switch(t){case hT:return hT;case bf:return bf;case PH:return bf;case TH:return bf;case wf:return wf;case AH:return wf;case CH:return wf;default:return me(!1),0}}function dT(t){const e=ay[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function gO(t,e){switch(t){case wH:case EH:case SH:case xH:t=on;break}for(const n in ay){const[r,i,o]=ay[n];if(r===t&&i===e)return{glType:n,name:o}}return null}class QH{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:o,type:s,size:a}=n.getActiveAttrib(e.handle,i),u=n.getAttribLocation(e.handle,o);u>=0&&this._addAttribute(u,o,s,a)}this.attributeInfos.sort((i,o)=>i.location-o.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!Je(n))return;const r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:o,type:s,size:a}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,o,s,a)}this.varyingInfos.sort((i,o)=>i.location-o.location)}_addAttribute(e,n,r,i){const{type:o,components:s}=dT(r),a={type:o,size:i*s};this._inferProperties(e,n,a);const u={location:e,name:n,accessor:new cr(a)};this.attributeInfos.push(u),this.attributeInfosByLocation[e]=u,this.attributeInfosByName[u.name]=u}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){const{type:o,components:s}=dT(r),a=new cr({type:o,size:i*s}),u={location:e,name:n,accessor:a};this.varyingInfos.push(u),this.varyingInfosByName[u.name]=u}}const pT=4,JH=35981,eY=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class mO extends qi{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",eY),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:r,fs:i,varyings:o,bufferMode:s=JH}=e;return this.hash=n||"",this.vs=typeof r=="string"?new d0(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new p0(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,me(this.vs instanceof d0),me(this.fs instanceof p0),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Mn(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new QH(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:i,offset:o=0,start:s,end:a,isIndexed:u=!1,indexType:l=5123,instanceCount:c=0,isInstanced:f=c>0,vertexArray:h=null,transformFeedback:d,framebuffer:g,parameters:m={},uniforms:S,samplers:_}=e;if((S||_)&&(Ae.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(S||{})),Ae.priority>=n){const y=g?g.id:"default",w="mode=".concat(Ro(this.gl,r)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(Ro(this.gl,l)," ")+"isInstanced=".concat(f," isIndexed=").concat(u," ")+"Framebuffer=".concat(y);Ae.log(n,w)()}return me(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||f&&c===0?!1:(h.bindForDraw(i,c,()=>{if(g!==void 0&&(m=Object.assign({},m,{framebuffer:g})),d){const y=KH(r);d.begin(y)}this._bindTextures(),Tr(this.gl,m,()=>{u&&f?this.gl2.drawElementsInstanced(r,i,l,o,c):u&&Je(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(r,s,a,i,l,o):u?this.gl.drawElements(r,i,l,o):f?this.gl2.drawArraysInstanced(r,o,i,c):this.gl.drawArrays(r,o,i)}),d&&d.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ae.priority>=2&&vH(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],i=this._uniformSetters[n];if(i){let o=r,s=!1;if(o instanceof nn&&(o=o.texture),o instanceof bs)if(s=this.uniforms[n]!==r,s){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=o,{textureIndex:u}=i;a.bind(u),o=u,this._textureUniforms[n]=a}else o=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(o)||s)&&_H(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new d0({handle:i});break;case 35632:r.fs=new p0({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=vi(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),Ae.time(pT,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),Ae.timeEnd(pT,"linkProgram for ".concat(this._getName()))(),e.debug||Ae.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:i}=mH(r.name);let o=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=fT(e,o,r),r.size>1)for(let s=0;s<r.size;s++)o=e.getUniformLocation(this.handle,"".concat(i,"[").concat(s,"]")),this._uniformSetters["".concat(i,"[").concat(s,"]")]=fT(e,o,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const tY=34918,nY=34919,rY=35007,iY=36795,oY=35976,sY=35887,aY=36202;class Id extends qi{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=Je(e),i=Tb(e,At.TIMER_QUERY);let o=r||i;for(const s of n)switch(s){case"queries":o=o&&r;break;case"timers":o=o&&i;break;default:me(!1)}return o}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(rY)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?aY:sY)}beginTransformFeedbackQuery(){return this.begin(oY)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,nY);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(iY)}getResult(){return this.gl2.getQueryParameter(this.handle,tY)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{const o=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return Id.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class vO extends qi{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return Je(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Mn(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Za(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:i,byteSize:o,byteOffset:s}=this._getBufferParams(n);return r<0?(this.unused[e]=i,Ae.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,s,o),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof _t?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const o=n&&n.handle;return!o||i===void 0?this.gl.bindBufferBase(35982,e,o):this.gl.bindBufferRange(35982,e,o,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let Ef=null;function uY(t){return(!Ef||Ef.byteLength<t)&&(Ef=new ArrayBuffer(t)),Ef}function lY(t,e){const n=uY(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function cY(t){let{target:e,source:n,start:r=0,count:i=1}=t;const o=n.length,s=i*o;let a=0;for(let u=r;a<o;a++)e[u++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+s-a),a=s);return e}const fY="elements must be GL.ELEMENT_ARRAY_BUFFER";class sr extends qi{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Je(e)||DM()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new sr(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return sr.MAX_ATTRIBUTES=sr.MAX_ATTRIBUTES||e.getParameter(34921),sr.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:sr._setConstantFloatArray(e,n,r);break;case Int32Array:sr._setConstantIntArray(e,n,r);break;case Uint32Array:sr._setConstantUintArray(e,n,r);break;default:me(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return sr.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return me(!e||e.target===34963,fY),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:i,type:o,stride:s,offset:a,normalized:u,integer:l,divisor:c}=r,{gl:f,gl2:h}=this;return e=Number(e),this.bind(()=>{f.bindBuffer(34962,n.handle),l?(me(Je(f)),h.vertexAttribIPointer(e,i,o,s,a)):f.vertexAttribPointer(e,i,o,u,s,a),f.enableVertexAttribArray(e),h.vertexAttribDivisor(e,c||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!sr.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,o=r.length*e;let s=!this.buffer;if(this.buffer=this.buffer||new _t(this.gl,i),s=s||this.buffer.reallocate(i),s=s||!this._compareConstantArrayValues(r,this.bufferValue),s){const a=lY(n.constructor,o);cY({target:a,source:r,start:0,count:o}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:me(!1)}}static _setConstantIntArray(e,n,r){switch(me(Je(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:me(!1)}}static _setConstantUintArray(e,n,r){switch(me(Je(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:me(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return me(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}}const hY="VertexArray: attributes must be Buffers or constants (i.e. typed array)",dY=/^(.+)__LOCATION_([0-9]+)$/,pY=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class gY{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new sr(e),rO(this,"VertexArray","v6.0",pY),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);const{location:i,accessor:o}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,o)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:o}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new _t(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof _t&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof _t&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){const o={location:-1,accessor:null},{location:s,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(s)||s<0)return this.unused[e]=n,Ae.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),o;const u=this._getAttributeInfo(a||s);if(!u)return o;const l=this.accessors[s]||{},c=cr.resolve(u.accessor,l,r,i),{size:f,type:h}=c;return me(Number.isFinite(f)&&Number.isFinite(h)),{location:s,accessor:c}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=dY.exec(e),i=r?r[1]:e,o=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof _t)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof _t){const r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof _t){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(hY)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}_setConstantAttributeZero(e,n){if(sr.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){sr.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],i=this.accessors[n];if(!r)return;const{divisor:o}=i,s=o>0;if(e.isInstanced=e.isInstanced||s,r instanceof _t){const a=r;if(s){const u=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,u)}else{const u=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,u)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ae.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function mY(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let s=0;s<t.length&&s<n;++s)s>0&&(i+=",".concat(s%r===0?" ":"")),i+=Hl(t[s],e);const o=t.length>n?"...":"]";return"".concat(i).concat(o)}function Hl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return mY(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function gT(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;me(n);const o=".*_.*",s=".*Matrix",a=n._uniformSetters,u={},l=Object.keys(a).sort();let c=0;for(const d of l)!d.match(o)&&!d.match(s)&&g0({table:u,header:e,uniforms:r,uniformName:d,undefinedOnly:i})&&c++;for(const d of l)d.match(s)&&g0({table:u,header:e,uniforms:r,uniformName:d,undefinedOnly:i})&&c++;for(const d of l)u[d]||g0({table:u,header:e,uniforms:r,uniformName:d,undefinedOnly:i})&&c++;let f=0;const h={};if(!i)for(const d in r){const g=r[d];u[d]||(f++,h[d]={Type:"NOT USED: ".concat(g),[e]:Hl(g)})}return{table:u,count:c,unusedTable:h,unusedCount:f}}function g0(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:o}=t;const s=r[i],a=vY(s);return!o||!a?(e[i]={[n]:a?Hl(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},!0):!1}function vY(t){return t!=null}function yY(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=mT(e,e.elements,null,n));const i=e.values;for(const o in i){const s=e._getAttributeInfo(o);if(s){let a="".concat(o,": ").concat(s.name);const u=e.accessors[s.location];u&&(a="".concat(o,": ").concat(_Y(s.name,u))),r[a]=mT(e,i[o],u,n)}}return r}function mT(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let o="NOT PROVIDED",s=1,a=0,u=0,l,c,f;if(n&&(o=n.type,s=n.size,o=String(o).replace("Array",""),l=o.indexOf("nt")!==-1),e instanceof _t){const h=e,{data:d,changed:g}=h.getDebugData();c=g?"*":"",f=d,u=h.byteLength,a=u/d.BYTES_PER_ELEMENT/s;let m;if(n){const S=n.divisor>0;m="".concat(S?"I ":"P "," ").concat(a," (x").concat(s,"=").concat(u," bytes ").concat(Ro(i,o),")")}else l=!0,m="".concat(u," bytes");return{[r]:"".concat(c).concat(Hl(f,{size:s,isInteger:l})),"Format ":m}}return f=e,s=e.length,o=String(e.constructor.name).replace("Array",""),l=o.indexOf("nt")!==-1,{[r]:"".concat(Hl(f,{size:s,isInteger:l})," (constant)"),"Format ":"".concat(s,"x").concat(o," (constant)")}}function _Y(t,e){const{type:n,size:r}=e,i=gO(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function bY(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const i=vT(r);e["in ".concat(i)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const i=vT(r);e["out ".concat(i)]={[n]:JSON.stringify(r.accessor)}}return e}function vT(t){const{type:e,size:n}=t.accessor,r=gO(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const yT=Xi()&&typeof document<"u";let wY=0;class EY{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=S=>nO(S),onAddHTML:r=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:s=()=>{},onError:a,gl:u=null,glOptions:l={},debug:c=!1,createFramebuffer:f=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:g=is.get("animation-loop-".concat(wY++))}=e;let{useDevicePixels:m=!0}=e;"useDevicePixelRatio"in e&&(Ae.deprecated("useDevicePixelRatio","useDevicePixels")(),m=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:o,onFinalize:s,onError:a,gl:u,glOptions:l,debug:c,createFramebuffer:f},this.gl=u,this.needsRedraw=null,this.timeline=null,this.stats=g,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:m}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return me(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Id.isSupported(this.gl,["timers"])?new Id(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return Ae.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=yT?new Promise((e,n)=>{if(yT&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):RW(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):CW(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?Eb(this.props.gl,e):this.onCreateContext(e),!Sg(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");gW(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&bW(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new nn(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const xc="vs",Ab="fs";function dr(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const m0={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function SY(t){const e={};for(const n in t){const r=t[n],i=xY(r);e[n]=i}return e}function xY(t){let e=_T(t);return e==="object"?t?"type"in t?Object.assign({},t,m0[t.type]):"value"in t?(e=_T(t.value),Object.assign({type:e},t,m0[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},m0[e])}function _T(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const TY="vs",PY="fs";class bT{constructor(e){let{name:n,vs:r,fs:i,dependencies:o=[],uniforms:s,getUniforms:a,deprecations:u=[],defines:l={},inject:c={},vertexShader:f,fragmentShader:h}=e;dr(typeof n=="string"),this.name=n,this.vs=r||f,this.fs=i||h,this.getModuleUniforms=a,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(u),this.defines=l,this.injections=AY(c),s&&(this.uniforms=SY(s))}getModuleSource(e){let n;switch(e){case TY:n=this.vs||"";break;case PY:n=this.fs||"";break;default:dr(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},r=this.uniforms;for(const i in r){const o=r[i];i in e&&!o.private?(o.validate&&dr(o.validate(e[i],o),"".concat(this.name,": invalid ").concat(i)),n[i]=e[i]):n[i]=o.value}return n}}function AY(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function CY(t){return RY(_O(t))}function RY(t){const e={},n={};return yO({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function yO(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)r[o.name]=o,(i[o.name]===void 0||i[o.name]<n)&&(i[o.name]=n);for(const o of e)o.dependencies&&yO({modules:o.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function _O(t,e){return t.map(n=>(n instanceof bT||(dr(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),dr(n.name,"shader module has no name"),n=new bT(n),n.dependencies=_O(n.dependencies)),n))}function LY(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}const MY=7936,OY=7937,kY=7938,IY=35724,Cb={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Zo={};Object.keys(Cb).forEach(t=>{Zo[t]=t});function NY(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function DY(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||MY),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||OY);return{gpuVendor:FY(n,r),vendor:n,renderer:r,version:t.getParameter(kY),shadingLanguageVersion:t.getParameter(IY)}}function FY(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const v0={};function wT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Cb[e];if(dr(r,e),!LY(n))return!0;if(e in v0)return v0[e];const i=r[0],o=n.behavior||"enable",s="#extension GL_".concat(i," : ").concat(o,`
void main(void) {}`),a=t.createShader(35633);t.shaderSource(a,s),t.compileShader(a);const u=t.getShaderParameter(a,35713);return t.deleteShader(a),v0[e]=u,u}function UY(t,e){const n=Cb[e];dr(n,e);const r=NY(t)&&n[1]||n[0],i=typeof r=="string"?Boolean(t.getExtension(r)):r;return dr(i===!1||i===!0),i}function Sf(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>UY(t,n))}function zY(t){switch(DY(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function BY(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return Sf(t,Zo.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),Sf(t,Zo.GLSL_DERIVATIVES)&&wT(t,Zo.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),Sf(t,Zo.GLSL_FRAG_DATA)&&wT(t,Zo.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),Sf(t,Zo.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const VY=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,$Y=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,jY={[xc]:VY,[Ab]:$Y},ih="__LUMA_INJECT_DECLARATIONS__",ET=/void\s+main\s*\([^)]*\)\s*\{\n?/,ST=/}\n?[^{}]*$/,y0=[];function xT(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=e===xc;for(const o in n){const s=n[o];s.sort((u,l)=>u.order-l.order),y0.length=s.length;for(let u=0,l=s.length;u<l;++u)y0[u]=s[u].injection;const a="".concat(y0.join(`
`),`
`);switch(o){case"vs:#decl":i&&(t=t.replace(ih,a));break;case"vs:#main-start":i&&(t=t.replace(ET,u=>u+a));break;case"vs:#main-end":i&&(t=t.replace(ST,u=>a+u));break;case"fs:#decl":i||(t=t.replace(ih,a));break;case"fs:#main-start":i||(t=t.replace(ET,u=>u+a));break;case"fs:#main-end":i||(t=t.replace(ST,u=>a+u));break;default:t=t.replace(o,u=>u+a)}}return t=t.replace(ih,""),r&&(t=t.replace(/\}\s*$/,o=>o+jY[e])),t}function uy(t){const e={};return dr(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function Ka(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const bO=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],GY=[...bO,[Ka("attribute"),"in $1"],[Ka("varying"),"out $1"]],WY=[...bO,[Ka("varying"),"in $1"]],wO=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],HY=[...wO,[Ka("in"),"attribute $1"],[Ka("out"),"varying $1"]],YY=[...wO,[Ka("in"),"varying $1"]],ly="gl_FragColor",cy=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,XY=/void\s+main\s*\([^)]*\)\s*\{\n?/;function qY(t,e,n){switch(e){case 300:return n?Nd(t,GY):ZY(t);case 100:return n?Nd(t,HY):KY(t);default:throw new Error("unknown GLSL version ".concat(e))}}function Nd(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function ZY(t){t=Nd(t,WY);const e=t.match(cy);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(ly,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(XY,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat(ly,"\\b"),"g"),n)}return t}function KY(t){t=Nd(t,YY);const e=t.match(cy);if(e){const n=e[1];t=t.replace(cy,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),ly)}return t}const QY=`

`.concat(ih,`

`),EO={[xc]:"vertex",[Ab]:"fragment"},JY=`precision highp float;

`;function eX(t,e){const{vs:n,fs:r}=e,i=CY(e.modules||[]);return{gl:t,vs:TT(t,Object.assign({},e,{source:n,type:xc,modules:i})),fs:TT(t,Object.assign({},e,{source:r,type:Ab,modules:i})),getUniforms:tX(i)}}function TT(t,e){let{id:n,source:r,type:i,modules:o,defines:s={},hookFunctions:a=[],inject:u={},transpileToGLSL100:l=!1,prologue:c=!0,log:f}=e;dr(typeof r=="string","shader source must be a string");const h=i===xc,d=r.split(`
`);let g=100,m="",S=r;d[0].indexOf("#version ")===0?(g=300,m=d[0],S=d.slice(1).join(`
`)):m="#version ".concat(g);const _={};o.forEach(D=>{Object.assign(_,D.getDefines())}),Object.assign(_,s);let y=c?"".concat(m,`
`).concat(rX({id:n,source:r,type:i}),`
`).concat(nX({type:i}),`
`).concat(zY(t),`
`).concat(BY(t),`
`).concat(iX(_),`
`).concat(h?"":JY,`
`):"".concat(m,`
`);const w=sX(a),T={},R={},C={};for(const D in u){const F=typeof u[D]=="string"?{injection:u[D],order:0}:u[D],W=D.match(/^(v|f)s:(#)?([\w-]+)$/);if(W){const j=W[2],H=W[3];j?H==="decl"?R[D]=[F]:C[D]=[F]:T[D]=[F]}else C[D]=[F]}for(const D of o){f&&D.checkDeprecations(S,f);const F=D.getModuleSource(i,g);y+=F;const W=D.injections[i];for(const j in W){const H=j.match(/^(v|f)s:#([\w-]+)$/);if(H){const ue=H[2]==="decl"?R:C;ue[j]=ue[j]||[],ue[j].push(W[j])}else T[j]=T[j]||[],T[j].push(W[j])}}return y+=QY,y=xT(y,i,R),y+=oX(w[i],T),y+=S,y=xT(y,i,C),y=qY(y,l?100:g,h),y}function tX(t){return function(n){const r={};for(const i of t){const o=i.getUniforms(n,r);Object.assign(r,o)}return r}}function nX(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(EO[e].toUpperCase(),`
`)}function rX(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(EO[r],`

`):""}function iX(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function oX(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature,` {
`),i.header&&(n+="  ".concat(i.header)),e[r]){const o=e[r];o.sort((s,a)=>s.order-a.order);for(const s of o)n+="  ".concat(s.injection,`
`)}i.footer&&(n+="  ".concat(i.footer)),n+=`}
`}return n}function sX(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[i,o]=n.split(":"),s=n.replace(/\(.+/,"");e[i][s]=Object.assign(r,{signature:o})}),e}const aX="void main() {gl_FragColor = vec4(0);}",SO=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,uX=`#version 300 es
`.concat(SO);function xO(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,o]=n;if(!e.includes(r)||!i||!o)return null;const s=o.split(";")[0];return{qualifier:r,type:i,name:s}}function TO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?uX:e>300?"#version ".concat(e,`
`).concat(SO):aX;const o=fX(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(o,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function lX(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return dr(!1),null}}function cX(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return dr(!1),null}}function fX(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return dr(!1),null}}const hX=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,dX={name:"fp32",vs:hX,fs:null};function PT(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const pX=1/Math.PI*180,gX=1/180*Math.PI,Xn={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function PO(t,{precision:e=Xn.precision}={}){return t=mX(t),"".concat(parseFloat(t.toPrecision(e)))}function Qa(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function xf(t,e){return Rb(t,n=>n*gX,e)}function ea(t,e){return Rb(t,n=>n*pX,e)}function qt(t,e,n){return Rb(t,r=>Math.max(e,Math.min(n,r)))}function ls(t,e,n){return Qa(t)?t.map((r,i)=>ls(r,e[i],n)):n*e+(1-n)*t}function Di(t,e,n){const r=Xn.EPSILON;n&&(Xn.EPSILON=n);try{if(t===e)return!0;if(Qa(t)&&Qa(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!Di(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=Xn.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{Xn.EPSILON=r}}function mX(t){return Math.round(t/Xn.EPSILON)*Xn.EPSILON}function vX(t){return t.clone?t.clone():new Array(t.length)}function Rb(t,e,n){if(Qa(t)){const r=t;n=n||vX(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}function yX(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class AO extends yX(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Qa(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Xn)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+PO(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Di(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){const o=e[i];this[i]=o+r*(n[i]-o)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Xn.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function _X(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function ur(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function _0(t,e,n=""){if(Xn.debug&&!_X(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class bX extends AO{get x(){return this[0]}set x(e){this[0]=ur(e)}get y(){return this[1]}set y(e){this[1]=ur(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return ur(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return ur(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return PT(e>=0&&e<this.ELEMENTS,"index is out of range"),ur(this[e])}setComponent(e,n){return PT(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var oh=1e-6,Ja=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function wX(){var t=new Ja(2);return Ja!=Float32Array&&(t[0]=0,t[1]=0),t}function Dd(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function CO(t,e){return t[0]=-e[0],t[1]=-e[1],t}function RO(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function EX(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(function(){var t=wX();return function(e,n,r,i,o,s){var a,u;for(n||(n=2),r||(r=0),i?u=Math.min(i*n+r,e.length):u=e.length,a=r;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],o(t,t,s),e[a]=t[0],e[a+1]=t[1];return e}})();function SX(t,e,n){const r=e[0],i=e[1],o=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/o,t[1]=(n[1]*r+n[5]*i)/o,t}function LO(t,e,n){const r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o||1;return t[0]=(n[0]*r+n[4]*i+n[8]*o)/s,t[1]=(n[1]*r+n[5]*i+n[9]*o)/s,t[2]=(n[2]*r+n[6]*i+n[10]*o)/s,t}function xX(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function TX(){var t=new Ja(3);return Ja!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function MO(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function PX(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function AX(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function CX(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function RX(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function LX(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],u=n[2];return t[0]=i*u-o*a,t[1]=o*s-r*u,t[2]=r*a-i*s,t}function MX(t,e,n,r){var i=e[0],o=e[1],s=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=s+r*(n[2]-s),t}function OO(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,t}function OX(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function kX(t,e,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=e[0],u=e[1],l=e[2],c=i*l-o*u,f=o*a-r*l,h=r*u-i*a,d=i*h-o*f,g=o*c-r*h,m=r*f-i*c,S=s*2;return c*=S,f*=S,h*=S,d*=2,g*=2,m*=2,t[0]=a+c+d,t[1]=u+f+g,t[2]=l+h+m,t}function IX(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function NX(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function DX(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function FX(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2],u=Math.sqrt(n*n+r*r+i*i),l=Math.sqrt(o*o+s*s+a*a),c=u*l,f=c&&RX(t,e)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var kO=PX,UX=MO,b0=AX;(function(){var t=TX();return function(e,n,r,i,o,s){var a,u;for(n||(n=3),r||(r=0),i?u=Math.min(i*n+r,e.length):u=e.length,a=r;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const w0=[0,0,0];let Tf;class Cr extends bX{static get ZERO(){return Tf||(Tf=new Cr(0,0,0),Object.freeze(Tf)),Tf}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Qa(e)?this.copy(e):(Xn.debug&&(ur(e),ur(n),ur(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Xn.debug&&(ur(e.x),ur(e.y),ur(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=ur(e)}angle(e){return FX(this,e)}cross(e){return LX(this,this,e),this.check()}rotateX({radians:e,origin:n=w0}){return IX(this,this,n,e),this.check()}rotateY({radians:e,origin:n=w0}){return NX(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=w0}){return DX(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return OO(this,this,e),this.check()}transformAsVector(e){return LO(this,this,e),this.check()}transformByMatrix3(e){return OX(this,this,e),this.check()}transformByMatrix2(e){return xX(this,this,e),this.check()}transformByQuaternion(e){return kX(this,this,e),this.check()}}class zX extends AO{toString(){let e="[";if(Xn.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=ur(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function BX(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function VX(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function fy(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],d=e[11],g=e[12],m=e[13],S=e[14],_=e[15],y=n*a-r*s,w=n*u-i*s,T=n*l-o*s,R=r*u-i*a,C=r*l-o*a,D=i*l-o*u,F=c*m-f*g,W=c*S-h*g,j=c*_-d*g,H=f*S-h*m,pe=f*_-d*m,ue=h*_-d*S,se=y*ue-w*pe+T*H+R*j-C*W+D*F;return se?(se=1/se,t[0]=(a*ue-u*pe+l*H)*se,t[1]=(i*pe-r*ue-o*H)*se,t[2]=(m*D-S*C+_*R)*se,t[3]=(h*C-f*D-d*R)*se,t[4]=(u*j-s*ue-l*W)*se,t[5]=(n*ue-i*j+o*W)*se,t[6]=(S*T-g*D-_*w)*se,t[7]=(c*D-h*T+d*w)*se,t[8]=(s*pe-a*j+l*F)*se,t[9]=(r*j-n*pe-o*F)*se,t[10]=(g*C-m*T+_*y)*se,t[11]=(f*T-c*C-d*y)*se,t[12]=(a*W-s*H-u*F)*se,t[13]=(n*H-r*W+i*F)*se,t[14]=(m*w-g*R-S*y)*se,t[15]=(c*R-f*w+h*y)*se,t):null}function $X(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],l=t[8],c=t[9],f=t[10],h=t[11],d=t[12],g=t[13],m=t[14],S=t[15],_=e*s-n*o,y=e*a-r*o,w=e*u-i*o,T=n*a-r*s,R=n*u-i*s,C=r*u-i*a,D=l*g-c*d,F=l*m-f*d,W=l*S-h*d,j=c*m-f*g,H=c*S-h*g,pe=f*S-h*m;return _*pe-y*H+w*j+T*W-R*F+C*D}function cs(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=e[9],d=e[10],g=e[11],m=e[12],S=e[13],_=e[14],y=e[15],w=n[0],T=n[1],R=n[2],C=n[3];return t[0]=w*r+T*a+R*f+C*m,t[1]=w*i+T*u+R*h+C*S,t[2]=w*o+T*l+R*d+C*_,t[3]=w*s+T*c+R*g+C*y,w=n[4],T=n[5],R=n[6],C=n[7],t[4]=w*r+T*a+R*f+C*m,t[5]=w*i+T*u+R*h+C*S,t[6]=w*o+T*l+R*d+C*_,t[7]=w*s+T*c+R*g+C*y,w=n[8],T=n[9],R=n[10],C=n[11],t[8]=w*r+T*a+R*f+C*m,t[9]=w*i+T*u+R*h+C*S,t[10]=w*o+T*l+R*d+C*_,t[11]=w*s+T*c+R*g+C*y,w=n[12],T=n[13],R=n[14],C=n[15],t[12]=w*r+T*a+R*f+C*m,t[13]=w*i+T*u+R*h+C*S,t[14]=w*o+T*l+R*d+C*_,t[15]=w*s+T*c+R*g+C*y,t}function Fd(t,e,n){var r=n[0],i=n[1],o=n[2],s,a,u,l,c,f,h,d,g,m,S,_;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*o+e[12],t[13]=e[1]*r+e[5]*i+e[9]*o+e[13],t[14]=e[2]*r+e[6]*i+e[10]*o+e[14],t[15]=e[3]*r+e[7]*i+e[11]*o+e[15]):(s=e[0],a=e[1],u=e[2],l=e[3],c=e[4],f=e[5],h=e[6],d=e[7],g=e[8],m=e[9],S=e[10],_=e[11],t[0]=s,t[1]=a,t[2]=u,t[3]=l,t[4]=c,t[5]=f,t[6]=h,t[7]=d,t[8]=g,t[9]=m,t[10]=S,t[11]=_,t[12]=s*r+c*i+g*o+e[12],t[13]=a*r+f*i+m*o+e[13],t[14]=u*r+h*i+S*o+e[14],t[15]=l*r+d*i+_*o+e[15]),t}function Lb(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function jX(t,e,n,r){var i=r[0],o=r[1],s=r[2],a=Math.hypot(i,o,s),u,l,c,f,h,d,g,m,S,_,y,w,T,R,C,D,F,W,j,H,pe,ue,se,Ce;return a<oh?null:(a=1/a,i*=a,o*=a,s*=a,u=Math.sin(n),l=Math.cos(n),c=1-l,f=e[0],h=e[1],d=e[2],g=e[3],m=e[4],S=e[5],_=e[6],y=e[7],w=e[8],T=e[9],R=e[10],C=e[11],D=i*i*c+l,F=o*i*c+s*u,W=s*i*c-o*u,j=i*o*c-s*u,H=o*o*c+l,pe=s*o*c+i*u,ue=i*s*c+o*u,se=o*s*c-i*u,Ce=s*s*c+l,t[0]=f*D+m*F+w*W,t[1]=h*D+S*F+T*W,t[2]=d*D+_*F+R*W,t[3]=g*D+y*F+C*W,t[4]=f*j+m*H+w*pe,t[5]=h*j+S*H+T*pe,t[6]=d*j+_*H+R*pe,t[7]=g*j+y*H+C*pe,t[8]=f*ue+m*se+w*Ce,t[9]=h*ue+S*se+T*Ce,t[10]=d*ue+_*se+R*Ce,t[11]=g*ue+y*se+C*Ce,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function IO(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=s*i+c*r,t[6]=a*i+f*r,t[7]=u*i+h*r,t[8]=l*i-o*r,t[9]=c*i-s*r,t[10]=f*i-a*r,t[11]=h*i-u*r,t}function GX(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],l=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=s*i-c*r,t[2]=a*i-f*r,t[3]=u*i-h*r,t[8]=o*r+l*i,t[9]=s*r+c*i,t[10]=a*r+f*i,t[11]=u*r+h*i,t}function NO(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],l=e[4],c=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=s*i+c*r,t[2]=a*i+f*r,t[3]=u*i+h*r,t[4]=l*i-o*r,t[5]=c*i-s*r,t[6]=f*i-a*r,t[7]=h*i-u*r,t}function WX(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,u=i+i,l=n*s,c=r*s,f=r*a,h=i*s,d=i*a,g=i*u,m=o*s,S=o*a,_=o*u;return t[0]=1-f-g,t[1]=c+_,t[2]=h-S,t[3]=0,t[4]=c-_,t[5]=1-l-g,t[6]=d+m,t[7]=0,t[8]=h+S,t[9]=d-m,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function HX(t,e,n,r,i,o,s){var a=1/(n-e),u=1/(i-r),l=1/(o-s);return t[0]=o*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o*2*u,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*u,t[10]=(s+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*l,t[15]=0,t}function YX(t,e,n,r,i){var o=1/Math.tan(e/2),s;return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(s=1/(r-i),t[10]=(i+r)*s,t[14]=2*i*r*s):(t[10]=-1,t[14]=-2*r),t}var XX=YX;function qX(t,e,n,r,i,o,s){var a=1/(e-n),u=1/(r-i),l=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*u,t[14]=(s+o)*l,t[15]=1,t}var ZX=qX;function KX(t,e,n,r){var i,o,s,a,u,l,c,f,h,d,g=e[0],m=e[1],S=e[2],_=r[0],y=r[1],w=r[2],T=n[0],R=n[1],C=n[2];return Math.abs(g-T)<oh&&Math.abs(m-R)<oh&&Math.abs(S-C)<oh?BX(t):(c=g-T,f=m-R,h=S-C,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=y*h-w*f,o=w*c-_*h,s=_*f-y*c,d=Math.hypot(i,o,s),d?(d=1/d,i*=d,o*=d,s*=d):(i=0,o=0,s=0),a=f*s-h*o,u=h*i-c*s,l=c*o-f*i,d=Math.hypot(a,u,l),d?(d=1/d,a*=d,u*=d,l*=d):(a=0,u=0,l=0),t[0]=i,t[1]=a,t[2]=c,t[3]=0,t[4]=o,t[5]=u,t[6]=f,t[7]=0,t[8]=s,t[9]=l,t[10]=h,t[11]=0,t[12]=-(i*g+o*m+s*S),t[13]=-(a*g+u*m+l*S),t[14]=-(c*g+f*m+h*S),t[15]=1,t)}function QX(){var t=new Ja(4);return Ja!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function DO(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function pu(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}(function(){var t=QX();return function(e,n,r,i,o,s){var a,u;for(n||(n=4),r||(r=0),i?u=Math.min(i*n+r,e.length):u=e.length,a=r;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();var hy;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(hy||(hy={}));const JX=45*Math.PI/180,eq=1,E0=.1,S0=500,tq=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class kn extends zX{static get IDENTITY(){return rq()}static get ZERO(){return nq()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return hy}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,o,s,a,u,l,c,f,h,d,g,m,S){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=o,this[5]=s,this[6]=a,this[7]=u,this[8]=l,this[9]=c,this[10]=f,this[11]=h,this[12]=d,this[13]=g,this[14]=m,this[15]=S,this.check()}setRowMajor(e,n,r,i,o,s,a,u,l,c,f,h,d,g,m,S){return this[0]=e,this[1]=o,this[2]=l,this[3]=d,this[4]=n,this[5]=s,this[6]=c,this[7]=g,this[8]=r,this[9]=a,this[10]=f,this[11]=m,this[12]=i,this[13]=u,this[14]=h,this[15]=S,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(tq)}fromObject(e){return this.check()}fromQuaternion(e){return WX(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:i,top:o,near:s=E0,far:a=S0}=e;return a===1/0?iq(this,n,r,i,o,s):HX(this,n,r,i,o,s,a),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return KX(this,n,r,i),this.check()}ortho(e){const{left:n,right:r,bottom:i,top:o,near:s=E0,far:a=S0}=e;return ZX(this,n,r,i,o,s,a),this.check()}orthographic(e){const{fovy:n=JX,aspect:r=eq,focalDistance:i=1,near:o=E0,far:s=S0}=e;AT(n);const a=n/2,u=i*Math.tan(a),l=u*r;return this.ortho({left:-l,right:l,bottom:-u,top:u,near:o,far:s})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:o=500}=e;return AT(n),XX(this,n,r,i,o),this.check()}determinant(){return $X(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],o=1/r[1],s=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*o,e[6]=this[6]*s,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*o,e[10]=this[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],o=1/r[1],s=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=this[4]*i,e[4]=this[5]*o,e[5]=this[6]*s,e[6]=this[8]*i,e[7]=this[9]*o,e[8]=this[10]*s,e}transpose(){return VX(this,this),this.check()}invert(){return fy(this,this),this.check()}multiplyLeft(e){return cs(this,e,this),this.check()}multiplyRight(e){return cs(this,this,e),this.check()}rotateX(e){return IO(this,this,e),this.check()}rotateY(e){return GX(this,this,e),this.check()}rotateZ(e){return NO(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return jX(this,this,e,n),this.check()}scale(e){return Lb(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return Fd(this,this,e),this.check()}transform(e,n){return e.length===4?(n=pu(n||[-0,-0,-0,-0],e,this),_0(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let i;switch(r){case 2:i=EX(n||[-0,-0],e,this);break;case 3:i=OO(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return _0(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=SX(n||[-0,-0],e,this);break;case 3:r=LO(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return _0(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let Pf,Af;function nq(){return Pf||(Pf=new kn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Pf)),Pf}function rq(){return Af||(Af=new kn,Object.freeze(Af)),Af}function AT(t){if(t>Math.PI*2)throw Error("expected radians")}function iq(t,e,n,r,i,o){const s=2*o/(n-e),a=2*o/(i-r),u=(n+e)/(n-e),l=(i+r)/(i-r),c=-1,f=-1,h=-2*o;return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=u,t[9]=l,t[10]=c,t[11]=f,t[12]=0,t[13]=0,t[14]=h,t[15]=0,t}const CT=1e-6,oq=6371e3;class Pg{constructor({phi:e=0,theta:n=0,radius:r=1,bearing:i,pitch:o,altitude:s,radiusScale:a=oq}={}){b(this,"phi",void 0),b(this,"theta",void 0),b(this,"radius",void 0),b(this,"radiusScale",void 0),this.phi=e,this.theta=n,this.radius=r||s||1,this.radiusScale=a||1,i!==void 0&&(this.bearing=i),o!==void 0&&(this.pitch=o),this.check()}toString(){return this.formatString(Xn)}formatString({printTypes:e=!1}){const n=PO;return"".concat(e?"Spherical":"","[rho:").concat(n(this.radius),",theta:").concat(n(this.theta),",phi:").concat(n(this.phi),"]")}equals(e){return Di(this.radius,e.radius)&&Di(this.theta,e.theta)&&Di(this.phi,e.phi)}exactEquals(e){return this.radius===e.radius&&this.theta===e.theta&&this.phi===e.phi}get bearing(){return 180-ea(this.phi)}set bearing(e){this.phi=Math.PI-xf(e)}get pitch(){return ea(this.theta)}set pitch(e){this.theta=xf(e)}get longitude(){return ea(this.phi)}get latitude(){return ea(this.theta)}get lng(){return ea(this.phi)}get lat(){return ea(this.theta)}get z(){return(this.radius-1)*this.radiusScale}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this.check()}clone(){return new Pg().copy(this)}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this.check()}fromLngLatZ([e,n,r]){return this.radius=1+r/this.radiusScale,this.phi=xf(n),this.theta=xf(e),this.check()}fromVector3(e){return this.radius=MO(e),this.radius>0&&(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos(qt(e[2]/this.radius,-1,1))),this.check()}toVector3(){return new Cr(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}makeSafe(){return this.phi=Math.max(CT,Math.min(Math.PI-CT,this.phi)),this}check(){if(!Number.isFinite(this.phi)||!Number.isFinite(this.theta)||!(this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}}const RT=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,sq={lightSources:{}};function x0(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.map(n=>n*e/255)}function aq(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return e?i["lighting_uAmbientLight.color"]=x0(e):i["lighting_uAmbientLight.color"]=[0,0,0],n.forEach((o,s)=>{i["lighting_uPointLight[".concat(s,"].color")]=x0(o),i["lighting_uPointLight[".concat(s,"].position")]=o.position,i["lighting_uPointLight[".concat(s,"].attenuation")]=o.attenuation||[1,0,0]}),i.lighting_uPointLightCount=n.length,r.forEach((o,s)=>{i["lighting_uDirectionalLight[".concat(s,"].color")]=x0(o),i["lighting_uDirectionalLight[".concat(s,"].direction")]=o.direction}),i.lighting_uDirectionalLightCount=r.length,i}function FO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sq;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},aq({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n);break}return FO({lightSources:e})}return{}}const UO={name:"lights",vs:RT,fs:RT,getUniforms:FO,defines:{MAX_LIGHTS:3}},uq=new Uint8Array([0,255,255,255]),lq={pickingSelectedColor:null,pickingHighlightColor:uq,pickingActive:!1,pickingAttribute:!1};function cq(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:lq;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}const fq=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,hq=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,dq={name:"picking",vs:fq,fs:hq,getUniforms:cq},zO=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,pq={};function gq(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(o=>o/255)}}function BO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pq;if(!("material"in t))return{};const{material:e}=t;return e?gq(e):{lighting_uEnabled:!1}}const Mb={name:"gouraud-lighting",dependencies:[UO],vs:zO,defines:{LIGHTING_VERTEX:1},getUniforms:BO},mq={name:"phong-lighting",dependencies:[UO],fs:zO,defines:{LIGHTING_FRAGMENT:1},getUniforms:BO},vq=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,yq={name:"transform",vs:vq,fs:null};class Tc{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new Tc(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:r="",defines:i={},inject:o={},varyings:s=[],bufferMode:a=35981,transpileToGLSL100:u=!1}=e,l=this._getModuleList(e.modules),c=this._getHash(n),f=this._getHash(r),h=l.map(w=>this._getHash(w.name)).sort(),d=s.map(w=>this._getHash(w)),g=Object.keys(i).sort(),m=Object.keys(o).sort(),S=[],_=[];for(const w of g)S.push(this._getHash(w)),S.push(this._getHash(i[w]));for(const w of m)_.push(this._getHash(w)),_.push(this._getHash(o[w]));const y="".concat(c,"/").concat(f,"D").concat(S.join("/"),"M").concat(h.join("/"),"I").concat(_.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(u?"T":"");if(!this._programCache[y]){const w=eX(this.gl,{vs:n,fs:r,modules:l,inject:o,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:u});this._programCache[y]=new mO(this.gl,{hash:y,vs:w.vs,fs:w.fs,varyings:s,bufferMode:a}),this._getUniforms[y]=w.getUniforms||(T=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let o=0,s=this._defaultModules.length;o<s;++o){const a=this._defaultModules[o],u=a.name;n[i++]=a,r[u]=!0}for(let o=0,s=e.length;o<s;++o){const a=e[o],u=a.name;r[u]||(n[i++]=a,r[u]=!0)}return n.length=i,n}}const _q={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function bq(t,e,n){const r={};let i=e.indices;for(const o in e.attributes){const s=e.attributes[o],a=wq(o,n);if(o==="indices")i=s;else if(s.constant)r[a]=s.value;else{const u=s.value,l={...s};delete l.value,r[a]=[new _t(t,u),l],Eq(o,l)}}if(i){const o=i.value||i;me(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const s={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new _t(t,{data:o,target:34963}),s]}return r}function wq(t,e){const{attributeMap:n=_q}=e||{};return n&&n[t]||t}function Eq(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}me(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const ta=2,Sq=1e4,xq="Model needs drawMode and vertexCount",LT=()=>{},Tq={};class Rr{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=vi("model")}=n;me(Sg(e)),this.id=r,this.gl=e,this.id=n.id||vi("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||Tc.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:i,modules:o,defines:s,inject:a,varyings:u,bufferMode:l,transpileToGLSL100:c}=e;this.programProps={program:n,vs:r,fs:i,modules:o,defines:s,inject:a,varyings:u,bufferMode:l,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},me(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),xq)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:i,modules:o,defines:s,inject:a,varyings:u,bufferMode:l,transpileToGLSL100:c}=e;this.programProps={program:n,vs:r,fs:i,modules:o,defines:s,inject:a,varyings:u,bufferMode:l,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return me(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return me(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=bq(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Za(e))return this;const n={};for(const r in e){const i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return xb(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:u=this.vertexArray}=e;this.setAttributes(o),this.updateModuleSettings(n),this.setUniforms(i);let l;Ae.priority>=ta&&(l=this._logDrawCallStart(ta));const c=this.vertexArray.getDrawParams(),{isIndexed:f=c.isIndexed,indexType:h=c.indexType,indexOffset:d=c.indexOffset,vertexArrayInstanced:g=c.isInstanced}=this.props;g&&!this.isInstanced&&Ae.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:m,instanceCount:S}=this,{onBeforeRender:_=LT,onAfterRender:y=LT}=this.props;_(),this.program.setUniforms(this.uniforms);const w=this.program.draw(Object.assign(Tq,e,{logPriority:l,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:u,transformFeedback:s,isIndexed:f,indexType:h,isInstanced:m,instanceCount:S,offset:f?d:0}));return y(),Ae.priority>=ta&&this._logDrawCallEnd(l,u,r),w}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:o}=e;r&&this._setFeedbackBuffers(r),n&&(o=Object.assign({},o,{[35977]:n})),i.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:o}))}finally{i.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ae.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:i,modules:o,inject:s,defines:a,varyings:u,bufferMode:l,transpileToGLSL100:c}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:o,inject:s,defines:a,varyings:u,bufferMode:l,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}me(n instanceof mO,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new gY(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof _t&&n.delete()}}_setAnimationProps(e){this.animated&&me(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Za(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new vO(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:Sq;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),Ae.group(ta,">>> DRAWING MODEL ".concat(this.id),{collapsed:Ae.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;const o=yY({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:u}=gT({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:l,count:c}=gT({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});c>0&&Ae.log("MISSING UNIFORMS",Object.keys(l))(),u>0&&Ae.log("UNUSED UNIFORMS",Object.keys(a))();const f=bY(this.vertexArray.configuration);Ae.table(e,o)(),Ae.table(e,s)(),Ae.table(e+1,f)(),i&&i.log({logLevel:ta,message:"Rendered to ".concat(i.id)}),Ae.groupEnd(ta)()}}class Pq{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof _t?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&me(Je(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const o=this.feedbackMap[i];i in n&&(r[o]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const o=r[i];if(typeof o=="string"){const s=n[o],{byteLength:a,usage:u,accessor:l}=s;r[i]=this._createNewBuffer(i,{byteLength:a,usage:u,accessor:l})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n;const{program:i}=r;e.transformFeedback=new vO(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const o=this.feedbackMap[i];n[i]=e.feedbackBuffers[o],r[o]=e.sourceBuffers[i],me(r[o]instanceof _t)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new _t(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const Aq="transform_uSampler_",Ud="transform_uSize_",MT="transform_position";function Cq(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t,s=Object.keys(n).length,a=null;const u={};let l=e,c={};if(s>0||r){const f=l.split(`
`),h=f.slice();if(f.forEach((d,g,m)=>{if(s>0){const S=kq(d,n);if(S){const{updatedLine:_,inject:y}=S;h[g]=_,c=uy([c,y]),Object.assign(u,S.samplerTextureMap),s--}}r&&!a&&(a=Oq(d,r))}),r){me(i);const d="".concat(Ud).concat(r),g="uniform vec2 ".concat(d,`;
`),m="     vec2 ".concat(MT," = transform_getPos(").concat(d,`);
     gl_Position = vec4(`).concat(MT,`, 0, 1.);
`);c=uy([c,{"vs:#decl":g,"vs:#main-start":m}])}l=h.join(`
`)}return{vs:l,targetTextureType:a,inject:c,samplerTextureMap:u}}function Rq(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let o,s;n&&({width:o,height:s}=r,i["".concat(Ud).concat(n)]=[o,s]);for(const a in e)({width:o,height:s}=e[a]),i["".concat(Ud).concat(a)]=[o,s];return i}function Lq(t){return xO(t,["attribute","in"])}function Mq(t){const e="".concat(Aq).concat(t),n="".concat(Ud).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function Oq(t,e){const n=xO(t,["varying","out"]);return n&&n.name===e?n.type:null}function kq(t,e){const n={},r=Lq(t);if(!r)return null;const{type:i,name:o}=r;if(o&&e[o]){const s="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:u,uniformDeclerations:l}=Mq(o),c=lX(i),f="  ".concat(i," ").concat(o," = transform_getInput(").concat(a,", ").concat(u,").").concat(c,`;
`);return n[a]=o,{updatedLine:s,inject:{"vs:#decl":l,"vs:#main-start":f},samplerTextureMap:n}}return null}const Iq={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},Nq="transform_output";class Dq{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:o}=this.bindings[this.currentIndex],s=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),u=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const h=this.samplerTextureMap[f];a[f]=r[h]}this._setSourceTextureParameters();const c=Rq({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(a,c)}return this.hasTargetTexture&&(l=!1,u.viewport=[0,0,i.width,i.height]),{attributes:s,framebuffer:i,uniforms:a,discard:l,parameters:u}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],r=Tg(n);if(!e)return r;const i=r.constructor,o=cX(this.targetTextureType),s=new i(r.length*o/4);let a=0;for(let u=0;u<r.length;u+=4)for(let l=0;l<o;l++)s[a++]=r[u+l];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof Un)return r;const i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,o=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,i,o)=>{o[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new _t(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:i,targetTexture:o}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),o){e.targetTexture=o;const{width:s,height:a}=o,{framebuffer:u}=e;u?(u.update({attachments:{[36064]:o},resizeAttachments:!1}),u.resize({width:s,height:a})):e.framebuffer=new nn(this.gl,{id:"transform-framebuffer",width:s,height:a,attachments:{[36064]:o}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(Iq)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=iH(e,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:o,targetTextureType:s,inject:a,samplerTextureMap:u}=Cq({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),l=uy([e.inject||{},a]);this.targetTextureType=s,this.samplerTextureMap=u;const c=e._fs||TO({version:pO(i),input:this.targetTextureVarying,inputType:s,output:Nq}),f=this.hasSourceTextures||this.targetTextureVarying?[yq].concat(e.modules||[]):e.modules;return{vs:i,fs:c,modules:f,uniforms:o,inject:l}}}class Ob{static isSupported(e){return Je(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();me(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new Rr(n,Object.assign({},e,{fs:e.fs||TO({version:pO(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){Fq(n)&&(this.bufferTransform=new Pq(e,n)),Uq(n)&&(this.textureTransform=new Dq(e,n)),me(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=Object.assign(n,i.getDrawOptions(n));return n}}function Fq(t){return!!(!Za(t.feedbackBuffers)||!Za(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function Uq(t){return!!(!Za(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const OT={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Qr{static get DRAW_MODE(){return OT}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=vi("geometry"),drawMode:r=OT.TRIANGLES,attributes:i={},indices:o=null,vertexCount:s=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,me(ArrayBuffer.isView(i.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(me(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i in e){const o=e[i],{value:s,size:a,constant:u}=o;!u&&s&&a>=1&&(r=Math.min(r,s.length/a))}return me(Number.isFinite(r)),r}}const zq=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Bq=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),Vq=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),$q=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),jq={POSITION:{size:3,value:new Float32Array(Bq)},NORMAL:{size:3,value:new Float32Array(Vq)},TEXCOORD_0:{size:2,value:new Float32Array($q)}};class Gq extends Qr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=vi("cube-geometry")}=e;super({...e,id:n,indices:{size:1,value:new Uint16Array(zq)},attributes:{...jq,...e.attributes}})}}let Wq=1,Hq=1;class VO{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=e,s=Wq++,a={time:0,delay:n,duration:r,rate:i,repeat:o};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:o,channel:s}=i;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=Hq++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const $O="#define SMOOTH_EDGE_RADIUS 0.5",Yq=`
`.concat($O,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),Xq=`
`.concat($O,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),qq={name:"geometry",vs:Yq,fs:Xq},at={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(at,"IDENTITY",{get:()=>($e.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const jr={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},gr={common:0,meters:1,pixels:2},kT={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Pc={DRAW:"draw",MASK:"mask"},Zq=Object.keys(at).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(at[t],";")).join(""),Kq=Object.keys(jr).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(jr[t],";")).join(""),Qq=Object.keys(gr).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(gr[t],";")).join(""),Jq="".concat(Zq,`
`).concat(Kq,`
`).concat(Qq,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}

//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function eZ(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function Ag(t){let e={},n;return r=>{for(const i in r)if(!eZ(r[i],e[i])){n=t(r),e=r;break}return n}}const IT=[0,0,0,0],tZ=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],jO=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],nZ=[0,0,0],GO=[0,0,0],rZ=Ag(sZ);function WO(t,e,n=GO){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,o=!0;switch(e===at.LNGLAT_OFFSETS||e===at.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case jr.WEB_MERCATOR:(e===at.LNGLAT||e===at.CARTESIAN)&&(i=[0,0,0],o=!1);break;case jr.WEB_MERCATOR_AUTO_OFFSET:e===at.LNGLAT?r=i:e===at.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case jr.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case jr.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:o}}function iZ(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:o,viewProjectionMatrix:s}=t,a=IT,u=IT,l=t.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:f,offsetMode:h}=WO(t,e,n);return h&&(u=t.projectPosition(c||f),l=[l[0]-u[0],l[1]-u[1],l[2]-u[2]],u[3]=1,a=pu([],u,s),o=r||o,s=cs([],i,o),s=cs([],s,tZ)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:u,cameraPosCommon:l,shaderCoordinateOrigin:f,geospatialOrigin:c}}function oZ({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=at.DEFAULT,coordinateOrigin:i=GO,autoWrapLongitude:o=!1}){r===at.DEFAULT&&(r=t.isGeospatial?at.LNGLAT:at.CARTESIAN);const s=rZ({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return s.project_uWrapLongitude=o,s.project_uModelMatrix=n||jO,s}function sZ({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:u,geospatialOrigin:l}=iZ(t,n,r),c=t.getDistanceScales(),f=[t.width*e,t.height*e],h=pu([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,d={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:u,project_uCommonOrigin:s.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(t._pseudoMeters),project_uViewportSize:f,project_uDevicePixelRatio:e,project_uFocalDistance:h,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:nZ,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:jO,project_uCameraPosition:a};if(l){const g=t.getDistanceScales(l);switch(n){case at.METER_OFFSETS:d.project_uCommonUnitsPerWorldUnit=g.unitsPerMeter,d.project_uCommonUnitsPerWorldUnit2=g.unitsPerMeter2;break;case at.LNGLAT:case at.LNGLAT_OFFSETS:t._pseudoMeters||(d.project_uCommonUnitsPerMeter=g.unitsPerMeter),d.project_uCommonUnitsPerWorldUnit=g.unitsPerDegree,d.project_uCommonUnitsPerWorldUnit2=g.unitsPerDegree2;break;case at.CARTESIAN:d.project_uCommonUnitsPerWorldUnit=[1,1,g.unitsPerMeter[2]],d.project_uCommonUnitsPerWorldUnit2=[0,0,g.unitsPerMeter2[2]];break}}return d}const aZ={};function uZ(t=aZ){return"viewport"in t?oZ(t):{}}const kb={name:"project",dependencies:[dX,qq],vs:Jq,getUniforms:uZ},lZ=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,wi={name:"project32",dependencies:[kb],vs:lZ};function cZ(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Oa(t,e){const n=pu([],e,t);return DO(n,n,1/n[3]),n}function NT(t,e){const n=t%e;return n<0?e+n:n}function dy(t,e,n){return t<e?e:t>n?n:t}function fZ(t){return Math.log(t)*Math.LOG2E}const Ib=Math.log2||fZ;function Gi(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Gr=Math.PI,HO=Gr/4,Xr=Gr/180,py=180/Gr,Yl=512,gy=4003e4,Cf=85.051129,hZ=1.5;function dZ(t){return Ib(t)}function eu(t){const[e,n]=t;Gi(Number.isFinite(e)),Gi(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*Xr,i=n*Xr,o=Yl*(r+Gr)/(2*Gr),s=Yl*(Gr+Math.log(Math.tan(HO+i*.5)))/(2*Gr);return[o,s]}function tu(t){const[e,n]=t,r=e/Yl*(2*Gr)-Gr,i=2*(Math.atan(Math.exp(n/Yl*(2*Gr)-Gr))-HO);return[r*py,i*py]}function YO(t){const{latitude:e}=t;Gi(Number.isFinite(e));const n=Math.cos(e*Xr);return dZ(gy*n)-9}function my(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;Gi(Number.isFinite(e)&&Number.isFinite(n));const i=Yl,o=Math.cos(e*Xr),s=i/360,a=s/o,u=i/gy/o,l={unitsPerMeter:[u,u,u],metersPerUnit:[1/u,1/u,1/u],unitsPerDegree:[s,a,u],degreesPerUnit:[1/s,1/a,1/u]};if(r){const c=Xr*Math.tan(e*Xr)/o,f=s*c/2,h=i/gy*c,d=h/a*u;l.unitsPerDegree2=[0,f,h],l.unitsPerMeter2=[d,0,d]}return l}function XO(t,e){const[n,r,i]=t,[o,s,a]=e,{unitsPerMeter:u,unitsPerMeter2:l}=my({longitude:n,latitude:r,highPrecision:!0}),c=eu(t);c[0]+=o*(u[0]+l[0]*s),c[1]+=s*(u[1]+l[1]*s);const f=tu(c),h=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[f[0],f[1],h]:f}function pZ(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:o,center:s}=t,a=cZ();Fd(a,a,[0,0,-i]),IO(a,a,-n*Xr),NO(a,a,r*Xr);const u=o/e;return Lb(a,a,[u,u,u]),s&&Fd(a,a,CX([],s)),a}function gZ(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:o,center:s,scale:a,nearZMultiplier:u=1,farZMultiplier:l=1}=t;let{fovy:c=zd(hZ)}=t;r!==void 0&&(c=zd(r));const f=c*Xr,h=i*Xr,d=Nb(c);let g=d;s&&(g+=s[2]*a/Math.cos(h)/n);const m=f*(.5+(o?o[1]:0)/n),S=Math.sin(m)*g/Math.sin(dy(Math.PI/2-h-m,.01,Math.PI-.01)),_=Math.sin(h)*S+g,y=g*10,w=Math.min(_*l,y);return{fov:f,aspect:e/n,focalDistance:d,near:u,far:w}}function zd(t){return 2*Math.atan(.5/t)*py}function Nb(t){return .5/Math.tan(.5*t*Xr)}function qO(t,e){const[n,r,i=0]=t;return Gi(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),Oa(e,[n,r,i,1])}function Ac(t,e,n=0){const[r,i,o]=t;if(Gi(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return Oa(e,[r,i,o,1]);const s=Oa(e,[r,i,0,1]),a=Oa(e,[r,i,1,1]),u=s[2],l=a[2],c=u===l?0:((n||0)-u)/(l-u);return RO([],s,a,c)}function ZO(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:o=24,offset:s=[0,0]}=t,[[a,u],[l,c]]=r,f=mZ(t.padding),h=eu([a,dy(c,-Cf,Cf)]),d=eu([l,dy(u,-Cf,Cf)]),g=[Math.max(Math.abs(d[0]-h[0]),i),Math.max(Math.abs(d[1]-h[1]),i)],m=[e-f.left-f.right-Math.abs(s[0])*2,n-f.top-f.bottom-Math.abs(s[1])*2];Gi(m[0]>0&&m[1]>0);const S=m[0]/g[0],_=m[1]/g[1],y=(f.right-f.left)/2/S,w=(f.top-f.bottom)/2/_,T=[(d[0]+h[0])/2+y,(d[1]+h[1])/2+w],R=tu(T),C=Math.min(o,Ib(Math.abs(Math.min(S,_))));return Gi(Number.isFinite(C)),{longitude:R[0],latitude:R[1],zoom:C}}function mZ(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Gi(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const DT=Math.PI/180;function vZ(t,e=0){const{width:n,height:r,unproject:i}=t,o={targetZ:e},s=i([0,r],o),a=i([n,r],o);let u,l;const c=t.fovy?.5*t.fovy*DT:Math.atan(.5/t.altitude),f=(90-t.pitch)*DT;return c>f-.01?(u=FT(t,0,e),l=FT(t,n,e)):(u=i([0,0],o),l=i([n,0],o)),[s,a,l,u]}function FT(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=Oa(r,[e,0,1,1]),o=Oa(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),u=RO([],i,o,a),l=tu(u);return l.push(n),l}const UT=512;function yZ(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:o,zoom:s,bearing:a=0}=t;(i<-180||i>180)&&(i=NT(i+180,360)-180),(a<-180||a>180)&&(a=NT(a+180,360)-180);const u=Ib(n/UT);if(s<=u)s=u,o=0;else{const l=n/2/Math.pow(2,s),c=tu([0,l])[1];if(o<c)o=c;else{const f=tu([0,UT-l])[1];o>f&&(o=f)}}return{width:e,height:n,longitude:i,latitude:o,zoom:s,pitch:r,bearing:a}}const _Z=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,bZ=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,wZ=Ag(PZ),EZ=Ag(AZ),SZ=[0,0,0,1],xZ=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function TZ(t,e){const[n,r,i]=t,o=Ac([n,r,i],e);return Number.isFinite(i)?o:[o[0],o[1],0]}function PZ({viewport:t,center:e}){return new kn(t.viewProjectionMatrix).invert().transform(e)}function AZ({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,o=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(s=>TZ(s,r));for(const s of e){const a=s.clone().translate(new Cr(t.center).negate()),u=o.map(c=>a.transform(c)),l=new kn().ortho({left:Math.min(...u.map(c=>c[0])),right:Math.max(...u.map(c=>c[0])),bottom:Math.min(...u.map(c=>c[1])),top:Math.max(...u.map(c=>c[1])),near:Math.min(...u.map(c=>-c[2])),far:Math.max(...u.map(c=>-c[2]))});n.push(l.multiplyRight(s))}return n}function CZ(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||SZ,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=wZ({viewport:t.viewport,center:e.project_uCenter}),o=[],s=EZ({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const u=s[a],l=u.clone().translate(new Cr(t.viewport.center).negate());e.project_uCoordinateSystem===at.LNGLAT&&e.project_uProjectionMode===jr.WEB_MERCATOR?(s[a]=l,o[a]=i):(s[a]=u.clone().multiplyRight(xZ),o[a]=l.transform(i))}for(let a=0;a<s.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],r["shadow_uProjectCenters[".concat(a,"]")]=o[a],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return r}const T0={name:"shadow",dependencies:[kb],vs:_Z,fs:bZ,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?CZ(t,e):{}},Ei={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...dq},RZ=[kb],LZ=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function MZ(t){const e=Tc.getDefaultProgramManager(t);for(const n of RZ)e.addDefaultModule(n);for(const n of LZ)e.addShaderHook(n);return e}const OZ=[255,255,255],kZ=1;let IZ=0;class NZ{constructor(e={}){b(this,"id",void 0),b(this,"color",void 0),b(this,"intensity",void 0),b(this,"type","ambient");const{color:n=OZ}=e,{intensity:r=kZ}=e;this.id=e.id||"ambient-".concat(IZ++),this.color=n,this.intensity=r}}const DZ=[255,255,255],FZ=1,UZ=[0,0,-1];let zZ=0;class zT{constructor(e={}){b(this,"id",void 0),b(this,"color",void 0),b(this,"intensity",void 0),b(this,"type","directional"),b(this,"direction",void 0),b(this,"shadow",void 0);const{color:n=DZ}=e,{intensity:r=FZ}=e,{direction:i=UZ}=e,{_shadow:o=!1}=e;this.id=e.id||"directional-".concat(zZ++),this.color=n,this.intensity=r,this.type="directional",this.direction=new Cr(i).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}}class BZ{constructor(e,n={id:"pass"}){b(this,"id",void 0),b(this,"gl",void 0),b(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class Cg extends BZ{constructor(...e){super(...e),b(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return ji(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:i,views:o,onViewportActive:s,clearStack:a=!0,clearCanvas:u=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;u&&$Z(l),a&&(this._lastRenderIndex=-1);const c=[];for(const f of i){const h=o&&o[f.id];s(f);const d=this._getDrawLayerParams(f,e),g=f.subViewports||[f];for(const m of g){const S=this._drawLayersInViewport(l,{target:n,moduleParameters:r,viewport:m,view:h,pass:e.pass,layers:e.layers},d);c.push(S)}}return c}_getDrawLayerParams(e,{layers:n,pass:r,layerFilter:i,cullRect:o,effects:s,moduleParameters:a}){const u=[],l=KO(this._lastRenderIndex+1),c={layer:n[0],viewport:e,isPicking:r.startsWith("picking"),renderPass:r,cullRect:o},f={};for(let h=0;h<n.length;h++){const d=n[h],g=this._shouldDrawLayer(d,c,i,f),m={shouldDrawLayer:g};g&&(m.layerRenderIndex=l(d,g),m.moduleParameters=this._getModuleParameters(d,s,r,a),m.layerParameters=this.getLayerParameters(d,h,e)),u[h]=m}return u}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:o,viewport:s,view:a},u){const l=VZ(e,{moduleParameters:r,target:o,viewport:s});if(a&&a.props.clear){const f=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;Tr(e,{scissorTest:!0,scissor:l},()=>xb(e,f))}const c={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};ji(e,{viewport:l});for(let f=0;f<n.length;f++){const h=n[f],{shouldDrawLayer:d,layerRenderIndex:g,moduleParameters:m,layerParameters:S}=u[f];if(d&&h.props.pickable&&c.pickableCount++,h.isComposite)c.compositeCount++;else if(d){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,g),m.viewport=s;try{h._drawLayer({moduleParameters:m,uniforms:{layerIndex:g},parameters:S})}catch(_){h.raiseError(_,"drawing ".concat(h," to ").concat(i))}}}return c}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let s=e.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(n))return!1;n.layer=s,s=s.parent}if(r){const a=n.layer.id;if(a in i||(i[a]=r(n)),!i[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){var o;const s=Object.assign(Object.create(((o=e.internalState)===null||o===void 0?void 0:o.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:qa(this.gl)});if(n)for(const u of n){var a;Object.assign(s,(a=u.getModuleParameters)===null||a===void 0?void 0:a.call(u,e))}return Object.assign(s,this.getModuleParameters(e,n),i)}}function KO(t=0,e={}){const n={},r=(i,o)=>{const s=i.props._offset,a=i.id,u=i.parent&&i.parent.id;let l;if(u&&!(u in e)&&r(i.parent,!1),u in n){const c=n[u]=n[u]||KO(e[u],e);l=c(i,o),n[a]=c}else Number.isFinite(s)?(l=s+(e[u]||0),n[a]=null):l=t;return o&&l>=t&&(t=l+1),e[a]=l,l};return r}function VZ(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&n.id!=="default-framebuffer",o=e&&e.devicePixelRatio||qa(t),s=i?n.height:t.drawingBufferHeight,a=r;return[a.x*o,s-(a.y+a.height)*o,a.width*o,a.height*o]}function $Z(t){const e=t.drawingBufferWidth,n=t.drawingBufferHeight;ji(t,{viewport:[0,0,e,n]}),t.clear(16640)}class jZ extends Cg{constructor(e,n){super(e,n),b(this,"shadowMap",void 0),b(this,"depthBuffer",void 0),b(this,"fbo",void 0),this.shadowMap=new Un(e,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new _a(e,{format:33189,width:1,height:1}),this.fbo=new nn(e,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(e){const n=this.fbo;Tr(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=qa(this.gl),o=r.width*i,s=r.height*i;(o!==n.width||s!==n.height)&&n.resize({width:o,height:s}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const GZ={color:[255,255,255],intensity:1},BT=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],WZ=[0,0,0,200/255];class QO{constructor(e={}){b(this,"id","lighting-effect"),b(this,"props",null),b(this,"shadowColor",WZ),b(this,"shadow",void 0),b(this,"ambientLight",null),b(this,"directionalLights",[]),b(this,"pointLights",[]),b(this,"shadowPasses",[]),b(this,"shadowMaps",[]),b(this,"dummyShadowMap",null),b(this,"programManager",void 0),b(this,"shadowMatrices",void 0);for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow)}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s}){if(!!this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=Tc.getDefaultProgramManager(e),T0&&this.programManager.addDefaultModule(T0)),this.dummyShadowMap||(this.dummyShadowMap=new Un(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(T0),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new kn().lookAt({eye:new Cr(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new jZ(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new NZ(GZ),this.directionalLights.push(new zT(BT[0]),new zT(BT[1])))}}class HZ{constructor(e={}){b(this,"_pool",[]),b(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:u}){const l=i||e&&e.constructor||Float32Array,c=n*r+o;if(ArrayBuffer.isView(e)){if(c<=e.length)return e;if(c*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,c)}let f=1/0;u&&(f=u*r+o);const h=this._allocate(l,c,a,f);return e&&s?h.set(e):a||h.fill(0,0,4),this._release(e),h}release(e){this._release(e)}_allocate(e,n,r,i){let o=Math.max(Math.ceil(n*this.opts.overAlloc),1);o>i&&(o=i);const s=this._pool,a=e.BYTES_PER_ELEMENT*o,u=s.findIndex(l=>l.byteLength>=a);if(u>=0){const l=new e(s.splice(u,1)[0],0,o);return r&&l.fill(0),l}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,o=n.findIndex(s=>s.byteLength>=i);o<0?n.push(r):(o>0||n.length<this.opts.poolSize)&&n.splice(o,0,r),n.length>this.opts.poolSize&&n.shift()}}const nu=new HZ;function ol(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Bd(t,e){const n=t%e;return n<0?e+n:n}function YZ(t){return[t[12],t[13],t[14]]}function XZ(t){return{left:na(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:na(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:na(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:na(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:na(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:na(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const VT=new Cr;function na(t,e,n,r){VT.set(t,e,n);const i=VT.len();return{distance:r/i,normal:new Cr(-t/i,-e/i,-n/i)}}function qZ(t){return t-Math.fround(t)}let Hu;function P0(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,o=(i-r)/n;Hu=nu.allocate(Hu,o,{type:Float32Array,size:n*2});let s=r,a=0;for(;s<i;){for(let u=0;u<n;u++){const l=t[s++];Hu[a+u]=l,Hu[a+u+n]=qZ(l)}a+=n*2}return Hu.subarray(0,o*n*2)}const ZZ=Math.PI/180,KZ=ol(),$T=[0,0,0],QZ={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function JZ({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:o,near:s,far:a}){const u=t/e,l=n?new kn().orthographic({fovy:r,aspect:u,focalDistance:i,near:s,far:a}):new kn().perspective({fovy:r,aspect:u,near:s,far:a});if(o){const{left:c=0,right:f=0,top:h=0,bottom:d=0}=o,g=qt((c+t-f)/2,0,t)-t/2,m=qt((h+e-d)/2,0,e)-e/2;l[8]-=g*2/t,l[9]+=m*2/e}return l}class Si{constructor(e={}){b(this,"id",void 0),b(this,"x",void 0),b(this,"y",void 0),b(this,"width",void 0),b(this,"height",void 0),b(this,"isGeospatial",void 0),b(this,"zoom",void 0),b(this,"focalDistance",void 0),b(this,"position",void 0),b(this,"modelMatrix",void 0),b(this,"distanceScales",void 0),b(this,"scale",void 0),b(this,"center",void 0),b(this,"cameraPosition",void 0),b(this,"projectionMatrix",void 0),b(this,"viewMatrix",void 0),b(this,"viewMatrixUncentered",void 0),b(this,"viewMatrixInverse",void 0),b(this,"viewProjectionMatrix",void 0),b(this,"pixelProjectionMatrix",void 0),b(this,"pixelUnprojectionMatrix",void 0),b(this,"resolution",void 0),b(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.distanceScales=e.distanceScales||QZ,this.focalDistance=e.focalDistance||1,this.position=e.position||$T,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?jr.WEB_MERCATOR:jr.WEB_MERCATOR_AUTO_OFFSET:jr.IDENTITY}equals(e){return e instanceof Si?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Di(e.projectionMatrix,this.projectionMatrix)&&Di(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=qO(r,this.pixelProjectionMatrix),[o,s]=i,a=n?s:this.height-s;return e.length===2?[o,a]:[o,a,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,o,s]=e,a=n?o:this.height-o,u=r&&r*this.distanceScales.unitsPerMeter[2],l=Ac([i,a,s],this.pixelUnprojectionMatrix,u),[c,f,h]=this.unprojectPosition(l);return Number.isFinite(s)?[c,f,h]:Number.isFinite(r)?[c,f,r]:[c,f]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){const n=eu(e);return n[1]=qt(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?tu(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),o=this.unproject([0,this.height],n),s=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],o[0],s[0]),Math.min(r[1],i[1],o[1],s[1]),Math.max(r[0],i[0],o[0],s[0]),Math.max(r[1],i[1],o[1],s[1])]}getDistanceScales(e){return e?my({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,XZ(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=YO({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||my({latitude:r,longitude:n}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:s}=e;let a=$T;if(o&&(a=s?new kn(s).transformAsVector(o,[]):o),this.isGeospatial){const u=this.projectPosition([n,r,0]);this.center=new Cr(a).scale(this.distanceScales.unitsPerMeter).add(u)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=KZ,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:o,fovy:s=75,near:a=.1,far:u=1e3,padding:l=null,focalDistance:c=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new kn().multiplyRight(n).translate(new Cr(this.center).negate()),this.projectionMatrix=r||JZ({width:this.width,height:this.height,orthographic:i,fovyRadians:o||s*ZZ,focalDistance:c,padding:l,near:a,far:u});const f=ol();cs(f,f,this.projectionMatrix),cs(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=fy([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=YZ(this.viewMatrixInverse);const h=ol(),d=ol();Lb(h,h,[this.width/2,-this.height/2,1]),Fd(h,h,[1,-1,0]),cs(d,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=fy(ol(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||$e.warn("Pixel project matrix not invertible")()}}b(Si,"displayName","Viewport");const eK=512,tK=4003e4,nK=Math.PI/180;function jT(t){const e=Math.cos(t*nK);return eK/tK/e}class Kr extends Si{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,pitch:o=0,bearing:s=0,nearZMultiplier:a=.1,farZMultiplier:u=1.01,orthographic:l=!1,projectionMatrix:c,repeat:f=!1,worldOffset:h=0,legacyMeterSizes:d=!1}=e;let{width:g,height:m,altitude:S=1.5}=e;const _=Math.pow(2,i);g=g||1,m=m||1;let y,w=null;c?(S=c[5]/2,y=zd(S)):(e.fovy?(y=e.fovy,S=Nb(y)):y=zd(S),w=gZ({width:g,height:m,pitch:o,fovy:y,nearZMultiplier:a,farZMultiplier:u}));let T=pZ({height:m,pitch:o,bearing:s,scale:_,altitude:S});h&&(T=new kn().translate([512*h,0,0]).multiplyLeft(T)),super({...e,width:g,height:m,viewMatrix:T,longitude:r,latitude:n,zoom:i,...w,fovy:y,focalDistance:S}),b(this,"longitude",void 0),b(this,"latitude",void 0),b(this,"pitch",void 0),b(this,"bearing",void 0),b(this,"altitude",void 0),b(this,"fovy",void 0),b(this,"orthographic",void 0),b(this,"_subViewports",void 0),b(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=o,this.bearing=s,this.altitude=S,this.fovy=y,this.orthographic=l,this._subViewports=f?[]:null,this._pseudoMeters=d,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const o=i?new Kr({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*jT(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/jT(r);return[n,r,i]}addMetersToLngLat(e,n){return XO(e,n)}panByPosition(e,n){const r=Ac(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),o=Dd([],i,CO([],r)),s=Dd([],this.center,o),[a,u]=this.unprojectFlat(s);return{longitude:a,latitude:u}}getBounds(e={}){const n=vZ(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:o,latitude:s,zoom:a}=ZO({width:r,height:i,bounds:e,...n});return new Kr({width:r,height:i,longitude:o,latitude:s,zoom:a})}}b(Kr,"displayName","WebMercatorViewport");function A0(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof Kr){const[i,o,s=0]=t,a=e.getDistanceScales([i,o]);r[2]=s*a.unitsPerMeter[2]}return r}function rK(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:s}=t;return i===at.DEFAULT&&(i=e.isGeospatial?at.LNGLAT:at.CARTESIAN),o===void 0&&(o=i),s===void 0&&(s=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}function JO(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:o}){let[s,a,u=0]=t;switch(n&&([s,a,u]=pu([],[s,a,u,1],n)),r){case at.LNGLAT:return A0([s,a,u],e,o);case at.LNGLAT_OFFSETS:return A0([s+i[0],a+i[1],u+(i[2]||0)],e,o);case at.METER_OFFSETS:return A0(XO(i,[s,a,u]),e,o);case at.CARTESIAN:default:return e.isGeospatial?[s+i[0],a+i[1],u+i[2]]:e.projectPosition([s,a,u])}}function iK(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=rK(e),{geospatialOrigin:u,shaderCoordinateOrigin:l,offsetMode:c}=WO(n,r,i),f=JO(t,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:c});if(c){const h=n.projectPosition(u||l);kO(f,f,h)}return f}const oa={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Vd=Symbol.for("component"),ka=Symbol.for("asyncPropDefaults"),ws=Symbol.for("asyncPropOriginal"),yo=Symbol.for("asyncPropResolved");function Db(t,e=()=>!0){return Array.isArray(t)?e3(t,e,[]):e(t)?[t]:[]}function e3(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?e3(i,e,n):e(i)&&n.push(i)}return n}function oK({target:t,source:e,start:n=0,count:r=1}){const i=e.length,o=r*i;let s=0;for(let a=n;s<i;s++)t[a++]=e[s];for(;s<o;)s<o-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+o-s),s=o);return t}class sK{constructor(e,n,r){b(this,"id",void 0),b(this,"context",void 0),b(this,"isLoaded",void 0),b(this,"persistent",void 0),b(this,"_loadCount",0),b(this,"_subscribers",new Set),b(this,"_data",void 0),b(this,"_loader",void 0),b(this,"_error",void 0),b(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=kd(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===r&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const o of this._subscribers)o.onChange(this.getData())}}class aK{constructor({gl:e,protocol:n}){b(this,"protocol",void 0),b(this,"_context",void 0),b(this,"_resources",void 0),b(this,"_consumers",void 0),b(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let o=this._resources[e];o?o.setData(n,r):(o=new sK(e,n,this._context),this._resources[e]=o),o.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:o,protocol:s}=this;e.startsWith(s)&&(e=e.replace(s,""),o[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=o[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const o=this._consumers,s=o[e]=o[e]||{},a=s[n]||{},u=a.resourceId&&this._resources[a.resourceId];u&&(u.unsubscribe(a),this.prune()),r&&(s[n]=a,a.onChange=i,a.resourceId=r.id,r.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const uK="layerManager.setLayers",lK="layerManager.activateViewport";class cK{constructor(e,{deck:n,stats:r,viewport:i,timeline:o}={}){b(this,"layers",void 0),b(this,"context",void 0),b(this,"resourceManager",void 0),b(this,"_lastRenderedLayers",[]),b(this,"_needsRedraw",!1),b(this,"_needsUpdate",!1),b(this,"_nextLayers",null),b(this,"_debug",!1),b(this,"activateViewport",s=>{Rn(lK,this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new aK({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&MZ(e),stats:r||new gb({id:"deck.gl"}),viewport:i||new Si({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new VO,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Rn(uK,this,n,e),this._lastRenderedLayers=e;const r=Db(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const s of e)r[s.id]?$e.warn("Multiple old layers with same id ".concat(s.id))():r[s.id]=s;const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let o=!1;for(const s of i)if(s.hasUniformTransition()){o="Uniform transition in ".concat(s);break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const o=n[i.id];o===null&&$e.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let s=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),s=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}s&&this._updateSublayersRecursively(s,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=oa.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=oa.MATCHED,n!==e&&(e.lifecycle=oa.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=oa.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=oa.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function Ms(t,e){if(t===e)return!0;if(!t||!e)return!1;for(const n in t){const r=t[n],i=e[n];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&Ms(r,i)))return!1}return!0}class fK{constructor(e){b(this,"width",void 0),b(this,"height",void 0),b(this,"views",void 0),b(this,"viewState",void 0),b(this,"controllers",void 0),b(this,"timeline",void 0),b(this,"_viewports",void 0),b(this,"_viewportMap",void 0),b(this,"_isUpdating",void 0),b(this,"_needsRedraw",void 0),b(this,"_needsUpdate",void 0),b(this,"_eventManager",void 0),b(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let o=r.length-1;o>=0;--o){const s=r[o];if(s.containsPixel(i)){const a=e.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=Db(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Ms(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):$e.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var s;return(s=this.getView(e.id))===null||s===void 0?void 0:s.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(e,n,r,i){const o=e.controller;if(o){const s={...n,...o,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return i||(i=this._createController(e,s)),i&&i.setProps(s),i}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const o=e[i],s=this.getViewState(o),a=o.makeViewport({viewState:s,width:this.width,height:this.height});let u=n[o.id];const l=Boolean(o.controller);l&&!u&&(r=!0),(r||!l)&&u&&(u.finalize(),u=null),this.controllers[o.id]=this._updateController(o,s,a,u),this._viewports.unshift(a)}for(const i in n){const o=n[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const hK=/([0-9]+\.?[0-9]*)(%|px)/;function oo(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=hK.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function so(t,e){return t.relative?Math.round(t.position*e):t.position}function dn(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class yi{constructor(e){b(this,"id",void 0),b(this,"viewportInstance",void 0),b(this,"_x",void 0),b(this,"_y",void 0),b(this,"_width",void 0),b(this,"_height",void 0),b(this,"_padding",void 0),b(this,"props",void 0);const{id:n,x:r=0,y:i=0,width:o="100%",height:s="100%",padding:a=null,viewportInstance:u}=e||{};dn(!u||u instanceof Si),this.viewportInstance=u,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=oo(r),this._y=oo(i),this._width=oo(o),this._height=oo(s),this._padding=a&&{left:oo(a.left||0),right:oo(a.right||0),top:oo(a.top||0),bottom:oo(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&Ms(this.props,e.props)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:so(this._x,e),y:so(this._y,n),width:so(this._width,e),height:so(this._height,n)};return this._padding&&(r.padding={left:so(this._padding.left,e),top:so(this._padding.top,n),right:so(this._padding.right,e),bottom:so(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class Cc{constructor(e){b(this,"_inProgress",void 0),b(this,"_handle",void 0),b(this,"_timeline",void 0),b(this,"time",void 0),b(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const GT=()=>{},vy={BREAK:1,SNAP_TO_END:2,IGNORE:3},dK=t=>t,pK=vy.BREAK;class gK{constructor(e){b(this,"getControllerState",void 0),b(this,"props",void 0),b(this,"propsInTransition",void 0),b(this,"transition",void 0),b(this,"onViewStateChange",void 0),b(this,"onStateChange",void 0),b(this,"_onTransitionUpdate",n=>{const{time:r,settings:{interpolator:i,startProps:o,endProps:s,duration:a,easing:u}}=n,l=u(r/a),c=i.interpolateProps(o,s,l);this.propsInTransition=this.getControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Cc(e.timeline),this.onViewStateChange=e.onViewStateChange||GT,this.onStateChange=e.onStateChange||GT}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:o,endProps:s}=this.transition.settings;i={...r,...o===vy.SNAP_TO_END?s:this.propsInTransition||r}}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&Boolean(r)}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===vy.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),o=n.transitionInterpolator,s=o.getDuration?o.getDuration(e,n):n.transitionDuration;if(s===0)return;const a=o.initializeProps(e,i);this.propsInTransition={};const u={duration:s,easing:n.transitionEasing||dK,interpolator:o,interruption:n.transitionInterruption||pK,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(u),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}class mK{constructor(e){b(this,"_propsToCompare",void 0),b(this,"_propsToExtract",void 0),b(this,"_requiredProps",void 0);const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!Di(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},i={};for(const o of this._propsToExtract)(o in e||o in n)&&(r[o]=e[o],i[o]=n[o]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){!this._requiredProps||this._requiredProps.forEach(n=>{const r=e[n];dn(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const vK=["longitude","latitude","zoom","bearing","pitch"],yK=["longitude","latitude","zoom"];class gu extends mK{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:vK,required:yK},super(r.transitionProps),b(this,"opts",void 0),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:o}=this.opts;if(i&&o){const s=i(e),a=i(n),u=s.unproject(o);r.start.around=o,Object.assign(r.end,{around:a.project(u),aroundPosition:u,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const o of this._propsToExtract)i[o]=ls(e[o]||0,n[o]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...n,...i});Object.assign(i,o.panByPosition(n.aroundPosition,ls(e.around,n.around,r)))}return i}}const ao={transitionDuration:0},_K=300,Rf=t=>1-(1-t)*(1-t),ra={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Ho={};class Rc{constructor(e){b(this,"props",void 0),b(this,"state",{}),b(this,"transitionManager",void 0),b(this,"eventManager",void 0),b(this,"onViewStateChange",void 0),b(this,"onStateChange",void 0),b(this,"makeViewport",void 0),b(this,"_controllerState",void 0),b(this,"_events",{}),b(this,"_interactionState",{isDragging:!1}),b(this,"_customEvents",[]),b(this,"_eventStartBlocked",null),b(this,"_panMove",!1),b(this,"invertPan",!1),b(this,"dragMode","rotate"),b(this,"inertia",0),b(this,"scrollZoom",!0),b(this,"dragPan",!0),b(this,"dragRotate",!0),b(this,"doubleClickZoom",!0),b(this,"touchZoom",!0),b(this,"touchRotate",!1),b(this,"keyboard",!0),this.transitionManager=new gK({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.props;if(n&&n.handled)return!1;const o=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return o&&n&&n.stopPropagation(),o}isFunctionKeyPressed(e){const{srcEvent:n}=e;return Boolean(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?_K:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:a=!0,touchRotate:u=!1,keyboard:l=!0}=e,c=Boolean(this.onViewStateChange);this.toggleEvents(ra.WHEEL,c&&r),this.toggleEvents(ra.PAN,c&&(i||o)),this.toggleEvents(ra.PINCH,c&&(a||u)),this.toggleEvents(ra.TRIPLE_PAN,c&&u),this.toggleEvents(ra.DOUBLE_TAP,c&&s),this.toggleEvents(ra.KEYBOARD,c&&l),this.scrollZoom=r,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=a,this.touchRotate=u,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const i={...e.getViewportProps(),...n},o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),o){const s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:s})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,ao,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,ao,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Rf},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,ao,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Rf},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=e;let s=2/(1+Math.exp(-Math.abs(o*r)));o<0&&s!==0&&(s=1/s);const a=this.controllerState.zoom({pos:n,scale:s});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,ao,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,ao,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Rf},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Ho._startPinchRotation=e.rotation,Ho._lastPinchEvent=e,this.updateViewport(r,ao,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:Ho._startPinchRotation-r})}return this.updateViewport(n,ao,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Ho._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=Ho;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let o=this.controllerState.rotateEnd();const s=Math.log2(e.scale),a=(s-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),u=Math.pow(2,s+a*n/2);o=o.zoom({pos:i,scale:u}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:Rf},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Ho._startPinchRotation=null,Ho._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:s}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this;let u;const l={};switch(e.srcEvent.code){case"Minus":u=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),l.isZooming=!0;break;case"Equal":u=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),l.isZooming=!0;break;case"ArrowLeft":n?(u=a.rotateLeft(o),l.isRotating=!0):(u=a.moveLeft(i),l.isPanning=!0);break;case"ArrowRight":n?(u=a.rotateRight(o),l.isRotating=!0):(u=a.moveRight(i),l.isPanning=!0);break;case"ArrowUp":n?(u=a.rotateUp(s),l.isRotating=!0):(u=a.moveUp(i),l.isPanning=!0);break;case"ArrowDown":n?(u=a.rotateDown(s),l.isRotating=!0):(u=a.moveDown(i),l.isPanning=!0);break;default:return!1}return this.updateViewport(u,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?ao:e?{...n,transitionInterpolator:new gu({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class Fb{constructor(e,n){b(this,"_viewportProps",void 0),b(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const WT=5,bK=1.2;class t3 extends Fb{constructor(e){const{width:n,height:r,latitude:i,longitude:o,zoom:s,bearing:a=0,pitch:u=0,altitude:l=1.5,position:c=[0,0,0],maxZoom:f=20,minZoom:h=0,maxPitch:d=60,minPitch:g=0,startPanLngLat:m,startZoomLngLat:S,startRotatePos:_,startBearing:y,startPitch:w,startZoom:T,normalize:R=!0}=e;dn(Number.isFinite(o)),dn(Number.isFinite(i)),dn(Number.isFinite(s)),super({width:n,height:r,latitude:i,longitude:o,zoom:s,bearing:a,pitch:u,altitude:l,maxZoom:f,minZoom:h,maxPitch:d,minPitch:g,normalize:R,position:c},{startPanLngLat:m,startZoomLngLat:S,startRotatePos:_,startBearing:y,startPitch:w,startZoom:T}),b(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:o,startPitch:s}=this.getState();if(!i||o===void 0||s===void 0)return this;let a;return e?a=this._getNewRotation(e,i,s,o):a={bearing:o+n,pitch:s+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let u=i+Math.log2(r);u=qt(u,a,s);const l=this.makeViewport({...this.getViewportProps(),zoom:u});return this._getUpdatedState({zoom:u,...l.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:o}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(o-n.longitude)>180&&(r.longitude=o<0?o+360:o-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=qt(i,r,n);const{maxPitch:o,minPitch:s,pitch:a}=e;e.pitch=qt(a,s,o);const{normalize:u=!0}=e;return u&&Object.assign(e,yZ(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){const o=e[0]-n[0],s=e[1]-n[1],a=e[1],u=n[1],{width:l,height:c}=this.getViewportProps(),f=o/l;let h=0;s>0?Math.abs(c-u)>WT&&(h=s/(u-c)*bK):s<0&&u>WT&&(h=1-a/u),h=qt(h,-1,1);const{minPitch:d,maxPitch:g}=this.getViewportProps(),m=i+180*f;let S=r;return h>0?S=r+h*(g-r):h<0&&(S=r-h*(d-r)),{pitch:S,bearing:m}}}class wK extends Rc{constructor(...e){super(...e),b(this,"ControllerState",t3),b(this,"transition",{transitionDuration:300,transitionInterpolator:new gu({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),b(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class n3 extends yi{get ViewportType(){return Kr}get ControllerType(){return wK}}b(n3,"displayName","MapView");class EK extends Cg{constructor(e,n){super(e,n),b(this,"maskMap",void 0),b(this,"fbo",void 0);const{mapSize:r=2048}=n;this.maskMap=new Un(e,{width:r,height:r,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new nn(e,{id:"maskmap",width:r,height:r,attachments:{[36064]:this.maskMap}})}render(e){const n=this.gl,r=[!1,!1,!1,!1];return r[e.channel]=!0,Tr(n,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:r,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return e.props.operation===Pc.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}}const SK=new kn().lookAt({eye:[0,0,1]});function xK({width:t,height:e,near:n,far:r,padding:i}){let o=-t/2,s=t/2,a=-e/2,u=e/2;if(i){const{left:l=0,right:c=0,top:f=0,bottom:h=0}=i,d=qt((l+t-c)/2,0,t)-t/2,g=qt((f+e-h)/2,0,e)-e/2;o-=d,s-=d,a+=g,u+=g}return new kn().ortho({left:o,right:s,bottom:a,top:u,near:n,far:r})}class TK extends Si{constructor(e){const{width:n,height:r,near:i=.1,far:o=1e3,zoom:s=0,target:a=[0,0,0],padding:u=null,flipY:l=!0}=e,c=Array.isArray(s)?s[0]:s,f=Array.isArray(s)?s[1]:s,h=Math.min(c,f),d=Math.pow(2,h);let g;if(c!==f){const m=Math.pow(2,c),S=Math.pow(2,f);g={unitsPerMeter:[m/d,S/d,1],metersPerUnit:[d/m,d/S,1]}}super({...e,longitude:void 0,position:a,viewMatrix:SK.clone().scale([d,d*(l?-1:1),d]),projectionMatrix:xK({width:n||1,height:r||1,padding:u,near:i,far:o}),zoom:h,distanceScales:g})}projectFlat([e,n]){const{unitsPerMeter:r}=this.distanceScales;return[e*r[0],n*r[1]]}unprojectFlat([e,n]){const{metersPerUnit:r}=this.distanceScales;return[e*r[0],n*r[1]]}panByPosition(e,n){const r=Ac(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),o=Dd([],i,CO([],r)),s=Dd([],this.center,o);return{target:this.unprojectFlat(s)}}}class r3 extends Fb{constructor(e){const{width:n,height:r,rotationX:i=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:a=0,minRotationX:u=-90,maxRotationX:l=90,minZoom:c=-1/0,maxZoom:f=1/0,startPanPosition:h,startRotatePos:d,startRotationX:g,startRotationOrbit:m,startZoomPosition:S,startZoom:_}=e;super({width:n,height:r,rotationX:i,rotationOrbit:o,target:s,zoom:a,minRotationX:u,maxRotationX:l,minZoom:c,maxZoom:f},{startPanPosition:h,startRotatePos:d,startRotationX:g,startRotationOrbit:m,startZoomPosition:S,startZoom:_}),b(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const r=this.getState().startPanPosition||n;if(!r)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:u}=this.getViewportProps();if(!i||o===void 0||s===void 0)return this;let l;if(e){let c=(e[0]-i[0])/a;const f=(e[1]-i[1])/u;(o<-90||o>90)&&(c*=-1),l={rotationX:o+f*180,rotationOrbit:s+c*180}}else l={rotationX:o+r,rotationOrbit:s+n};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{rotationOrbit:i}=r;return Math.abs(i-n.rotationOrbit)>180&&(r.rotationOrbit=i<0?i+360:i-360),r}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomPosition:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const s=this._calculateNewZoom({scale:r,startZoom:i}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:r,minZoom:i}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);const o=n+Math.log2(e);return qt(o,i,r)}_panFromCenter(e){const{width:n,height:r,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i,maxRotationX:o,minRotationX:s,rotationOrbit:a}=e;return e.zoom=Array.isArray(i)?[qt(i[0],r,n),qt(i[1],r,n)]:qt(i,r,n),e.rotationX=qt(e.rotationX,s,o),(a<-180||a>180)&&(e.rotationOrbit=Bd(a+180,360)-180),e}}class PK extends Rc{constructor(...e){super(...e),b(this,"ControllerState",r3),b(this,"transition",{transitionDuration:300,transitionInterpolator:new gu({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class AK extends r3{constructor(e){super(e),b(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:r,minZoom:i}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);let o=Math.log2(e);if(Array.isArray(n)){let[s,a]=n;switch(this.zoomAxis){case"X":s=qt(s+o,i,r);break;case"Y":a=qt(a+o,i,r);break;default:let u=Math.min(s+o,a+o);u<i&&(o+=i-u),u=Math.max(s+o,a+o),u>r&&(o+=r-u),s+=o,a+=o}return[s,a]}return qt(n+o,i,r)}}class CK extends Rc{constructor(...e){super(...e),b(this,"ControllerState",AK),b(this,"transition",{transitionDuration:300,transitionInterpolator:new gu(["target","zoom"])}),b(this,"dragMode","pan")}_onPanRotate(){return!1}}class i3 extends yi{get ViewportType(){return TK}get ControllerType(){return CK}}b(i3,"displayName","OrthographicView");function RK({layers:t,viewport:e}){let n=null;for(const o of t){const s=o.getBounds();s&&(n?(n[0]=Math.min(n[0],s[0][0]),n[1]=Math.min(n[1],s[0][1]),n[2]=Math.max(n[2],s[1][0]),n[3]=Math.max(n[3],s[1][1])):n=[s[0][0],s[0][1],s[1][0],s[1][1]])}const r=e.getBounds();if(!n)return r;const i=MK(r);return n[2]-n[0]<i[2]-i[0]||n[3]-n[1]<i[3]-i[1]||(n[0]=Math.max(n[0],i[0]),n[1]=Math.max(n[1],i[1]),n[2]=Math.min(n[2],i[2]),n[3]=Math.min(n[3],i[3])),n}function LK({bounds:t,viewport:e,width:n,height:r}){if(t[2]<=t[0]||t[3]<=t[1])return null;const i=1;if(n-=i*2,r-=i*2,e instanceof Kr){const{longitude:a,latitude:u,zoom:l}=ZO({width:n,height:r,bounds:[[t[0],t[1]],[t[2],t[3]]],maxZoom:20});return new Kr({longitude:a,latitude:u,zoom:l,x:i,y:i,width:n,height:r})}const o=[(t[0]+t[2])/2,(t[1]+t[3])/2,0],s=Math.min(20,n/(t[2]-t[0]),r/(t[3]-t[1]));return new i3({x:i,y:i}).makeViewport({width:n,height:r,viewState:{target:o,zoom:Math.log2(s)}})}function MK(t){const e={x:t[2]-t[0],y:t[3]-t[1]},n={x:t[0]+.5*e.x,y:t[1]+.5*e.y};return[n.x-e.x,n.y-e.y,n.x+e.x,n.y+e.y]}class OK{constructor(){b(this,"id","mask-effect"),b(this,"props",null),b(this,"useInPicking",!0),b(this,"dummyMaskMap",void 0),b(this,"channels",[]),b(this,"masks",null),b(this,"maskPass",void 0),b(this,"maskMap",void 0),b(this,"lastViewport",void 0)}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s}){this.dummyMaskMap||(this.dummyMaskMap=new Un(e,{width:1,height:1}));const a=n.filter(f=>f.props.visible&&f.props.operation===Pc.MASK);if(a.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new EK(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const u=this._sortMaskChannels(a),l=i[0],c=!this.lastViewport||!this.lastViewport.equals(l);for(const f in u)this._renderChannel(u[f],{layerFilter:r,onViewportActive:o,views:s,viewport:l,viewportChanged:c})}_renderChannel(e,{layerFilter:n,onViewportActive:r,views:i,viewport:o,viewportChanged:s}){const a=this.channels[e.index];if(!a)return;const u=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((l,c)=>l!==a.layerBounds[c]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(u||s)&&(this.lastViewport=o,e.bounds=RK({layers:e.layers,viewport:o}),u||!Di(e.bounds,a.bounds))){const{maskPass:l,maskMap:c}=this,f=LK({bounds:e.bounds,viewport:o,width:c.width,height:c.height});e.maskBounds=f?f.getBounds():[0,0,1,1],l.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:n,viewports:f?[f]:[],onViewportActive:r,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const n={};let r=0;for(const i of e){const{id:o}=i.root;let s=n[o];if(!s){if(++r>4){$e.warn("Too many mask layers. The max supported is 4")();continue}s={id:o,index:this.channels.findIndex(a=>(a==null?void 0:a.id)===o),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},n[o]=s}s.layers.push(i),s.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){const o=this.channels[i];(!o||!(o.id in n))&&(this.channels[i]=null)}for(const i in n){const o=n[i];o.index<0&&(o.index=this.channels.findIndex(s=>!s),this.channels[o.index]=o)}return n}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const kK=new QO;class IK{constructor(){b(this,"effects",void 0),b(this,"_internalEffects",void 0),b(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!Ms(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new OK),e.some(n=>n instanceof QO)||this._internalEffects.push(kK)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class NK extends Cg{shouldDrawLayer(e){return e.props.operation===Pc.DRAW}}const HT={blendFunc:[1,0,32771,0],blendEquation:32774};class o3 extends Cg{constructor(...e){super(...e),b(this,"pickZ",void 0),b(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:u,width:l,height:c},cullRect:f,effects:h,pass:d="picking",pickZ:g}){const m=this.gl;this.pickZ=g;const S=g?null:{byLayer:new Map,byAlpha:[]};this._colors=S;const _=Tr(m,{scissorTest:!0,scissor:[a,u,l,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...HT,blend:!g},()=>super.render({target:s,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,cullRect:f,effects:h==null?void 0:h.filter(w=>w.useInPicking),pass:d}));return this._colors=null,{decodePickingColor:S&&FK.bind(null,S),stats:_}}shouldDrawLayer(e){return e.props.pickable&&e.props.operation===Pc.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const i={...e.props.parameters};return this._colors?(Object.assign(i,HT),i.blend=!0,i.blendColor=DK(this._colors,e,r)):i.blend=!1,i}}function DK(t,e,n){const{byLayer:r,byAlpha:i}=t;let o,s=r.get(e);return s?(s.viewports.push(n),o=s.a):(o=r.size+1,o<=255?(s={a:o,layer:e,viewports:[n]},r.set(e,s),i[o]=s):($e.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function FK(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const UK="deckRenderer.renderLayers";class zK{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new NK(e),this.pickLayersPass=new o3(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||nn.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const r=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,i=n.render({...e,target:r});this._postRender(e.effects,e),this.renderCount++,Rn(UK,this,i,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){let r=null;for(const i of e)i.preRender(this.gl,n),i.postRender&&(r=i);r&&this._resizeRenderBuffers(),this.lastPostProcessEffect=r}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new nn(this.gl),new nn(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,i={inputBuffer:r[0],swapBuffer:r[1],target:null};for(const o of e)if(o.postRender){if(o===this.lastPostProcessEffect){i.target=n.target,o.postRender(this.gl,i);break}const s=o.postRender(this.gl,i);i.inputBuffer=s,i.swapBuffer=s===r[0]?r[1]:r[0]}}}const BK={pickedColor:null,pickedObjectIndex:-1};function VK({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:o}){const{x:s,y:a,width:u,height:l}=o;let c=i*i,f=-1,h=0;for(let d=0;d<l;d++){const g=d+a-r,m=g*g;if(m>c)h+=4*u;else for(let S=0;S<u;S++){if(t[h+3]-1>=0){const y=S+s-n,w=y*y+m;w<=c&&(c=w,f=h)}h+=4}}if(f>=0){const d=t.slice(f,f+4),g=e(d);if(g){const m=Math.floor(f/4/u),S=f/4-m*u;return{...g,pickedColor:d,pickedX:s+S,pickedY:a+m}}$e.error("Picked non-existent layer. Is picking buffer corrupt?")()}return BK}function $K({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const o=t.slice(r,r+4),s=o.join(",");if(!n.has(s)){const a=e(o);a?n.set(s,{...a,color:o}):$e.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function s3({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:o}){let s=e[0];e.length>1&&(s=GK((t==null?void 0:t.pickedViewports)||e,{x:r,y:i}));let a;if(s){const u=[r-s.x,i-s.y];o!==void 0&&(u[2]=o),a=s.unproject(u)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function jK(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,u=s?[s]:[];if(r==="hover"){const f=n.index,h=n.layerId,d=s?s.props.id:null;if(d!==h||a!==f){if(d!==h){const g=i.find(m=>m.props.id===h);g&&u.unshift(g)}n.layerId=d,n.index=a,n.info=null}}const l=s3(t),c=new Map;return c.set(null,l),u.forEach(f=>{let h={...l};f===s&&(h.color=o,h.index=a,h.picked=!0),h=a3({layer:f,info:h,mode:r});const d=h.layer;f===s&&r==="hover"&&(n.info=h),c.set(d.id,h),r==="hover"&&d.updateAutoHighlight(h)}),c}function a3({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function GK(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class WK{constructor(e){b(this,"gl",void 0),b(this,"pickingFBO",void 0),b(this,"depthFBO",void 0),b(this,"pickLayersPass",void 0),b(this,"layerFilter",void 0),b(this,"lastPickedInfo",void 0),b(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new o3(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},o=this.lastPickedInfo.info){const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,u=s?r.find(h=>h.id===s):null,l=a&&i.find(h=>h.id===a)||i[0],c=l&&l.unproject([e-l.x,n-l.y]);return{...o,...{x:e,y:n,viewport:l,coordinate:c,layer:u}}}_resizeBuffer(){var e,n;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new nn(r),nn.isSupported(r,{colorBufferFloat:!0}))){const i=new nn(r);i.attach({[36064]:new Un(r,{format:Je(r)?34836:6408,type:5126})}),this.depthFBO=i}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>r.isPickable()&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:o,radius:s=0,depth:a=1,mode:u="query",unproject3D:l,onViewportActive:c,effects:f}){const h=this._getPickable(e),d=qa(this.gl);if(!h)return{result:[],emptyInfo:s3({viewports:r,x:i,y:o,pixelRatio:d})};this._resizeBuffer();const g=c0(this.gl,[i,o],!0),m=[g.x+Math.floor(g.width/2),g.y+Math.floor(g.height/2)],S=Math.round(s*d),{width:_,height:y}=this.pickingFBO,w=this._getPickingRect({deviceX:m[0],deviceY:m[1],deviceRadius:S,deviceWidth:_,deviceHeight:y}),T={x:i-s,y:o-s,width:s*2+1,height:s*2+1};let R;const C=[],D=new Set;for(let F=0;F<a;F++){let W;if(w){const H=this._drawAndSample({layers:h,views:n,viewports:r,onViewportActive:c,deviceRect:w,cullRect:T,effects:f,pass:"picking:".concat(u)});W=VK({...H,deviceX:m[0],deviceY:m[1],deviceRadius:S,deviceRect:w})}else W={pickedColor:null,pickedObjectIndex:-1};let j;W.pickedLayer&&l&&this.depthFBO&&(j=this._drawAndSample({layers:[W.pickedLayer],views:n,viewports:r,onViewportActive:c,deviceRect:{x:W.pickedX,y:W.pickedY,width:1,height:1},cullRect:T,effects:f,pass:"picking:".concat(u,":z")},!0).pickedColors[0]),W.pickedLayer&&F+1<a&&(D.add(W.pickedLayer),W.pickedLayer.disablePickingIndex(W.pickedObjectIndex)),R=jK({pickInfo:W,lastPickedInfo:this.lastPickedInfo,mode:u,layers:h,viewports:r,x:i,y:o,z:j,pixelRatio:d});for(const H of R.values())H.layer&&C.push(H);if(!W.pickedColor)break}for(const F of D)F.restorePickingColors();return{result:C,emptyInfo:R.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:o,width:s=1,height:a=1,mode:u="query",maxObjects:l=null,onViewportActive:c,effects:f}){const h=this._getPickable(e);if(!h)return[];this._resizeBuffer();const d=qa(this.gl),g=c0(this.gl,[i,o],!0),m=g.x,S=g.y+g.height,_=c0(this.gl,[i+s,o+a],!0),y=_.x+_.width,w=_.y,T={x:m,y:w,width:y-m,height:S-w},R=this._drawAndSample({layers:h,views:n,viewports:r,onViewportActive:c,deviceRect:T,cullRect:{x:i,y:o,width:s,height:a},effects:f,pass:"picking:".concat(u)}),C=$K(R),D=new Map,F=Number.isFinite(l);for(let W=0;W<C.length&&!(F&&l&&D.size>=l);W++){const j=C[W];let H={color:j.pickedColor,layer:null,index:j.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:d};H=a3({layer:j.pickedLayer,info:H,mode:u}),D.has(H.object)||D.set(H.object,H)}return Array.from(D.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:o,cullRect:s,effects:a,pass:u},l=!1){const c=l?this.depthFBO:this.pickingFBO,{decodePickingColor:f}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:c,deviceRect:o,cullRect:s,effects:a,pass:u,pickZ:l}),{x:h,y:d,width:g,height:m}=o,S=new(l?Float32Array:Uint8Array)(g*m*4);return Tg(c,{sourceX:h,sourceY:d,sourceWidth:g,sourceHeight:m,target:S}),{pickedColors:S,decodePickingColor:f}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:o}){const s=Math.max(0,e-r),a=Math.max(0,n-r),u=Math.min(i,e+r+1)-s,l=Math.min(o,n+r+1)-a;return u<=0||l<=0?null:{x:s,y:a,width:u,height:l}}}const HK={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class YK{constructor(e){b(this,"el",null),b(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,HK),n.appendChild(this.el))}setTooltip(e,n,r){const i=this.el;if(!!i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className),Object.assign(i.style,e.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}var mu={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var o=["","webkit","Moz","MS","ms","o"],s=n.createElement("div"),a="function",u=Math.round,l=Math.abs,c=Date.now;function f(x,P,M){return setTimeout(w(x,M),P)}function h(x,P,M){return Array.isArray(x)?(d(x,M[P],M),!0):!1}function d(x,P,M){var $;if(!!x)if(x.forEach)x.forEach(P,M);else if(x.length!==i)for($=0;$<x.length;)P.call(M,x[$],$,x),$++;else for($ in x)x.hasOwnProperty($)&&P.call(M,x[$],$,x)}function g(x,P,M){var $="DEPRECATED METHOD: "+P+`
`+M+` AT 
`;return function(){var te=new Error("get-stack-trace"),we=te&&te.stack?te.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",je=e.console&&(e.console.warn||e.console.log);return je&&je.call(e.console,$,we),x.apply(this,arguments)}}var m;typeof Object.assign!="function"?m=function(P){if(P===i||P===null)throw new TypeError("Cannot convert undefined or null to object");for(var M=Object(P),$=1;$<arguments.length;$++){var te=arguments[$];if(te!==i&&te!==null)for(var we in te)te.hasOwnProperty(we)&&(M[we]=te[we])}return M}:m=Object.assign;var S=g(function(P,M,$){for(var te=Object.keys(M),we=0;we<te.length;)(!$||$&&P[te[we]]===i)&&(P[te[we]]=M[te[we]]),we++;return P},"extend","Use `assign`."),_=g(function(P,M){return S(P,M,!0)},"merge","Use `assign`.");function y(x,P,M){var $=P.prototype,te;te=x.prototype=Object.create($),te.constructor=x,te._super=$,M&&m(te,M)}function w(x,P){return function(){return x.apply(P,arguments)}}function T(x,P){return typeof x==a?x.apply(P&&P[0]||i,P):x}function R(x,P){return x===i?P:x}function C(x,P,M){d(j(P),function($){x.addEventListener($,M,!1)})}function D(x,P,M){d(j(P),function($){x.removeEventListener($,M,!1)})}function F(x,P){for(;x;){if(x==P)return!0;x=x.parentNode}return!1}function W(x,P){return x.indexOf(P)>-1}function j(x){return x.trim().split(/\s+/g)}function H(x,P,M){if(x.indexOf&&!M)return x.indexOf(P);for(var $=0;$<x.length;){if(M&&x[$][M]==P||!M&&x[$]===P)return $;$++}return-1}function pe(x){return Array.prototype.slice.call(x,0)}function ue(x,P,M){for(var $=[],te=[],we=0;we<x.length;){var je=P?x[we][P]:x[we];H(te,je)<0&&$.push(x[we]),te[we]=je,we++}return M&&(P?$=$.sort(function(rn,gn){return rn[P]>gn[P]}):$=$.sort()),$}function se(x,P){for(var M,$,te=P[0].toUpperCase()+P.slice(1),we=0;we<o.length;){if(M=o[we],$=M?M+te:P,$ in x)return $;we++}return i}var Ce=1;function De(){return Ce++}function He(x){var P=x.ownerDocument||x;return P.defaultView||P.parentWindow||e}var ae=/mobile|tablet|ip(ad|hone|od)|android/i,ve="ontouchstart"in e,G=se(e,"PointerEvent")!==i,X=ve&&ae.test(navigator.userAgent),O="touch",q="pen",Q="mouse",de="kinect",le=25,_e=1,be=2,J=4,Pe=8,rt=1,ze=2,Ke=4,gt=8,Qt=16,wt=ze|Ke,xt=gt|Qt,Z=wt|xt,re=["x","y"],fe=["clientX","clientY"];function Te(x,P){var M=this;this.manager=x,this.callback=P,this.element=x.element,this.target=x.options.inputTarget,this.domHandler=function($){T(x.options.enable,[x])&&M.handler($)},this.init()}Te.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(He(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&D(this.element,this.evEl,this.domHandler),this.evTarget&&D(this.target,this.evTarget,this.domHandler),this.evWin&&D(He(this.element),this.evWin,this.domHandler)}};function Ne(x){var P,M=x.options.inputClass;return M?P=M:G?P=Re:X?P=Mr:ve?P=yu:P=ce,new P(x,Ye)}function Ye(x,P,M){var $=M.pointers.length,te=M.changedPointers.length,we=P&_e&&$-te===0,je=P&(J|Pe)&&$-te===0;M.isFirst=!!we,M.isFinal=!!je,we&&(x.session={}),M.eventType=P,Xe(x,M),x.emit("hammer.input",M),x.recognize(M),x.session.prevInput=M}function Xe(x,P){var M=x.session,$=P.pointers,te=$.length;M.firstInput||(M.firstInput=it(P)),te>1&&!M.firstMultiple?M.firstMultiple=it(P):te===1&&(M.firstMultiple=!1);var we=M.firstInput,je=M.firstMultiple,Jt=je?je.center:we.center,rn=P.center=ct($);P.timeStamp=c(),P.deltaTime=P.timeStamp-we.timeStamp,P.angle=Sn(Jt,rn),P.distance=ln(Jt,rn),et(M,P),P.offsetDirection=$n(P.deltaX,P.deltaY);var gn=It(P.deltaTime,P.deltaX,P.deltaY);P.overallVelocityX=gn.x,P.overallVelocityY=gn.y,P.overallVelocity=l(gn.x)>l(gn.y)?gn.x:gn.y,P.scale=je?Lr(je.pointers,$):1,P.rotation=je?Jr(je.pointers,$):0,P.maxPointers=M.prevInput?P.pointers.length>M.prevInput.maxPointers?P.pointers.length:M.prevInput.maxPointers:P.pointers.length,ut(M,P);var yr=x.element;F(P.srcEvent.target,yr)&&(yr=P.srcEvent.target),P.target=yr}function et(x,P){var M=P.center,$=x.offsetDelta||{},te=x.prevDelta||{},we=x.prevInput||{};(P.eventType===_e||we.eventType===J)&&(te=x.prevDelta={x:we.deltaX||0,y:we.deltaY||0},$=x.offsetDelta={x:M.x,y:M.y}),P.deltaX=te.x+(M.x-$.x),P.deltaY=te.y+(M.y-$.y)}function ut(x,P){var M=x.lastInterval||P,$=P.timeStamp-M.timeStamp,te,we,je,Jt;if(P.eventType!=Pe&&($>le||M.velocity===i)){var rn=P.deltaX-M.deltaX,gn=P.deltaY-M.deltaY,yr=It($,rn,gn);we=yr.x,je=yr.y,te=l(yr.x)>l(yr.y)?yr.x:yr.y,Jt=$n(rn,gn),x.lastInterval=P}else te=M.velocity,we=M.velocityX,je=M.velocityY,Jt=M.direction;P.velocity=te,P.velocityX=we,P.velocityY=je,P.direction=Jt}function it(x){for(var P=[],M=0;M<x.pointers.length;)P[M]={clientX:u(x.pointers[M].clientX),clientY:u(x.pointers[M].clientY)},M++;return{timeStamp:c(),pointers:P,center:ct(P),deltaX:x.deltaX,deltaY:x.deltaY}}function ct(x){var P=x.length;if(P===1)return{x:u(x[0].clientX),y:u(x[0].clientY)};for(var M=0,$=0,te=0;te<P;)M+=x[te].clientX,$+=x[te].clientY,te++;return{x:u(M/P),y:u($/P)}}function It(x,P,M){return{x:P/x||0,y:M/x||0}}function $n(x,P){return x===P?rt:l(x)>=l(P)?x<0?ze:Ke:P<0?gt:Qt}function ln(x,P,M){M||(M=re);var $=P[M[0]]-x[M[0]],te=P[M[1]]-x[M[1]];return Math.sqrt($*$+te*te)}function Sn(x,P,M){M||(M=re);var $=P[M[0]]-x[M[0]],te=P[M[1]]-x[M[1]];return Math.atan2(te,$)*180/Math.PI}function Jr(x,P){return Sn(P[1],P[0],fe)+Sn(x[1],x[0],fe)}function Lr(x,P){return ln(P[0],P[1],fe)/ln(x[0],x[1],fe)}var z={mousedown:_e,mousemove:be,mouseup:J},I="mousedown",K="mousemove mouseup";function ce(){this.evEl=I,this.evWin=K,this.pressed=!1,Te.apply(this,arguments)}y(ce,Te,{handler:function(P){var M=z[P.type];M&_e&&P.button===0&&(this.pressed=!0),M&be&&P.which!==1&&(M=J),this.pressed&&(M&J&&(this.pressed=!1),this.callback(this.manager,M,{pointers:[P],changedPointers:[P],pointerType:Q,srcEvent:P}))}});var he={pointerdown:_e,pointermove:be,pointerup:J,pointercancel:Pe,pointerout:Pe},ye={2:O,3:q,4:Q,5:de},Le="pointerdown",Me="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Le="MSPointerDown",Me="MSPointerMove MSPointerUp MSPointerCancel");function Re(){this.evEl=Le,this.evWin=Me,Te.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y(Re,Te,{handler:function(P){var M=this.store,$=!1,te=P.type.toLowerCase().replace("ms",""),we=he[te],je=ye[P.pointerType]||P.pointerType,Jt=je==O,rn=H(M,P.pointerId,"pointerId");we&_e&&(P.button===0||Jt)?rn<0&&(M.push(P),rn=M.length-1):we&(J|Pe)&&($=!0),!(rn<0)&&(M[rn]=P,this.callback(this.manager,we,{pointers:M,changedPointers:[P],pointerType:je,srcEvent:P}),$&&M.splice(rn,1))}});var Oe={touchstart:_e,touchmove:be,touchend:J,touchcancel:Pe},qe="touchstart",Yt="touchstart touchmove touchend touchcancel";function Lt(){this.evTarget=qe,this.evWin=Yt,this.started=!1,Te.apply(this,arguments)}y(Lt,Te,{handler:function(P){var M=Oe[P.type];if(M===_e&&(this.started=!0),!!this.started){var $=xn.call(this,P,M);M&(J|Pe)&&$[0].length-$[1].length===0&&(this.started=!1),this.callback(this.manager,M,{pointers:$[0],changedPointers:$[1],pointerType:O,srcEvent:P})}}});function xn(x,P){var M=pe(x.touches),$=pe(x.changedTouches);return P&(J|Pe)&&(M=ue(M.concat($),"identifier",!0)),[M,$]}var In={touchstart:_e,touchmove:be,touchend:J,touchcancel:Pe},ei="touchstart touchmove touchend touchcancel";function Mr(){this.evTarget=ei,this.targetIds={},Te.apply(this,arguments)}y(Mr,Te,{handler:function(P){var M=In[P.type],$=ti.call(this,P,M);!$||this.callback(this.manager,M,{pointers:$[0],changedPointers:$[1],pointerType:O,srcEvent:P})}});function ti(x,P){var M=pe(x.touches),$=this.targetIds;if(P&(_e|be)&&M.length===1)return $[M[0].identifier]=!0,[M,M];var te,we,je=pe(x.changedTouches),Jt=[],rn=this.target;if(we=M.filter(function(gn){return F(gn.target,rn)}),P===_e)for(te=0;te<we.length;)$[we[te].identifier]=!0,te++;for(te=0;te<je.length;)$[je[te].identifier]&&Jt.push(je[te]),P&(J|Pe)&&delete $[je[te].identifier],te++;if(!!Jt.length)return[ue(we.concat(Jt),"identifier",!0),Jt]}var ni=2500,kc=25;function yu(){Te.apply(this,arguments);var x=w(this.handler,this);this.touch=new Mr(this.manager,x),this.mouse=new ce(this.manager,x),this.primaryTouch=null,this.lastTouches=[]}y(yu,Te,{handler:function(P,M,$){var te=$.pointerType==O,we=$.pointerType==Q;if(!(we&&$.sourceCapabilities&&$.sourceCapabilities.firesTouchEvents)){if(te)Ug.call(this,M,$);else if(we&&zg.call(this,$))return;this.callback(P,M,$)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Ug(x,P){x&_e?(this.primaryTouch=P.changedPointers[0].identifier,Uo.call(this,P)):x&(J|Pe)&&Uo.call(this,P)}function Uo(x){var P=x.changedPointers[0];if(P.identifier===this.primaryTouch){var M={x:P.clientX,y:P.clientY};this.lastTouches.push(M);var $=this.lastTouches,te=function(){var we=$.indexOf(M);we>-1&&$.splice(we,1)};setTimeout(te,ni)}}function zg(x){for(var P=x.srcEvent.clientX,M=x.srcEvent.clientY,$=0;$<this.lastTouches.length;$++){var te=this.lastTouches[$],we=Math.abs(P-te.x),je=Math.abs(M-te.y);if(we<=kc&&je<=kc)return!0}return!1}var _u=se(s.style,"touchAction"),Ic=_u!==i,Nc="compute",Dc="auto",Os="manipulation",xi="none",Zi="pan-x",zo="pan-y",Bo=Fc();function bu(x,P){this.manager=x,this.set(P)}bu.prototype={set:function(x){x==Nc&&(x=this.compute()),Ic&&this.manager.element.style&&Bo[x]&&(this.manager.element.style[_u]=x),this.actions=x.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var x=[];return d(this.manager.recognizers,function(P){T(P.options.enable,[P])&&(x=x.concat(P.getTouchAction()))}),Bg(x.join(" "))},preventDefaults:function(x){var P=x.srcEvent,M=x.offsetDirection;if(this.manager.session.prevented){P.preventDefault();return}var $=this.actions,te=W($,xi)&&!Bo[xi],we=W($,zo)&&!Bo[zo],je=W($,Zi)&&!Bo[Zi];if(te){var Jt=x.pointers.length===1,rn=x.distance<2,gn=x.deltaTime<250;if(Jt&&rn&&gn)return}if(!(je&&we)&&(te||we&&M&wt||je&&M&xt))return this.preventSrc(P)},preventSrc:function(x){this.manager.session.prevented=!0,x.preventDefault()}};function Bg(x){if(W(x,xi))return xi;var P=W(x,Zi),M=W(x,zo);return P&&M?xi:P||M?P?Zi:zo:W(x,Os)?Os:Dc}function Fc(){if(!Ic)return!1;var x={},P=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(M){x[M]=P?e.CSS.supports("touch-action",M):!0}),x}var ks=1,jn=2,Ki=4,ri=8,Or=ri,Vo=16,Gn=32;function Tn(x){this.options=m({},this.defaults,x||{}),this.id=De(),this.manager=null,this.options.enable=R(this.options.enable,!0),this.state=ks,this.simultaneous={},this.requireFail=[]}Tn.prototype={defaults:{},set:function(x){return m(this.options,x),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(x){if(h(x,"recognizeWith",this))return this;var P=this.simultaneous;return x=Ns(x,this),P[x.id]||(P[x.id]=x,x.recognizeWith(this)),this},dropRecognizeWith:function(x){return h(x,"dropRecognizeWith",this)?this:(x=Ns(x,this),delete this.simultaneous[x.id],this)},requireFailure:function(x){if(h(x,"requireFailure",this))return this;var P=this.requireFail;return x=Ns(x,this),H(P,x)===-1&&(P.push(x),x.requireFailure(this)),this},dropRequireFailure:function(x){if(h(x,"dropRequireFailure",this))return this;x=Ns(x,this);var P=H(this.requireFail,x);return P>-1&&this.requireFail.splice(P,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(x){return!!this.simultaneous[x.id]},emit:function(x){var P=this,M=this.state;function $(te){P.manager.emit(te,x)}M<ri&&$(P.options.event+Is(M)),$(P.options.event),x.additionalEvent&&$(x.additionalEvent),M>=ri&&$(P.options.event+Is(M))},tryEmit:function(x){if(this.canEmit())return this.emit(x);this.state=Gn},canEmit:function(){for(var x=0;x<this.requireFail.length;){if(!(this.requireFail[x].state&(Gn|ks)))return!1;x++}return!0},recognize:function(x){var P=m({},x);if(!T(this.options.enable,[this,P])){this.reset(),this.state=Gn;return}this.state&(Or|Vo|Gn)&&(this.state=ks),this.state=this.process(P),this.state&(jn|Ki|ri|Vo)&&this.tryEmit(P)},process:function(x){},getTouchAction:function(){},reset:function(){}};function Is(x){return x&Vo?"cancel":x&ri?"end":x&Ki?"move":x&jn?"start":""}function Ti(x){return x==Qt?"down":x==gt?"up":x==ze?"left":x==Ke?"right":""}function Ns(x,P){var M=P.manager;return M?M.get(x):x}function nr(){Tn.apply(this,arguments)}y(nr,Tn,{defaults:{pointers:1},attrTest:function(x){var P=this.options.pointers;return P===0||x.pointers.length===P},process:function(x){var P=this.state,M=x.eventType,$=P&(jn|Ki),te=this.attrTest(x);return $&&(M&Pe||!te)?P|Vo:$||te?M&J?P|ri:P&jn?P|Ki:jn:Gn}});function Ds(){nr.apply(this,arguments),this.pX=null,this.pY=null}y(Ds,nr,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var x=this.options.direction,P=[];return x&wt&&P.push(zo),x&xt&&P.push(Zi),P},directionTest:function(x){var P=this.options,M=!0,$=x.distance,te=x.direction,we=x.deltaX,je=x.deltaY;return te&P.direction||(P.direction&wt?(te=we===0?rt:we<0?ze:Ke,M=we!=this.pX,$=Math.abs(x.deltaX)):(te=je===0?rt:je<0?gt:Qt,M=je!=this.pY,$=Math.abs(x.deltaY))),x.direction=te,M&&$>P.threshold&&te&P.direction},attrTest:function(x){return nr.prototype.attrTest.call(this,x)&&(this.state&jn||!(this.state&jn)&&this.directionTest(x))},emit:function(x){this.pX=x.deltaX,this.pY=x.deltaY;var P=Ti(x.direction);P&&(x.additionalEvent=this.options.event+P),this._super.emit.call(this,x)}});function wu(){nr.apply(this,arguments)}y(wu,nr,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[xi]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.scale-1)>this.options.threshold||this.state&jn)},emit:function(x){if(x.scale!==1){var P=x.scale<1?"in":"out";x.additionalEvent=this.options.event+P}this._super.emit.call(this,x)}});function Eu(){Tn.apply(this,arguments),this._timer=null,this._input=null}y(Eu,Tn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Dc]},process:function(x){var P=this.options,M=x.pointers.length===P.pointers,$=x.distance<P.threshold,te=x.deltaTime>P.time;if(this._input=x,!$||!M||x.eventType&(J|Pe)&&!te)this.reset();else if(x.eventType&_e)this.reset(),this._timer=f(function(){this.state=Or,this.tryEmit()},P.time,this);else if(x.eventType&J)return Or;return Gn},reset:function(){clearTimeout(this._timer)},emit:function(x){this.state===Or&&(x&&x.eventType&J?this.manager.emit(this.options.event+"up",x):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function Fs(){nr.apply(this,arguments)}y(Fs,nr,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[xi]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.rotation)>this.options.threshold||this.state&jn)}});function Us(){nr.apply(this,arguments)}y(Us,nr,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:wt|xt,pointers:1},getTouchAction:function(){return Ds.prototype.getTouchAction.call(this)},attrTest:function(x){var P=this.options.direction,M;return P&(wt|xt)?M=x.overallVelocity:P&wt?M=x.overallVelocityX:P&xt&&(M=x.overallVelocityY),this._super.attrTest.call(this,x)&&P&x.offsetDirection&&x.distance>this.options.threshold&&x.maxPointers==this.options.pointers&&l(M)>this.options.velocity&&x.eventType&J},emit:function(x){var P=Ti(x.offsetDirection);P&&this.manager.emit(this.options.event+P,x),this.manager.emit(this.options.event,x)}});function zs(){Tn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}y(zs,Tn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Os]},process:function(x){var P=this.options,M=x.pointers.length===P.pointers,$=x.distance<P.threshold,te=x.deltaTime<P.time;if(this.reset(),x.eventType&_e&&this.count===0)return this.failTimeout();if($&&te&&M){if(x.eventType!=J)return this.failTimeout();var we=this.pTime?x.timeStamp-this.pTime<P.interval:!0,je=!this.pCenter||ln(this.pCenter,x.center)<P.posThreshold;this.pTime=x.timeStamp,this.pCenter=x.center,!je||!we?this.count=1:this.count+=1,this._input=x;var Jt=this.count%P.taps;if(Jt===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Or,this.tryEmit()},P.interval,this),jn):Or}return Gn},failTimeout:function(){return this._timer=f(function(){this.state=Gn},this.options.interval,this),Gn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Or&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function kr(x,P){return P=P||{},P.recognizers=R(P.recognizers,kr.defaults.preset),new Bs(x,P)}kr.VERSION="2.0.7",kr.defaults={domEvents:!1,touchAction:Nc,enable:!0,inputTarget:null,inputClass:null,preset:[[Fs,{enable:!1}],[wu,{enable:!1},["rotate"]],[Us,{direction:wt}],[Ds,{direction:wt},["swipe"]],[zs],[zs,{event:"doubletap",taps:2},["tap"]],[Eu]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Vg=1,Uc=2;function Bs(x,P){this.options=m({},kr.defaults,P||{}),this.options.inputTarget=this.options.inputTarget||x,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=x,this.input=Ne(this),this.touchAction=new bu(this,this.options.touchAction),Su(this,!0),d(this.options.recognizers,function(M){var $=this.add(new M[0](M[1]));M[2]&&$.recognizeWith(M[2]),M[3]&&$.requireFailure(M[3])},this)}Bs.prototype={set:function(x){return m(this.options,x),x.touchAction&&this.touchAction.update(),x.inputTarget&&(this.input.destroy(),this.input.target=x.inputTarget,this.input.init()),this},stop:function(x){this.session.stopped=x?Uc:Vg},recognize:function(x){var P=this.session;if(!P.stopped){this.touchAction.preventDefaults(x);var M,$=this.recognizers,te=P.curRecognizer;(!te||te&&te.state&Or)&&(te=P.curRecognizer=null);for(var we=0;we<$.length;)M=$[we],P.stopped!==Uc&&(!te||M==te||M.canRecognizeWith(te))?M.recognize(x):M.reset(),!te&&M.state&(jn|Ki|ri)&&(te=P.curRecognizer=M),we++}},get:function(x){if(x instanceof Tn)return x;for(var P=this.recognizers,M=0;M<P.length;M++)if(P[M].options.event==x)return P[M];return null},add:function(x){if(h(x,"add",this))return this;var P=this.get(x.options.event);return P&&this.remove(P),this.recognizers.push(x),x.manager=this,this.touchAction.update(),x},remove:function(x){if(h(x,"remove",this))return this;if(x=this.get(x),x){var P=this.recognizers,M=H(P,x);M!==-1&&(P.splice(M,1),this.touchAction.update())}return this},on:function(x,P){if(x!==i&&P!==i){var M=this.handlers;return d(j(x),function($){M[$]=M[$]||[],M[$].push(P)}),this}},off:function(x,P){if(x!==i){var M=this.handlers;return d(j(x),function($){P?M[$]&&M[$].splice(H(M[$],P),1):delete M[$]}),this}},emit:function(x,P){this.options.domEvents&&$g(x,P);var M=this.handlers[x]&&this.handlers[x].slice();if(!(!M||!M.length)){P.type=x,P.preventDefault=function(){P.srcEvent.preventDefault()};for(var $=0;$<M.length;)M[$](P),$++}},destroy:function(){this.element&&Su(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Su(x,P){var M=x.element;if(!!M.style){var $;d(x.options.cssProps,function(te,we){$=se(M.style,we),P?(x.oldCssProps[$]=M.style[$],M.style[$]=te):M.style[$]=x.oldCssProps[$]||""}),P||(x.oldCssProps={})}}function $g(x,P){var M=n.createEvent("Event");M.initEvent(x,!0,!0),M.gesture=P,P.target.dispatchEvent(M)}m(kr,{INPUT_START:_e,INPUT_MOVE:be,INPUT_END:J,INPUT_CANCEL:Pe,STATE_POSSIBLE:ks,STATE_BEGAN:jn,STATE_CHANGED:Ki,STATE_ENDED:ri,STATE_RECOGNIZED:Or,STATE_CANCELLED:Vo,STATE_FAILED:Gn,DIRECTION_NONE:rt,DIRECTION_LEFT:ze,DIRECTION_RIGHT:Ke,DIRECTION_UP:gt,DIRECTION_DOWN:Qt,DIRECTION_HORIZONTAL:wt,DIRECTION_VERTICAL:xt,DIRECTION_ALL:Z,Manager:Bs,Input:Te,TouchAction:bu,TouchInput:Mr,MouseInput:ce,PointerEventInput:Re,TouchMouseInput:yu,SingleTouchInput:Lt,Recognizer:Tn,AttrRecognizer:nr,Tap:zs,Pan:Ds,Swipe:Us,Pinch:wu,Rotate:Fs,Press:Eu,on:C,off:D,each:d,merge:_,extend:S,assign:m,inherit:y,bindFn:w,prefixed:se});var jg=typeof e<"u"?e:typeof self<"u"?self:{};jg.Hammer=kr,typeof i=="function"&&i.amd?i(function(){return kr}):t.exports?t.exports=kr:e[r]=kr})(window,document,"Hammer")})(mu);const XK=mu.exports,si=gA({__proto__:null,default:XK},[mu.exports]),u3=1,l3=2,yy=4,qK={mousedown:u3,mousemove:l3,mouseup:yy};function ZK(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function KK(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(ZK(i,o=>o.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function QK(t){t.prototype.handler=function(n){let r=qK[n.type];r&u3&&n.button>=0&&(this.pressed=!0),r&l3&&n.which===0&&(r=yy),this.pressed&&(r&yy&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}KK(mu.exports.PointerEventInput);QK(mu.exports.MouseInput);const JK=mu.exports.Manager;class Rg{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const eQ=si?[[si.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[si.Rotate,{enable:!1}],[si.Pinch,{enable:!1}],[si.Swipe,{enable:!1}],[si.Pan,{threshold:0,enable:!1}],[si.Press,{enable:!1}],[si.Tap,{event:"doubletap",taps:2,enable:!1}],[si.Tap,{event:"anytap",enable:!1}],[si.Tap,{enable:!1}]]:null,YT={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},tQ={doubletap:["tap"]},nQ={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Ub={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},rQ={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},XT={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},iQ=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",ba=typeof window<"u"?window:global;let _y=!1;try{const t={get passive(){return _y=!0,!0}};ba.addEventListener("test",null,t),ba.removeEventListener("test",null)}catch{_y=!1}const oQ=iQ.indexOf("firefox")!==-1,{WHEEL_EVENTS:sQ}=Ub,qT="wheel",ZT=4.000244140625,aQ=40,uQ=.25;class lQ extends Rg{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;ba.WheelEvent&&(oQ&&i.deltaMode===ba.WheelEvent.DOM_DELTA_PIXEL&&(o/=ba.devicePixelRatio),i.deltaMode===ba.WheelEvent.DOM_DELTA_LINE&&(o*=aQ)),o!==0&&o%ZT===0&&(o=Math.floor(o/ZT)),i.shiftKey&&o&&(o=o*uQ),this.callback({type:qT,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(sQ),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,_y?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===qT&&(this.options.enable=n)}}const{MOUSE_EVENTS:cQ}=Ub,KT="pointermove",QT="pointerover",JT="pointerout",eP="pointerenter",tP="pointerleave";class fQ extends Rg{constructor(e,n,r){super(e,n,r),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(cQ),this.events.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===KT&&(this.enableMoveEvent=n),e===QT&&(this.enableOverEvent=n),e===JT&&(this.enableOutEvent=n),e===eP&&(this.enableEnterEvent=n),e===tP&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(QT,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(JT,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(eP,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(tP,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(KT,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:hQ}=Ub,nP="keydown",rP="keyup";class dQ extends Rg{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:nP,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:rP,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(hQ),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===nP&&(this.enableDownEvent=n),e===rP&&(this.enableUpEvent=n)}}const iP="contextmenu";class pQ extends Rg{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{!this.options.enable||this.callback({type:iP,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===iP&&(this.options.enable=n)}}const by=1,$d=2,wy=4,gQ={pointerdown:by,pointermove:$d,pointerup:wy,mousedown:by,mousemove:$d,mouseup:wy},mQ=1,vQ=2,yQ=3,_Q=0,bQ=1,wQ=2,EQ=1,SQ=2,xQ=4;function TQ(t){const e=gQ[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let o=!1,s=!1,a=!1;return e===wy||e===$d&&!Number.isFinite(n)?(o=i===mQ,s=i===vQ,a=i===yQ):e===$d?(o=Boolean(n&EQ),s=Boolean(n&xQ),a=Boolean(n&SQ)):e===by&&(o=r===_Q,s=r===bQ,a=r===wQ),{leftButton:o,middleButton:s,rightButton:a}}function PQ(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,o=r.height/e.offsetHeight||1,s={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/o};return{center:n,offsetCenter:s}}const C0={srcElement:"root",priority:0};class AQ{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let i=n.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,o=!1){const{handlers:s,handlersByElement:a}=this;let u=C0;typeof r=="string"||r&&r.addEventListener?u={...C0,srcElement:r}:r&&(u={...C0,...r});let l=a.get(u.srcElement);l||(l=[],a.set(u.srcElement,l));const c={type:e,handler:n,srcElement:u.srcElement,priority:u.priority};i&&(c.once=!0),o&&(c.passive=!0),s.push(c),this._active=this._active||!c.passive;let f=l.length-1;for(;f>=0&&!(l[f].priority>=c.priority);)f--;l.splice(f+1,0,c)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.type===e&&s.handler===n){r.splice(o,1);const a=i.get(s.srcElement);a.splice(a.indexOf(s),1),a.length===0&&i.delete(s.srcElement)}}this._active=r.some(o=>!o.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const o=()=>{e.handled=!0},s=()=>{e.handled=!0,i=!0},a=[];for(let u=0;u<r.length;u++){const{type:l,handler:c,once:f}=r[u];if(c({...e,type:l,stopPropagation:o,stopImmediatePropagation:s}),f&&a.push(r[u]),i)break}for(let u=0;u<a.length;u++){const{type:l,handler:c}=a[u];this.remove(l,c)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...TQ(e),...PQ(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const CQ={events:null,recognizers:null,recognizerOptions:{},Manager:JK,touchAction:"none",tabIndex:0};class RQ{constructor(e=null,n){this._onBasicInput=i=>{const{srcEvent:o}=i,s=nQ[o.type];s&&this.manager.emit(s,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...CQ,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||eQ}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(YT).forEach(i=>{const o=this.manager.get(i);o&&YT[i].forEach(s=>{o.recognizeWith(s)})});for(const i in n.recognizerOptions){const o=this.manager.get(i);if(o){const s=n.recognizerOptions[i];delete s.enable,o.set(s)}}this.wheelInput=new lQ(e,this._onOtherEvent,{enable:!1}),this.moveInput=new fQ(e,this._onOtherEvent,{enable:!1}),this.keyInput=new dQ(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new pQ(e,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const o=tQ[e];o&&!this.options.recognizers&&o.forEach(s=>{const a=r.get(s);n?(a.requireFailure(e),i.dropRequireFailure(s)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,o){if(typeof e!="string"){r=n;for(const c in e)this._addEventHandler(c,e[c],r,i,o);return}const{manager:s,events:a}=this,u=XT[e]||e;let l=a.get(u);l||(l=new AQ(this),a.set(u,l),l.recognizerName=rQ[u]||u,s&&s.on(u,l.handleEvent)),l.add(e,n,r,i,o),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const s in e)this._removeEventHandler(s,e[s]);return}const{events:r}=this,i=XT[e]||e,o=r.get(i);if(!!o&&(o.remove(e,n),o.isEmpty())){const{recognizerName:s}=o;let a=!1;for(const u of r.values())if(u.recognizerName===s&&!u.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}}function Yo(){}const LQ=({isDragging:t})=>t?"grabbing":"grab",c3={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Yo,onResize:Yo,onViewStateChange:Yo,onInteractionStateChange:Yo,onBeforeRender:Yo,onAfterRender:Yo,onLoad:Yo,onError:t=>$e.error(t.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:LQ,getTooltip:null,debug:!1,drawPickingColors:!1};class Lg{constructor(e){b(this,"props",void 0),b(this,"width",0),b(this,"height",0),b(this,"userData",{}),b(this,"canvas",null),b(this,"viewManager",null),b(this,"layerManager",null),b(this,"effectManager",null),b(this,"deckRenderer",null),b(this,"deckPicker",null),b(this,"eventManager",null),b(this,"tooltip",null),b(this,"metrics",void 0),b(this,"animationLoop",void 0),b(this,"stats",void 0),b(this,"viewState",void 0),b(this,"cursorState",void 0),b(this,"_needsRedraw",void 0),b(this,"_pickRequest",void 0),b(this,"_lastPointerDownInfo",null),b(this,"_metricsCounter",void 0),b(this,"_onPointerMove",n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const i=n.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),b(this,"_onEvent",n=>{const r=kT[n.type],i=n.offsetCenter;if(!r||!i||!this.layerManager)return;const o=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:o,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=s,u=a&&(a[r.handler]||a.props[r.handler]),l=this.props[r.handler];let c=!1;u&&(c=u.call(a,s,n)),!c&&l&&l(s,n)}),b(this,"_onPointerDown",n=>{const r=n.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...c3,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&$e.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),DM()==="IE"&&$e.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new gb({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&nu.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,o,s,a;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(e=this.layerManager)===null||e===void 0||e.finalize(),this.layerManager=null,(n=this.viewManager)===null||n===void 0||n.finalize(),this.viewManager=null,(r=this.effectManager)===null||r===void 0||r.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(s=this.eventManager)===null||s===void 0||s.destroy(),this.eventManager=null,(a=this.tooltip)===null||a===void 0||a.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var u;(u=this.canvas.parentElement)===null||u===void 0||u.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&$e.removed("onLayerHover","onHover")(),"onLayerClick"in e&&$e.removed("onLayerClick","onClick")(),e.initialViewState&&!Ms(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),s=this.deckRenderer.needsRedraw(e);return n=n||r||i||o||s,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return dn(this.viewManager),this.viewManager.views}getViewports(e){return dn(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_pick(e,n,r){dn(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const o=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(n).timeEnd(),o}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),dn(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=o}if(r||r===0){var i;const o=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=e.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const n=e.clientWidth||e.width,r=e.clientHeight||e.height;if(n!==this.width||r!==this.height){var i;this.width=n,this.height=r,(i=this.viewManager)===null||i===void 0||i.setProps({width:n,height:r}),this.props.onResize({width:n,height:r})}}_createAnimationLoop(e){const{width:n,height:r,gl:i,glOptions:o,debug:s,onError:a,onBeforeRender:u,onAfterRender:l,useDevicePixels:c}=e;return new EY({width:n,height:r,useDevicePixels:c,autoResizeViewport:!1,gl:i,onCreateContext:f=>nO({...o,...f,canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:u,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new n3({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let o=i,s=!1;for(const a of r){var n;o=a,s=((n=a.layer)===null||n===void 0?void 0:n.onHover(a,e.event))||s}if(!s&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(o);this.tooltip.setTooltip(a,o.x,o.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,Eb(e,{enable:!0,copyState:!0})),this.tooltip=new YK(this.canvas),ji(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new VO;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new RQ(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in kT)this.eventManager.on(i,this._onEvent);this.viewManager=new fK({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new cK(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new IK,this.deckRenderer=new zK(e),this.deckPicker=new WK(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;ji(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),$e.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=is.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}b(Lg,"defaultProps",c3);b(Lg,"VERSION",CG.VERSION);class R0{constructor(e,n){b(this,"opts",void 0),b(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:i}=n;let o=r;if(r&&r.length!==i){o=new Float32Array(i);const s=n.elementOffset||0;for(let a=0;a<i;++a)o[a]=r[s+a]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function MQ(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function sh(t){return t.stride||t.size*t.bytesPerElement}function f3(t,e){e.offset&&$e.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=sh(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,o=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:o,stride:n}}function OQ(t,e){const n=f3(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class kQ{constructor(e,n,r){b(this,"gl",void 0),b(this,"id",void 0),b(this,"size",void 0),b(this,"settings",void 0),b(this,"value",void 0),b(this,"doublePrecision",void 0),b(this,"_buffer",void 0),b(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const i=n.logicalType||n.type,o=i===5130;let{defaultValue:s}=n;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0);let a;o?a=5126:!i&&n.isIndexed?a=e&&fO(e,At.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let u=MQ(i||a||5126);this.doublePrecision=o,o&&n.fp64===!1&&(u=Float32Array),this.value=null,this.settings={...n,defaultType:u,defaultValue:s,logicalType:i,type:a,size:this.size,bytesPerElement:u.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new _t(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*sh(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),nu.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,o=OQ(this.getAccessor(),n||{});return r[e]=new R0(this,o.high),r["".concat(e,"64Low")]=i?new R0(this,o.low):new Float32Array(this.size),r}if(n){const r=f3(this.getAccessor(),n);return{[e]:new R0(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,o=r*i;if(n&&o&&n.length>=o){const s=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let u=0;u<o;)for(let l=0;l<i;l++){const c=n[u++];c<s[l]&&(s[l]=c),c>a[l]&&(a[l]=c)}e=[s,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof _t?r={buffer:e}:r=e;const i={...this.settings,...r};if(n.bufferAccessor=i,n.bounds=null,r.constant){let o=r.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!n.constant||!this._areValuesEqual(o,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=o}else if(r.buffer){const o=r.buffer;n.externalBuffer=o,n.constant=!1,this.value=r.value||null;const s=r.value instanceof Float64Array;i.type=r.type||o.accessor.type,i.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(s?2:1),i.stride=sh(i)}else if(r.value){this._checkExternalBuffer(r);let o=r.value;n.externalBuffer=null,n.constant=!1,this.value=o,i.bytesPerElement=o.BYTES_PER_ELEMENT,i.stride=sh(i);const{buffer:s,byteOffset:a}=this;this.doublePrecision&&o instanceof Float64Array&&(o=P0(o,i));const u=o.byteLength+a+i.stride*2;s.byteLength<u&&s.reallocate(u),s.setAccessor(null),s.subData({data:o,offset:a}),i.type=r.type||s.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?P0(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:r}=this,i=r.allocatedValue,o=nu.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=o;const{buffer:s,byteOffset:a}=this;return s.byteLength<o.byteLength+a&&(s.reallocate(o.byteLength+a),n&&i&&s.subData({data:i instanceof Float64Array?P0(i,this):i,offset:a})),r.allocatedValue=o,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&$e.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e)return n[r]=i[0],n;switch(o){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let s=o;for(;--s>=0;)n[r+s]=Number.isFinite(e[s])?e[s]:i[s]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}}const oP=[],sP=[];function Lc(t,e=0,n=1/0){let r=oP;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(sP.length=t.length,r=sP):r=oP,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function h3(t){return t&&t[Symbol.asyncIterator]}function d3(t,e){const{size:n,stride:r,offset:i,startIndices:o,nested:s}=e,a=t.BYTES_PER_ELEMENT,u=r?r/a:n,l=i?i/a:0,c=Math.floor((t.length-l)/u);return(f,{index:h,target:d})=>{if(!o){const _=h*u+l;for(let y=0;y<n;y++)d[y]=t[_+y];return d}const g=o[h],m=o[h+1]||c;let S;if(s){S=new Array(m-g);for(let _=g;_<m;_++){const y=_*u+l;d=new Array(n);for(let w=0;w<n;w++)d[w]=t[y+w];S[_-g]=d}}else if(u===n)S=t.subarray(g*n+l,m*n+l);else{S=new t.constructor((m-g)*n);let _=0;for(let y=g;y<m;y++){const w=y*u+l;for(let T=0;T<n;T++)S[_++]=t[w+T]}}return S}}const IQ=[],ah=[[0,1/0]];function NQ(t,e){if(t===ah||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let o=0;o<r;o++){const s=t[o];s[1]<e[0]?(n.push(s),i=o+1):s[0]>e[1]?n.push(s):e=[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}return n.splice(i,0,e),n}function L0(t){const{source:e,target:n,start:r=0,size:i,getData:o}=t,s=t.end||n.length,a=e.length,u=s-r;if(a>u){n.set(e.subarray(0,u),r);return}if(n.set(e,r),!o)return;let l=a;for(;l<u;){const c=o(l,e);for(let f=0;f<i;f++)n[r+l]=c[f]||0,l++}}function DQ({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return L0({source:t,target:e,size:n,getData:r}),e;let s=0,a=0;const u=r&&((c,f)=>r(c+a,f)),l=Math.min(i.length,o.length);for(let c=1;c<l;c++){const f=i[c]*n,h=o[c]*n;L0({source:t.subarray(s,f),target:e,start:a,end:h,size:n,getData:u}),s=f,a=h}return a<e.length&&L0({source:[],target:e,start:a,size:n,getData:u}),e}const FQ={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function p3(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...FQ[n],...e,...t,type:n}}function g3(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function m3(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function v3(t){t.push(t.shift())}function zb(t,e){const{doublePrecision:n,settings:r,value:i,size:o}=t,s=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*o)*s}function y3({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:o=s=>s}){const s=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*s,u=n.byteOffset,l=n.startIndices,c=i&&l,f=zb(n,e),h=n.isConstant;if(!c&&r>=f)return;const d=h?n.value:n.getBuffer().getData({srcByteOffset:u});if(n.settings.normalized&&!h){const _=o;o=(y,w)=>n.normalizeConstant(_(y,w))}const g=h?(_,y)=>o(d,y):(_,y)=>o(d.subarray(_,_+a),y),m=t.getData({length:r}),S=new Float32Array(f);DQ({source:m,target:S,sourceStartIndices:i,targetStartIndices:l,size:a,getData:g}),t.byteLength<S.byteLength+u&&t.reallocate(S.byteLength+u),t.subData({data:S,offset:u})}class Bb extends kQ{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:ah}),b(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(o=>e[o])]:e[n];return p3(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=NQ(this.state.updateRanges,[r,i])}else this.state.updateRanges=ah}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=IQ}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==ah),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let u=!0;if(s){for(const[l,c]of o)s.call(i,this,{data:n,startRow:l,endRow:c,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,c]of o){const f=Number.isFinite(l)?this.getVertexOffset(l):0,h=Number.isFinite(c)?this.getVertexOffset(c):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:f,endOffset:h})}this._checkAttributeArray()}else u=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),u}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const s=e;dn(ArrayBuffer.isView(s.value),"invalid ".concat(i.accessor));const a=Boolean(s.size)&&s.size!==this.size;return r.binaryAccessor=d3(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:n,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?n[e]:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:o,numInstances:s}){if(e.constant)return;const{settings:a,state:u,value:l,size:c,startIndices:f}=e,{accessor:h,transform:d}=a,g=u.binaryAccessor||(typeof h=="function"?h:o[h]);dn(typeof g=="function",'accessor "'.concat(h,'" is not a function'));let m=e.getVertexOffset(r);const{iterable:S,objectInfo:_}=Lc(n,r,i);for(const y of S){_.index++;let w=g(y,_);if(d&&(w=d.call(this,w)),f){const T=(_.index<f.length-1?f[_.index+1]:s)-f[_.index];if(w&&Array.isArray(w[0])){let R=m;for(const C of w)e._normalizeValue(C,l,R),R+=c}else w&&w.length>c?l.set(w,m):(e._normalizeValue(w,_.target,0),oK({target:l,source:_.target,start:m,count:T}));m+=T*c}else e._normalizeValue(w,l,m),m+=c}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class UQ{constructor({gl:e,attribute:n,timeline:r}){b(this,"gl",void 0),b(this,"type","interpolation"),b(this,"attributeInTransition",void 0),b(this,"settings",void 0),b(this,"attribute",void 0),b(this,"transition",void 0),b(this,"currentStartIndices",void 0),b(this,"currentLength",void 0),b(this,"transform",void 0),b(this,"buffers",void 0),this.gl=e,this.transition=new Cc(r),this.attribute=n,this.attributeInTransition=new Bb(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=BQ(e,n);const i={byteLength:0,usage:35050};this.buffers=[new _t(e,i),new _t(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:i,attribute:o}=this;v3(i);const s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)y3({buffer:a,...s});this.currentStartIndices=o.startIndices,this.currentLength=zb(o,n),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:i[0],aTo:g3(r,o)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:r}=this.settings,{time:i}=this.transition;let o=i/n;r&&(o=r(o)),this.transform.run({uniforms:{time:o}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const zQ=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function BQ(t,e){const n=m3(e.size);return new Ob(t,{vs:zQ,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class VQ{constructor({gl:e,attribute:n,timeline:r}){b(this,"gl",void 0),b(this,"type","spring"),b(this,"attributeInTransition",void 0),b(this,"settings",void 0),b(this,"attribute",void 0),b(this,"transition",void 0),b(this,"currentStartIndices",void 0),b(this,"currentLength",void 0),b(this,"texture",void 0),b(this,"framebuffer",void 0),b(this,"transform",void 0),b(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new Cc(r),this.attribute=n,this.attributeInTransition=new Bb(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=jQ(e),this.framebuffer=GQ(e,this.texture),this.transform=$Q(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new _t(e,i),new _t(e,i),new _t(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:i,attribute:o}=this,s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)y3({buffer:a,...s});this.settings=e,this.currentStartIndices=o.startIndices,this.currentLength=zb(o,n),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:g3(r,o)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this;if(!i.update())return!1;const s=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),v3(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),Tg(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function $Q(t,e,n){const r=m3(e.size);return new Ob(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function jQ(t){return new Un(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function GQ(t,e){return new nn(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:e}})}const WQ={interpolation:UQ,spring:VQ};class HQ{constructor(e,{id:n,timeline:r}){b(this,"id",void 0),b(this,"isSupported",void 0),b(this,"gl",void 0),b(this,"timeline",void 0),b(this,"transitions",void 0),b(this,"needsRedraw",void 0),b(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=Ob.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const o=e[i],s=o.getTransitionSetting(n);!s||this._updateAttribute(i,o,s)}for(const i in this.transitions){const o=e[i];(!o||!o.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let o=!i||i.type!==r.type;if(o){if(!this.isSupported){$e.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const s=WQ[r.type];s?this.transitions[e]=new s({attribute:n,timeline:this.timeline,gl:this.gl}):($e.error("unsupported transition type '".concat(r.type,"'"))(),o=!1)}(o||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const aP="attributeManager.invalidate",YQ="attributeManager.updateStart",XQ="attributeManager.updateEnd",qQ="attribute.updateStart",ZQ="attribute.allocate",KQ="attribute.updateEnd";class QQ{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){b(this,"id",void 0),b(this,"gl",void 0),b(this,"attributes",void 0),b(this,"updateTriggers",void 0),b(this,"needsRedraw",void 0),b(this,"userData",void 0),b(this,"stats",void 0),b(this,"attributeTransitionManager",void 0),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new HQ(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);Rn(aP,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Rn(aP,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:o={},buffers:s={},context:a={}}){let u=!1;Rn(YQ,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const c=this.attributes[l],f=c.settings.accessor;c.startIndices=r,c.numInstances=n,o[l]&&$e.removed("props.".concat(l),"data.attributes.".concat(l))(),c.setExternalBuffer(s[l])||c.setBinaryValue(typeof f=="string"?s[f]:void 0,e.startIndices)||typeof f=="string"&&!s[f]&&c.setConstantValue(o[f])||c.needsUpdate()&&(u=!0,this._updateAttribute({attribute:c,numInstances:n,data:e,props:o,context:a})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}u&&Rn(XQ,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const o in n){const s=n[o];s.needsRedraw(e)&&!r.hasAttribute(o)&&(i[o]=s)}return i}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}_add(e,n={}){for(const r in e){const i=e[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const i={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0};return new Bb(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,o=i[e];return o&&o.forEach(s=>{const a=r[s];a&&a.setNeedsUpdate(a.id,n)}),o}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(Rn(qQ,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&Rn(ZQ,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,Rn(KQ,n,r))}}class JQ extends Cc{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:o}}=this,s=o(e/i);this._value=ls(n,r,s)}}const uP=1e-5;function lP(t,e,n,r,i){const o=e-t,a=(n-e)*i,u=-o*r;return a+u+o+e}function eJ(t,e,n,r,i){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=lP(t[s],e[s],n[s],r,i);return o}return lP(t,e,n,r,i)}function cP(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class tJ extends Cc{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:o=e,_currValue:s=e}=this;let a=eJ(o,s,n,r,i);const u=cP(a,n),l=cP(a,s);u<uP&&l<uP&&(a=n,this.end()),this._prevValue=s,this._currValue=a}}const nJ={interpolation:JQ,spring:tJ};class rJ{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:o}=this;if(o.has(e)){const u=o.get(e),{value:l=u.settings.fromValue}=u;n=l,this.remove(e)}if(i=p3(i),!i)return;const s=nJ[i.type];if(!s){$e.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new s(this.timeline);a.start({...i,fromValue:n,toValue:r}),o.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function iJ(t){const e=Vb(t);for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function oJ(t,e){const n=_3({newProps:t,oldProps:e,propTypes:Vb(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=aJ(t,e);let i=!1;return r||(i=uJ(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:lJ(t,e),transitionsChanged:sJ(t,e)}}function sJ(t,e){if(!t.transitions)return!1;const n={},r=Vb(t);let i=!1;for(const o in t.transitions){const s=r[o],a=s&&s.type;(a==="number"||a==="color"||a==="array")&&Ey(t[o],e[o],s)&&(n[o]=!0,i=!0)}return i?n:!1}function _3({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const o of Object.keys(t))if(!(o in n)){if(!(o in e))return"".concat(i,".").concat(o," added");const s=Ey(t[o],e[o],r[o]);if(s)return"".concat(i,".").concat(o," ").concat(s)}for(const o of Object.keys(e))if(!(o in n)){if(!(o in t))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(t,o)){const s=Ey(t[o],e[o],r[o]);if(s)return"".concat(i,".").concat(o," ").concat(s)}}return!1}function Ey(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function aJ(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function uJ(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&fP(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&fP(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function lJ(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function fP(t,e,n){let r=t.updateTriggers[n];r=r==null?{}:r;let i=e.updateTriggers[n];return i=i==null?{}:i,_3({oldProps:i,newProps:r,triggerName:n})}function Vb(t){const e=t[Vd],n=e&&e.constructor;return n?n._propTypes:{}}const cJ="count(): argument not an object",fJ="count(): argument not a container";function hJ(t){if(!pJ(t))throw new Error(cJ);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(dJ(t))return Object.keys(t).length;throw new Error(fJ)}function dJ(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function pJ(t){return t!==null&&typeof t=="object"}function gJ(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const mJ={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},Sy={};function vJ(t,e){const n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof Un)return e;e.constructor&&e.constructor.name!=="Object"&&(e={data:e});let r=null;e.compressed&&(r={[10241]:e.data.length>1?9985:9729});const i=new Un(n,{...e,parameters:{...mJ,...r,...t.props.textureParameters}});return Sy[i.id]=!0,i}function yJ(t){!t||!(t instanceof Un)||Sy[t.id]&&(t.delete(),delete Sy[t.id])}const _J={boolean:{validate(t,e){return!0},equal(t,e,n){return Boolean(t)===Boolean(e)}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||Xl(t)&&(t.length===3||t.length===4)},equal(t,e,n){return M0(t,e)}},accessor:{validate(t,e){const n=jd(t);return n==="function"||n===jd(e.value)},equal(t,e,n){return typeof e=="function"?!0:M0(t,e)}},array:{validate(t,e){return e.optional&&!t||Xl(t)},equal(t,e,n){return n.compare?M0(t,e):t===e}},object:{equal(t,e,n){return n.compare?Ms(t,e):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>vJ(n,t),release:t=>{yJ(t)}}};function M0(t,e){if(t===e)return!0;if(!Xl(t)||!Xl(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function bJ(t){const e={},n={},r={};for(const[i,o]of Object.entries(t)){const s=o==null?void 0:o.deprecatedFor;if(s)r[i]=Array.isArray(s)?s:[s];else{const a=wJ(i,o);e[i]=a,n[i]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function wJ(t,e){switch(jd(e)){case"object":return Yu(t,e);case"array":return Yu(t,{type:"array",value:e,compare:!1});case"boolean":return Yu(t,{type:"boolean",value:e});case"number":return Yu(t,{type:"number",value:e});case"function":return Yu(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Yu(t,e){return"type"in e?{name:t,..._J[e.type],...e}:"value"in e?{name:t,type:jd(e.value),...e}:{name:t,type:"object",value:e}}function Xl(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function jd(t){return Xl(t)?"array":t===null?"null":typeof t}function EJ(t,e){const n=b3(t.constructor),r=Object.create(n);r[Vd]=t,r[ws]={},r[yo]={};for(let i=0;i<e.length;++i){const o=e[i];for(const s in o)r[s]=o[s]}return Object.freeze(r),r}function b3(t){const e=Gd(t,"_mergedDefaultProps");return e||(SJ(t),t._mergedDefaultProps)}function SJ(t){if(!t.prototype)return;const n=Object.getPrototypeOf(t),r=b3(n),i=Gd(t,"defaultProps")||{},o=bJ(i),s=xJ(o.defaultProps,r,t),a={...n._propTypes,...o.propTypes};PJ(s,a);const u={...n._deprecatedProps,...o.deprecatedProps};TJ(s,u),t._mergedDefaultProps=s,t._propTypes=a,t._deprecatedProps=u}function xJ(t,e,n){const r=Object.create(null);Object.assign(r,e,t);const i=CJ(n);return delete t.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}function TJ(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(n);for(const o of e[n])w3(this,o)||(this[o]=r);$e.deprecated(i,e[n].join("/"))()}})}function PJ(t,e){const n={},r={};for(const i in e){const o=e[i],{name:s,value:a}=o;o.async&&(n[s]=a,r[s]=AJ(s))}t[ka]=n,t[ws]={},Object.defineProperties(t,r)}function AJ(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||h3(e)?this[ws][t]=e:this[yo][t]=e},get(){if(this[yo]){if(t in this[yo])return this[yo][t]||this[ka][t];if(t in this[ws]){const e=this[Vd]&&this[Vd].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[ka][t]}}return this[ka][t]}}}function w3(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Gd(t,e){return w3(t,e)&&t[e]}function CJ(t){const e=Gd(t,"layerName")||Gd(t,"componentName");return e||$e.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}let RJ=0;class $b{constructor(...e){b(this,"id",void 0),b(this,"props",void 0),b(this,"count",void 0),this.props=EJ(this,e),this.id=this.props.id,this.count=RJ++}clone(e){const{props:n}=this,r={};for(const i in n[ka])i in n[yo]?r[i]=n[yo][i]:i in n[ws]&&(r[i]=n[ws][i]);return new this.constructor({...n,...r,...e})}}b($b,"componentName","Component");b($b,"defaultProps",{});const LJ=Object.freeze({});class MJ{constructor(e){b(this,"component",void 0),b(this,"onAsyncPropUpdated",void 0),b(this,"asyncProps",void 0),b(this,"oldProps",void 0),b(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||LJ}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return Boolean(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){const n=e[yo]||{},r=e[ws]||e,i=e[ka]||{};for(const o in n){const s=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,s),n[o]=this.getAsyncProp(o)}for(const o in r){const s=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,s)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(!!this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(h3(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(o=>{o=this._postProcessValue(r,o),this._setAsyncPropValue(e,o,i),this._onResolve(e,o)}).catch(o=>{this._onError(e,o)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let o=[],s=0;for await(const a of n){const{dataTransform:u}=this.component.props;u?o=u(a,o):o=o.concat(a),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:s,endRow:o.length}]}),s=o.length,this._setAsyncPropValue(e,o,i)}this._onResolve(e,o)}_postProcessValue(e,n){const r=e.type;return r&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class OJ extends MJ{constructor({attributeManager:e,layer:n}){super(n),b(this,"attributeManager",void 0),b(this,"needsRedraw",void 0),b(this,"needsUpdate",void 0),b(this,"subLayers",void 0),b(this,"usesPickingColorCache",void 0),b(this,"changeFlags",void 0),b(this,"viewport",void 0),b(this,"uniformTransitions",void 0),b(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,n){const r=this.component.props.fetch;return r?r(n,{propName:e,layer:this.layer}):super._fetch(e,n)}_onResolve(e,n){const r=this.component.props.onDataLoad;e==="data"&&r&&r(n,{propName:e,layer:this.layer})}_onError(e,n){this.layer.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const kJ="layer.changeFlag",IJ="layer.initialize",NJ="layer.update",DJ="layer.finalize",FJ="layer.matched",hP=2**24-1,UJ=Object.freeze([]),zJ=Ag(({oldViewport:t,viewport:e})=>t.equals(e));let ai=new Uint8ClampedArray(0);const BJ={data:{type:"data",value:UJ,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:o})=>{const{resourceManager:s}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,o){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:o}}}let u=s.contains(t);return!u&&!i&&(s.add({resourceId:t,data:kd(t,r),persistent:!1}),u=!0),u?s.subscribe({resourceId:t,onChange:l=>{var c;return(c=n.internalState)===null||c===void 0?void 0:c.reloadAsyncProp(e,l)},consumerId:n.id,requestId:e}):kd(t,r,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:Pc.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:at.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class tr extends $b{constructor(...e){super(...e),b(this,"internalState",null),b(this,"lifecycle",oa.NO_STATE),b(this,"context",void 0),b(this,"state",void 0),b(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){dn(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=JO(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,s]=qO(r,n.pixelProjectionMatrix);return e.length===2?[i,o]:[i,o,s]}unproject(e){return dn(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){dn(this.internalState);const r=this.internalState.viewport||this.context.viewport;return iK(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===at.DEFAULT||e===at.LNGLAT||e===at.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){dn(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:hJ(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const n=this.getAttributeManager();if(!n)return null;const{positions:r,instancePositions:i}=n.attributes;return(e=r||i)===null||e===void 0?void 0:e.getBounds()}getShaders(e){for(const n of this.props.extensions)e=gJ(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const u of r)n.invalidateAll(u);else n.invalidateAll();const{props:i,oldProps:o}=e,s=Number.isInteger(o.highlightedObjectIndex)||o.pickable,a=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(s!==a&&n){const{pickingColors:u,instancePickingColors:l}=n.attributes,c=u||l;c&&(a&&c.constant&&(c.constant=!1,n.invalidate(c.id)),!c.value&&!a&&(c.constant=!0,c.value=[0,0,0]))}}finalizeState(e){for(const r of this.getModels())r.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i;if(n&&(e.message="".concat(n,": ").concat(e.message)),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var o,s;(o=this.context)===null||o===void 0||(s=o.onError)===null||s===void 0||s.call(o,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!zJ({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();!n||(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(ai.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>hP&&$e.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),ai=nu.allocate(ai,n,{size:3,copy:!0,maxCount:Math.max(n,hP)});const i=Math.floor(ai.length/3),o=[];for(let s=r;s<i;s++)this.encodePickingColor(s,o),ai[s*3+0]=o[0],ai[s*3+1]=o[1],ai[s*3+2]=o[2]}e.value=ai.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},o=r.getShaderAttributes(n,i);e.setAttributes(o)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;const o=i.getVertexOffset(e),s=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(s-o),offset:o})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;!r||(this.internalState.usesPickingColorCache&&r.value.buffer!==ai.buffer&&(r.value=ai.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){dn(!this.internalState),dn(Number.isFinite(this.props.coordinateSystem)),Rn(IJ,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new OJ({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>($e.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new rJ(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Rn(FJ,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.internalState.layer=this,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Rn(NJ,this,e),!e)return;const n=this.props,r=this.context,i=this.internalState,o=r.viewport,s=this._updateUniformTransition();i.propsInTransition=s,r.viewport=i.viewport||o,this.props=s;try{const a=this._getUpdateParams(),u=this.getModels();if(r.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const c of this.props.extensions)c.updateState.call(this,a,c);const l=this.getModels()[0]!==u[0];this._postUpdate(a,l)}finally{r.viewport=o,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Rn(DJ,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const s=this.props.opacity;n.opacity=Math.pow(s,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,u=a&&a(n)||[0,0];ji(o.gl,{polygonOffset:u}),Tr(o.gl,r,()=>{const l={moduleParameters:e,uniforms:n,parameters:r,context:o};for(const c of this.props.extensions)c.draw.call(this,l,c);this.draw(l)})}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let o=!1;switch(i){case"dataChanged":const s=e[i],a=n[i];s&&Array.isArray(a)&&(n.dataChanged=Array.isArray(s)?a.concat(s):s,o=!0);default:n[i]||(n[i]=e[i],o=!0)}o&&Rn(kJ,this,i,e)}const r=Boolean(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const r=oJ(e,n);if(r.updateTriggersChanged)for(const o in r.updateTriggersChanged)r.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(r.transitionsChanged)for(const o in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(o,n[o],e[o],(i=e.transitions)===null||i===void 0?void 0:i[o])}return this.setChangeFlags(r)}validateProps(){iJ(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new QQ(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o==null||o.setInstanceCount(this.getNumInstances());const{autoHighlight:s,highlightedObjectIndex:a,highlightColor:u}=r;if(n||i.autoHighlight!==s||i.highlightedObjectIndex!==a||i.highlightColor!==u){const l={};s||(l.pickingSelectedColor=null),Array.isArray(u)&&(l.pickingHighlightColor=u),Number.isInteger(a)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;return n=n||i,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}b(tr,"defaultProps",BJ);b(tr,"layerName","Layer");const VJ="compositeLayer.renderLayers";class Mg extends tr{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||n}getSubLayerRow(e,n,r){return e.__source={parent:this,object:n,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(n.index=r.__source.index,e(r.__source.object,n)):e(r,i)}return e}getSubLayerProps(e={}){var n;const{opacity:r,pickable:i,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:u,autoHighlight:l,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:g,modelMatrix:m,extensions:S,fetch:_,operation:y,_subLayerProps:w}=this.props,T={id:"",updateTriggers:{},opacity:r,pickable:i,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:u,autoHighlight:l,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:g,modelMatrix:m,extensions:S,fetch:_,operation:y},R=w&&e.id&&w[e.id],C=R&&R.updateTriggers,D=e.id||"sublayer";if(R){const F=this.constructor._propTypes,W=e.type?e.type._propTypes:{};for(const j in R){const H=W[j]||F[j];H&&H.type==="accessor"&&(R[j]=this.getSubLayerAccessor(R[j]))}}Object.assign(T,e,R),T.id="".concat(this.props.id,"-").concat(D),T.updateTriggers={all:(n=this.props.updateTriggers)===null||n===void 0?void 0:n.all,...e.updateTriggers,...C};for(const F of S){const W=F.getSubLayerProps.call(this,F);W&&Object.assign(T,W,{updateTriggers:Object.assign(T.updateTriggers,W.updateTriggers)})}return T}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let r=this.internalState.subLayers;const i=!r||this.needsUpdate();if(i){const o=this.renderLayers();r=Db(o,Boolean),this.internalState.subLayers=r}Rn(VJ,this,i,r);for(const o of r)o.parent=this}}b(Mg,"layerName","CompositeLayer");const Lf=Math.PI/180,dP=180/Math.PI,uh=6370972,wa=256;function $J(){const t=wa/uh,e=Math.PI/180*wa;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[1/t,1/t,1/t],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,1/t]}}class jJ extends Si{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,nearZMultiplier:o=.1,farZMultiplier:s=2,resolution:a=10}=e;let{height:u,altitude:l=1.5}=e;u=u||1,l=Math.max(.75,l);const c=new kn().lookAt({eye:[0,-l,0],up:[0,0,1]}),f=Math.pow(2,i);c.rotateX(n*Lf),c.rotateZ(-r*Lf),c.scale(f/u);const h=Math.atan(.5/l),d=wa*2*f/u;super({...e,height:u,viewMatrix:c,longitude:r,latitude:n,zoom:i,distanceScales:$J(),fovyRadians:h*2,focalDistance:l,near:o,far:Math.min(2,1/d+1)*l*s}),b(this,"longitude",void 0),b(this,"latitude",void 0),b(this,"resolution",void 0),this.latitude=n,this.longitude=r,this.resolution=a}get projectionMode(){return jr.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,this.height/2],n),i=this.unproject([this.width/2,0],n),o=this.unproject([this.width,this.height/2],n),s=this.unproject([this.width/2,this.height],n);return o[0]<this.longitude&&(o[0]+=360),r[0]>this.longitude&&(r[0]-=360),[Math.min(r[0],o[0],i[0],s[0]),Math.min(r[1],o[1],i[1],s[1]),Math.max(r[0],o[0],i[0],s[0]),Math.max(r[1],o[1],i[1],s[1])]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,o,s]=e,a=n?o:this.height-o,{pixelUnprojectionMatrix:u}=this;let l;if(Number.isFinite(s))l=O0(u,[i,a,s,1]);else{const d=O0(u,[i,a,-1,1]),g=O0(u,[i,a,1,1]),m=((r||0)/uh+1)*wa,S=b0(kO([],d,g)),_=b0(d),y=b0(g),T=4*((4*_*y-(S-_-y)**2)/16)/S,R=Math.sqrt(_-T),C=Math.sqrt(Math.max(0,m*m-T)),D=(R-C)/Math.sqrt(S);l=MX([],d,g,D)}const[c,f,h]=this.unprojectPosition(l);return Number.isFinite(s)?[c,f,h]:Number.isFinite(r)?[c,f,r]:[c,f]}projectPosition(e){const[n,r,i=0]=e,o=n*Lf,s=r*Lf,a=Math.cos(s),u=(i/uh+1)*wa;return[Math.sin(o)*a*u,-Math.cos(o)*a*u,Math.sin(s)*u]}unprojectPosition(e){const[n,r,i]=e,o=UX(e),s=Math.asin(i/o),u=Math.atan2(n,-r)*dP,l=s*dP,c=(o/wa-1)*uh;return[u,l,c]}projectFlat(e){return e}unprojectFlat(e){return e}panByPosition(e,n){const r=this.unproject(n);return{longitude:e[0]-r[0]+this.longitude,latitude:e[1]-r[1]+this.latitude}}}function O0(t,e){const n=pu([],e,t);return DO(n,n,1/n[3]),n}const k0=Math.PI/180;function GJ({height:t,focalDistance:e,orbitAxis:n,rotationX:r,rotationOrbit:i,zoom:o}){const s=n==="Z"?[0,0,1]:[0,1,0],a=n==="Z"?[0,-e,0]:[0,0,e],u=new kn().lookAt({eye:a,up:s});u.rotateX(r*k0),n==="Z"?u.rotateZ(i*k0):u.rotateY(i*k0);const l=Math.pow(2,o)/t;return u.scale(l),u}class WJ extends Si{constructor(e){const{height:n,projectionMatrix:r,fovy:i=50,orbitAxis:o="Z",target:s=[0,0,0],rotationX:a=0,rotationOrbit:u=0,zoom:l=0}=e,c=r?r[5]/2:Nb(i);super({...e,longitude:void 0,viewMatrix:GJ({height:n||1,focalDistance:c,orbitAxis:o,rotationX:a,rotationOrbit:u,zoom:l}),fovy:i,focalDistance:c,position:s,zoom:l}),b(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:n=!0}={}){const[r,i,o=this.projectedCenter[2]]=e,s=n?i:this.height-i,[a,u,l]=Ac([r,s,o],this.pixelUnprojectionMatrix);return[a,u,l]}panByPosition(e,n){const r=this.project(e),i=[this.width/2+r[0]-n[0],this.height/2+r[1]-n[1],this.projectedCenter[2]];return{target:this.unproject(i)}}}class HJ extends Si{constructor(e){const{longitude:n,latitude:r,modelMatrix:i,bearing:o=0,pitch:s=0,up:a=[0,0,1]}=e,l=new Pg({bearing:o,pitch:s===-90?1e-4:90+s}).toVector3().normalize(),c=i?new kn(i).transformAsVector(l):l,f=Number.isFinite(r)?YO({latitude:r}):0,h=Math.pow(2,f),d=new kn().lookAt({eye:[0,0,0],center:c,up:a}).scale(h);super({...e,zoom:f,viewMatrix:d}),b(this,"longitude",void 0),b(this,"latitude",void 0),this.latitude=r,this.longitude=n}}const Xu=20;class jb extends Fb{constructor(e){const{width:n,height:r,position:i=[0,0,0],bearing:o=0,pitch:s=0,longitude:a=null,latitude:u=null,maxPitch:l=90,minPitch:c=-90,startRotatePos:f,startBearing:h,startPitch:d,startZoomPosition:g}=e;super({width:n,height:r,position:i,bearing:o,pitch:s,longitude:a,latitude:u,maxPitch:l,minPitch:c},{startRotatePos:f,startBearing:h,startPitch:d,startZoomPosition:g})}panStart(){return this}pan(){return this}panEnd(){return this}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:o,startPitch:s}=this.getState(),{width:a,height:u}=this.getViewportProps();if(!i||o===void 0||s===void 0)return this;let l;if(e){const c=(e[0]-i[0])/a,f=(e[1]-i[1])/u;l={bearing:o-c*180,pitch:s-f*90}}else l={bearing:o-n,pitch:s-r};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotatePos:null,startBearing:null,startPitch:null})}zoomStart(){return this._getUpdatedState({startZoomPosition:this.getViewportProps().position})}zoom({scale:e}){let{startZoomPosition:n}=this.getState();n||(n=this.getViewportProps().position);const r=this.getDirection();return this._move(r,Math.log2(e)*Xu,n)}zoomEnd(){return this._getUpdatedState({startZoomPosition:null})}moveLeft(e=Xu){const n=this.getDirection(!0);return this._move(n.rotateZ({radians:Math.PI/2}),e)}moveRight(e=Xu){const n=this.getDirection(!0);return this._move(n.rotateZ({radians:-Math.PI/2}),e)}moveUp(e=Xu){const n=this.getDirection(!0);return this._move(n,e)}moveDown(e=Xu){const n=this.getDirection(!0);return this._move(n.negate(),e)}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}zoomIn(e=2){return this.zoom({scale:e})}zoomOut(e=2){return this.zoom({scale:1/e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:o}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),o!==null&&n.longitude!==null&&Math.abs(o-n.longitude)>180&&(r.longitude=o<0?o+360:o-360),r}_move(e,n,r=this.getViewportProps().position){const i=e.scale(n);return this._getUpdatedState({position:new Cr(r).add(i)})}getDirection(e=!1){return new Pg({bearing:this.getViewportProps().bearing,pitch:e?90:90+this.getViewportProps().pitch}).toVector3().normalize()}_getUpdatedState(e){return new jb({...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{pitch:n,maxPitch:r,minPitch:i,longitude:o,bearing:s}=e;return e.pitch=qt(n,i,r),o!==null&&(o<-180||o>180)&&(e.longitude=Bd(o+180,360)-180),(s<-180||s>180)&&(e.bearing=Bd(s+180,360)-180),e}}class YJ extends Rc{constructor(...e){super(...e),b(this,"ControllerState",jb),b(this,"transition",{transitionDuration:300,transitionInterpolator:new gu(["position","pitch","bearing"])})}}class XJ extends yi{get ViewportType(){return HJ}get ControllerType(){return YJ}}b(XJ,"displayName","FirstPersonView");class qJ extends yi{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return WJ}get ControllerType(){return PK}}b(qJ,"displayName","OrbitView");class ZJ extends t3{applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=qt(i,r,n);const{longitude:o,latitude:s}=e;return(o<-180||o>180)&&(e.longitude=Bd(o+180,360)-180),e.latitude=qt(s,-89,89),e}}class KJ extends Rc{constructor(...e){super(...e),b(this,"ControllerState",ZJ),b(this,"transition",{transitionDuration:300,transitionInterpolator:new gu(["longitude","latitude","zoom"])}),b(this,"dragMode","pan")}setProps(e){super.setProps(e),this.dragRotate=!1,this.touchRotate=!1}}class QJ extends yi{get ViewportType(){return jJ}get ControllerType(){return KJ}}b(QJ,"displayName","GlobeView");class JJ{constructor(e){b(this,"opts",void 0),e&&(this.opts=e)}equals(e){return this===e?!0:this.constructor===e.constructor&&Ms(this.opts,e.opts)}getShaders(e){return null}getSubLayerProps(e){const{defaultProps:n}=e.constructor,r={updateTriggers:{}};for(const i in n)if(i in this.props){const o=n[i],s=this.props[i];r[i]=s,o&&o.type==="accessor"&&(r.updateTriggers[i]=this.props.updateTriggers[i],typeof s=="function"&&(r[i]=this.getSubLayerAccessor(s)))}return r}initializeState(e,n){}updateState(e,n){}draw(e,n){}finalizeState(e,n){}}b(JJ,"defaultProps",{});class E3{constructor(e){b(this,"opts",void 0),b(this,"typedArrayManager",void 0),b(this,"indexStarts",[0]),b(this,"vertexStarts",[0]),b(this,"vertexCount",0),b(this,"instanceCount",0),b(this,"attributes",void 0),b(this,"_attributeDefs",void 0),b(this,"data",void 0),b(this,"getGeometry",void 0),b(this,"geometryBuffer",void 0),b(this,"buffers",void 0),b(this,"positionSize",void 0),b(this,"normalize",void 0);const{attributes:n={}}=e;this.typedArrayManager=nu,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:n,buffers:r={},getGeometry:i,geometryBuffer:o,positionFormat:s,dataChanged:a,normalize:u=!0}=this.opts;if(this.data=n,this.getGeometry=i,this.positionSize=o&&o.size||(s==="XY"?2:3),this.buffers=r,this.normalize=u,o&&(dn(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),u||(r.positions=o)),this.geometryBuffer=r.positions,Array.isArray(a))for(const l of a)this._rebuildGeometry(l);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:n}){this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(e){const n=e.value||e;return ArrayBuffer.isView(n)?d3(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,n){const{attributes:r,buffers:i,_attributeDefs:o,typedArrayManager:s}=this;for(const a in o)if(a in i)s.release(r[a]),r[a]=null;else{const u=o[a];u.copy=n,r[a]=s.allocate(r[a],e,u)}}_forEachGeometry(e,n,r){const{data:i,getGeometry:o}=this,{iterable:s,objectInfo:a}=Lc(i,n,r);for(const u of s){a.index++;const l=o?o(u,a):null;e(l,a.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:n,vertexStarts:r,instanceCount:i}=this;const{data:o,geometryBuffer:s}=this,{startRow:a=0,endRow:u=1/0}=e||{},l={};if(e||(n=[0],r=[0]),this.normalize||!s)this._forEachGeometry((f,h)=>{const d=f&&this.normalizeGeometry(f);l[h]=d,r[h+1]=r[h]+(d?this.getGeometrySize(d):0)},a,u),i=r[r.length-1];else if(r=o.startIndices,i=r[o.length]||0,ArrayBuffer.isView(s))i=i||s.length/this.positionSize;else if(s instanceof _t){const f=s.accessor.stride||this.positionSize*4;i=i||s.byteLength/f}else if(s.buffer){const f=s.stride||this.positionSize*4;i=i||s.buffer.byteLength/f}else if(s.value){const f=s.value,h=s.stride/f.BYTES_PER_ELEMENT||this.positionSize;i=i||f.length/h}this._allocate(i,Boolean(e)),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;const c={};this._forEachGeometry((f,h)=>{const d=l[h]||f;c.vertexStart=r[h],c.indexStart=n[h];const g=h<r.length-1?r[h+1]:i;c.geometrySize=g-r[h],c.geometryIndex=h,this.updateGeometryAttributes(d,c)},a,u),this.vertexCount=n[n.length-1]}}const S3=(t,e)=>{const{offsetWidth:n,offsetHeight:r}=e;return new Kr({width:n,height:r}).fitBounds(t,{})},xy=t=>{const{longitude:e,latitude:n,zoom:r}=t;return e&&n&&r};const eee=t=>{const e=B.exports.useRef(null),n=B.exports.useRef(null),r=dM(),[i,o]=jl(db),[s,a]=jl(x7),{search:u}=gM(),l=pM(),[c,f]=B.exports.useState();B.exports.useEffect(()=>{if(e.current&&!xy(i)){const _=S3(t.defaultBounds,e.current);o(_)}},[e.current]);const h=B.exports.useMemo(()=>{var _;return(u==null?void 0:u.status)==="OK"&&((_=u.result)==null?void 0:_.items.length)?{type:"FeatureCollection",features:u.result.items.map(y=>({...y,properties:{id:y.id,...y.properties}}))}:null},[u]),d=B.exports.useMemo(()=>Rt.Children.map(t.children,_=>_.props.id)||[],[t.children]),g=B.exports.useCallback(_=>{var w;if(!n.current)return;const y=n.current.queryRenderedFeatures(_).filter(T=>d.find(R=>T.layer.id.startsWith(R)));if(y.length>0){const T=y[0];return{node:l.getNodeById((w=T.properties)==null?void 0:w.id),feature:T}}},[t.children,l,n.current,d]),m=B.exports.useCallback(_=>{var T,R;const{point:y}=_,w=g(y);if(w){const{node:C,feature:D}=w,F=c&&(C==null?void 0:C.id)===(c==null?void 0:c.node.id)?{...c,...y}:{node:C,feature:D,...y};(T=e.current)==null||T.classList.add("hover"),f(F)}else(R=e.current)==null||R.classList.remove("hover"),f(void 0)},[g,c]),S=_=>{const y=g(_.point);if(y){const w=JSON.parse(JSON.stringify(y));f(null),a(w)}else a(null)};return vs("div",{ref:e,className:"p6o-map-container",children:[xy(i)&&ke(wg,{clickTolerance:r.isTouchDevice?10:3,ref:n,initialViewState:i,mapStyle:t.mapStyle,onClick:S,onMouseMove:m,onMove:_=>o(_.viewState),children:Rt.Children.map(t.children,_=>Rt.cloneElement(_,{data:h}))}),t.tooltip&&c&&ke(_ee,{...c,tooltip:t.tooltip}),t.popup&&n.current&&s&&ke(yee,{selected:s,viewState:i,map:n.current,popup:t.popup,onClose:()=>a(null)})]})};function tee(t,e,n){var r=this,i=B.exports.useRef(null),o=B.exports.useRef(0),s=B.exports.useRef(null),a=B.exports.useRef([]),u=B.exports.useRef(),l=B.exports.useRef(),c=B.exports.useRef(t),f=B.exports.useRef(!0);B.exports.useEffect(function(){c.current=t},[t]);var h=!e&&e!==0&&typeof window<"u";if(typeof t!="function")throw new TypeError("Expected a function");e=+e||0;var d=!!(n=n||{}).leading,g=!("trailing"in n)||!!n.trailing,m="maxWait"in n,S=m?Math.max(+n.maxWait||0,e):null;B.exports.useEffect(function(){return f.current=!0,function(){f.current=!1}},[]);var _=B.exports.useMemo(function(){var y=function(F){var W=a.current,j=u.current;return a.current=u.current=null,o.current=F,l.current=c.current.apply(j,W)},w=function(F,W){h&&cancelAnimationFrame(s.current),s.current=h?requestAnimationFrame(F):setTimeout(F,W)},T=function(F){if(!f.current)return!1;var W=F-i.current;return!i.current||W>=e||W<0||m&&F-o.current>=S},R=function(F){return s.current=null,g&&a.current?y(F):(a.current=u.current=null,l.current)},C=function F(){var W=Date.now();if(T(W))return R(W);if(f.current){var j=e-(W-i.current),H=m?Math.min(j,S-(W-o.current)):j;w(F,H)}},D=function(){var F=Date.now(),W=T(F);if(a.current=[].slice.call(arguments),u.current=r,i.current=F,W){if(!s.current&&f.current)return o.current=i.current,w(C,e),d?y(i.current):l.current;if(m)return w(C,e),y(i.current)}return s.current||w(C,e),l.current};return D.cancel=function(){s.current&&(h?cancelAnimationFrame(s.current):clearTimeout(s.current)),o.current=0,a.current=i.current=u.current=s.current=null},D.isPending=function(){return!!s.current},D.flush=function(){return s.current?R(Date.now()):l.current},D},[d,m,e,S,g,h]);return _}function nee(t,e){return t===e}function pP(t){return typeof t=="function"?function(){return t}:t}function ree(t,e,n){var r,i,o=n&&n.equalityFn||nee,s=(r=B.exports.useState(pP(t)),i=r[1],[r[0],B.exports.useCallback(function(f){return i(pP(f))},[])]),a=s[0],u=s[1],l=tee(B.exports.useCallback(function(f){return u(f)},[u]),e,n),c=B.exports.useRef(t);return o(c.current,t)||(l(t),c.current=t),[a,l]}const iee=typeof window<"u"?B.exports.useLayoutEffect:B.exports.useEffect;function Wd(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const oee={position:"absolute",zIndex:-1};function x3(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>x3(n,e));if(Og(t)){if(see(t))return e.style=oee,B.exports.cloneElement(t,e);if(aee(t))return B.exports.cloneElement(t,e)}return t}function Og(t){return t&&typeof t=="object"&&"type"in t||!1}function see(t){const e=t.type,n=e&&e.defaultProps;return n&&n.mapStyle}function aee(t){const e=t.type;return e&&e.deckGLViewProps}function Ty(t){if(typeof t=="function")return B.exports.createElement(yi,{},t);if(Array.isArray(t))return t.map(Ty);if(Og(t)){if(t.type===B.exports.Fragment)return Ty(t.props.children);if(Wd(t.type,yi))return t}return t}function uee({children:t,layers:e=[],views:n=null}){const r=[],i=[],o={};return B.exports.Children.forEach(Ty(t),s=>{if(Og(s)){const a=s.type;if(Wd(a,tr)){const u=lee(a,s.props);i.push(u)}else r.push(s);if(Wd(a,yi)&&a!==yi&&s.props.id){const u=new a(s.props);o[u.id]=u}}else s&&r.push(s)}),Object.keys(o).length>0&&(Array.isArray(n)?n.forEach(s=>{o[s.id]=s}):n&&(o[n.id]=n),n=Object.values(o)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:n}}function lee(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}function cee({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},o=r.views[0].id;for(const s of t){let a=o,u=s;Og(s)&&Wd(s.type,yi)&&(a=s.props.id||o,u=s.props.children);const l=r.getViewport(a),c=r.getViewState(a);if(l){const{x:f,y:h,width:d,height:g}=l;u=x3(u,{x:f,y:h,width:d,height:g,viewport:l,viewState:c}),i[a]||(i[a]={viewport:l,children:[]}),i[a].children.push(u)}}return Object.keys(i).map(s=>{const{viewport:a,children:u}=i[s],{x:l,y:c,width:f,height:h}=a,d={position:"absolute",left:l,top:c,width:f,height:h},g="view-".concat(s),m=B.exports.createElement("div",{key:g,id:g,style:d},...u);if(n){const S={viewport:a,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:_=>{_.viewId=s,e._onViewStateChange(_)}};return B.exports.createElement(n,{key:g,value:S},m)}return m})}const fee={mixBlendMode:null};function hee({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(n)for(const o in n)o in fee?i[o]=n[o]:r[o]=n[o];return{containerStyle:r,canvasStyle:i}}function dee(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function T3(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function pee(t,e,n){const r=new e({...n,_customRender:i=>{t.redrawReason=i;const o=r.getViewports();t.lastRenderedViewports!==o?t.forceUpdate():T3(t)}});return r}const P3=B.exports.forwardRef((t,e)=>{const[n,r]=B.exports.useState(0),o=B.exports.useRef({control:null,version:n,forceUpdate:()=>r(R=>R+1)}).current,s=B.exports.useRef(null),a=B.exports.useRef(null),u=B.exports.useMemo(()=>uee(t),[t.layers,t.views,t.children]);let l=!0;const c=R=>{var C;return l&&t.viewState?(o.viewStateUpdateRequested=R,null):(o.viewStateUpdateRequested=null,(C=t.onViewStateChange)===null||C===void 0?void 0:C.call(t,R))},f=R=>{if(l)o.interactionStateUpdateRequested=R;else{var C;o.interactionStateUpdateRequested=null,(C=t.onInteractionStateChange)===null||C===void 0||C.call(t,R)}},h=B.exports.useMemo(()=>{const R={...t,style:null,width:"100%",height:"100%",parent:s.current,canvas:a.current,layers:u.layers,views:u.views,onViewStateChange:c,onInteractionStateChange:f};return delete R._customRender,o.deck&&o.deck.setProps(R),R},[t]);B.exports.useEffect(()=>{const R=t.Deck||Lg;return o.deck=pee(o,R,{...h,parent:s.current,canvas:a.current}),()=>{var C;return(C=o.deck)===null||C===void 0?void 0:C.finalize()}},[]),iee(()=>{T3(o);const{viewStateUpdateRequested:R,interactionStateUpdateRequested:C}=o;R&&c(R),C&&f(C)}),B.exports.useImperativeHandle(e,()=>dee(o),[]);const d=o.deck&&o.deck.isInitialized?o.deck.getViewports():void 0,{ContextProvider:g,width:m,height:S,id:_,style:y}=t,{containerStyle:w,canvasStyle:T}=B.exports.useMemo(()=>hee({width:m,height:S,style:y}),[m,S,y]);if(!o.viewStateUpdateRequested&&o.lastRenderedViewports===d||o.version!==n){o.lastRenderedViewports=d,o.version=n;const R=cee({children:u.children,deck:o.deck,ContextProvider:g}),C=B.exports.createElement("canvas",{key:"canvas",id:_||"deckgl-overlay",ref:a,style:T});o.control=B.exports.createElement("div",{id:"".concat(_||"deckgl","-wrapper"),ref:s,style:w},[C,R])}return l=!1,o.control});P3.defaultProps=Lg.defaultProps;const gee=t=>{const e=B.exports.useRef(null),{search:n}=gM(),r=pM(),i=B.exports.useMemo(()=>(n==null?void 0:n.result)&&n.status==="OK"&&n.result.items.length>0?n.result.items:null,[n]),o=B.exports.useMemo(()=>t.layers&&i?t.layers.reduce((a,u)=>{const l=u(i,r);return Array.isArray(l)?[...a,...l]:[...a,l]},[]):[],[i,t.layers]),s=B.exports.useCallback(a=>{const{offsetX:u,offsetY:l}=a.nativeEvent,c=e.current.pickObject({x:u,y:l,radius:3});c&&t.onClick&&t.onClick(c)},[t.onClick,e]);return ke("div",{onClick:s,children:ke(P3,{ref:e,initialViewState:t.initialViewState,controller:!0,onViewStateChange:t.onViewStateChange,layers:o,getTooltip:a=>t.tooltip({...a,graph:r,search:n}),children:ke(wg,{mapStyle:t.mapStyle})})})},mee=t=>{const e=B.exports.useRef(null),[n,r]=B.exports.useState(),[i,o]=B.exports.useState(),[s]=ree(i,200),[a,u]=jl(db);return B.exports.useEffect(()=>{if(e.current&&s){const{current:l}=e,c=new ResizeObserver(f=>{const h=new Kr(s),d=h.unproject([0,0]),g=h.unproject([h.width,h.height]),{offsetWidth:m,offsetHeight:S}=l,y=new Kr({width:m,height:S}).fitBounds([d,g],{});r(y)});return c.observe(l),()=>c.disconnect()}},[s]),B.exports.useEffect(()=>{s&&u(s)},[s]),B.exports.useEffect(()=>{if(e.current&&!n){const l=S3(t.defaultBounds,e.current);r(l)}},[e.current]),B.exports.useEffect(()=>{e.current&&n&&xy(a)&&r(a)},[a]),ke("div",{ref:e,className:"p6o-map-container",children:n&&ke(gee,{...t,initialViewState:n,onViewStateChange:l=>o(l.viewState)})})},xle={MapLibre:eee,MapLibreDeckGL:mee};function vee(t,e){e===void 0&&(e={});var n=0,r=0,i=0;return TM(t,function(o){n+=o[0],r+=o[1],i++},!0),v7([n/i,r/i],e.properties)}const A3=(t,e,n,r=[15,0,0,15])=>{var u;const[i,o]=B.exports.useState(e+r[3]),[s,a]=B.exports.useState(n+r[0]);return B.exports.useEffect(()=>o(e),[e]),B.exports.useEffect(()=>a(n),[n]),B.exports.useEffect(()=>{var l,c;if(t.current){const f=(l=t.current.firstChild)==null?void 0:l.getBoundingClientRect(),h=(c=t.current.closest(".p6o-map-container"))==null?void 0:c.getBoundingClientRect();if(f&&h){const d=f.right+r[1]>h.right,g=f.bottom+r[2]>h.bottom;d&&o(h.right-f.width-r[1]-r[3]),g&&a(h.bottom-f.height-r[0]-r[2])}}},[(u=t.current)==null?void 0:u.getBoundingClientRect()]),{top:s,left:i}},yee=t=>{const e=dM(),n=B.exports.useRef(null),{selected:r,viewState:i,map:o,popup:s}=t,[a,u]=B.exports.useState({left:0,top:0}),{top:l,left:c}=e.size===Er.DESKTOP?A3(n,a.left,a.top):{top:0,left:0};B.exports.useEffect(()=>{var h;if(r&&e.size===Er.DESKTOP){const d=(h=vee(r.feature))==null?void 0:h.geometry.coordinates,{x:g,y:m}=o.project(d);u({left:g,top:m})}else r&&u({left:0,top:0})},[r,i,e.size]);const f=B.exports.useMemo(()=>r?s({...t,onClose:t.onClose}):null,[r]);return f&&vs("div",{className:e.size===Er.DESKTOP?"p6o-map-popup-container":"p6o-map-popup-container-mobile",style:{zIndex:9,position:"absolute",top:l,left:c},children:[ke("button",{className:"p6o-map-popup-close",onClick:t.onClose,children:ke(w7,{})}),ke("main",{ref:n,children:f})]})},_ee=t=>{const e=B.exports.useRef(null),{x:n,y:r,node:i,feature:o,tooltip:s}=t,{left:a,top:u}=A3(e,n,r),l=B.exports.useMemo(()=>i?s({node:i,feature:o}):null,[i,o]);return l&&ke("div",{ref:e,className:"p6o-map-tooltip-container",style:{left:a,top:u,zIndex:1},children:l})},bee=()=>{const{current:t,...e}=ej();return Object.values(e)[0]};const Tle=t=>ke("div",{className:"p6o-controls-container",children:t.children});const Ple=()=>{const t=bee(),[e,n]=jl(db),r=i=>()=>{t&&n({...e,zoom:e.zoom+i,transitionDuration:200}),t==null||t.easeTo({zoom:t.getZoom()+i})};return vs("div",{className:"p6o-zoom-container",children:[ke("button",{className:"p6o-controls-btn p6o-zoom p6o-zoom-in",tabIndex:31,"aria-label":"Zoom in",onClick:r(1),children:ke(S7,{})}),ke("button",{className:"p6o-controls-btn p6o-zoom p6o-zoom-out",tabIndex:32,"aria-label":"Zoom out",onClick:r(-1),children:ke(E7,{})})]})};function zn(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function bt(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function lh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lh=function(n){return typeof n}:lh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},lh(t)}function St(t){bt(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||lh(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Ale(t,e){bt(2,arguments);var n=St(t),r=zn(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+r+1,0);var s=o.getDate();return i>=s?o:(n.setFullYear(o.getFullYear(),o.getMonth(),i),n)}function wee(t,e){bt(2,arguments);var n=St(t).getTime(),r=zn(e);return new Date(n+r)}var Eee={};function vu(){return Eee}function C3(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}var See=6e4,xee=36e5,Tee=1e3;function ch(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ch=function(n){return typeof n}:ch=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ch(t)}function Pee(t){return bt(1,arguments),t instanceof Date||ch(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function R3(t){if(bt(1,arguments),!Pee(t)&&typeof t!="number")return!1;var e=St(t);return!isNaN(Number(e))}function Aee(t){bt(1,arguments);var e=St(t);return e.setHours(23,59,59,999),e}function Cle(t){bt(1,arguments);var e=St(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Rle(t){bt(1,arguments);var e=t||{},n=St(e.start),r=St(e.end),i=r.getTime(),o=[];if(!(n.getTime()<=i))throw new RangeError("Invalid interval");var s=n;for(s.setHours(0,0,0,0),s.setDate(1);s.getTime()<=i;)o.push(St(s)),s.setMonth(s.getMonth()+1);return o}function Lle(t){bt(1,arguments);var e=St(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Mle(){return Aee(Date.now())}function L3(t,e){bt(2,arguments);var n=zn(e);return wee(t,-n)}var Cee=864e5;function Ree(t){bt(1,arguments);var e=St(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/Cee)+1}function ru(t){bt(1,arguments);var e=1,n=St(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function M3(t){bt(1,arguments);var e=St(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=ru(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var s=ru(o);return e.getTime()>=i.getTime()?n+1:e.getTime()>=s.getTime()?n:n-1}function Lee(t){bt(1,arguments);var e=M3(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=ru(n);return r}var Mee=6048e5;function O3(t){bt(1,arguments);var e=St(t),n=ru(e).getTime()-Lee(e).getTime();return Math.round(n/Mee)+1}function Es(t,e){var n,r,i,o,s,a,u,l;bt(1,arguments);var c=vu(),f=zn((n=(r=(i=(o=e==null?void 0:e.weekStartsOn)!==null&&o!==void 0?o:e==null||(s=e.locale)===null||s===void 0||(a=s.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(u=c.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=St(t),d=h.getUTCDay(),g=(d<f?7:0)+d-f;return h.setUTCDate(h.getUTCDate()-g),h.setUTCHours(0,0,0,0),h}function Gb(t,e){var n,r,i,o,s,a,u,l;bt(1,arguments);var c=St(t),f=c.getUTCFullYear(),h=vu(),d=zn((n=(r=(i=(o=e==null?void 0:e.firstWeekContainsDate)!==null&&o!==void 0?o:e==null||(s=e.locale)===null||s===void 0||(a=s.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:h.firstWeekContainsDate)!==null&&r!==void 0?r:(u=h.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(f+1,0,d),g.setUTCHours(0,0,0,0);var m=Es(g,e),S=new Date(0);S.setUTCFullYear(f,0,d),S.setUTCHours(0,0,0,0);var _=Es(S,e);return c.getTime()>=m.getTime()?f+1:c.getTime()>=_.getTime()?f:f-1}function Oee(t,e){var n,r,i,o,s,a,u,l;bt(1,arguments);var c=vu(),f=zn((n=(r=(i=(o=e==null?void 0:e.firstWeekContainsDate)!==null&&o!==void 0?o:e==null||(s=e.locale)===null||s===void 0||(a=s.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:c.firstWeekContainsDate)!==null&&r!==void 0?r:(u=c.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:1),h=Gb(t,e),d=new Date(0);d.setUTCFullYear(h,0,f),d.setUTCHours(0,0,0,0);var g=Es(d,e);return g}var kee=6048e5;function k3(t,e){bt(1,arguments);var n=St(t),r=Es(n,e).getTime()-Oee(n,e).getTime();return Math.round(r/kee)+1}function vt(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var Iee={y:function(e,n){var r=e.getUTCFullYear(),i=r>0?r:1-r;return vt(n==="yy"?i%100:i,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):vt(r+1,2)},d:function(e,n){return vt(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return vt(e.getUTCHours()%12||12,n.length)},H:function(e,n){return vt(e.getUTCHours(),n.length)},m:function(e,n){return vt(e.getUTCMinutes(),n.length)},s:function(e,n){return vt(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,i=e.getUTCMilliseconds(),o=Math.floor(i*Math.pow(10,r-3));return vt(o,n.length)}};const uo=Iee;var ia={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Nee={G:function(e,n,r){var i=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var i=e.getUTCFullYear(),o=i>0?i:1-i;return r.ordinalNumber(o,{unit:"year"})}return uo.y(e,n)},Y:function(e,n,r,i){var o=Gb(e,i),s=o>0?o:1-o;if(n==="YY"){var a=s%100;return vt(a,2)}return n==="Yo"?r.ordinalNumber(s,{unit:"year"}):vt(s,n.length)},R:function(e,n){var r=M3(e);return vt(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return vt(r,n.length)},Q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return vt(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return vt(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,r){var i=e.getUTCMonth();switch(n){case"M":case"MM":return uo.M(e,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,r){var i=e.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return vt(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,r,i){var o=k3(e,i);return n==="wo"?r.ordinalNumber(o,{unit:"week"}):vt(o,n.length)},I:function(e,n,r){var i=O3(e);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):vt(i,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):uo.d(e,n)},D:function(e,n,r){var i=Ree(e);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):vt(i,n.length)},E:function(e,n,r){var i=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,r,i){var o=e.getUTCDay(),s=(o-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(s);case"ee":return vt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});case"eeee":default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(e,n,r,i){var o=e.getUTCDay(),s=(o-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(s);case"cc":return vt(s,n.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});case"cccc":default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(e,n,r){var i=e.getUTCDay(),o=i===0?7:i;switch(n){case"i":return String(o);case"ii":return vt(o,n.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,r){var i=e.getUTCHours(),o=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,n,r){var i=e.getUTCHours(),o;switch(i===12?o=ia.noon:i===0?o=ia.midnight:o=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,n,r){var i=e.getUTCHours(),o;switch(i>=17?o=ia.evening:i>=12?o=ia.afternoon:i>=4?o=ia.morning:o=ia.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return uo.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):uo.H(e,n)},K:function(e,n,r){var i=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):vt(i,n.length)},k:function(e,n,r){var i=e.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):vt(i,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):uo.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):uo.s(e,n)},S:function(e,n){return uo.S(e,n)},X:function(e,n,r,i){var o=i._originalDate||e,s=o.getTimezoneOffset();if(s===0)return"Z";switch(n){case"X":return mP(s);case"XXXX":case"XX":return Ko(s);case"XXXXX":case"XXX":default:return Ko(s,":")}},x:function(e,n,r,i){var o=i._originalDate||e,s=o.getTimezoneOffset();switch(n){case"x":return mP(s);case"xxxx":case"xx":return Ko(s);case"xxxxx":case"xxx":default:return Ko(s,":")}},O:function(e,n,r,i){var o=i._originalDate||e,s=o.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+gP(s,":");case"OOOO":default:return"GMT"+Ko(s,":")}},z:function(e,n,r,i){var o=i._originalDate||e,s=o.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+gP(s,":");case"zzzz":default:return"GMT"+Ko(s,":")}},t:function(e,n,r,i){var o=i._originalDate||e,s=Math.floor(o.getTime()/1e3);return vt(s,n.length)},T:function(e,n,r,i){var o=i._originalDate||e,s=o.getTime();return vt(s,n.length)}};function gP(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),o=r%60;if(o===0)return n+String(i);var s=e||"";return n+String(i)+s+vt(o,2)}function mP(t,e){if(t%60===0){var n=t>0?"-":"+";return n+vt(Math.abs(t)/60,2)}return Ko(t,e)}function Ko(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),o=vt(Math.floor(i/60),2),s=vt(i%60,2);return r+o+n+s}const Dee=Nee;var vP=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},I3=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Fee=function(e,n){var r=e.match(/(P+)(p+)?/)||[],i=r[1],o=r[2];if(!o)return vP(e,n);var s;switch(i){case"P":s=n.dateTime({width:"short"});break;case"PP":s=n.dateTime({width:"medium"});break;case"PPP":s=n.dateTime({width:"long"});break;case"PPPP":default:s=n.dateTime({width:"full"});break}return s.replace("{{date}}",vP(i,n)).replace("{{time}}",I3(o,n))},Uee={p:I3,P:Fee};const Py=Uee;var zee=["D","DD"],Bee=["YY","YYYY"];function N3(t){return zee.indexOf(t)!==-1}function D3(t){return Bee.indexOf(t)!==-1}function Hd(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Vee={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$ee=function(e,n,r){var i,o=Vee[e];return typeof o=="string"?i=o:n===1?i=o.one:i=o.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};const jee=$ee;function I0(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var Gee={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Wee={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Hee={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Yee={date:I0({formats:Gee,defaultWidth:"full"}),time:I0({formats:Wee,defaultWidth:"full"}),dateTime:I0({formats:Hee,defaultWidth:"full"})};const Xee=Yee;var qee={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Zee=function(e,n,r,i){return qee[e]};const Kee=Zee;function qu(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,s=n!=null&&n.width?String(n.width):o;i=t.formattingValues[s]||t.formattingValues[o]}else{var a=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[u]||t.values[a]}var l=t.argumentCallback?t.argumentCallback(e):e;return i[l]}}var Qee={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Jee={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ete={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},tte={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},nte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ite=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ote={ordinalNumber:ite,era:qu({values:Qee,defaultWidth:"wide"}),quarter:qu({values:Jee,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:qu({values:ete,defaultWidth:"wide"}),day:qu({values:tte,defaultWidth:"wide"}),dayPeriod:qu({values:nte,defaultWidth:"wide",formattingValues:rte,defaultFormattingWidth:"wide"})};const ste=ote;function Zu(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;var s=o[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(a)?ute(a,function(f){return f.test(s)}):ate(a,function(f){return f.test(s)}),l;l=t.valueCallback?t.valueCallback(u):u,l=n.valueCallback?n.valueCallback(l):l;var c=e.slice(s.length);return{value:l,rest:c}}}function ate(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function ute(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function lte(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],o=e.match(t.parsePattern);if(!o)return null;var s=t.valueCallback?t.valueCallback(o[0]):o[0];s=n.valueCallback?n.valueCallback(s):s;var a=e.slice(i.length);return{value:s,rest:a}}}var cte=/^(\d+)(th|st|nd|rd)?/i,fte=/\d+/i,hte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dte={any:[/^b/i,/^(a|c)/i]},pte={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gte={any:[/1/i,/2/i,/3/i,/4/i]},mte={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_te={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bte={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},wte={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ete={ordinalNumber:lte({matchPattern:cte,parsePattern:fte,valueCallback:function(e){return parseInt(e,10)}}),era:Zu({matchPatterns:hte,defaultMatchWidth:"wide",parsePatterns:dte,defaultParseWidth:"any"}),quarter:Zu({matchPatterns:pte,defaultMatchWidth:"wide",parsePatterns:gte,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Zu({matchPatterns:mte,defaultMatchWidth:"wide",parsePatterns:vte,defaultParseWidth:"any"}),day:Zu({matchPatterns:yte,defaultMatchWidth:"wide",parsePatterns:_te,defaultParseWidth:"any"}),dayPeriod:Zu({matchPatterns:bte,defaultMatchWidth:"any",parsePatterns:wte,defaultParseWidth:"any"})};const Ste=Ete;var xte={code:"en-US",formatDistance:jee,formatLong:Xee,formatRelative:Kee,localize:ste,match:Ste,options:{weekStartsOn:0,firstWeekContainsDate:1}};const F3=xte;var Tte=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Pte=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ate=/^'([^]*?)'?$/,Cte=/''/g,Rte=/[a-zA-Z]/;function Ole(t,e,n){var r,i,o,s,a,u,l,c,f,h,d,g,m,S,_,y,w,T;bt(2,arguments);var R=String(e),C=vu(),D=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:C.locale)!==null&&r!==void 0?r:F3,F=zn((o=(s=(a=(u=n==null?void 0:n.firstWeekContainsDate)!==null&&u!==void 0?u:n==null||(l=n.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&a!==void 0?a:C.firstWeekContainsDate)!==null&&s!==void 0?s:(f=C.locale)===null||f===void 0||(h=f.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(F>=1&&F<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var W=zn((d=(g=(m=(S=n==null?void 0:n.weekStartsOn)!==null&&S!==void 0?S:n==null||(_=n.locale)===null||_===void 0||(y=_.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&m!==void 0?m:C.weekStartsOn)!==null&&g!==void 0?g:(w=C.locale)===null||w===void 0||(T=w.options)===null||T===void 0?void 0:T.weekStartsOn)!==null&&d!==void 0?d:0);if(!(W>=0&&W<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!D.localize)throw new RangeError("locale must contain localize property");if(!D.formatLong)throw new RangeError("locale must contain formatLong property");var j=St(t);if(!R3(j))throw new RangeError("Invalid time value");var H=C3(j),pe=L3(j,H),ue={firstWeekContainsDate:F,weekStartsOn:W,locale:D,_originalDate:j},se=R.match(Pte).map(function(Ce){var De=Ce[0];if(De==="p"||De==="P"){var He=Py[De];return He(Ce,D.formatLong)}return Ce}).join("").match(Tte).map(function(Ce){if(Ce==="''")return"'";var De=Ce[0];if(De==="'")return Lte(Ce);var He=Dee[De];if(He)return!(n!=null&&n.useAdditionalWeekYearTokens)&&D3(Ce)&&Hd(Ce,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&N3(Ce)&&Hd(Ce,e,String(t)),He(pe,Ce,D.localize,ue);if(De.match(Rte))throw new RangeError("Format string contains an unescaped latin alphabet character `"+De+"`");return Ce}).join("");return se}function Lte(t){var e=t.match(Ate);return e?e[1].replace(Cte,"'"):t}function Mte(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function kle(t,e){bt(2,arguments);var n=St(t),r=St(e);return n.getTime()>r.getTime()}function Ile(t,e){bt(2,arguments);var n=St(t),r=St(e);return n.getTime()<r.getTime()}function fh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fh=function(n){return typeof n}:fh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fh(t)}function U3(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ay(t,e)}function Ay(t,e){return Ay=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Ay(t,e)}function z3(t){var e=kte();return function(){var r=Yd(t),i;if(e){var o=Yd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Ote(this,i)}}function Ote(t,e){return e&&(fh(e)==="object"||typeof e=="function")?e:Cy(t)}function Cy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yd(t){return Yd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Yd(t)}function Wb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hb(t,e,n){return e&&yP(t.prototype,e),n&&yP(t,n),t}function Ry(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ite=10,B3=function(){function t(){Wb(this,t),Ry(this,"subPriority",0)}return Hb(t,[{key:"validate",value:function(n,r){return!0}}]),t}(),Nte=function(t){U3(n,t);var e=z3(n);function n(r,i,o,s,a){var u;return Wb(this,n),u=e.call(this),u.value=r,u.validateValue=i,u.setValue=o,u.priority=s,a&&(u.subPriority=a),u}return Hb(n,[{key:"validate",value:function(i,o){return this.validateValue(i,this.value,o)}},{key:"set",value:function(i,o,s){return this.setValue(i,o,this.value,s)}}]),n}(B3),Dte=function(t){U3(n,t);var e=z3(n);function n(){var r;Wb(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),Ry(Cy(r),"priority",Ite),Ry(Cy(r),"subPriority",-1),r}return Hb(n,[{key:"set",value:function(i,o){if(o.timestampIsSet)return i;var s=new Date(0);return s.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),s.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),s}}]),n}(B3);function Fte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ute(t,e,n){return e&&_P(t.prototype,e),n&&_P(t,n),t}var ht=function(){function t(){Fte(this,t)}return Ute(t,[{key:"run",value:function(n,r,i,o){var s=this.parse(n,r,i,o);return s?{setter:new Nte(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}},{key:"validate",value:function(n,r,i){return!0}}]),t}();function hh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hh=function(n){return typeof n}:hh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hh(t)}function zte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bte(t,e,n){return e&&bP(t.prototype,e),n&&bP(t,n),t}function Vte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ly(t,e)}function Ly(t,e){return Ly=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Ly(t,e)}function $te(t){var e=Gte();return function(){var r=Xd(t),i;if(e){var o=Xd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return jte(this,i)}}function jte(t,e){return e&&(hh(e)==="object"||typeof e=="function")?e:My(t)}function My(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xd(t){return Xd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Xd(t)}function wP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Wte=function(t){Vte(n,t);var e=$te(n);function n(){var r;zte(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),wP(My(r),"priority",140),wP(My(r),"incompatibleTokens",["R","u","t","T"]),r}return Bte(n,[{key:"parse",value:function(i,o,s){switch(o){case"G":case"GG":case"GGG":return s.era(i,{width:"abbreviated"})||s.era(i,{width:"narrow"});case"GGGGG":return s.era(i,{width:"narrow"});case"GGGG":default:return s.era(i,{width:"wide"})||s.era(i,{width:"abbreviated"})||s.era(i,{width:"narrow"})}}},{key:"set",value:function(i,o,s){return o.era=s,i.setUTCFullYear(s,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(ht),Zt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},fi={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Kt(t,e){return t&&{value:e(t.value),rest:t.rest}}function Bt(t,e){var n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function hi(t,e){var n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};var r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,s=n[5]?parseInt(n[5],10):0;return{value:r*(i*xee+o*See+s*Tee),rest:e.slice(n[0].length)}}function V3(t){return Bt(Zt.anyDigitsSigned,t)}function Ht(t,e){switch(t){case 1:return Bt(Zt.singleDigit,e);case 2:return Bt(Zt.twoDigits,e);case 3:return Bt(Zt.threeDigits,e);case 4:return Bt(Zt.fourDigits,e);default:return Bt(new RegExp("^\\d{1,"+t+"}"),e)}}function qd(t,e){switch(t){case 1:return Bt(Zt.singleDigitSigned,e);case 2:return Bt(Zt.twoDigitsSigned,e);case 3:return Bt(Zt.threeDigitsSigned,e);case 4:return Bt(Zt.fourDigitsSigned,e);default:return Bt(new RegExp("^-?\\d{1,"+t+"}"),e)}}function Yb(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function $3(t,e){var n=e>0,r=n?e:1-e,i;if(r<=50)i=t||100;else{var o=r+50,s=Math.floor(o/100)*100,a=t>=o%100;i=t+s-(a?100:0)}return n?i:1-i}function j3(t){return t%400===0||t%4===0&&t%100!==0}function dh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dh=function(n){return typeof n}:dh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},dh(t)}function Hte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yte(t,e,n){return e&&EP(t.prototype,e),n&&EP(t,n),t}function Xte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oy(t,e)}function Oy(t,e){return Oy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Oy(t,e)}function qte(t){var e=Kte();return function(){var r=Zd(t),i;if(e){var o=Zd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Zte(this,i)}}function Zte(t,e){return e&&(dh(e)==="object"||typeof e=="function")?e:ky(t)}function ky(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Zd(t){return Zd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Zd(t)}function SP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Qte=function(t){Xte(n,t);var e=qte(n);function n(){var r;Hte(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),SP(ky(r),"priority",130),SP(ky(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return Yte(n,[{key:"parse",value:function(i,o,s){var a=function(l){return{year:l,isTwoDigitYear:o==="yy"}};switch(o){case"y":return Kt(Ht(4,i),a);case"yo":return Kt(s.ordinalNumber(i,{unit:"year"}),a);default:return Kt(Ht(o.length,i),a)}}},{key:"validate",value:function(i,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(i,o,s){var a=i.getUTCFullYear();if(s.isTwoDigitYear){var u=$3(s.year,a);return i.setUTCFullYear(u,0,1),i.setUTCHours(0,0,0,0),i}var l=!("era"in o)||o.era===1?s.year:1-s.year;return i.setUTCFullYear(l,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function ph(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ph=function(n){return typeof n}:ph=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ph(t)}function Jte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ene(t,e,n){return e&&xP(t.prototype,e),n&&xP(t,n),t}function tne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Iy(t,e)}function Iy(t,e){return Iy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Iy(t,e)}function nne(t){var e=ine();return function(){var r=Kd(t),i;if(e){var o=Kd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return rne(this,i)}}function rne(t,e){return e&&(ph(e)==="object"||typeof e=="function")?e:Ny(t)}function Ny(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ine(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Kd(t){return Kd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Kd(t)}function TP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var one=function(t){tne(n,t);var e=nne(n);function n(){var r;Jte(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),TP(Ny(r),"priority",130),TP(Ny(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return ene(n,[{key:"parse",value:function(i,o,s){var a=function(l){return{year:l,isTwoDigitYear:o==="YY"}};switch(o){case"Y":return Kt(Ht(4,i),a);case"Yo":return Kt(s.ordinalNumber(i,{unit:"year"}),a);default:return Kt(Ht(o.length,i),a)}}},{key:"validate",value:function(i,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(i,o,s,a){var u=Gb(i,a);if(s.isTwoDigitYear){var l=$3(s.year,u);return i.setUTCFullYear(l,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Es(i,a)}var c=!("era"in o)||o.era===1?s.year:1-s.year;return i.setUTCFullYear(c,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),Es(i,a)}}]),n}(ht);function gh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gh=function(n){return typeof n}:gh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},gh(t)}function sne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ane(t,e,n){return e&&PP(t.prototype,e),n&&PP(t,n),t}function une(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dy(t,e)}function Dy(t,e){return Dy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Dy(t,e)}function lne(t){var e=fne();return function(){var r=Qd(t),i;if(e){var o=Qd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return cne(this,i)}}function cne(t,e){return e&&(gh(e)==="object"||typeof e=="function")?e:Fy(t)}function Fy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qd(t){return Qd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Qd(t)}function AP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var hne=function(t){une(n,t);var e=lne(n);function n(){var r;sne(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),AP(Fy(r),"priority",130),AP(Fy(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return ane(n,[{key:"parse",value:function(i,o){return qd(o==="R"?4:o.length,i)}},{key:"set",value:function(i,o,s){var a=new Date(0);return a.setUTCFullYear(s,0,4),a.setUTCHours(0,0,0,0),ru(a)}}]),n}(ht);function mh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mh=function(n){return typeof n}:mh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},mh(t)}function dne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pne(t,e,n){return e&&CP(t.prototype,e),n&&CP(t,n),t}function gne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Uy(t,e)}function Uy(t,e){return Uy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Uy(t,e)}function mne(t){var e=yne();return function(){var r=Jd(t),i;if(e){var o=Jd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return vne(this,i)}}function vne(t,e){return e&&(mh(e)==="object"||typeof e=="function")?e:zy(t)}function zy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jd(t){return Jd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Jd(t)}function RP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _ne=function(t){gne(n,t);var e=mne(n);function n(){var r;dne(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),RP(zy(r),"priority",130),RP(zy(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return pne(n,[{key:"parse",value:function(i,o){return qd(o==="u"?4:o.length,i)}},{key:"set",value:function(i,o,s){return i.setUTCFullYear(s,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function vh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vh=function(n){return typeof n}:vh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},vh(t)}function bne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wne(t,e,n){return e&&LP(t.prototype,e),n&&LP(t,n),t}function Ene(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&By(t,e)}function By(t,e){return By=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},By(t,e)}function Sne(t){var e=Tne();return function(){var r=ep(t),i;if(e){var o=ep(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return xne(this,i)}}function xne(t,e){return e&&(vh(e)==="object"||typeof e=="function")?e:Vy(t)}function Vy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ep(t){return ep=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ep(t)}function MP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pne=function(t){Ene(n,t);var e=Sne(n);function n(){var r;bne(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),MP(Vy(r),"priority",120),MP(Vy(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return wne(n,[{key:"parse",value:function(i,o,s){switch(o){case"Q":case"QQ":return Ht(o.length,i);case"Qo":return s.ordinalNumber(i,{unit:"quarter"});case"QQQ":return s.quarter(i,{width:"abbreviated",context:"formatting"})||s.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(i,{width:"wide",context:"formatting"})||s.quarter(i,{width:"abbreviated",context:"formatting"})||s.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,o){return o>=1&&o<=4}},{key:"set",value:function(i,o,s){return i.setUTCMonth((s-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function yh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?yh=function(n){return typeof n}:yh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},yh(t)}function Ane(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cne(t,e,n){return e&&OP(t.prototype,e),n&&OP(t,n),t}function Rne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$y(t,e)}function $y(t,e){return $y=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},$y(t,e)}function Lne(t){var e=One();return function(){var r=tp(t),i;if(e){var o=tp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Mne(this,i)}}function Mne(t,e){return e&&(yh(e)==="object"||typeof e=="function")?e:jy(t)}function jy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function One(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tp(t){return tp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},tp(t)}function kP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var kne=function(t){Rne(n,t);var e=Lne(n);function n(){var r;Ane(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),kP(jy(r),"priority",120),kP(jy(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Cne(n,[{key:"parse",value:function(i,o,s){switch(o){case"q":case"qq":return Ht(o.length,i);case"qo":return s.ordinalNumber(i,{unit:"quarter"});case"qqq":return s.quarter(i,{width:"abbreviated",context:"standalone"})||s.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(i,{width:"wide",context:"standalone"})||s.quarter(i,{width:"abbreviated",context:"standalone"})||s.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,o){return o>=1&&o<=4}},{key:"set",value:function(i,o,s){return i.setUTCMonth((s-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function _h(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_h=function(n){return typeof n}:_h=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_h(t)}function Ine(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nne(t,e,n){return e&&IP(t.prototype,e),n&&IP(t,n),t}function Dne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gy(t,e)}function Gy(t,e){return Gy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Gy(t,e)}function Fne(t){var e=zne();return function(){var r=np(t),i;if(e){var o=np(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Une(this,i)}}function Une(t,e){return e&&(_h(e)==="object"||typeof e=="function")?e:Wy(t)}function Wy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function np(t){return np=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},np(t)}function NP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Bne=function(t){Dne(n,t);var e=Fne(n);function n(){var r;Ine(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),NP(Wy(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),NP(Wy(r),"priority",110),r}return Nne(n,[{key:"parse",value:function(i,o,s){var a=function(l){return l-1};switch(o){case"M":return Kt(Bt(Zt.month,i),a);case"MM":return Kt(Ht(2,i),a);case"Mo":return Kt(s.ordinalNumber(i,{unit:"month"}),a);case"MMM":return s.month(i,{width:"abbreviated",context:"formatting"})||s.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(i,{width:"wide",context:"formatting"})||s.month(i,{width:"abbreviated",context:"formatting"})||s.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,o){return o>=0&&o<=11}},{key:"set",value:function(i,o,s){return i.setUTCMonth(s,1),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function bh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bh=function(n){return typeof n}:bh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bh(t)}function Vne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $ne(t,e,n){return e&&DP(t.prototype,e),n&&DP(t,n),t}function jne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hy(t,e)}function Hy(t,e){return Hy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Hy(t,e)}function Gne(t){var e=Hne();return function(){var r=rp(t),i;if(e){var o=rp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Wne(this,i)}}function Wne(t,e){return e&&(bh(e)==="object"||typeof e=="function")?e:Yy(t)}function Yy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rp(t){return rp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},rp(t)}function FP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yne=function(t){jne(n,t);var e=Gne(n);function n(){var r;Vne(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),FP(Yy(r),"priority",110),FP(Yy(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return $ne(n,[{key:"parse",value:function(i,o,s){var a=function(l){return l-1};switch(o){case"L":return Kt(Bt(Zt.month,i),a);case"LL":return Kt(Ht(2,i),a);case"Lo":return Kt(s.ordinalNumber(i,{unit:"month"}),a);case"LLL":return s.month(i,{width:"abbreviated",context:"standalone"})||s.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(i,{width:"wide",context:"standalone"})||s.month(i,{width:"abbreviated",context:"standalone"})||s.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,o){return o>=0&&o<=11}},{key:"set",value:function(i,o,s){return i.setUTCMonth(s,1),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function Xne(t,e,n){bt(2,arguments);var r=St(t),i=zn(e),o=k3(r,n)-i;return r.setUTCDate(r.getUTCDate()-o*7),r}function wh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wh=function(n){return typeof n}:wh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},wh(t)}function qne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zne(t,e,n){return e&&UP(t.prototype,e),n&&UP(t,n),t}function Kne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xy(t,e)}function Xy(t,e){return Xy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Xy(t,e)}function Qne(t){var e=ere();return function(){var r=ip(t),i;if(e){var o=ip(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Jne(this,i)}}function Jne(t,e){return e&&(wh(e)==="object"||typeof e=="function")?e:qy(t)}function qy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ere(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ip(t){return ip=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ip(t)}function zP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tre=function(t){Kne(n,t);var e=Qne(n);function n(){var r;qne(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),zP(qy(r),"priority",100),zP(qy(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return Zne(n,[{key:"parse",value:function(i,o,s){switch(o){case"w":return Bt(Zt.week,i);case"wo":return s.ordinalNumber(i,{unit:"week"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=1&&o<=53}},{key:"set",value:function(i,o,s,a){return Es(Xne(i,s,a),a)}}]),n}(ht);function nre(t,e){bt(2,arguments);var n=St(t),r=zn(e),i=O3(n)-r;return n.setUTCDate(n.getUTCDate()-i*7),n}function Eh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Eh=function(n){return typeof n}:Eh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Eh(t)}function rre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ire(t,e,n){return e&&BP(t.prototype,e),n&&BP(t,n),t}function ore(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zy(t,e)}function Zy(t,e){return Zy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Zy(t,e)}function sre(t){var e=ure();return function(){var r=op(t),i;if(e){var o=op(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return are(this,i)}}function are(t,e){return e&&(Eh(e)==="object"||typeof e=="function")?e:Ky(t)}function Ky(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ure(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function op(t){return op=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},op(t)}function VP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var lre=function(t){ore(n,t);var e=sre(n);function n(){var r;rre(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),VP(Ky(r),"priority",100),VP(Ky(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return ire(n,[{key:"parse",value:function(i,o,s){switch(o){case"I":return Bt(Zt.week,i);case"Io":return s.ordinalNumber(i,{unit:"week"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=1&&o<=53}},{key:"set",value:function(i,o,s){return ru(nre(i,s))}}]),n}(ht);function Sh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Sh=function(n){return typeof n}:Sh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Sh(t)}function cre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fre(t,e,n){return e&&$P(t.prototype,e),n&&$P(t,n),t}function hre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qy(t,e)}function Qy(t,e){return Qy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Qy(t,e)}function dre(t){var e=gre();return function(){var r=sp(t),i;if(e){var o=sp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return pre(this,i)}}function pre(t,e){return e&&(Sh(e)==="object"||typeof e=="function")?e:xh(t)}function xh(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sp(t){return sp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},sp(t)}function N0(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mre=[31,28,31,30,31,30,31,31,30,31,30,31],vre=[31,29,31,30,31,30,31,31,30,31,30,31],yre=function(t){hre(n,t);var e=dre(n);function n(){var r;cre(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),N0(xh(r),"priority",90),N0(xh(r),"subPriority",1),N0(xh(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return fre(n,[{key:"parse",value:function(i,o,s){switch(o){case"d":return Bt(Zt.date,i);case"do":return s.ordinalNumber(i,{unit:"date"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){var s=i.getUTCFullYear(),a=j3(s),u=i.getUTCMonth();return a?o>=1&&o<=vre[u]:o>=1&&o<=mre[u]}},{key:"set",value:function(i,o,s){return i.setUTCDate(s),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function Th(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Th=function(n){return typeof n}:Th=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Th(t)}function _re(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bre(t,e,n){return e&&jP(t.prototype,e),n&&jP(t,n),t}function wre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jy(t,e)}function Jy(t,e){return Jy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Jy(t,e)}function Ere(t){var e=xre();return function(){var r=ap(t),i;if(e){var o=ap(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Sre(this,i)}}function Sre(t,e){return e&&(Th(e)==="object"||typeof e=="function")?e:Ph(t)}function Ph(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ap(t){return ap=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ap(t)}function D0(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Tre=function(t){wre(n,t);var e=Ere(n);function n(){var r;_re(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),D0(Ph(r),"priority",90),D0(Ph(r),"subpriority",1),D0(Ph(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return bre(n,[{key:"parse",value:function(i,o,s){switch(o){case"D":case"DD":return Bt(Zt.dayOfYear,i);case"Do":return s.ordinalNumber(i,{unit:"date"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){var s=i.getUTCFullYear(),a=j3(s);return a?o>=1&&o<=366:o>=1&&o<=365}},{key:"set",value:function(i,o,s){return i.setUTCMonth(0,s),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function Xb(t,e,n){var r,i,o,s,a,u,l,c;bt(2,arguments);var f=vu(),h=zn((r=(i=(o=(s=n==null?void 0:n.weekStartsOn)!==null&&s!==void 0?s:n==null||(a=n.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&o!==void 0?o:f.weekStartsOn)!==null&&i!==void 0?i:(l=f.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&r!==void 0?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=St(t),g=zn(e),m=d.getUTCDay(),S=g%7,_=(S+7)%7,y=(_<h?7:0)+g-m;return d.setUTCDate(d.getUTCDate()+y),d}function Ah(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ah=function(n){return typeof n}:Ah=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ah(t)}function Pre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Are(t,e,n){return e&&GP(t.prototype,e),n&&GP(t,n),t}function Cre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&e_(t,e)}function e_(t,e){return e_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},e_(t,e)}function Rre(t){var e=Mre();return function(){var r=up(t),i;if(e){var o=up(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Lre(this,i)}}function Lre(t,e){return e&&(Ah(e)==="object"||typeof e=="function")?e:t_(t)}function t_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function up(t){return up=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},up(t)}function WP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ore=function(t){Cre(n,t);var e=Rre(n);function n(){var r;Pre(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),WP(t_(r),"priority",90),WP(t_(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return Are(n,[{key:"parse",value:function(i,o,s){switch(o){case"E":case"EE":case"EEE":return s.day(i,{width:"abbreviated",context:"formatting"})||s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(i,{width:"wide",context:"formatting"})||s.day(i,{width:"abbreviated",context:"formatting"})||s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,o){return o>=0&&o<=6}},{key:"set",value:function(i,o,s,a){return i=Xb(i,s,a),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function Ch(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ch=function(n){return typeof n}:Ch=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ch(t)}function kre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ire(t,e,n){return e&&HP(t.prototype,e),n&&HP(t,n),t}function Nre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n_(t,e)}function n_(t,e){return n_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},n_(t,e)}function Dre(t){var e=Ure();return function(){var r=lp(t),i;if(e){var o=lp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Fre(this,i)}}function Fre(t,e){return e&&(Ch(e)==="object"||typeof e=="function")?e:r_(t)}function r_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ure(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lp(t){return lp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},lp(t)}function YP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var zre=function(t){Nre(n,t);var e=Dre(n);function n(){var r;kre(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),YP(r_(r),"priority",90),YP(r_(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return Ire(n,[{key:"parse",value:function(i,o,s,a){var u=function(c){var f=Math.floor((c-1)/7)*7;return(c+a.weekStartsOn+6)%7+f};switch(o){case"e":case"ee":return Kt(Ht(o.length,i),u);case"eo":return Kt(s.ordinalNumber(i,{unit:"day"}),u);case"eee":return s.day(i,{width:"abbreviated",context:"formatting"})||s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})||s.day(i,{width:"abbreviated",context:"formatting"})||s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,o){return o>=0&&o<=6}},{key:"set",value:function(i,o,s,a){return i=Xb(i,s,a),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function Rh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rh=function(n){return typeof n}:Rh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Rh(t)}function Bre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vre(t,e,n){return e&&XP(t.prototype,e),n&&XP(t,n),t}function $re(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i_(t,e)}function i_(t,e){return i_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},i_(t,e)}function jre(t){var e=Wre();return function(){var r=cp(t),i;if(e){var o=cp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Gre(this,i)}}function Gre(t,e){return e&&(Rh(e)==="object"||typeof e=="function")?e:o_(t)}function o_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function cp(t){return cp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},cp(t)}function qP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Hre=function(t){$re(n,t);var e=jre(n);function n(){var r;Bre(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),qP(o_(r),"priority",90),qP(o_(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return Vre(n,[{key:"parse",value:function(i,o,s,a){var u=function(c){var f=Math.floor((c-1)/7)*7;return(c+a.weekStartsOn+6)%7+f};switch(o){case"c":case"cc":return Kt(Ht(o.length,i),u);case"co":return Kt(s.ordinalNumber(i,{unit:"day"}),u);case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"})||s.day(i,{width:"short",context:"standalone"})||s.day(i,{width:"narrow",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"})||s.day(i,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})||s.day(i,{width:"abbreviated",context:"standalone"})||s.day(i,{width:"short",context:"standalone"})||s.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,o){return o>=0&&o<=6}},{key:"set",value:function(i,o,s,a){return i=Xb(i,s,a),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function Yre(t,e){bt(2,arguments);var n=zn(e);n%7===0&&(n=n-7);var r=1,i=St(t),o=i.getUTCDay(),s=n%7,a=(s+7)%7,u=(a<r?7:0)+n-o;return i.setUTCDate(i.getUTCDate()+u),i}function Lh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Lh=function(n){return typeof n}:Lh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Lh(t)}function Xre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qre(t,e,n){return e&&ZP(t.prototype,e),n&&ZP(t,n),t}function Zre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s_(t,e)}function s_(t,e){return s_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},s_(t,e)}function Kre(t){var e=Jre();return function(){var r=fp(t),i;if(e){var o=fp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Qre(this,i)}}function Qre(t,e){return e&&(Lh(e)==="object"||typeof e=="function")?e:a_(t)}function a_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fp(t){return fp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},fp(t)}function KP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var eie=function(t){Zre(n,t);var e=Kre(n);function n(){var r;Xre(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),KP(a_(r),"priority",90),KP(a_(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return qre(n,[{key:"parse",value:function(i,o,s){var a=function(l){return l===0?7:l};switch(o){case"i":case"ii":return Ht(o.length,i);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return Kt(s.day(i,{width:"abbreviated",context:"formatting"})||s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"}),a);case"iiiii":return Kt(s.day(i,{width:"narrow",context:"formatting"}),a);case"iiiiii":return Kt(s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"}),a);case"iiii":default:return Kt(s.day(i,{width:"wide",context:"formatting"})||s.day(i,{width:"abbreviated",context:"formatting"})||s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"}),a)}}},{key:"validate",value:function(i,o){return o>=1&&o<=7}},{key:"set",value:function(i,o,s){return i=Yre(i,s),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function Mh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mh=function(n){return typeof n}:Mh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Mh(t)}function tie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nie(t,e,n){return e&&QP(t.prototype,e),n&&QP(t,n),t}function rie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u_(t,e)}function u_(t,e){return u_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},u_(t,e)}function iie(t){var e=sie();return function(){var r=hp(t),i;if(e){var o=hp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return oie(this,i)}}function oie(t,e){return e&&(Mh(e)==="object"||typeof e=="function")?e:l_(t)}function l_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hp(t){return hp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},hp(t)}function JP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var aie=function(t){rie(n,t);var e=iie(n);function n(){var r;tie(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),JP(l_(r),"priority",80),JP(l_(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return nie(n,[{key:"parse",value:function(i,o,s){switch(o){case"a":case"aa":case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"})||s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})||s.dayPeriod(i,{width:"abbreviated",context:"formatting"})||s.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,o,s){return i.setUTCHours(Yb(s),0,0,0),i}}]),n}(ht);function Oh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Oh=function(n){return typeof n}:Oh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Oh(t)}function uie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lie(t,e,n){return e&&e2(t.prototype,e),n&&e2(t,n),t}function cie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c_(t,e)}function c_(t,e){return c_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},c_(t,e)}function fie(t){var e=die();return function(){var r=dp(t),i;if(e){var o=dp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return hie(this,i)}}function hie(t,e){return e&&(Oh(e)==="object"||typeof e=="function")?e:f_(t)}function f_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function die(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dp(t){return dp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},dp(t)}function t2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pie=function(t){cie(n,t);var e=fie(n);function n(){var r;uie(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),t2(f_(r),"priority",80),t2(f_(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return lie(n,[{key:"parse",value:function(i,o,s){switch(o){case"b":case"bb":case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"})||s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})||s.dayPeriod(i,{width:"abbreviated",context:"formatting"})||s.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,o,s){return i.setUTCHours(Yb(s),0,0,0),i}}]),n}(ht);function kh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kh=function(n){return typeof n}:kh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},kh(t)}function gie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mie(t,e,n){return e&&n2(t.prototype,e),n&&n2(t,n),t}function vie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h_(t,e)}function h_(t,e){return h_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},h_(t,e)}function yie(t){var e=bie();return function(){var r=pp(t),i;if(e){var o=pp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return _ie(this,i)}}function _ie(t,e){return e&&(kh(e)==="object"||typeof e=="function")?e:d_(t)}function d_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pp(t){return pp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},pp(t)}function r2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wie=function(t){vie(n,t);var e=yie(n);function n(){var r;gie(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),r2(d_(r),"priority",80),r2(d_(r),"incompatibleTokens",["a","b","t","T"]),r}return mie(n,[{key:"parse",value:function(i,o,s){switch(o){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"})||s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})||s.dayPeriod(i,{width:"abbreviated",context:"formatting"})||s.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,o,s){return i.setUTCHours(Yb(s),0,0,0),i}}]),n}(ht);function Ih(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ih=function(n){return typeof n}:Ih=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ih(t)}function Eie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sie(t,e,n){return e&&i2(t.prototype,e),n&&i2(t,n),t}function xie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p_(t,e)}function p_(t,e){return p_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},p_(t,e)}function Tie(t){var e=Aie();return function(){var r=gp(t),i;if(e){var o=gp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Pie(this,i)}}function Pie(t,e){return e&&(Ih(e)==="object"||typeof e=="function")?e:g_(t)}function g_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Aie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gp(t){return gp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},gp(t)}function o2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Cie=function(t){xie(n,t);var e=Tie(n);function n(){var r;Eie(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),o2(g_(r),"priority",70),o2(g_(r),"incompatibleTokens",["H","K","k","t","T"]),r}return Sie(n,[{key:"parse",value:function(i,o,s){switch(o){case"h":return Bt(Zt.hour12h,i);case"ho":return s.ordinalNumber(i,{unit:"hour"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=1&&o<=12}},{key:"set",value:function(i,o,s){var a=i.getUTCHours()>=12;return a&&s<12?i.setUTCHours(s+12,0,0,0):!a&&s===12?i.setUTCHours(0,0,0,0):i.setUTCHours(s,0,0,0),i}}]),n}(ht);function Nh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Nh=function(n){return typeof n}:Nh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Nh(t)}function Rie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lie(t,e,n){return e&&s2(t.prototype,e),n&&s2(t,n),t}function Mie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m_(t,e)}function m_(t,e){return m_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},m_(t,e)}function Oie(t){var e=Iie();return function(){var r=mp(t),i;if(e){var o=mp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return kie(this,i)}}function kie(t,e){return e&&(Nh(e)==="object"||typeof e=="function")?e:v_(t)}function v_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Iie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mp(t){return mp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},mp(t)}function a2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Nie=function(t){Mie(n,t);var e=Oie(n);function n(){var r;Rie(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),a2(v_(r),"priority",70),a2(v_(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return Lie(n,[{key:"parse",value:function(i,o,s){switch(o){case"H":return Bt(Zt.hour23h,i);case"Ho":return s.ordinalNumber(i,{unit:"hour"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=0&&o<=23}},{key:"set",value:function(i,o,s){return i.setUTCHours(s,0,0,0),i}}]),n}(ht);function Dh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dh=function(n){return typeof n}:Dh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Dh(t)}function Die(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fie(t,e,n){return e&&u2(t.prototype,e),n&&u2(t,n),t}function Uie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y_(t,e)}function y_(t,e){return y_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},y_(t,e)}function zie(t){var e=Vie();return function(){var r=vp(t),i;if(e){var o=vp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Bie(this,i)}}function Bie(t,e){return e&&(Dh(e)==="object"||typeof e=="function")?e:__(t)}function __(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vp(t){return vp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},vp(t)}function l2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $ie=function(t){Uie(n,t);var e=zie(n);function n(){var r;Die(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),l2(__(r),"priority",70),l2(__(r),"incompatibleTokens",["h","H","k","t","T"]),r}return Fie(n,[{key:"parse",value:function(i,o,s){switch(o){case"K":return Bt(Zt.hour11h,i);case"Ko":return s.ordinalNumber(i,{unit:"hour"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=0&&o<=11}},{key:"set",value:function(i,o,s){var a=i.getUTCHours()>=12;return a&&s<12?i.setUTCHours(s+12,0,0,0):i.setUTCHours(s,0,0,0),i}}]),n}(ht);function Fh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Fh=function(n){return typeof n}:Fh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Fh(t)}function jie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gie(t,e,n){return e&&c2(t.prototype,e),n&&c2(t,n),t}function Wie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b_(t,e)}function b_(t,e){return b_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},b_(t,e)}function Hie(t){var e=Xie();return function(){var r=yp(t),i;if(e){var o=yp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Yie(this,i)}}function Yie(t,e){return e&&(Fh(e)==="object"||typeof e=="function")?e:w_(t)}function w_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function yp(t){return yp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},yp(t)}function f2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qie=function(t){Wie(n,t);var e=Hie(n);function n(){var r;jie(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),f2(w_(r),"priority",70),f2(w_(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return Gie(n,[{key:"parse",value:function(i,o,s){switch(o){case"k":return Bt(Zt.hour24h,i);case"ko":return s.ordinalNumber(i,{unit:"hour"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=1&&o<=24}},{key:"set",value:function(i,o,s){var a=s<=24?s%24:s;return i.setUTCHours(a,0,0,0),i}}]),n}(ht);function Uh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Uh=function(n){return typeof n}:Uh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Uh(t)}function Zie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kie(t,e,n){return e&&h2(t.prototype,e),n&&h2(t,n),t}function Qie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E_(t,e)}function E_(t,e){return E_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},E_(t,e)}function Jie(t){var e=toe();return function(){var r=_p(t),i;if(e){var o=_p(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return eoe(this,i)}}function eoe(t,e){return e&&(Uh(e)==="object"||typeof e=="function")?e:S_(t)}function S_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function toe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _p(t){return _p=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},_p(t)}function d2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var noe=function(t){Qie(n,t);var e=Jie(n);function n(){var r;Zie(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),d2(S_(r),"priority",60),d2(S_(r),"incompatibleTokens",["t","T"]),r}return Kie(n,[{key:"parse",value:function(i,o,s){switch(o){case"m":return Bt(Zt.minute,i);case"mo":return s.ordinalNumber(i,{unit:"minute"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=0&&o<=59}},{key:"set",value:function(i,o,s){return i.setUTCMinutes(s,0,0),i}}]),n}(ht);function zh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zh=function(n){return typeof n}:zh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zh(t)}function roe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ioe(t,e,n){return e&&p2(t.prototype,e),n&&p2(t,n),t}function ooe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x_(t,e)}function x_(t,e){return x_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},x_(t,e)}function soe(t){var e=uoe();return function(){var r=bp(t),i;if(e){var o=bp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return aoe(this,i)}}function aoe(t,e){return e&&(zh(e)==="object"||typeof e=="function")?e:T_(t)}function T_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uoe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bp(t){return bp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},bp(t)}function g2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var loe=function(t){ooe(n,t);var e=soe(n);function n(){var r;roe(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),g2(T_(r),"priority",50),g2(T_(r),"incompatibleTokens",["t","T"]),r}return ioe(n,[{key:"parse",value:function(i,o,s){switch(o){case"s":return Bt(Zt.second,i);case"so":return s.ordinalNumber(i,{unit:"second"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=0&&o<=59}},{key:"set",value:function(i,o,s){return i.setUTCSeconds(s,0),i}}]),n}(ht);function Bh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bh=function(n){return typeof n}:Bh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bh(t)}function coe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function foe(t,e,n){return e&&m2(t.prototype,e),n&&m2(t,n),t}function hoe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P_(t,e)}function P_(t,e){return P_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},P_(t,e)}function doe(t){var e=goe();return function(){var r=wp(t),i;if(e){var o=wp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return poe(this,i)}}function poe(t,e){return e&&(Bh(e)==="object"||typeof e=="function")?e:A_(t)}function A_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function goe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wp(t){return wp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},wp(t)}function v2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var moe=function(t){hoe(n,t);var e=doe(n);function n(){var r;coe(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),v2(A_(r),"priority",30),v2(A_(r),"incompatibleTokens",["t","T"]),r}return foe(n,[{key:"parse",value:function(i,o){var s=function(u){return Math.floor(u*Math.pow(10,-o.length+3))};return Kt(Ht(o.length,i),s)}},{key:"set",value:function(i,o,s){return i.setUTCMilliseconds(s),i}}]),n}(ht);function Vh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vh=function(n){return typeof n}:Vh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vh(t)}function voe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yoe(t,e,n){return e&&y2(t.prototype,e),n&&y2(t,n),t}function _oe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C_(t,e)}function C_(t,e){return C_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},C_(t,e)}function boe(t){var e=Eoe();return function(){var r=Ep(t),i;if(e){var o=Ep(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return woe(this,i)}}function woe(t,e){return e&&(Vh(e)==="object"||typeof e=="function")?e:R_(t)}function R_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Eoe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ep(t){return Ep=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ep(t)}function _2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Soe=function(t){_oe(n,t);var e=boe(n);function n(){var r;voe(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),_2(R_(r),"priority",10),_2(R_(r),"incompatibleTokens",["t","T","x"]),r}return yoe(n,[{key:"parse",value:function(i,o){switch(o){case"X":return hi(fi.basicOptionalMinutes,i);case"XX":return hi(fi.basic,i);case"XXXX":return hi(fi.basicOptionalSeconds,i);case"XXXXX":return hi(fi.extendedOptionalSeconds,i);case"XXX":default:return hi(fi.extended,i)}}},{key:"set",value:function(i,o,s){return o.timestampIsSet?i:new Date(i.getTime()-s)}}]),n}(ht);function $h(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$h=function(n){return typeof n}:$h=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$h(t)}function xoe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Toe(t,e,n){return e&&b2(t.prototype,e),n&&b2(t,n),t}function Poe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L_(t,e)}function L_(t,e){return L_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},L_(t,e)}function Aoe(t){var e=Roe();return function(){var r=Sp(t),i;if(e){var o=Sp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Coe(this,i)}}function Coe(t,e){return e&&($h(e)==="object"||typeof e=="function")?e:M_(t)}function M_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Roe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sp(t){return Sp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Sp(t)}function w2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Loe=function(t){Poe(n,t);var e=Aoe(n);function n(){var r;xoe(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),w2(M_(r),"priority",10),w2(M_(r),"incompatibleTokens",["t","T","X"]),r}return Toe(n,[{key:"parse",value:function(i,o){switch(o){case"x":return hi(fi.basicOptionalMinutes,i);case"xx":return hi(fi.basic,i);case"xxxx":return hi(fi.basicOptionalSeconds,i);case"xxxxx":return hi(fi.extendedOptionalSeconds,i);case"xxx":default:return hi(fi.extended,i)}}},{key:"set",value:function(i,o,s){return o.timestampIsSet?i:new Date(i.getTime()-s)}}]),n}(ht);function jh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jh=function(n){return typeof n}:jh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},jh(t)}function Moe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ooe(t,e,n){return e&&E2(t.prototype,e),n&&E2(t,n),t}function koe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O_(t,e)}function O_(t,e){return O_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},O_(t,e)}function Ioe(t){var e=Doe();return function(){var r=xp(t),i;if(e){var o=xp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Noe(this,i)}}function Noe(t,e){return e&&(jh(e)==="object"||typeof e=="function")?e:k_(t)}function k_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Doe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xp(t){return xp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},xp(t)}function S2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Foe=function(t){koe(n,t);var e=Ioe(n);function n(){var r;Moe(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),S2(k_(r),"priority",40),S2(k_(r),"incompatibleTokens","*"),r}return Ooe(n,[{key:"parse",value:function(i){return V3(i)}},{key:"set",value:function(i,o,s){return[new Date(s*1e3),{timestampIsSet:!0}]}}]),n}(ht);function Gh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gh=function(n){return typeof n}:Gh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gh(t)}function Uoe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zoe(t,e,n){return e&&x2(t.prototype,e),n&&x2(t,n),t}function Boe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I_(t,e)}function I_(t,e){return I_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},I_(t,e)}function Voe(t){var e=joe();return function(){var r=Tp(t),i;if(e){var o=Tp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return $oe(this,i)}}function $oe(t,e){return e&&(Gh(e)==="object"||typeof e=="function")?e:N_(t)}function N_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function joe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Tp(t){return Tp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Tp(t)}function T2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Goe=function(t){Boe(n,t);var e=Voe(n);function n(){var r;Uoe(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),T2(N_(r),"priority",20),T2(N_(r),"incompatibleTokens","*"),r}return zoe(n,[{key:"parse",value:function(i){return V3(i)}},{key:"set",value:function(i,o,s){return[new Date(s),{timestampIsSet:!0}]}}]),n}(ht),Woe={G:new Wte,y:new Qte,Y:new one,R:new hne,u:new _ne,Q:new Pne,q:new kne,M:new Bne,L:new Yne,w:new tre,I:new lre,d:new yre,D:new Tre,E:new Ore,e:new zre,c:new Hre,i:new eie,a:new aie,b:new pie,B:new wie,h:new Cie,H:new Nie,K:new $ie,k:new qie,m:new noe,s:new loe,S:new moe,X:new Soe,x:new Loe,t:new Foe,T:new Goe};function Wh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wh=function(n){return typeof n}:Wh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Wh(t)}function P2(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=Hoe(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){n=t[Symbol.iterator]()},n:function(){var l=n.next();return o=l.done,l},e:function(l){s=!0,a=l},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(s)throw a}}}}function Hoe(t,e){if(!!t){if(typeof t=="string")return A2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A2(t,e)}}function A2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Yoe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xoe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qoe=/^'([^]*?)'?$/,Zoe=/''/g,Koe=/\S/,Qoe=/[a-zA-Z]/;function Joe(t,e,n,r){var i,o,s,a,u,l,c,f,h,d,g,m,S,_,y,w,T,R;bt(3,arguments);var C=String(t),D=String(e),F=vu(),W=(i=(o=r==null?void 0:r.locale)!==null&&o!==void 0?o:F.locale)!==null&&i!==void 0?i:F3;if(!W.match)throw new RangeError("locale must contain match property");var j=zn((s=(a=(u=(l=r==null?void 0:r.firstWeekContainsDate)!==null&&l!==void 0?l:r==null||(c=r.locale)===null||c===void 0||(f=c.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&u!==void 0?u:F.firstWeekContainsDate)!==null&&a!==void 0?a:(h=F.locale)===null||h===void 0||(d=h.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(j>=1&&j<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var H=zn((g=(m=(S=(_=r==null?void 0:r.weekStartsOn)!==null&&_!==void 0?_:r==null||(y=r.locale)===null||y===void 0||(w=y.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&S!==void 0?S:F.weekStartsOn)!==null&&m!==void 0?m:(T=F.locale)===null||T===void 0||(R=T.options)===null||R===void 0?void 0:R.weekStartsOn)!==null&&g!==void 0?g:0);if(!(H>=0&&H<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(D==="")return C===""?St(n):new Date(NaN);var pe={firstWeekContainsDate:j,weekStartsOn:H,locale:W},ue=[new Dte],se=D.match(Xoe).map(function(be){var J=be[0];if(J in Py){var Pe=Py[J];return Pe(be,W.formatLong)}return be}).join("").match(Yoe),Ce=[],De=P2(se),He;try{var ae=function(){var J=He.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&D3(J)&&Hd(J,D,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&N3(J)&&Hd(J,D,t);var Pe=J[0],rt=Woe[Pe];if(rt){var ze=rt.incompatibleTokens;if(Array.isArray(ze)){var Ke=Ce.find(function(Qt){return ze.includes(Qt.token)||Qt.token===Pe});if(Ke)throw new RangeError("The format string mustn't contain `".concat(Ke.fullToken,"` and `").concat(J,"` at the same time"))}else if(rt.incompatibleTokens==="*"&&Ce.length>0)throw new RangeError("The format string mustn't contain `".concat(J,"` and any other token at the same time"));Ce.push({token:Pe,fullToken:J});var gt=rt.run(C,J,W.match,pe);if(!gt)return{v:new Date(NaN)};ue.push(gt.setter),C=gt.rest}else{if(Pe.match(Qoe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Pe+"`");if(J==="''"?J="'":Pe==="'"&&(J=ese(J)),C.indexOf(J)===0)C=C.slice(J.length);else return{v:new Date(NaN)}}};for(De.s();!(He=De.n()).done;){var ve=ae();if(Wh(ve)==="object")return ve.v}}catch(be){De.e(be)}finally{De.f()}if(C.length>0&&Koe.test(C))return new Date(NaN);var G=ue.map(function(be){return be.priority}).sort(function(be,J){return J-be}).filter(function(be,J,Pe){return Pe.indexOf(be)===J}).map(function(be){return ue.filter(function(J){return J.priority===be}).sort(function(J,Pe){return Pe.subPriority-J.subPriority})}).map(function(be){return be[0]}),X=St(n);if(isNaN(X.getTime()))return new Date(NaN);var O=L3(X,C3(X)),q={},Q=P2(G),de;try{for(Q.s();!(de=Q.n()).done;){var le=de.value;if(!le.validate(O,pe))return new Date(NaN);var _e=le.set(O,q,pe);Array.isArray(_e)?(O=_e[0],Mte(q,_e[1])):O=_e}}catch(be){Q.e(be)}finally{Q.f()}return O}function ese(t){return t.match(qoe)[1].replace(Zoe,"'")}function Nle(t,e,n){return bt(2,arguments),R3(Joe(t,e,new Date,n))}const tse=`#define SHADER_NAME arc-layer-vertex-shader

attribute vec3 positions;
attribute vec4 instanceSourceColors;
attribute vec4 instanceTargetColors;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceTargetPositions64Low;
attribute vec3 instancePickingColors;
attribute float instanceWidths;
attribute float instanceHeights;
attribute float instanceTilts;

uniform bool greatCircle;
uniform bool useShortestPath;
uniform float numSegments;
uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;
varying float isValid;

float paraboloid(float distance, float sourceZ, float targetZ, float ratio) {
  // d: distance on the xy plane
  // r: ratio of the current point
  // p: ratio of the peak of the arc
  // h: height multiplier
  // z = f(r) = sqrt(r * (p * 2 - r)) * d * h
  // f(0) = 0
  // f(1) = dz

  float deltaZ = targetZ - sourceZ;
  float dh = distance * instanceHeights;
  if (dh == 0.0) {
    return sourceZ + deltaZ * ratio;
  }
  float unitZ = deltaZ / dh;
  float p2 = unitZ * unitZ + 1.0;

  // sqrt does not deal with negative values, manually flip source and target if delta.z < 0
  float dir = step(deltaZ, 0.0);
  float z0 = mix(sourceZ, targetZ, dir);
  float r = mix(ratio, 1.0 - ratio, dir);
  return sqrt(r * (p2 - r)) * dh + z0;
}

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));
}

vec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {
  float distance = length(source.xy - target.xy);
  float z = paraboloid(distance, source.z, target.z, segmentRatio);

  float tiltAngle = radians(instanceTilts);
  vec2 tiltDirection = normalize(target.xy - source.xy);
  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);

  return vec3(
    mix(source.xy, target.xy, segmentRatio) + tilt,
    z * cos(tiltAngle)
  );
}

/* Great circle interpolation
 * http://www.movable-type.co.uk/scripts/latlong.html
 */
float getAngularDist (vec2 source, vec2 target) {
  vec2 sourceRadians = radians(source);
  vec2 targetRadians = radians(target);
  vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);
  vec2 shd_sq = sin_half_delta * sin_half_delta;

  float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;
  return 2.0 * asin(sqrt(a));
}

vec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {
  vec2 lngLat;

  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(abs(angularDist - PI) < 0.001) {
    lngLat = (1.0 - t) * source.xy + t * target.xy;
  } else {
    float a = sin((1.0 - t) * angularDist);
    float b = sin(t * angularDist);
    vec3 p = source3D.yxz * a + target3D.yxz * b;
    lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));
  }

  float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);

  return vec3(lngLat, z);
}

/* END GREAT CIRCLE */

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  float segmentIndex = positions.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));
  float nextSegmentRatio = getSegmentRatio(min(numSegments - 1.0, segmentIndex + 1.0));

  // if it's the first point, use next - current as direction
  // otherwise use current - prev
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  isValid = 1.0;

  uv = vec2(segmentRatio, positions.y);
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  vec4 curr;
  vec4 next;
  vec3 source;
  vec3 target;

  if ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));
    target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));
    float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);

    vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);
    vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);
    vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);

    if (abs(currPos.x - prevPos.x) > 180.0) {
      indexDir = -1.0;
      isValid = 0.0;
    } else if (abs(currPos.x - nextPos.x) > 180.0) {
      indexDir = 1.0;
      isValid = 0.0;
    }
    nextPos = indexDir < 0.0 ? prevPos : nextPos;
    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;

    if (isValid == 0.0) {
      // split at the 180th meridian
      nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;
      float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);
      currPos = mix(currPos, nextPos, t);
      segmentRatio = mix(segmentRatio, nextSegmentRatio, t);
    }

    vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);
    vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);
  
    curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);
    next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));
  
  } else {
    vec3 source_world = instanceSourcePositions;
    vec3 target_world = instanceTargetPositions;
    if (useShortestPath) {
      source_world.x = mod(source_world.x + 180., 360.0) - 180.;
      target_world.x = mod(target_world.x + 180., 360.0) - 180.;

      float deltaLng = target_world.x - source_world.x;
      if (deltaLng > 180.) target_world.x -= 360.;
      if (deltaLng < -180.) source_world.x -= 360.;
    }
    source = project_position(source_world, instanceSourcePositions64Low);
    target = project_position(target_world, instanceTargetPositions64Low);

    // common x at longitude=-180
    float antiMeridianX = 0.0;

    if (useShortestPath) {
      if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
        antiMeridianX = -(project_uCoordinateOrigin.x + 180.) / 360. * TILE_SIZE;
      }
      float thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);

      if (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {
        isValid = 0.0;
        indexDir = sign(segmentRatio - thresholdRatio);
        segmentRatio = thresholdRatio;
      }
    }

    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;
    vec3 currPos = interpolateFlat(source, target, segmentRatio);
    vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);

    if (useShortestPath) {
      if (nextPos.x < antiMeridianX) {
        currPos.x += TILE_SIZE;
        nextPos.x += TILE_SIZE;
      }
    }

    curr = project_common_position_to_clipspace(vec4(currPos, 1.0));
    next = project_common_position_to_clipspace(vec4(nextPos, 1.0));
    geometry.position = vec4(currPos, 1.0);
  }

  // Multiply out width and clamp to limits
  // mercator pixels are interpreted as screen pixels
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  vec3 offset = vec3(
    getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);
  vColor = vec4(color.rgb, color.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,nse=`#define SHADER_NAME arc-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;
varying float isValid;

void main(void) {
  if (isValid == 0.0) {
    discard;
  }

  gl_FragColor = vColor;
  geometry.uv = uv;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,Pp=[0,0,0,255],rse={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getSourceColor:{type:"accessor",value:Pp},getTargetColor:{type:"accessor",value:Pp},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class G3 extends tr{constructor(...e){super(...e),b(this,"state",void 0)}getShaders(){return super.getShaders({vs:tse,fs:nse,modules:[wi,Ei]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getSourceColor",defaultValue:Pp},instanceTargetColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getTargetColor",defaultValue:Pp},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{widthUnits:n,widthScale:r,widthMinPixels:i,widthMaxPixels:o,greatCircle:s,wrapLongitude:a}=this.props;this.state.model.setUniforms(e).setUniforms({greatCircle:s,widthUnits:gr[n],widthScale:r,widthMinPixels:i,widthMaxPixels:o,useShortestPath:a}).draw()}_getModel(e){let n=[];for(let o=0;o<50;o++)n=n.concat([o,1,0,o,-1,0]);const i=new Rr(e,{...this.getShaders(),id:this.props.id,geometry:new Qr({drawMode:5,attributes:{positions:new Float32Array(n)}}),isInstanced:!0});return i.setUniforms({numSegments:50}),i}}b(G3,"layerName","ArcLayer");b(G3,"defaultProps",rse);const ise=new Uint16Array([0,2,1,0,3,2]),ose=new Float32Array([0,1,0,0,1,0,1,1]);function sse(t,e){if(!e)return ase(t);const n=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),r=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),i=Math.ceil(n/e)+1,o=Math.ceil(r/e)+1,s=(i-1)*(o-1)*6,a=new Uint32Array(s),u=new Float32Array(i*o*2),l=new Float64Array(i*o*3);let c=0,f=0;for(let h=0;h<i;h++){const d=h/(i-1);for(let g=0;g<o;g++){const m=g/(o-1),S=use(t,d,m);l[c*3+0]=S[0],l[c*3+1]=S[1],l[c*3+2]=S[2]||0,u[c*2+0]=d,u[c*2+1]=1-m,h>0&&g>0&&(a[f++]=c-o,a[f++]=c-o-1,a[f++]=c-1,a[f++]=c-o,a[f++]=c-1,a[f++]=c),c++}}return{vertexCount:s,positions:l,indices:a,texCoords:u}}function ase(t){const e=new Float64Array(12);for(let n=0;n<t.length;n++)e[n*3+0]=t[n][0],e[n*3+1]=t[n][1],e[n*3+2]=t[n][2]||0;return{vertexCount:6,positions:e,indices:ise,texCoords:ose}}function use(t,e,n){return ls(ls(t[0],t[1],n),ls(t[3],t[2],n),e)}const lse=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,cse=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,fse=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  return mix(transparentColor, vec4(color, 1.0), alpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(cse,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`),hse={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:at.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};class W3 extends tr{constructor(...e){super(...e),b(this,"state",void 0)}getShaders(){return super.getShaders({vs:lse,fs:fse,modules:[wi,Ei]})}initializeState(){const e=this.getAttributeManager();e.remove(["instancePickingColors"]);const n=!0;e.add({indices:{size:1,isIndexed:!0,update:r=>r.value=this.state.mesh.indices,noAlloc:n},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:r=>r.value=this.state.mesh.positions,noAlloc:n},texCoords:{size:2,update:r=>r.value=this.state.mesh.texCoords,noAlloc:n}})}updateState({props:e,oldProps:n,changeFlags:r}){const i=this.getAttributeManager();if(r.extensionsChanged){var o;const{gl:s}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(s),i.invalidateAll()}if(e.bounds!==n.bounds){const s=this.state.mesh,a=this._createMesh();this.state.model.setVertexCount(a.vertexCount);for(const u in a)s&&s[u]!==a[u]&&i.invalidate(u);this.setState({mesh:a,...this._getCoordinateUniforms()})}else e._imageCoordinateSystem!==n._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(e){const{image:n}=this.props,r=e.info;if(!r.color||!n)return r.bitmap=null,r;const{width:i,height:o}=n;r.index=0;const s=dse(r.color),a=[Math.floor(s[0]*i),Math.floor(s[1]*o)];return r.bitmap={size:{width:i,height:o},uv:s,pixel:a},r}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(e){super._updateAutoHighlight({...e,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:e}=this.props;let n=e;return C2(e)&&(n=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]),sse(n,this.context.viewport.resolution)}_getModel(e){return e?new Rr(e,{...this.getShaders(),id:this.props.id,geometry:new Qr({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(e){const{uniforms:n,moduleParameters:r}=e,{model:i,coordinateConversion:o,bounds:s,disablePicking:a}=this.state,{image:u,desaturate:l,transparentColor:c,tintColor:f}=this.props;r.pickingActive&&a||u&&i&&i.setUniforms(n).setUniforms({bitmapTexture:u,desaturate:l,transparentColor:c.map(h=>h/255),tintColor:f.slice(0,3).map(h=>h/255),coordinateConversion:o,bounds:s}).draw()}_getCoordinateUniforms(){const{LNGLAT:e,CARTESIAN:n,DEFAULT:r}=at;let{_imageCoordinateSystem:i}=this.props;if(i!==r){const{bounds:o}=this.props;if(!C2(o))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const s=this.context.viewport.resolution?e:n;if(i=i===e?e:n,i===e&&s===n)return{coordinateConversion:-1,bounds:o};if(i===n&&s===e){const a=eu([o[0],o[1]]),u=eu([o[2],o[3]]);return{coordinateConversion:1,bounds:[a[0],a[1],u[0],u[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}b(W3,"layerName","BitmapLayer");b(W3,"defaultProps",hse);function dse(t){const[e,n,r]=t,i=(r&240)/256,o=(r&15)/16;return[(e+o)/256,(n+i)/256]}function C2(t){return Number.isFinite(t[0])}const pse=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  // convert size in meters to pixels, then scaled and clamp
 
  // project meters to pixels and clamp to limits 
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );

  // scale icon height to match instanceSize
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;

  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,gse=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);

  // if colorMode == 0, use pixel color from the texture
  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  // Take the global opacity and the alpha from vColor into account for the alpha component
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,mse=1024,vse=4,R2=()=>{},L2={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function yse(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function _se(t,e,n,r){return n===e.width&&r===e.height?e:(t.canvas.height=r,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,r),t.canvas)}function ql(t){return t&&(t.id||t.url)}function bse(t,e,n,r){const i=t.width,o=t.height,s=new Un(t.gl,{width:e,height:n,parameters:r});return qW(t,s,{targetY:0,width:i,height:o}),t.delete(),s}function M2(t,e,n){for(let r=0;r<e.length;r++){const{icon:i,xOffset:o}=e[r],s=ql(i);t[s]={...i,x:o,y:n}}}function wse({icons:t,buffer:e,mapping:n={},xOffset:r=0,yOffset:i=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let u=0;u<t.length;u++){const l=t[u],c=ql(l);if(!n[c]){const{height:f,width:h}=l;r+h+e>s&&(M2(n,a,i),r=0,i=o+i+e,o=0,a=[]),a.push({icon:l,xOffset:r}),r=r+h+e,o=Math.max(o,f)}}return a.length>0&&M2(n,a,i),{mapping:n,rowHeight:o,xOffset:r,yOffset:i,canvasWidth:s,canvasHeight:yse(o+i+e)}}function Ese(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:i,objectInfo:o}=Lc(t);for(const s of i){o.index++;const a=e(s,o),u=ql(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!r[u]&&(!n[u]||a.url!==n[u].url)&&(r[u]={...a,source:s,sourceIndex:o.index})}return r}class Sse{constructor(e,{onUpdate:n=R2,onError:r=R2}){b(this,"gl",void 0),b(this,"onUpdate",void 0),b(this,"onError",void 0),b(this,"_loadOptions",null),b(this,"_texture",null),b(this,"_externalTexture",null),b(this,"_mapping",{}),b(this,"_textureParameters",null),b(this,"_pendingCount",0),b(this,"_autoPacking",!1),b(this,"_xOffset",0),b(this,"_yOffset",0),b(this,"_rowHeight",0),b(this,"_buffer",vse),b(this,"_canvasWidth",mse),b(this,"_canvasHeight",0),b(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=r}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?ql(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:i,textureParameters:o}){if(e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),i&&(this._mapping=i),r){var s;(s=this._texture)===null||s===void 0||s.delete(),this._texture=null,this._externalTexture=r}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const r=Object.values(Ese(e,n,this._mapping)||{});if(r.length>0){const{mapping:i,xOffset:o,yOffset:s,rowHeight:a,canvasHeight:u}=wse({icons:r,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=i,this._xOffset=o,this._yOffset=s,this._canvasHeight=u,this._texture||(this._texture=new Un(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||L2})),this._texture.height!==this._canvasHeight&&(this._texture=bse(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||L2)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(r)}}_loadIcons(e){const n=this._canvas.getContext("2d");for(const r of e)this._pendingCount++,kd(r.url,ZM,this._loadOptions).then(i=>{const o=ql(r),{x:s,y:a,width:u,height:l}=this._mapping[o],c=_se(n,i,u,l);this._texture.setSubImageData({data:c,x:s,y:a,width:u,height:l}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const H3=[0,0,0,255],xse={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:H3},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class kg extends tr{constructor(...e){super(...e),b(this,"state",void 0)}getShaders(){return super.getShaders({vs:pse,fs:gse,modules:[wi,Ei]})}initializeState(){this.state={iconManager:new Sse(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:H3},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:a,data:u,getIcon:l,textureParameters:c}=n,{iconManager:f}=this.state,h=s||this.internalState.isAsyncPropLoading("iconAtlas");if(f.setProps({loadOptions:n.loadOptions,autoPacking:!h,iconAtlas:s,iconMapping:h?a:null,textureParameters:c}),h?r.iconMapping!==n.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&f.packIcons(u,l),i.extensionsChanged){var d;const{gl:g}=this.context;(d=this.state.model)===null||d===void 0||d.delete(),this.state.model=this._getModel(g),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:u}=this.state,l=u.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:gr[o],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:s,alphaCutoff:a}).draw()}_getModel(e){const n=[-1,-1,-1,1,1,1,1,-1];return new Rr(e,{...this.getShaders(),id:this.props.id,geometry:new Qr({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const r=(n=this.getCurrentLayer())===null||n===void 0?void 0:n.props.onIconError;r?r(e):$e.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:r,anchorX:i=n/2,anchorY:o=r/2}=this.state.iconManager.getIconMapping(e);return[n/2-i,r/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:r,width:i,height:o}=this.state.iconManager.getIconMapping(e);return[n,r,i,o]}}b(kg,"defaultProps",xse);b(kg,"layerName","IconLayer");const Tse=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      // Line is not split, abort
      gl_Position = vec4(0.);
      return;
    }
  }

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  
  // linear interpolation of source & target to pick right coord
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  // Multiply out width and clamp to limits
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Pse=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,Ase=[0,0,0,255],Cse={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getColor:{type:"accessor",value:Ase},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class Y3 extends tr{getShaders(){return super.getShaders({vs:Tse,fs:Pse,modules:[wi,Ei]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{widthUnits:n,widthScale:r,widthMinPixels:i,widthMaxPixels:o,wrapLongitude:s}=this.props;this.state.model.setUniforms(e).setUniforms({widthUnits:gr[n],widthScale:r,widthMinPixels:i,widthMaxPixels:o,useShortestPath:s?1:0}).draw(),s&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(e){const n=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new Rr(e,{...this.getShaders(),id:this.props.id,geometry:new Qr({drawMode:5,attributes:{positions:new Float32Array(n)}}),isInstanced:!0})}}b(Y3,"layerName","LineLayer");b(Y3,"defaultProps",Cse);const Rse=`#define SHADER_NAME point-cloud-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceNormals;
attribute vec4 instanceColors;
attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusPixels;
uniform int sizeUnits;

varying vec4 vColor;
varying vec2 unitPosition;

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.normal = project_normal(instanceNormals);

  // position on the containing square in [-1, 1] space
  unitPosition = positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  // Find the center of the point and add the current vertex
  vec3 offset = vec3(positions.xy * project_size_to_pixel(radiusPixels, sizeUnits), 0.0);
  DECKGL_FILTER_SIZE(offset, geometry);

  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);
  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply lighting
  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);

  // Apply opacity to instance color, or return instance picking color
  vColor = vec4(lightColor, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Lse=`#define SHADER_NAME point-cloud-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 unitPosition;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition);

  if (distToCenter > 1.0) {
    discard;
  }

  gl_FragColor = vColor;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,X3=[0,0,0,255],q3=[0,0,1],Mse={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:t=>t.position},getNormal:{type:"accessor",value:q3},getColor:{type:"accessor",value:X3},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};function Ose(t){const{header:e,attributes:n}=t;!e||!n||(t.length=e.vertexCount,n.POSITION&&(n.instancePositions=n.POSITION),n.NORMAL&&(n.instanceNormals=n.NORMAL),n.COLOR_0&&(n.instanceColors=n.COLOR_0))}class Z3 extends tr{getShaders(){return super.getShaders({vs:Rse,fs:Lse,modules:[wi,Mb,Ei]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:q3},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:X3}})}updateState(e){const{changeFlags:n,props:r}=e;if(super.updateState(e),n.extensionsChanged){var i;const{gl:o}=this.context;(i=this.state.model)===null||i===void 0||i.delete(),this.state.model=this._getModel(o),this.getAttributeManager().invalidateAll()}n.dataChanged&&Ose(r.data)}draw({uniforms:e}){const{pointSize:n,sizeUnits:r}=this.props;this.state.model.setUniforms(e).setUniforms({sizeUnits:gr[r],radiusPixels:n}).draw()}_getModel(e){const n=[];for(let r=0;r<3;r++){const i=r/3*Math.PI*2;n.push(Math.cos(i)*2,Math.sin(i)*2,0)}return new Rr(e,{...this.getShaders(),id:this.props.id,geometry:new Qr({drawMode:4,attributes:{positions:new Float32Array(n)}}),isInstanced:!0})}}b(Z3,"layerName","PointCloudLayer");b(Z3,"defaultProps",Mse);const kse=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  
  // Multiply out line width and clamp to limits
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;

  // Expand geometry to accomodate edge smoothing
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;

  // position on the containing square in [-1, 1] space
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  }

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,Ise=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (filled) {
    gl_FragColor = vFillColor;
  } else {
    discard;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,O2=[0,0,0,255],Nse={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:O2},getLineColor:{type:"accessor",value:O2},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class qb extends tr{getShaders(){return super.getShaders({vs:kse,fs:Ise,modules:[wi,Ei]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,stroked:s,filled:a,billboard:u,antialiasing:l,lineWidthUnits:c,lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:s?1:0,filled:a,billboard:u,antialiasing:l,radiusUnits:gr[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:gr[c],lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}_getModel(e){const n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new Rr(e,{...this.getShaders(),id:this.props.id,geometry:new Qr({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0})}}b(qb,"defaultProps",Nse);b(qb,"layerName","ScatterplotLayer");const Zb={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function Kb(t,e,n={}){return Dse(t,n)!==e?(Use(t,n),!0):!1}function Dse(t,e={}){return Math.sign(Fse(t,e))}function Fse(t,e={}){const{start:n=0,end:r=t.length}=e,i=e.size||2;let o=0;for(let s=n,a=r-i;s<r;s+=i)o+=(t[s]-t[a])*(t[s+1]+t[a+1]),a=s;return o/2}function Use(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,o=(r-n)/i,s=Math.floor(o/2);for(let a=0;a<s;++a){const u=n+a*i,l=n+(o-1-a)*i;for(let c=0;c<i;++c){const f=t[u+c];t[u+c]=t[l+c],t[l+c]=f}}}function Wr(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let o=0;o<n;o++)if(t[r-n+o]!==e[o]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function D_(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function Zl(t,e,n,r,i=[]){const o=r+e*n;for(let s=0;s<n;s++)i[s]=t[o+s];return i}function F_(t,e,n,r,i=[]){let o,s;if(n&8)o=(r[3]-t[1])/(e[1]-t[1]),s=3;else if(n&4)o=(r[1]-t[1])/(e[1]-t[1]),s=1;else if(n&2)o=(r[2]-t[0])/(e[0]-t[0]),s=2;else if(n&1)o=(r[0]-t[0])/(e[0]-t[0]),s=0;else return null;for(let a=0;a<t.length;a++)i[a]=(s&1)===a?r[s]:o*(e[a]-t[a])+t[a];return i}function Hh(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function K3(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:a=t.length}=e||{},u=(a-s)/n;let l=[];const c=[l],f=Zl(t,0,n,s);let h,d;const g=J3(f,i,o,[]),m=[];Wr(l,f);for(let S=1;S<u;S++){for(h=Zl(t,S,n,s,h),d=Hh(h,g);d;){F_(f,h,d,g,m);const _=Hh(m,g);_&&(F_(f,m,_,g,m),d=_),Wr(l,m),D_(f,m),Bse(g,i,d),r&&l.length>n&&(l=[],c.push(l),Wr(l,f)),d=Hh(h,g)}Wr(l,h),D_(f,h)}return r?c:c[0]}const k2=0,zse=1;function Mf(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function Q3(t,e=null,n){if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:s=!1}=n||{},a=[],u=[{pos:t,types:s?new Array(t.length/r).fill(zse):null,holes:e||[]}],l=[[],[]];let c=[];for(;u.length;){const{pos:f,types:h,holes:d}=u.shift();Vse(f,r,d[0]||f.length,l),c=J3(l[0],i,o,c);const g=Hh(l[1],c);if(g){let m=I2(f,h,r,0,d[0]||f.length,c,g);const S={pos:m[0].pos,types:m[0].types,holes:[]},_={pos:m[1].pos,types:m[1].types,holes:[]};u.push(S,_);for(let y=0;y<d.length;y++)m=I2(f,h,r,d[y],d[y+1]||f.length,c,g),m[0]&&(S.holes.push(S.pos.length),S.pos=Mf(S.pos,m[0].pos),s&&(S.types=Mf(S.types,m[0].types))),m[1]&&(_.holes.push(_.pos.length),_.pos=Mf(_.pos,m[1].pos),s&&(_.types=Mf(_.types,m[1].types)))}else{const m={positions:f};s&&(m.edgeTypes=h),d.length&&(m.holeIndices=d),a.push(m)}}return a}function I2(t,e,n,r,i,o,s){const a=(i-r)/n,u=[],l=[],c=[],f=[],h=[];let d,g,m;const S=Zl(t,a-1,n,r);let _=Math.sign(s&8?S[1]-o[3]:S[0]-o[2]),y=e&&e[a-1],w=0,T=0;for(let R=0;R<a;R++)d=Zl(t,R,n,r,d),g=Math.sign(s&8?d[1]-o[3]:d[0]-o[2]),m=e&&e[r/n+R],g&&_&&_!==g&&(F_(S,d,s,o,h),Wr(u,h)&&c.push(y),Wr(l,h)&&f.push(y)),g<=0?(Wr(u,d)&&c.push(m),w-=g):c.length&&(c[c.length-1]=k2),g>=0?(Wr(l,d)&&f.push(m),T+=g):f.length&&(f[f.length-1]=k2),D_(S,d),_=g,y=m;return[w?{pos:u,types:e&&c}:null,T?{pos:l,types:e&&f}:null]}function J3(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],o=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=o,r[2]=i+e,r[3]=o+e,r}function Bse(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function Vse(t,e,n,r){let i=1/0,o=-1/0,s=1/0,a=-1/0;for(let u=0;u<n;u+=e){const l=t[u],c=t[u+1];i=l<i?l:i,o=l>o?l:o,s=c<s?c:s,a=c>a?c:a}return r[0][0]=i,r[0][1]=s,r[1][0]=o,r[1][1]=a,r}const $se=85.051129;function jse(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:o=!0}=e||{},s=t.slice(r,i);ek(s,n,0,i-r);const a=K3(s,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const u of a)tk(u,n);return a}function Gse(t,e=null,n){const{size:r=2,normalize:i=!0,edgeTypes:o=!1}=n||{};e=e||[];const s=[],a=[];let u=0,l=0;for(let f=0;f<=e.length;f++){const h=e[f]||t.length,d=l,g=Wse(t,r,u,h);for(let m=g;m<h;m++)s[l++]=t[m];for(let m=u;m<g;m++)s[l++]=t[m];ek(s,r,d,l),Hse(s,r,d,l,n==null?void 0:n.maxLatitude),u=h,a[f]=l}a.pop();const c=Q3(s,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const f of c)tk(f.positions,r);return c}function Wse(t,e,n,r){let i=-1,o=-1;for(let s=n+1;s<r;s+=e){const a=Math.abs(t[s]);a>i&&(i=a,o=s-1)}return o}function Hse(t,e,n,r,i=$se){const o=t[n],s=t[r-e];if(Math.abs(o-s)>180){const a=Zl(t,0,e,n);a[0]+=Math.round((s-o)/360)*360,Wr(t,a),a[1]=Math.sign(a[1])*i,Wr(t,a),a[0]=o,Wr(t,a)}}function ek(t,e,n,r){let i=t[0],o;for(let s=n;s<r;s+=e){o=t[s];const a=o-i;(a>180||a<-180)&&(o-=Math.round(a/360)*360),t[s]=i=o}}function tk(t,e){let n;const r=t.length/e;for(let o=0;o<r&&(n=t[o*e],(n+180)%360===0);o++);const i=-Math.round(n/360)*360;if(i!==0)for(let o=0;o<r;o++)t[o*e]+=i}class Yse extends Qr{constructor(e){const{id:n=vi("column-geometry")}=e,{indices:r,attributes:i}=Xse(e);super({...e,id:n,indices:r,attributes:i})}}function Xse(t){const{radius:e,height:n=1,nradial:r=10}=t;let{vertices:i}=t;i&&($e.assert(i.length>=r),i=i.flatMap(d=>[d[0],d[1]]),Kb(i,Zb.COUNTER_CLOCKWISE));const o=n>0,s=r+1,a=o?s*3+1:r,u=Math.PI*2/r,l=new Uint16Array(o?r*3*2:0),c=new Float32Array(a*3),f=new Float32Array(a*3);let h=0;if(o){for(let d=0;d<s;d++){const g=d*u,m=d%r,S=Math.sin(g),_=Math.cos(g);for(let y=0;y<2;y++)c[h+0]=i?i[m*2]:_*e,c[h+1]=i?i[m*2+1]:S*e,c[h+2]=(1/2-y)*n,f[h+0]=i?i[m*2]:_,f[h+1]=i?i[m*2+1]:S,h+=3}c[h+0]=c[h-3],c[h+1]=c[h-2],c[h+2]=c[h-1],h+=3}for(let d=o?0:1;d<s;d++){const g=Math.floor(d/2)*Math.sign(.5-d%2),m=g*u,S=(g+r)%r,_=Math.sin(m),y=Math.cos(m);c[h+0]=i?i[S*2]:y*e,c[h+1]=i?i[S*2+1]:_*e,c[h+2]=n/2,f[h+2]=1,h+=3}if(o){let d=0;for(let g=0;g<r;g++)l[d++]=g*2+0,l[d++]=g*2+2,l[d++]=g*2+0,l[d++]=g*2+1,l[d++]=g*2+1,l[d++]=g*2+3}return{indices:l,attributes:{POSITION:{size:3,value:c},NORMAL:{size:3,value:f}}}}const qse=`#version 300 es

#define SHADER_NAME column-layer-vertex-shader

in vec3 positions;
in vec3 normals;

in vec3 instancePositions;
in float instanceElevations;
in vec3 instancePositions64Low;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in float instanceStrokeWidths;

in vec3 instancePickingColors;

// Custom uniforms
uniform float opacity;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform bool extruded;
uniform bool stroked;
uniform bool isStroke;
uniform float coverage;
uniform float elevationScale;
uniform float edgeDistance;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform int radiusUnits;
uniform int widthUnits;

// Result
out vec4 vColor;
#ifdef FLAT_SHADING
out vec4 position_commonspace;
#endif

void main(void) {
  geometry.worldPosition = instancePositions;

  vec4 color = isStroke ? instanceLineColors : instanceFillColors;
  // rotate primitive position and normal
  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));

  // calculate elevation, if 3d not enabled set to 0
  // cylindar gemoetry height are between -1.0 to 1.0, transform it to between 0, 1
  float elevation = 0.0;
  // calculate stroke offset
  float strokeOffsetRatio = 1.0;

  if (extruded) {
    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;
  } else if (stroked) {
    float widthPixels = clamp(
      project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
      widthMinPixels, widthMaxPixels) / 2.0;
    float halfOffset = project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);
    if (isStroke) {
      strokeOffsetRatio -= sign(positions.z) * halfOffset;
    } else {
      strokeOffsetRatio -= halfOffset;
    }
  }

  // if alpha == 0.0 or z < 0.0, do not render element
  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);
  float dotRadius = radius * coverage * shouldRender;

  geometry.pickingColor = instancePickingColors;

  // project center of column
  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);
  vec3 centroidPosition64Low = instancePositions64Low;
  vec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius;
  if (radiusUnits == UNIT_METERS) {
    offset = project_size(offset);
  }
  vec3 pos = vec3(offset, 0.);
  DECKGL_FILTER_SIZE(pos, geometry);

  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);
  geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Light calculations
  if (extruded && !isStroke) {
#ifdef FLAT_SHADING
    position_commonspace = geometry.position;
    vColor = vec4(color.rgb, color.a * opacity);
#else
    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);
    vColor = vec4(lightColor, color.a * opacity);
#endif
  } else {
    vColor = vec4(color.rgb, color.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Zse=`#version 300 es
#define SHADER_NAME column-layer-fragment-shader

precision highp float;

uniform vec3 project_uCameraPosition;
uniform bool extruded;
uniform bool isStroke;

out vec4 fragColor;

in vec4 vColor;
#ifdef FLAT_SHADING
in vec4 position_commonspace;
#endif

void main(void) {
  fragColor = vColor;
#ifdef FLAT_SHADING
  if (extruded && !isStroke && !picking_uActive) {
    vec3 normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
    fragColor.rgb = lighting_getLightColor(vColor.rgb, project_uCameraPosition, position_commonspace.xyz, normal);
  }
#endif
  DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,Ap=[0,0,0,255],Kse={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},radiusUnits:"meters",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:t=>t.position},getFillColor:{type:"accessor",value:Ap},getLineColor:{type:"accessor",value:Ap},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Qb extends tr{getShaders(){const{gl:e}=this.context,n=!Je(e),r={},i=this.props.flatShading&&fO(e,At.GLSL_DERIVATIVES);return i&&(r.FLAT_SHADING=1),super.getShaders({vs:qse,fs:Zse,defines:r,transpileToGLSL100:n,modules:[wi,i?mq:Mb,Ei]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getFillColor",defaultValue:Ap},instanceLineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getLineColor",defaultValue:Ap},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e,o=i.extensionsChanged||n.flatShading!==r.flatShading;if(o){var s;const{gl:a}=this.context;(s=this.state.model)===null||s===void 0||s.delete(),this.state.model=this._getModel(a),this.getAttributeManager().invalidateAll()}(o||n.diskResolution!==r.diskResolution||n.vertices!==r.vertices||(n.extruded||n.stroked)!==(r.extruded||r.stroked))&&this._updateGeometry(n)}getGeometry(e,n,r){const i=new Yse({radius:1,height:r?2:0,vertices:n,nradial:e});let o=0;if(n)for(let s=0;s<e;s++){const a=n[s],u=Math.sqrt(a[0]*a[0]+a[1]*a[1]);o+=u/e}else o=1;return this.setState({edgeDistance:Math.cos(Math.PI/e)*o}),i}_getModel(e){return new Rr(e,{...this.getShaders(),id:this.props.id,isInstanced:!0})}_updateGeometry({diskResolution:e,vertices:n,extruded:r,stroked:i}){const o=this.getGeometry(e,n,r||i);this.setState({fillVertexCount:o.attributes.POSITION.value.length/3,wireframeVertexCount:o.indices.value.length}),this.state.model.setProps({geometry:o})}draw({uniforms:e}){const{lineWidthUnits:n,lineWidthScale:r,lineWidthMinPixels:i,lineWidthMaxPixels:o,radiusUnits:s,elevationScale:a,extruded:u,filled:l,stroked:c,wireframe:f,offset:h,coverage:d,radius:g,angle:m}=this.props,{model:S,fillVertexCount:_,wireframeVertexCount:y,edgeDistance:w}=this.state;S.setUniforms(e).setUniforms({radius:g,angle:m/180*Math.PI,offset:h,extruded:u,stroked:c,coverage:d,elevationScale:a,edgeDistance:w,radiusUnits:gr[s],widthUnits:gr[n],widthScale:r,widthMinPixels:i,widthMaxPixels:o}),u&&f&&(S.setProps({isIndexed:!0}),S.setVertexCount(y).setDrawMode(1).setUniforms({isStroke:!0}).draw()),l&&(S.setProps({isIndexed:!1}),S.setVertexCount(_).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!u&&c&&(S.setProps({isIndexed:!1}),S.setVertexCount(_*2/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}}b(Qb,"layerName","ColumnLayer");b(Qb,"defaultProps",Kse);const Qse={cellSize:{type:"number",min:0,value:1e3},offset:{type:"array",value:[1,1]}};class nk extends Qb{getGeometry(e){return new Gq}draw({uniforms:e}){const{elevationScale:n,extruded:r,offset:i,coverage:o,cellSize:s,angle:a,radiusUnits:u}=this.props;this.state.model.setUniforms(e).setUniforms({radius:s/2,radiusUnits:gr[u],angle:a,offset:i,extruded:r,coverage:o,elevationScale:n,edgeDistance:1,isWireframe:!1}).draw()}}b(nk,"layerName","GridCellLayer");b(nk,"defaultProps",Qse);function Jse(t,e,n,r){let i;if(Array.isArray(t[0])){const o=t.length*e;i=new Array(o);for(let s=0;s<t.length;s++)for(let a=0;a<e;a++)i[s*e+a]=t[s][a]||0}else i=t;return n?K3(i,{size:e,gridResolution:n}):r?jse(i,{size:e}):i}const eae=1,tae=2,F0=4;class nae extends E3{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?Jse(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(N2(e)){let r=0;for(const i of e)r+=this.getGeometrySize(i);return r}const n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&N2(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){const r=this.attributes.segmentTypes,i=e?this.isClosed(e):!1,{vertexStart:o,geometrySize:s}=n;r.fill(0,o,o+s),i?(r[o]=F0,r[o+s-2]=F0):(r[o]+=eae,r[o+s-2]+=tae),r[o+s-1]=F0}_updatePositions(e,n){const{positions:r}=this.attributes;if(!r||!e)return;const{vertexStart:i,geometrySize:o}=n,s=new Array(3);for(let a=i,u=0;u<o;a++,u++)this.getPointOnPath(e,u,s),r[a*3]=s[0],r[a*3+1]=s[1],r[a*3+2]=s[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n,r=[]){const{positionSize:i}=this;n*i>=e.length&&(n+=1-e.length/i);const o=n*i;return r[0]=e[o],r[1]=e[o+1],r[2]=i===3&&e[o+2]||0,r}isClosed(e){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:n}=this,r=e.length-n;return e[0]===e[r]&&e[1]===e[r+1]&&(n===2||e[2]===e[r+2])}}function N2(t){return Array.isArray(t[0])}const rae=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}

// calculate line join positions
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  // side of the segment - -1: left, 0: center, 1: right
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);

  // tangent of the corner
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  // direction of the corner
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  // direction of the segment
  vec2 dir = isEnd ? dirA : dirB;
  // direction of the extrusion
  vec2 perp = isEnd ? perpA : perpB;
  // length of the segment
  float L = isEnd ? lenA : lenB;

  // A = angle of the corner
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));

  // -1: right, 1: left
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);

  // relative position to the corner:
  // -1: inside (smaller side of the angle)
  // 0: center
  // 1: outside (bigger side of the angle)
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  // trim if inside corner extends further than the line segment
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);

  // special treatment for start cap and end cap
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;

  // extend out a triangle to envelope the round cap
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }

  // Generate variables for fragment shader
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}

// In clipspace extrusion, if a line extends behind the camera, clip it to avoid visual artifacts
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    // Extrude in clipspace
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    // Extrude in commonspace
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,iae=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
/*
 * vPathPosition represents the relative coordinates of the current fragment on the path segment.
 * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.
 * vPathPosition.y - position along the length of the path, between [0, L / width].
 */
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    // if joint is rounded, test distance from the corner
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    // trim miter
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,rk=[0,0,0,255],oae={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:rk},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},U0={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class Ig extends tr{constructor(...e){super(...e),b(this,"state",void 0)}getShaders(){return super.getShaders({vs:rae,fs:iae,modules:[wi,Ei]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:U0,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:U0,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:U0,defaultValue:rk},instancePickingColors:{size:3,type:5121,accessor:(r,{index:i,target:o})=>this.encodePickingColor(r&&r.__source?r.__source.index:i,o)}}),this.setState({pathTesselator:new nae({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:n,changeFlags:r}=e,i=this.getAttributeManager();if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){const{pathTesselator:a}=this.state,u=n.data.attributes||{};a.updateGeometry({data:n.data,geometryBuffer:u.getPath,buffers:u,normalize:!n._pathType,loop:n._pathType==="loop",getGeometry:n.getPath,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:r.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),r.dataChanged||i.invalidateAll()}if(r.extensionsChanged){var s;const{gl:a}=this.context;(s=this.state.model)===null||s===void 0||s.delete(),this.state.model=this._getModel(a),i.invalidateAll()}}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(o=>o.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else this._disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:n,capRounded:r,billboard:i,miterLimit:o,widthUnits:s,widthScale:a,widthMinPixels:u,widthMaxPixels:l}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:gr[s],widthScale:a,miterLimit:o,widthMinPixels:u,widthMaxPixels:l}).draw()}_getModel(e){const n=[0,1,2,1,4,2,1,3,4,3,5,4],r=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new Rr(e,{...this.getShaders(),id:this.props.id,geometry:new Qr({drawMode:4,attributes:{indices:new Uint16Array(n),positions:{value:new Float32Array(r),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}}b(Ig,"defaultProps",oae);b(Ig,"layerName","PathLayer");var Jb={exports:{}};Jb.exports=Ng;Jb.exports.default=Ng;function Ng(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,o=ik(t,0,i,n,!0),s=[];if(!o||o.next===o.prev)return s;var a,u,l,c,f,h,d;if(r&&(o=cae(t,e,o,n)),t.length>80*n){a=l=t[0],u=c=t[1];for(var g=n;g<i;g+=n)f=t[g],h=t[g+1],f<a&&(a=f),h<u&&(u=h),f>l&&(l=f),h>c&&(c=h);d=Math.max(l-a,c-u),d=d!==0?32767/d:0}return Kl(o,s,n,a,u,d,0),s}function ik(t,e,n,r,i){var o,s;if(i===B_(t,e,n,r)>0)for(o=e;o<n;o+=r)s=D2(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=D2(o,t[o],t[o+1],s);return s&&Dg(s,s.next)&&(Jl(s),s=s.next),s}function Ss(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(Dg(n,n.next)||Vt(n.prev,n,n.next)===0)){if(Jl(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Kl(t,e,n,r,i,o,s){if(!!t){!s&&o&&gae(t,r,i,o);for(var a=t,u,l;t.prev!==t.next;){if(u=t.prev,l=t.next,o?aae(t,r,i,o):sae(t)){e.push(u.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),Jl(t),t=l.next,a=l.next;continue}if(t=l,t===a){s?s===1?(t=uae(Ss(t),e,n),Kl(t,e,n,r,i,o,2)):s===2&&lae(t,e,n,r,i,o):Kl(Ss(t),e,n,r,i,o,1);break}}}}function sae(t){var e=t.prev,n=t,r=t.next;if(Vt(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,s=r.x,a=e.y,u=n.y,l=r.y,c=i<o?i<s?i:s:o<s?o:s,f=a<u?a<l?a:l:u<l?u:l,h=i>o?i>s?i:s:o>s?o:s,d=a>u?a>l?a:l:u>l?u:l,g=r.next;g!==e;){if(g.x>=c&&g.x<=h&&g.y>=f&&g.y<=d&&Ea(i,a,o,u,s,l,g.x,g.y)&&Vt(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function aae(t,e,n,r){var i=t.prev,o=t,s=t.next;if(Vt(i,o,s)>=0)return!1;for(var a=i.x,u=o.x,l=s.x,c=i.y,f=o.y,h=s.y,d=a<u?a<l?a:l:u<l?u:l,g=c<f?c<h?c:h:f<h?f:h,m=a>u?a>l?a:l:u>l?u:l,S=c>f?c>h?c:h:f>h?f:h,_=U_(d,g,e,n,r),y=U_(m,S,e,n,r),w=t.prevZ,T=t.nextZ;w&&w.z>=_&&T&&T.z<=y;){if(w.x>=d&&w.x<=m&&w.y>=g&&w.y<=S&&w!==i&&w!==s&&Ea(a,c,u,f,l,h,w.x,w.y)&&Vt(w.prev,w,w.next)>=0||(w=w.prevZ,T.x>=d&&T.x<=m&&T.y>=g&&T.y<=S&&T!==i&&T!==s&&Ea(a,c,u,f,l,h,T.x,T.y)&&Vt(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;w&&w.z>=_;){if(w.x>=d&&w.x<=m&&w.y>=g&&w.y<=S&&w!==i&&w!==s&&Ea(a,c,u,f,l,h,w.x,w.y)&&Vt(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;T&&T.z<=y;){if(T.x>=d&&T.x<=m&&T.y>=g&&T.y<=S&&T!==i&&T!==s&&Ea(a,c,u,f,l,h,T.x,T.y)&&Vt(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function uae(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Dg(i,o)&&ok(i,r,r.next,o)&&Ql(i,o)&&Ql(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),Jl(r),Jl(r.next),r=t=o),r=r.next}while(r!==t);return Ss(r)}function lae(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&yae(s,a)){var u=sk(s,a);s=Ss(s,s.next),u=Ss(u,u.next),Kl(s,e,n,r,i,o,0),Kl(u,e,n,r,i,o,0);return}a=a.next}s=s.next}while(s!==t)}function cae(t,e,n,r){var i=[],o,s,a,u,l;for(o=0,s=e.length;o<s;o++)a=e[o]*r,u=o<s-1?e[o+1]*r:t.length,l=ik(t,a,u,r,!1),l===l.next&&(l.steiner=!0),i.push(vae(l));for(i.sort(fae),o=0;o<i.length;o++)n=hae(i[o],n);return n}function fae(t,e){return t.x-e.x}function hae(t,e){var n=dae(t,e);if(!n)return e;var r=sk(n,t);return Ss(r,r.next),Ss(n,n.next)}function dae(t,e){var n=e,r=t.x,i=t.y,o=-1/0,s;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>o&&(o=a,s=n.x<n.next.x?n:n.next,a===r))return s}n=n.next}while(n!==e);if(!s)return null;var u=s,l=s.x,c=s.y,f=1/0,h;n=s;do r>=n.x&&n.x>=l&&r!==n.x&&Ea(i<c?r:o,i,l,c,i<c?o:r,i,n.x,n.y)&&(h=Math.abs(i-n.y)/(r-n.x),Ql(n,t)&&(h<f||h===f&&(n.x>s.x||n.x===s.x&&pae(s,n)))&&(s=n,f=h)),n=n.next;while(n!==u);return s}function pae(t,e){return Vt(t.prev,t,e.prev)<0&&Vt(e.next,t,t.next)<0}function gae(t,e,n,r){var i=t;do i.z===0&&(i.z=U_(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,mae(i)}function mae(t){var e,n,r,i,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<l&&(a++,r=r.nextZ,!!r);e++);for(u=l;a>0||u>0&&r;)a!==0&&(u===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(s>1);return t}function U_(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function vae(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Ea(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function yae(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!_ae(t,e)&&(Ql(t,e)&&Ql(e,t)&&bae(t,e)&&(Vt(t.prev,t,e.prev)||Vt(t,e.prev,e))||Dg(t,e)&&Vt(t.prev,t,t.next)>0&&Vt(e.prev,e,e.next)>0)}function Vt(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Dg(t,e){return t.x===e.x&&t.y===e.y}function ok(t,e,n,r){var i=kf(Vt(t,e,n)),o=kf(Vt(t,e,r)),s=kf(Vt(n,r,t)),a=kf(Vt(n,r,e));return!!(i!==o&&s!==a||i===0&&Of(t,n,e)||o===0&&Of(t,r,e)||s===0&&Of(n,t,r)||a===0&&Of(n,e,r))}function Of(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function kf(t){return t>0?1:t<0?-1:0}function _ae(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ok(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Ql(t,e){return Vt(t.prev,t,t.next)<0?Vt(t,e,t.next)>=0&&Vt(t,t.prev,e)>=0:Vt(t,e,t.prev)<0||Vt(t,t.next,e)<0}function bae(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function sk(t,e){var n=new z_(t.i,t.x,t.y),r=new z_(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function D2(t,e,n,r){var i=new z_(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Jl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function z_(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Ng.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(B_(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,c=a<u-1?e[a+1]*n:t.length;s-=Math.abs(B_(t,l,c,n))}var f=0;for(a=0;a<r.length;a+=3){var h=r[a]*n,d=r[a+1]*n,g=r[a+2]*n;f+=Math.abs((t[h]-t[g])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[g+1]-t[h+1]))}return s===0&&f===0?0:Math.abs((f-s)/s)};function B_(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}Ng.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};const If=Zb.CLOCKWISE,F2=Zb.COUNTER_CLOCKWISE,_o={isClosed:!0};function wae(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function sl(t){return"positions"in t?t.positions:t}function Yh(t){return"holeIndices"in t?t.holeIndices:null}function Eae(t){return Array.isArray(t[0])}function Sae(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function xae(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function Tae(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}function U2(t,e,n,r,i){let o=e;const s=n.length;for(let a=0;a<s;a++)for(let u=0;u<r;u++)t[o++]=n[a][u]||0;if(!xae(n))for(let a=0;a<r;a++)t[o++]=n[0][a]||0;return _o.start=e,_o.end=o,_o.size=r,Kb(t,i,_o),o}function z2(t,e,n,r,i=0,o,s){o=o||n.length;const a=o-i;if(a<=0)return e;let u=e;for(let l=0;l<a;l++)t[u++]=n[i+l];if(!Tae(n,r,i,o))for(let l=0;l<r;l++)t[u++]=n[i+l];return _o.start=e,_o.end=u,_o.size=r,Kb(t,s,_o),u}function ak(t,e){wae(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:o}=t;if(o){let s=0;for(let a=0;a<=o.length;a++)s=z2(n,s,i,e,o[a-1],o[a],a===0?If:F2),r.push(s);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!Eae(t))return z2(n,0,t,e,0,n.length,If),n;if(!Sae(t)){let i=0;for(const[o,s]of t.entries())i=U2(n,i,s,e,o===0?If:F2),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return U2(n,0,t,e,If),n}function Pae(t,e,n){let r=Yh(t);r&&(r=r.map(o=>o/e));let i=sl(t);if(n){const o=i.length;i=i.slice();const s=[];for(let a=0;a<o;a+=e){s[0]=i[a],s[1]=i[a+1];const u=n(s);i[a]=u[0],i[a+1]=u[1]}}return Jb.exports(i,r,e)}class Aae extends E3{constructor(e){const{fp64:n,IndexType:r=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:r,size:1}}})}get(e){const{attributes:n}=this;return e==="indices"?n.indices&&n.indices.subarray(0,this.vertexCount):n[e]}updateGeometry(e){super.updateGeometry(e);const n=this.buffers.indices;if(n)this.vertexCount=(n.value||n).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const n=ak(e,this.positionSize);return this.opts.resolution?Q3(sl(n),Yh(n),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?Gse(sl(n),Yh(n),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):n}return e}getGeometrySize(e){if(B2(e)){let n=0;for(const r of e)n+=this.getGeometrySize(r);return n}return sl(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,n){if(e&&B2(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i,n.indexStart=this.indexStarts[n.geometryIndex+1]}else this._updateIndices(e,n),this._updatePositions(e,n),this._updateVertexValid(e,n)}_updateIndices(e,{geometryIndex:n,vertexStart:r,indexStart:i}){const{attributes:o,indexStarts:s,typedArrayManager:a}=this;let u=o.indices;if(!u||!e)return;let l=i;const c=Pae(e,this.positionSize,this.opts.preproject);u=a.allocate(u,i+c.length,{copy:!0});for(let f=0;f<c.length;f++)u[l++]=c[f]+r;s[n+1]=i+c.length,o.indices=u}_updatePositions(e,{vertexStart:n,geometrySize:r}){const{attributes:{positions:i},positionSize:o}=this;if(!i||!e)return;const s=sl(e);for(let a=n,u=0;u<r;a++,u++){const l=s[u*o],c=s[u*o+1],f=o>2?s[u*o+2]:0;i[a*3]=l,i[a*3+1]=c,i[a*3+2]=f}}_updateVertexValid(e,{vertexStart:n,geometrySize:r}){const{positionSize:i}=this,o=this.attributes.vertexValid,s=e&&Yh(e);if(e&&e.edgeTypes?o.set(e.edgeTypes,n):o.fill(1,n,n+r),s)for(let a=0;a<s.length;a++)o[n+s[a]/i-1]=0;o[n+r-1]=0}}function B2(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const uk=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Cae=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(uk,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),Rae=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(uk,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),Lae=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,Cp=[0,0,0,255],Mae={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:Cp},getLineColor:{type:"accessor",value:Cp},material:!0},Nf={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class Fg extends tr{constructor(...e){super(...e),b(this,"state",void 0)}getShaders(e){return super.getShaders({vs:e==="top"?Cae:Rae,fs:Lae,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[wi,Mb,Ei]})}get wrapLongitude(){return!1}initializeState(){const{gl:e,viewport:n}=this.context;let{coordinateSystem:r}=this.props;n.isGeospatial&&r===at.DEFAULT&&(r=at.LNGLAT),this.setState({numInstances:0,polygonTesselator:new Aae({preproject:r===at.LNGLAT&&n.projectFlat.bind(n),fp64:this.use64bitPositions(),IndexType:!e||Tb(e,At.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const i=this.getAttributeManager(),o=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:Nf,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,transition:Nf,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Nf,accessor:"getFillColor",defaultValue:Cp,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Nf,accessor:"getLineColor",defaultValue:Cp,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(s,{index:a,target:u})=>this.encodePickingColor(s&&s.__source?s.__source.index:a,u),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(o=>o.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else this._disablePickingIndex(e)}draw({uniforms:e}){const{extruded:n,filled:r,wireframe:i,elevationScale:o}=this.props,{topModel:s,sideModel:a,polygonTesselator:u}=this.state,l={...e,extruded:Boolean(n),elevationScale:o};a&&(a.setInstanceCount(u.instanceCount-1),a.setUniforms(l),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),r&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),s&&(s.setVertexCount(u.vertexCount),s.setUniforms(l).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:n,oldProps:r,changeFlags:i}=e,o=this.getAttributeManager();if(i.extensionsChanged||n.filled!==r.filled||n.extruded!==r.extruded){var a;(a=this.state.models)===null||a===void 0||a.forEach(u=>u.delete()),this.setState(this._getModels(this.context.gl)),o.invalidateAll()}}updateGeometry({props:e,oldProps:n,changeFlags:r}){if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:o}=this.state,s=e.data.attributes||{};o.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:s.getPolygon,buffers:s,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){const{id:n,filled:r,extruded:i}=this.props;let o,s;if(r){const a=this.getShaders("top");a.defines.NON_INSTANCED_MODEL=1,o=new Rr(e,{...a,id:"".concat(n,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(s=new Rr(e,{...this.getShaders("side"),id:"".concat(n,"-side"),geometry:new Qr({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),s.userData.excludeAttributes={indices:!0}),{models:[s,o].filter(Boolean),topModel:o,sideModel:s}}calculateIndices(e){const{polygonTesselator:n}=this.state;e.startIndices=n.indexStarts,e.value=n.get("indices")}calculatePositions(e){const{polygonTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}b(Fg,"defaultProps",Mae);b(Fg,"layerName","SolidPolygonLayer");function lk({data:t,getIndex:e,dataRange:n,replace:r}){const{startRow:i=0,endRow:o=1/0}=n,s=t.length;let a=s,u=s;for(let h=0;h<s;h++){const d=e(t[h]);if(a>h&&d>=i&&(a=h),d>=o){u=h;break}}let l=a;const f=u-a!==r.length?t.slice(u):void 0;for(let h=0;h<r.length;h++)t[l++]=r[h];if(f){for(let h=0;h<f.length;h++)t[l++]=f[h];t.length=l}return{startRow:a,endRow:a+r.length}}const ck=[0,0,0,255],Oae=[0,0,0,255],kae={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:Oae},getLineColor:{type:"accessor",value:ck},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class fk extends Mg{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&$e.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:e}){const n=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getPolygon);if(n&&Array.isArray(e.dataChanged)){const r=this.state.paths.slice(),i=e.dataChanged.map(o=>lk({data:r,getIndex:s=>s.__source.index,dataRange:o,replace:this._getPaths(o)}));this.setState({paths:r,pathsDiff:i})}else n&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(e={}){const{data:n,getPolygon:r,positionFormat:i,_normalize:o}=this.props,s=[],a=i==="XY"?2:3,{startRow:u,endRow:l}=e,{iterable:c,objectInfo:f}=Lc(n,u,l);for(const h of c){f.index++;let d=r(h,f);o&&(d=ak(d,a));const{holeIndices:g}=d,m=d.positions||d;if(g)for(let S=0;S<=g.length;S++){const _=m.slice(g[S-1]||0,g[S]||m.length);s.push(this.getSubLayerRow({path:_},h,f.index))}else s.push(this.getSubLayerRow({path:m},h,f.index))}return s}renderLayers(){const{data:e,_dataDiff:n,stroked:r,filled:i,extruded:o,wireframe:s,_normalize:a,_windingOrder:u,elevationScale:l,transitions:c,positionFormat:f}=this.props,{lineWidthUnits:h,lineWidthScale:d,lineWidthMinPixels:g,lineWidthMaxPixels:m,lineJointRounded:S,lineMiterLimit:_,lineDashJustified:y}=this.props,{getFillColor:w,getLineColor:T,getLineWidth:R,getLineDashArray:C,getElevation:D,getPolygon:F,updateTriggers:W,material:j}=this.props,{paths:H,pathsDiff:pe}=this.state,ue=this.getSubLayerClass("fill",Fg),se=this.getSubLayerClass("stroke",Ig),Ce=this.shouldRenderSubLayer("fill",H)&&new ue({_dataDiff:n,extruded:o,elevationScale:l,filled:i,wireframe:s,_normalize:a,_windingOrder:u,getElevation:D,getFillColor:w,getLineColor:o&&s?T:ck,material:j,transitions:c},this.getSubLayerProps({id:"fill",updateTriggers:W&&{getPolygon:W.getPolygon,getElevation:W.getElevation,getFillColor:W.getFillColor,lineColors:o&&s,getLineColor:W.getLineColor}}),{data:e,positionFormat:f,getPolygon:F}),De=!o&&r&&this.shouldRenderSubLayer("stroke",H)&&new se({_dataDiff:pe&&(()=>pe),widthUnits:h,widthScale:d,widthMinPixels:g,widthMaxPixels:m,jointRounded:S,miterLimit:_,dashJustified:y,_pathType:"loop",transitions:c&&{getWidth:c.getLineWidth,getColor:c.getLineColor,getPath:c.getPolygon},getColor:this.getSubLayerAccessor(T),getWidth:this.getSubLayerAccessor(R),getDashArray:this.getSubLayerAccessor(C)},this.getSubLayerProps({id:"stroke",updateTriggers:W&&{getWidth:W.getLineWidth,getColor:W.getLineColor,getDashArray:W.getLineDashArray}}),{data:H,positionFormat:f,getPath:He=>He.path});return[!o&&Ce,De,o&&Ce]}}b(fk,"layerName","PolygonLayer");b(fk,"defaultProps",kae);function Iae(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,r=t.featureIds.value[n];return n!==-1?Nae(t,r,n):null}function Nae(t,e,n){const r={properties:{...t.properties[e]}};for(const i in t.numericProps)r.properties[i]=t.numericProps[i].value[n];return r}function Dae(t,e){const n={points:null,lines:null,polygons:null};for(const r in n){const i=t[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(i.length*3);const o=[];for(let s=0;s<i.length;s++)e(i[s],o),n[r][s*3+0]=o[0],n[r][s*3+1]=o[1],n[r][s*3+2]=o[2]}return n}const Fae=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;

    // if enable sdf (signed distance fields)
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }

    // Take the global opacity and the alpha from color into account for the alpha component
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,V2=192/256,$2=[],Uae={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class ew extends kg{constructor(...e){super(...e),b(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:Fae}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:r,target:i})=>this.encodePickingColor(r,i)}})}updateState(e){super.updateState(e);const{props:n,oldProps:r}=e;let{outlineColor:i}=n;i!==r.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!n.sdf&&n.outlineWidth&&$e.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:r,outlineWidth:i}=this.props,{outlineColor:o}=this.state;e.uniforms={...e.uniforms,buffer:V2,outlineBuffer:i?Math.max(r,V2*(1-i)):-1,gamma:r,sdf:Boolean(n),outlineColor:o},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):$2}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):$2}}b(ew,"defaultProps",Uae);b(ew,"layerName","MultiIconLayer");var tw={exports:{}};tw.exports=Mc;tw.exports.default=Mc;var Ia=1e20;function Mc(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=e===void 0?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var s=this.size=this.fontSize+this.buffer*2,a=s+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(s/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function zae(t,e,n,r,i,o,s){o.fill(Ia,0,e*n),s.fill(0,0,e*n);for(var a=(e-r)/2,u=0;u<i;u++)for(var l=0;l<r;l++){var c=(u+a)*e+l+a,f=t.data[4*(u*r+l)+3]/255;if(f===1)o[c]=0,s[c]=Ia;else if(f===0)o[c]=Ia,s[c]=0;else{var h=Math.max(0,.5-f),d=Math.max(0,f-.5);o[c]=h*h,s[c]=d*d}}}function Bae(t,e,n,r,i,o,s){for(var a=0;a<e*n;a++){var u=Math.sqrt(r[a])-Math.sqrt(i[a]);t[a]=Math.round(255-255*(u/o+s))}}Mc.prototype._draw=function(t,e){var n=this.ctx.measureText(t),r=n.width,i=2*this.buffer,o,s,a,u,l,c,f,h;e&&this.useMetrics?(l=Math.floor(n.actualBoundingBoxAscent),h=this.buffer+Math.ceil(n.actualBoundingBoxAscent),c=this.buffer,f=this.buffer,s=Math.min(this.size,Math.ceil(n.actualBoundingBoxRight-n.actualBoundingBoxLeft)),u=Math.min(this.size-c,Math.ceil(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)),o=s+i,a=u+i,this.ctx.textBaseline="alphabetic"):(o=s=this.size,a=u=this.size,l=19*this.fontSize/24,c=f=0,h=this.middle,this.ctx.textBaseline="middle");var d;s&&u&&(this.ctx.clearRect(f,c,s,u),this.ctx.fillText(t,this.buffer,h),d=this.ctx.getImageData(f,c,s,u));var g=new Uint8ClampedArray(o*a);return zae(d,o,a,s,u,this.gridOuter,this.gridInner),j2(this.gridOuter,o,a,this.f,this.v,this.z),j2(this.gridInner,o,a,this.f,this.v,this.z),Bae(g,o,a,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:g,metrics:{width:s,height:u,sdfWidth:o,sdfHeight:a,top:l,left:0,advance:r}}};Mc.prototype.draw=function(t){return this._draw(t,!1).data};Mc.prototype.drawWithMetrics=function(t){return this._draw(t,!0)};function j2(t,e,n,r,i,o){for(var s=0;s<e;s++)G2(t,s,e,n,r,i,o);for(var a=0;a<n;a++)G2(t,a*e,1,e,r,i,o)}function G2(t,e,n,r,i,o,s){var a,u,l,c;for(o[0]=0,s[0]=-Ia,s[1]=Ia,a=0;a<r;a++)i[a]=t[e+a*n];for(a=1,u=0,l=0;a<r;a++){do c=o[u],l=(i[a]-i[c]+a*a-c*c)/(a-c)/2;while(l<=s[u]&&--u>-1);u++,o[u]=a,s[u]=l,s[u+1]=Ia}for(a=0,u=0;a<r;a++){for(;s[u+1]<a;)u++;c=o[u],t[e+a*n]=i[c]+(a-c)*(a-c)}}const Vae=32,$ae=[];function jae(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function Gae({characterSet:t,getFontWidth:e,fontHeight:n,buffer:r,maxCanvasWidth:i,mapping:o={},xOffset:s=0,yOffset:a=0}){let u=0,l=s;for(const f of t)if(!o[f]){const h=e(f);l+h+r*2>i&&(l=0,u++),o[f]={x:l+r,y:a+u*(n+r*2)+r,width:h,height:n},l+=h+r*2}const c=n+r*2;return{mapping:o,xOffset:l,yOffset:a+u*c,canvasHeight:jae(a+(u+1)*c)}}function hk(t,e,n,r){let i=0;for(let s=e;s<n;s++){var o;const a=t[s];i+=((o=r[a])===null||o===void 0?void 0:o.width)||0}return i}function dk(t,e,n,r,i,o){let s=e,a=0;for(let u=e;u<n;u++){const l=hk(t,u,u+1,i);a+l>r&&(s<u&&o.push(u),s=u,a=0),a+=l}return a}function Wae(t,e,n,r,i,o){let s=e,a=e,u=e,l=0;for(let c=e;c<n;c++)if((t[c]===" "||t[c+1]===" "||c+1===n)&&(u=c+1),u>a){let f=hk(t,a,u,i);l+f>r&&(s<a&&(o.push(a),s=a,l=0),f>r&&(f=dk(t,a,u,r,i,o),s=o[o.length-1])),a=u,l+=f}return l}function Hae(t,e,n,r,i=0,o){o===void 0&&(o=t.length);const s=[];return e==="break-all"?dk(t,i,o,n,r,s):Wae(t,i,o,n,r,s),s}function Yae(t,e,n,r,i,o){let s=0,a=0;for(let u=e;u<n;u++){const l=t[u],c=r[l];c?(a||(a=c.height),i[u]=s+c.width/2,s+=c.width):($e.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),i[u]=s,s+=Vae)}o[0]=s,o[1]=a}function W2(t,e,n,r,i){const o=Array.from(t),s=o.length,a=new Array(s),u=new Array(s),l=new Array(s),c=(n==="break-word"||n==="break-all")&&isFinite(r)&&r>0,f=[0,0],h=[0,0];let d=0,g=0,m=0;for(let S=0;S<=s;S++){const _=o[S];if((_===`
`||S===s)&&(m=S),m>g){const y=c?Hae(o,n,r,i,g,m):$ae;for(let w=0;w<=y.length;w++){const T=w===0?g:y[w-1],R=w<y.length?y[w]:m;Yae(o,T,R,i,a,h);for(let C=T;C<R;C++)u[C]=d+h[1]/2,l[C]=h[0];d=d+h[1]*e,f[0]=Math.max(f[0],h[0])}g=m}_===`
`&&(a[g]=0,u[g]=0,l[g]=0,g++)}return f[1]=d,{x:a,y:u,rowWidth:l,size:f}}function Xae({value:t,length:e,stride:n,offset:r,startIndices:i,characterSet:o}){const s=t.BYTES_PER_ELEMENT,a=n?n/s:1,u=r?r/s:0,l=i[e]||Math.ceil((t.length-u)/a),c=o&&new Set,f=new Array(e);let h=t;if(a>1||u>0){const d=t.constructor;h=new d(l);for(let g=0;g<l;g++)h[g]=t[g*a+u]}for(let d=0;d<e;d++){const g=i[d],m=i[d+1]||l,S=h.subarray(g,m);f[d]=String.fromCodePoint.apply(null,S),c&&S.forEach(c.add,c)}if(c)for(const d of c)o.add(String.fromCodePoint(d));return{texts:f,characterCount:l}}class pk{constructor(e=5){b(this,"limit",void 0),b(this,"_cache",{}),b(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}function qae(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}const xl={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:qae(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},H2=1024,Zae=.9,Y2=1.2,gk=3;let Rp=new pk(gk);function Kae(t,e){let n;typeof e=="string"?n=new Set(Array.from(e)):n=new Set(e);const r=Rp.get(t);if(!r)return n;for(const i in r.mapping)n.has(i)&&n.delete(i);return n}function Qae(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function X2(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function Jae(t){$e.assert(Number.isFinite(t)&&t>=gk,"Invalid cache limit"),Rp=new pk(t)}class eue{constructor(){b(this,"props",{...xl}),b(this,"_key",void 0),b(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return Y2}setProps(e={}){Object.assign(this.props,e);const n=this._key;this._key=this._getKey();const r=Kae(this._key,this.props.characterSet),i=Rp.get(this._key);if(i&&r.size===0){this._key!==n&&(this._atlas=i);return}const o=this._generateFontAtlas(this._key,r,i);this._atlas=o,Rp.set(this._key,o)}_generateFontAtlas(e,n,r){const{fontFamily:i,fontWeight:o,fontSize:s,buffer:a,sdf:u,radius:l,cutoff:c}=this.props;let f=r&&r.data;f||(f=document.createElement("canvas"),f.width=H2);const h=f.getContext("2d");X2(h,i,s,o);const{mapping:d,canvasHeight:g,xOffset:m,yOffset:S}=Gae({getFontWidth:_=>h.measureText(_).width,fontHeight:s*Y2,buffer:a,characterSet:n,maxCanvasWidth:H2,...r&&{mapping:r.mapping,xOffset:r.xOffset,yOffset:r.yOffset}});if(f.height!==g){const _=h.getImageData(0,0,f.width,f.height);f.height=g,h.putImageData(_,0,0)}if(X2(h,i,s,o),u){const _=new tw.exports(s,a,l,c,i,o),y=h.getImageData(0,0,_.size,_.size);for(const w of n)Qae(_.draw(w),y),h.putImageData(y,d[w].x-a,d[w].y+a)}else for(const _ of n)h.fillText(_,d[_].x,d[_].y+s*Zae);return{xOffset:m,yOffset:S,mapping:d,data:f,width:f.width,height:f.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:r,buffer:i,sdf:o,radius:s,cutoff:a}=this.props;return o?"".concat(e," ").concat(n," ").concat(r," ").concat(i," ").concat(s," ").concat(a):"".concat(e," ").concat(n," ").concat(r," ").concat(i)}}const tue=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;

  // convert size in meters to pixels, then scaled and clamp

  // project meters to pixels and clamp to limits
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,nue=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,rue={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class nw extends tr{constructor(...e){super(...e),b(this,"state",void 0)}getShaders(){return super.getShaders({vs:tue,fs:nue,modules:[wi,Ei]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var r;const{gl:i}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:u}=this.props;u.length<4&&(u=[u[0],u[1],u[0],u[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:Boolean(a),padding:u,sizeUnits:gr[i],sizeScale:r,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(e){const n=[0,0,1,0,1,1,0,1];return new Rr(e,{...this.getShaders(),id:this.props.id,geometry:new Qr({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}}b(nw,"defaultProps",rue);b(nw,"layerName","TextBackgroundLayer");const q2={start:1,middle:0,end:-1},Z2={top:1,center:0,bottom:-1},z0=[0,0,0,255],iue=1,oue={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:z0},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:xl.characterSet},fontFamily:xl.fontFamily,fontWeight:xl.fontWeight,lineHeight:iue,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:z0},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:z0},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class rw extends Mg{constructor(...e){super(...e),b(this,"state",void 0),b(this,"getBoundingRect",(n,r)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:u,getTextAnchor:l,getAlignmentBaseline:c}=this.props,f=o(n,r)||"",{size:[h,d]}=W2(f,u,s,a,i),g=q2[typeof l=="function"?l(n,r):l],m=Z2[typeof c=="function"?c(n,r):c];return[(g-1)*h/2,(m-1)*d/2,h,d]}),b(this,"getIconOffsets",(n,r)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:u,getTextAnchor:l,getAlignmentBaseline:c}=this.props,f=o(n,r)||"",{x:h,y:d,rowWidth:g,size:[m,S]}=W2(f,u,s,a,i),_=q2[typeof l=="function"?l(n,r):l],y=Z2[typeof c=="function"?c(n,r):c],w=h.length,T=new Array(w*2);let R=0;for(let C=0;C<w;C++){const D=(1-_)*(m-g[C])/2;T[R++]=(_-1)*m/2+D+h[C],T[R++]=(y-1)*S/2+d[C]}return T})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new eue}}updateState(e){const{props:n,oldProps:r,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==r.lineHeight||n.wordBreak!==r.wordBreak||n.maxWidth!==r.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:r}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,s={...e,characterSet:o,fontFamily:n,fontWeight:r};if(!i.mapping)return i.setProps(s),!0;for(const a in s)if(s[a]!==i.props[a])return i.setProps(s),!0;return!1}_updateText(){var e;const{data:n,characterSet:r}=this.props,i=(e=n.attributes)===null||e===void 0?void 0:e.getText;let{getText:o}=this.props,s=n.startIndices,a;const u=r==="auto"&&new Set;if(i&&s){const{texts:l,characterCount:c}=Xae({...ArrayBuffer.isView(i)?{value:i}:i,length:n.length,startIndices:s,characterSet:u});a=c,o=(f,{index:h})=>l[h]}else{const{iterable:l,objectInfo:c}=Lc(n);s=[0],a=0;for(const f of l){c.index++;const h=Array.from(o(f,c)||"");u&&h.forEach(u.add,u),a+=h.length,s.push(a)}}this.setState({getText:o,startIndices:s,numInstances:a,characterSet:u||r})}renderLayers(){const{startIndices:e,numInstances:n,getText:r,fontAtlasManager:{scale:i,texture:o,mapping:s},styleVersion:a}=this.state,{data:u,_dataDiff:l,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:g,getBackgroundColor:m,getBorderColor:S,getBorderWidth:_,backgroundPadding:y,background:w,billboard:T,fontSettings:R,outlineWidth:C,outlineColor:D,sizeScale:F,sizeUnits:W,sizeMinPixels:j,sizeMaxPixels:H,transitions:pe,updateTriggers:ue}=this.props,se=this.getSubLayerClass("characters",ew),Ce=this.getSubLayerClass("background",nw);return[w&&new Ce({getFillColor:m,getLineColor:S,getLineWidth:_,padding:y,getPosition:c,getSize:h,getAngle:d,getPixelOffset:g,billboard:T,sizeScale:F/this.state.fontAtlasManager.props.fontSize,sizeUnits:W,sizeMinPixels:j,sizeMaxPixels:H,transitions:pe&&{getPosition:pe.getPosition,getAngle:pe.getAngle,getSize:pe.getSize,getFillColor:pe.getBackgroundColor,getLineColor:pe.getBorderColor,getLineWidth:pe.getBorderWidth,getPixelOffset:pe.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:ue.getPosition,getAngle:ue.getAngle,getSize:ue.getSize,getFillColor:ue.getBackgroundColor,getLineColor:ue.getBorderColor,getLineWidth:ue.getBorderWidth,getPixelOffset:ue.getPixelOffset,getBoundingRect:{getText:ue.getText,getTextAnchor:ue.getTextAnchor,getAlignmentBaseline:ue.getAlignmentBaseline,styleVersion:a}}}),{data:u.attributes&&u.attributes.background?{length:u.length,attributes:u.attributes.background}:u,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new se({sdf:R.sdf,smoothing:Number.isFinite(R.smoothing)?R.smoothing:xl.smoothing,outlineWidth:C,outlineColor:D,iconAtlas:o,iconMapping:s,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:g,billboard:T,sizeScale:F*i,sizeUnits:W,sizeMinPixels:j*i,sizeMaxPixels:H*i,transitions:pe&&{getPosition:pe.getPosition,getAngle:pe.getAngle,getColor:pe.getColor,getSize:pe.getSize,getPixelOffset:pe.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:ue.getText,getPosition:ue.getPosition,getAngle:ue.getAngle,getColor:ue.getColor,getSize:ue.getSize,getPixelOffset:ue.getPixelOffset,getIconOffsets:{getText:ue.getText,getTextAnchor:ue.getTextAnchor,getAlignmentBaseline:ue.getAlignmentBaseline,styleVersion:a}}}),{data:u,_dataDiff:l,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:r})]}static set fontAtlasCacheLimit(e){Jae(e)}}b(rw,"defaultProps",oue);b(rw,"layerName","TextLayer");const Xh={circle:{type:qb,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:kg,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:rw,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},qh={type:Ig,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},V_={type:Fg,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Ku({type:t,props:e}){const n={};for(const r in e)n[r]=t.defaultProps[e[r]];return n}function B0(t,e){const{transitions:n,updateTriggers:r}=t.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const o in e){const s=e[o];let a=t.props[o];o.startsWith("get")&&(a=t.getSubLayerAccessor(a),i.updateTriggers[s]=r[o],n&&(i.transitions[s]=n[o])),i[s]=a}return i}function sue(t){if(Array.isArray(t))return t;switch($e.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return $e.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}function K2(t,e,n={}){const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=t.length}=n;for(let s=i;s<o;s++){const a=t[s];$e.assert(a&&a.geometry,"GeoJSON does not have geometry");const{geometry:u}=a;if(u.type==="GeometryCollection"){$e.assert(Array.isArray(u.geometries),"GeoJSON does not have geometries array");const{geometries:l}=u;for(let c=0;c<l.length;c++){const f=l[c];Q2(f,r,e,a,s)}}else Q2(u,r,e,a,s)}return r}function Q2(t,e,n,r,i){const{type:o,coordinates:s}=t,{pointFeatures:a,lineFeatures:u,polygonFeatures:l,polygonOutlineFeatures:c}=e;if(!uue(o,s)){$e.warn("".concat(o," coordinates are malformed"))();return}switch(o){case"Point":a.push(n({geometry:t},r,i));break;case"MultiPoint":s.forEach(f=>{a.push(n({geometry:{type:"Point",coordinates:f}},r,i))});break;case"LineString":u.push(n({geometry:t},r,i));break;case"MultiLineString":s.forEach(f=>{u.push(n({geometry:{type:"LineString",coordinates:f}},r,i))});break;case"Polygon":l.push(n({geometry:t},r,i)),s.forEach(f=>{c.push(n({geometry:{type:"LineString",coordinates:f}},r,i))});break;case"MultiPolygon":s.forEach(f=>{l.push(n({geometry:{type:"Polygon",coordinates:f}},r,i)),f.forEach(h=>{c.push(n({geometry:{type:"LineString",coordinates:h}},r,i))})});break}}const aue={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function uue(t,e){let n=aue[t];for($e.assert(n,"Unknown GeoJSON type ".concat(t));e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}function mk(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function Df(t){return t.geometry.coordinates}function lue(t,e){const n=mk(),{pointFeatures:r,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:s}=t;return n.points.data=r,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=Df,n.lines.data=i,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=Df,n.polygons.data=o,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=Df,n.polygonsOutline.data=s,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=Df,n}function cue(t,e){const n=mk(),{points:r,lines:i,polygons:o}=t,s=Dae(t,e);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{...r.attributes,getPosition:r.positions,instancePickingColors:{size:3,value:s.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:s.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}const fue=["points","linestrings","polygons"],hue={...Ku(Xh.circle),...Ku(Xh.icon),...Ku(Xh.text),...Ku(qh),...Ku(V_),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class vk extends Mg{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:e,changeFlags:n}){if(!n.dataChanged)return;const{data:r}=this.props,i=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:i}),i?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}_updateStateBinary({props:e,changeFlags:n}){const r=cue(e.data,this.encodePickingColor);this.setState({layerProps:r})}_updateStateJSON({props:e,changeFlags:n}){const r=sue(e.data),i=this.getSubLayerRow.bind(this);let o={};const s={};if(Array.isArray(n.dataChanged)){const u=this.state.features;for(const l in u)o[l]=u[l].slice(),s[l]=[];for(const l of n.dataChanged){const c=K2(r,i,l);for(const f in u)s[f].push(lk({data:o[f],getIndex:h=>h.__source.index,dataRange:l,replace:c[f]}))}}else o=K2(r,i);const a=lue(o,s);this.setState({features:o,featuresDiff:s,layerProps:a})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r,sourceLayer:i}=n;return n.featureType=fue.find(o=>i.id.startsWith("".concat(this.id,"-").concat(o,"-"))),r>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(n.index=this.props.data.points.globalFeatureIds.value[r]),n}_updateAutoHighlight(e){const n="".concat(this.id,"-points-"),r=e.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(n)===r&&i.updateAutoHighlight(e)}_renderPolygonLayer(){const{extruded:e,wireframe:n}=this.props,{layerProps:r}=this.state,i="polygons-fill",o=this.shouldRenderSubLayer(i,r.polygons.data)&&this.getSubLayerClass(i,V_.type);if(o){const s=B0(this,V_.props),a=e&&n;return a||delete s.getLineColor,s.updateTriggers.lineColors=a,new o(s,this.getSubLayerProps({id:i,updateTriggers:s.updateTriggers}),r.polygons)}return null}_renderLineLayers(){const{extruded:e,stroked:n}=this.props,{layerProps:r}=this.state,i="polygons-stroke",o="linestrings",s=!e&&n&&this.shouldRenderSubLayer(i,r.polygonsOutline.data)&&this.getSubLayerClass(i,qh.type),a=this.shouldRenderSubLayer(o,r.lines.data)&&this.getSubLayerClass(o,qh.type);if(s||a){const u=B0(this,qh.props);return[s&&new s(u,this.getSubLayerProps({id:i,updateTriggers:u.updateTriggers}),r.polygonsOutline),a&&new a(u,this.getSubLayerProps({id:o,updateTriggers:u.updateTriggers}),r.lines)]}return null}_renderPointLayers(){const{pointType:e}=this.props,{layerProps:n,binary:r}=this.state;let{highlightedObjectIndex:i}=this.props;!r&&Number.isFinite(i)&&(i=n.points.data.findIndex(a=>a.__source.index===i));const o=new Set(e.split("+")),s=[];for(const a of o){const u="points-".concat(a),l=Xh[a],c=l&&this.shouldRenderSubLayer(u,n.points.data)&&this.getSubLayerClass(u,l.type);if(c){const f=B0(this,l.props);let h=n.points;if(a==="text"&&r){const{instancePickingColors:d,...g}=h.data.attributes;h={...h,data:{...h.data,attributes:g}}}s.push(new c(f,this.getSubLayerProps({id:u,updateTriggers:f.updateTriggers,highlightedObjectIndex:i}),h))}}return s}renderLayers(){const{extruded:e}=this.props,n=this._renderPolygonLayer(),r=this._renderLineLayers(),i=this._renderPointLayers();return[!e&&n,r,i,e&&n]}getSubLayerAccessor(e){const{binary:n}=this.state;return!n||typeof e!="function"?super.getSubLayerAccessor(e):(r,i)=>{const{data:o,index:s}=i,a=Iae(o,s);return e(a,i)}}}b(vk,"layerName","GeoJsonLayer");b(vk,"defaultProps",hue);function Zh(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function due(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function yk(t){let e,n,r;t.length!==2?(e=Zh,n=(a,u)=>Zh(t(a),u),r=(a,u)=>t(a)-u):(e=t===Zh||t===due?t:pue,n=t,r=t);function i(a,u,l=0,c=a.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:s,right:o}}function pue(){return 0}function gue(t){return t===null?NaN:+t}const mue=yk(Zh),vue=mue.right;yk(gue).center;const yue=vue;var $_=Math.sqrt(50),j_=Math.sqrt(10),G_=Math.sqrt(2);function _ue(t,e,n){var r,i=-1,o,s,a;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),(a=_k(t,e,n))===0||!isFinite(a))return[];if(a>0){let u=Math.round(t/a),l=Math.round(e/a);for(u*a<t&&++u,l*a>e&&--l,s=new Array(o=l-u+1);++i<o;)s[i]=(u+i)*a}else{a=-a;let u=Math.round(t*a),l=Math.round(e*a);for(u/a<t&&++u,l/a>e&&--l,s=new Array(o=l-u+1);++i<o;)s[i]=(u+i)/a}return r&&s.reverse(),s}function _k(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=$_?10:o>=j_?5:o>=G_?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=$_?10:o>=j_?5:o>=G_?2:1)}function bue(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=$_?i*=10:o>=j_?i*=5:o>=G_&&(i*=2),e<t?-i:i}function wue(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function iw(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function bk(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Oc(){}var ec=.7,Lp=1/ec,Na="\\s*([+-]?\\d+)\\s*",tc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Eue=/^#([0-9a-f]{3,8})$/,Sue=new RegExp(`^rgb\\(${Na},${Na},${Na}\\)$`),xue=new RegExp(`^rgb\\(${mi},${mi},${mi}\\)$`),Tue=new RegExp(`^rgba\\(${Na},${Na},${Na},${tc}\\)$`),Pue=new RegExp(`^rgba\\(${mi},${mi},${mi},${tc}\\)$`),Aue=new RegExp(`^hsl\\(${tc},${mi},${mi}\\)$`),Cue=new RegExp(`^hsla\\(${tc},${mi},${mi},${tc}\\)$`),J2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iw(Oc,nc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:eA,formatHex:eA,formatHex8:Rue,formatHsl:Lue,formatRgb:tA,toString:tA});function eA(){return this.rgb().formatHex()}function Rue(){return this.rgb().formatHex8()}function Lue(){return wk(this).formatHsl()}function tA(){return this.rgb().formatRgb()}function nc(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Eue.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?nA(e):n===3?new qn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ff(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ff(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Sue.exec(t))?new qn(e[1],e[2],e[3],1):(e=xue.exec(t))?new qn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Tue.exec(t))?Ff(e[1],e[2],e[3],e[4]):(e=Pue.exec(t))?Ff(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Aue.exec(t))?oA(e[1],e[2]/100,e[3]/100,1):(e=Cue.exec(t))?oA(e[1],e[2]/100,e[3]/100,e[4]):J2.hasOwnProperty(t)?nA(J2[t]):t==="transparent"?new qn(NaN,NaN,NaN,0):null}function nA(t){return new qn(t>>16&255,t>>8&255,t&255,1)}function Ff(t,e,n,r){return r<=0&&(t=e=n=NaN),new qn(t,e,n,r)}function Mue(t){return t instanceof Oc||(t=nc(t)),t?(t=t.rgb(),new qn(t.r,t.g,t.b,t.opacity)):new qn}function W_(t,e,n,r){return arguments.length===1?Mue(t):new qn(t,e,n,r==null?1:r)}function qn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}iw(qn,W_,bk(Oc,{brighter(t){return t=t==null?Lp:Math.pow(Lp,t),new qn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ec:Math.pow(ec,t),new qn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qn(fs(this.r),fs(this.g),fs(this.b),Mp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rA,formatHex:rA,formatHex8:Oue,formatRgb:iA,toString:iA}));function rA(){return`#${os(this.r)}${os(this.g)}${os(this.b)}`}function Oue(){return`#${os(this.r)}${os(this.g)}${os(this.b)}${os((isNaN(this.opacity)?1:this.opacity)*255)}`}function iA(){const t=Mp(this.opacity);return`${t===1?"rgb(":"rgba("}${fs(this.r)}, ${fs(this.g)}, ${fs(this.b)}${t===1?")":`, ${t})`}`}function Mp(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function fs(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function os(t){return t=fs(t),(t<16?"0":"")+t.toString(16)}function oA(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new $r(t,e,n,r)}function wk(t){if(t instanceof $r)return new $r(t.h,t.s,t.l,t.opacity);if(t instanceof Oc||(t=nc(t)),!t)return new $r;if(t instanceof $r)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new $r(s,a,u,t.opacity)}function kue(t,e,n,r){return arguments.length===1?wk(t):new $r(t,e,n,r==null?1:r)}function $r(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}iw($r,kue,bk(Oc,{brighter(t){return t=t==null?Lp:Math.pow(Lp,t),new $r(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ec:Math.pow(ec,t),new $r(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new qn(V0(t>=240?t-240:t+120,i,r),V0(t,i,r),V0(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new $r(sA(this.h),Uf(this.s),Uf(this.l),Mp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Mp(this.opacity);return`${t===1?"hsl(":"hsla("}${sA(this.h)}, ${Uf(this.s)*100}%, ${Uf(this.l)*100}%${t===1?")":`, ${t})`}`}}));function sA(t){return t=(t||0)%360,t<0?t+360:t}function Uf(t){return Math.max(0,Math.min(1,t||0))}function V0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ow=t=>()=>t;function Iue(t,e){return function(n){return t+n*e}}function Nue(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Due(t){return(t=+t)==1?Ek:function(e,n){return n-e?Nue(e,n,t):ow(isNaN(e)?n:e)}}function Ek(t,e){var n=e-t;return n?Iue(t,n):ow(isNaN(t)?e:t)}const aA=function t(e){var n=Due(e);function r(i,o){var s=n((i=W_(i)).r,(o=W_(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=Ek(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=t,r}(1);function Fue(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Uue(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function zue(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=sw(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function Bue(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Op(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Vue(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=sw(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var H_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$0=new RegExp(H_.source,"g");function $ue(t){return function(){return t}}function jue(t){return function(e){return t(e)+""}}function Gue(t,e){var n=H_.lastIndex=$0.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(t=t+"",e=e+"";(r=H_.exec(t))&&(i=$0.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:Op(r,i)})),n=$0.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?jue(u[0].x):$ue(e):(e=u.length,function(l){for(var c=0,f;c<e;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function sw(t,e){var n=typeof e,r;return e==null||n==="boolean"?ow(e):(n==="number"?Op:n==="string"?(r=nc(e))?(e=r,aA):Gue:e instanceof nc?aA:e instanceof Date?Bue:Uue(e)?Fue:Array.isArray(e)?zue:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Vue:Op)(t,e)}function Wue(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Hue(t){return function(){return t}}function Yue(t){return+t}var uA=[0,1];function Sa(t){return t}function Y_(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Hue(isNaN(e)?NaN:.5)}function Xue(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function que(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=Y_(i,r),o=n(s,o)):(r=Y_(r,i),o=n(o,s)),function(a){return o(r(a))}}function Zue(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Y_(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var u=yue(t,a,1,r)-1;return o[u](i[u](a))}}function Kue(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Que(){var t=uA,e=uA,n=sw,r,i,o,s=Sa,a,u,l;function c(){var h=Math.min(t.length,e.length);return s!==Sa&&(s=Xue(t[0],t[h-1])),a=h>2?Zue:que,u=l=null,f}function f(h){return h==null||isNaN(h=+h)?o:(u||(u=a(t.map(r),e,n)))(r(s(h)))}return f.invert=function(h){return s(i((l||(l=a(e,t.map(r),Op)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Yue),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=Wue,c()},f.clamp=function(h){return arguments.length?(s=h?!0:Sa,c()):s!==Sa},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,d){return r=h,i=d,c()}}function Jue(){return Que()(Sa,Sa)}function ele(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function kp(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function iu(t){return t=kp(Math.abs(t)),t?t[1]:NaN}function tle(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function nle(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var rle=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ip(t){if(!(e=rle.exec(t)))throw new Error("invalid format: "+t);var e;return new aw({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ip.prototype=aw.prototype;function aw(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}aw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ile(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Sk;function ole(t,e){var n=kp(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Sk=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+kp(t,Math.max(0,e+o-1))[0]}function lA(t,e){var n=kp(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const cA={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ele,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>lA(t*100,e),r:lA,s:ole,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function fA(t){return t}var hA=Array.prototype.map,dA=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function sle(t){var e=t.grouping===void 0||t.thousands===void 0?fA:tle(hA.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?fA:nle(hA.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f){f=Ip(f);var h=f.fill,d=f.align,g=f.sign,m=f.symbol,S=f.zero,_=f.width,y=f.comma,w=f.precision,T=f.trim,R=f.type;R==="n"?(y=!0,R="g"):cA[R]||(w===void 0&&(w=12),T=!0,R="g"),(S||h==="0"&&d==="=")&&(S=!0,h="0",d="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",D=m==="$"?r:/[%p]/.test(R)?s:"",F=cA[R],W=/[defgprs%]/.test(R);w=w===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function j(H){var pe=C,ue=D,se,Ce,De;if(R==="c")ue=F(H)+ue,H="";else{H=+H;var He=H<0||1/H<0;if(H=isNaN(H)?u:F(Math.abs(H),w),T&&(H=ile(H)),He&&+H==0&&g!=="+"&&(He=!1),pe=(He?g==="("?g:a:g==="-"||g==="("?"":g)+pe,ue=(R==="s"?dA[8+Sk/3]:"")+ue+(He&&g==="("?")":""),W){for(se=-1,Ce=H.length;++se<Ce;)if(De=H.charCodeAt(se),48>De||De>57){ue=(De===46?i+H.slice(se+1):H.slice(se))+ue,H=H.slice(0,se);break}}}y&&!S&&(H=e(H,1/0));var ae=pe.length+H.length+ue.length,ve=ae<_?new Array(_-ae+1).join(h):"";switch(y&&S&&(H=e(ve+H,ve.length?_-ue.length:1/0),ve=""),d){case"<":H=pe+H+ue+ve;break;case"=":H=pe+ve+H+ue;break;case"^":H=ve.slice(0,ae=ve.length>>1)+pe+H+ue+ve.slice(ae);break;default:H=ve+pe+H+ue;break}return o(H)}return j.toString=function(){return f+""},j}function c(f,h){var d=l((f=Ip(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(iu(h)/3)))*3,m=Math.pow(10,-g),S=dA[8+g/3];return function(_){return d(m*_)+S}}return{format:l,formatPrefix:c}}var zf,xk,Tk;ale({thousands:",",grouping:[3],currency:["$",""]});function ale(t){return zf=sle(t),xk=zf.format,Tk=zf.formatPrefix,zf}function ule(t){return Math.max(0,-iu(Math.abs(t)))}function lle(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(iu(e)/3)))*3-iu(Math.abs(t)))}function cle(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,iu(e)-iu(t))+1}function fle(t,e,n,r){var i=bue(t,e,n),o;switch(r=Ip(r==null?",f":r),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=lle(i,s))&&(r.precision=o),Tk(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=cle(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=ule(i))&&(r.precision=o-(r.type==="%")*2);break}}return xk(r)}function hle(t){var e=t.domain;return t.ticks=function(n){var r=e();return _ue(r[0],r[r.length-1],n==null?10:n)},t.tickFormat=function(n,r){var i=e();return fle(i[0],i[i.length-1],n==null?10:n,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],u,l,c=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);c-- >0;){if(l=_k(s,a,n),l===u)return r[i]=s,r[o]=a,e(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;u=l}return t},t}function dle(){var t=Jue();return t.copy=function(){return Kue(t,dle())},wue.apply(t,arguments),hle(t)}var uw={};uw.remove=ple;var Kh=[{base:" ",chars:"\xA0"},{base:"0",chars:"\u07C0"},{base:"A",chars:"\u24B6\uFF21\xC0\xC1\xC2\u1EA6\u1EA4\u1EAA\u1EA8\xC3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\xC4\u01DE\u1EA2\xC5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F"},{base:"AA",chars:"\uA732"},{base:"AE",chars:"\xC6\u01FC\u01E2"},{base:"AO",chars:"\uA734"},{base:"AU",chars:"\uA736"},{base:"AV",chars:"\uA738\uA73A"},{base:"AY",chars:"\uA73C"},{base:"B",chars:"\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0181"},{base:"C",chars:"\u24B8\uFF23\uA73E\u1E08\u0106C\u0108\u010A\u010C\xC7\u0187\u023B"},{base:"D",chars:"\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018A\u0189\u1D05\uA779"},{base:"Dh",chars:"\xD0"},{base:"DZ",chars:"\u01F1\u01C4"},{base:"Dz",chars:"\u01F2\u01C5"},{base:"E",chars:"\u025B\u24BA\uFF25\xC8\xC9\xCA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\xCB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E\u1D07"},{base:"F",chars:"\uA77C\u24BB\uFF26\u1E1E\u0191\uA77B"},{base:"G",chars:"\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E\u0262"},{base:"H",chars:"\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D"},{base:"I",chars:"\u24BE\uFF29\xCC\xCD\xCE\u0128\u012A\u012C\u0130\xCF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197"},{base:"J",chars:"\u24BF\uFF2A\u0134\u0248\u0237"},{base:"K",chars:"\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2"},{base:"L",chars:"\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780"},{base:"LJ",chars:"\u01C7"},{base:"Lj",chars:"\u01C8"},{base:"M",chars:"\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C\u03FB"},{base:"N",chars:"\uA7A4\u0220\u24C3\uFF2E\u01F8\u0143\xD1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u019D\uA790\u1D0E"},{base:"NJ",chars:"\u01CA"},{base:"Nj",chars:"\u01CB"},{base:"O",chars:"\u24C4\uFF2F\xD2\xD3\xD4\u1ED2\u1ED0\u1ED6\u1ED4\xD5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\xD6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\xD8\u01FE\u0186\u019F\uA74A\uA74C"},{base:"OE",chars:"\u0152"},{base:"OI",chars:"\u01A2"},{base:"OO",chars:"\uA74E"},{base:"OU",chars:"\u0222"},{base:"P",chars:"\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754"},{base:"Q",chars:"\u24C6\uFF31\uA756\uA758\u024A"},{base:"R",chars:"\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782"},{base:"S",chars:"\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784"},{base:"T",chars:"\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786"},{base:"Th",chars:"\xDE"},{base:"TZ",chars:"\uA728"},{base:"U",chars:"\u24CA\uFF35\xD9\xDA\xDB\u0168\u1E78\u016A\u1E7A\u016C\xDC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244"},{base:"V",chars:"\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245"},{base:"VY",chars:"\uA760"},{base:"W",chars:"\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72"},{base:"X",chars:"\u24CD\uFF38\u1E8A\u1E8C"},{base:"Y",chars:"\u24CE\uFF39\u1EF2\xDD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE"},{base:"Z",chars:"\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762"},{base:"a",chars:"\u24D0\uFF41\u1E9A\xE0\xE1\xE2\u1EA7\u1EA5\u1EAB\u1EA9\xE3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\xE4\u01DF\u1EA3\xE5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250\u0251"},{base:"aa",chars:"\uA733"},{base:"ae",chars:"\xE6\u01FD\u01E3"},{base:"ao",chars:"\uA735"},{base:"au",chars:"\uA737"},{base:"av",chars:"\uA739\uA73B"},{base:"ay",chars:"\uA73D"},{base:"b",chars:"\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253\u0182"},{base:"c",chars:"\uFF43\u24D2\u0107\u0109\u010B\u010D\xE7\u1E09\u0188\u023C\uA73F\u2184"},{base:"d",chars:"\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\u018B\u13E7\u0501\uA7AA"},{base:"dh",chars:"\xF0"},{base:"dz",chars:"\u01F3\u01C6"},{base:"e",chars:"\u24D4\uFF45\xE8\xE9\xEA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\xEB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u01DD"},{base:"f",chars:"\u24D5\uFF46\u1E1F\u0192"},{base:"ff",chars:"\uFB00"},{base:"fi",chars:"\uFB01"},{base:"fl",chars:"\uFB02"},{base:"ffi",chars:"\uFB03"},{base:"ffl",chars:"\uFB04"},{base:"g",chars:"\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\uA77F\u1D79"},{base:"h",chars:"\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265"},{base:"hv",chars:"\u0195"},{base:"i",chars:"\u24D8\uFF49\xEC\xED\xEE\u0129\u012B\u012D\xEF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131"},{base:"j",chars:"\u24D9\uFF4A\u0135\u01F0\u0249"},{base:"k",chars:"\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3"},{base:"l",chars:"\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747\u026D"},{base:"lj",chars:"\u01C9"},{base:"m",chars:"\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F"},{base:"n",chars:"\u24DD\uFF4E\u01F9\u0144\xF1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5\u043B\u0509"},{base:"nj",chars:"\u01CC"},{base:"o",chars:"\u24DE\uFF4F\xF2\xF3\xF4\u1ED3\u1ED1\u1ED7\u1ED5\xF5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\xF6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\xF8\u01FF\uA74B\uA74D\u0275\u0254\u1D11"},{base:"oe",chars:"\u0153"},{base:"oi",chars:"\u01A3"},{base:"oo",chars:"\uA74F"},{base:"ou",chars:"\u0223"},{base:"p",chars:"\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755\u03C1"},{base:"q",chars:"\u24E0\uFF51\u024B\uA757\uA759"},{base:"r",chars:"\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783"},{base:"s",chars:"\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B\u0282"},{base:"ss",chars:"\xDF"},{base:"t",chars:"\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787"},{base:"th",chars:"\xFE"},{base:"tz",chars:"\uA729"},{base:"u",chars:"\u24E4\uFF55\xF9\xFA\xFB\u0169\u1E79\u016B\u1E7B\u016D\xFC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289"},{base:"v",chars:"\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C"},{base:"vy",chars:"\uA761"},{base:"w",chars:"\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73"},{base:"x",chars:"\u24E7\uFF58\u1E8B\u1E8D"},{base:"y",chars:"\u24E8\uFF59\u1EF3\xFD\u0177\u1EF9\u0233\u1E8F\xFF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF"},{base:"z",chars:"\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763"}],lw={};for(var Bf=0;Bf<Kh.length;Bf+=1)for(var pA=Kh[Bf].chars,j0=0;j0<pA.length;j0+=1)lw[pA[j0]]=Kh[Bf].base;function ple(t){return t.replace(/[^\u0000-\u007e]/g,function(e){return lw[e]||e})}uw.replacementList=Kh;uw.diacriticsMap=lw;function Dle(t){return _c({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(t)}function Fle(t){return _c({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"}}]})(t)}export{G3 as A,ble as B,Tle as C,pE as D,yle as E,L6 as F,Ej as G,xD as H,sU as L,xle as M,wle as N,_le as O,Ele as P,Rt as R,Cd as S,Ple as Z,ke as a,gM as b,yc as c,uw as d,Rle as e,qb as f,vk as g,Mle as h,kle as i,vs as j,Ole as k,dle as l,Fle as m,Sle as n,Dle as o,Nle as p,Ile as q,B as r,Ale as s,Lle as t,pM as u,Cle as v,Q6 as w,mle as x,gle as y,vle as z};
