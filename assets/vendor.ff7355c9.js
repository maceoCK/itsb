function K2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var nD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Q2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var B={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ql=Symbol.for("react.element"),rD=Symbol.for("react.portal"),iD=Symbol.for("react.fragment"),oD=Symbol.for("react.strict_mode"),sD=Symbol.for("react.profiler"),aD=Symbol.for("react.provider"),uD=Symbol.for("react.context"),lD=Symbol.for("react.forward_ref"),cD=Symbol.for("react.suspense"),fD=Symbol.for("react.memo"),hD=Symbol.for("react.lazy"),qw=Symbol.iterator;function dD(t){return t===null||typeof t!="object"?null:(t=qw&&t[qw]||t["@@iterator"],typeof t=="function"?t:null)}var J2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eA=Object.assign,tA={};function nu(t,e,n){this.props=t,this.context=e,this.refs=tA,this.updater=n||J2}nu.prototype.isReactComponent={};nu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};nu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nA(){}nA.prototype=nu.prototype;function N_(t,e,n){this.props=t,this.context=e,this.refs=tA,this.updater=n||J2}var D_=N_.prototype=new nA;D_.constructor=N_;eA(D_,nu.prototype);D_.isPureReactComponent=!0;var Zw=Array.isArray,rA=Object.prototype.hasOwnProperty,F_={current:null},iA={key:!0,ref:!0,__self:!0,__source:!0};function oA(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)rA.call(e,r)&&!iA.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ql,type:t,key:o,ref:s,props:i,_owner:F_.current}}function pD(t,e){return{$$typeof:Ql,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function U_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ql}function gD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Kw=/\/+/g;function sm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gD(""+t.key):e.toString(36)}function kf(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Ql:case rD:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+sm(s,0):r,Zw(i)?(n="",t!=null&&(n=t.replace(Kw,"$&/")+"/"),kf(i,e,n,"",function(l){return l})):i!=null&&(U_(i)&&(i=pD(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Kw,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Zw(t))for(var a=0;a<t.length;a++){o=t[a];var u=r+sm(o,a);s+=kf(o,e,n,u,i)}else if(u=dD(t),typeof u=="function")for(t=u.call(t),a=0;!(o=t.next()).done;)o=o.value,u=r+sm(o,a++),s+=kf(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Vc(t,e,n){if(t==null)return t;var r=[],i=0;return kf(t,r,"","",function(o){return e.call(n,o,i++)}),r}function mD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zn={current:null},If={transition:null},vD={ReactCurrentDispatcher:zn,ReactCurrentBatchConfig:If,ReactCurrentOwner:F_};tt.Children={map:Vc,forEach:function(t,e,n){Vc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vc(t,function(){e++}),e},toArray:function(t){return Vc(t,function(e){return e})||[]},only:function(t){if(!U_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tt.Component=nu;tt.Fragment=iD;tt.Profiler=sD;tt.PureComponent=N_;tt.StrictMode=oD;tt.Suspense=cD;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vD;tt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=eA({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=F_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)rA.call(e,u)&&!iA.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Ql,type:t.type,key:i,ref:o,props:r,_owner:s}};tt.createContext=function(t){return t={$$typeof:uD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:aD,_context:t},t.Consumer=t};tt.createElement=oA;tt.createFactory=function(t){var e=oA.bind(null,t);return e.type=t,e};tt.createRef=function(){return{current:null}};tt.forwardRef=function(t){return{$$typeof:lD,render:t}};tt.isValidElement=U_;tt.lazy=function(t){return{$$typeof:hD,_payload:{_status:-1,_result:t},_init:mD}};tt.memo=function(t,e){return{$$typeof:fD,type:t,compare:e===void 0?null:e}};tt.startTransition=function(t){var e=If.transition;If.transition={};try{t()}finally{If.transition=e}};tt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};tt.useCallback=function(t,e){return zn.current.useCallback(t,e)};tt.useContext=function(t){return zn.current.useContext(t)};tt.useDebugValue=function(){};tt.useDeferredValue=function(t){return zn.current.useDeferredValue(t)};tt.useEffect=function(t,e){return zn.current.useEffect(t,e)};tt.useId=function(){return zn.current.useId()};tt.useImperativeHandle=function(t,e,n){return zn.current.useImperativeHandle(t,e,n)};tt.useInsertionEffect=function(t,e){return zn.current.useInsertionEffect(t,e)};tt.useLayoutEffect=function(t,e){return zn.current.useLayoutEffect(t,e)};tt.useMemo=function(t,e){return zn.current.useMemo(t,e)};tt.useReducer=function(t,e,n){return zn.current.useReducer(t,e,n)};tt.useRef=function(t){return zn.current.useRef(t)};tt.useState=function(t){return zn.current.useState(t)};tt.useSyncExternalStore=function(t,e,n){return zn.current.useSyncExternalStore(t,e,n)};tt.useTransition=function(){return zn.current.useTransition()};tt.version="18.2.0";(function(t){t.exports=tt})(B);const Rt=Q2(B.exports),O0=K2({__proto__:null,default:Rt},[B.exports]);var Qw={},Jl={exports:{}},gr={},sA={exports:{}},aA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ae,ve){var G=ae.length;ae.push(ve);e:for(;0<G;){var X=G-1>>>1,O=ae[X];if(0<i(O,ve))ae[X]=ve,ae[G]=O,G=X;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var ve=ae[0],G=ae.pop();if(G!==ve){ae[0]=G;e:for(var X=0,O=ae.length,q=O>>>1;X<q;){var Q=2*(X+1)-1,de=ae[Q],le=Q+1,_e=ae[le];if(0>i(de,G))le<O&&0>i(_e,de)?(ae[X]=_e,ae[le]=G,X=le):(ae[X]=de,ae[Q]=G,X=Q);else if(le<O&&0>i(_e,G))ae[X]=_e,ae[le]=G,X=le;else break e}}return ve}function i(ae,ve){var G=ae.sortIndex-ve.sortIndex;return G!==0?G:ae.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var u=[],l=[],c=1,f=null,h=3,d=!1,g=!1,m=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ae){for(var ve=n(l);ve!==null;){if(ve.callback===null)r(l);else if(ve.startTime<=ae)r(l),ve.sortIndex=ve.expirationTime,e(u,ve);else break;ve=n(l)}}function T(ae){if(m=!1,b(ae),!g)if(n(u)!==null)g=!0,De(R);else{var ve=n(l);ve!==null&&He(T,ve.startTime-ae)}}function R(ae,ve){g=!1,m&&(m=!1,_(F),F=-1),d=!0;var G=h;try{for(b(ve),f=n(u);f!==null&&(!(f.expirationTime>ve)||ae&&!H());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var O=X(f.expirationTime<=ve);ve=t.unstable_now(),typeof O=="function"?f.callback=O:f===n(u)&&r(u),b(ve)}else r(u);f=n(u)}if(f!==null)var q=!0;else{var Q=n(l);Q!==null&&He(T,Q.startTime-ve),q=!1}return q}finally{f=null,h=G,d=!1}}var C=!1,D=null,F=-1,W=5,j=-1;function H(){return!(t.unstable_now()-j<W)}function pe(){if(D!==null){var ae=t.unstable_now();j=ae;var ve=!0;try{ve=D(!0,ae)}finally{ve?ue():(C=!1,D=null)}}else C=!1}var ue;if(typeof y=="function")ue=function(){y(pe)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,Ce=se.port2;se.port1.onmessage=pe,ue=function(){Ce.postMessage(null)}}else ue=function(){x(pe,0)};function De(ae){D=ae,C||(C=!0,ue())}function He(ae,ve){F=x(function(){ae(t.unstable_now())},ve)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ae){ae.callback=null},t.unstable_continueExecution=function(){g||d||(g=!0,De(R))},t.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<ae?Math.floor(1e3/ae):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(ae){switch(h){case 1:case 2:case 3:var ve=3;break;default:ve=h}var G=h;h=ve;try{return ae()}finally{h=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ae,ve){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var G=h;h=ae;try{return ve()}finally{h=G}},t.unstable_scheduleCallback=function(ae,ve,G){var X=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?X+G:X):G=X,ae){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=G+O,ae={id:c++,callback:ve,priorityLevel:ae,startTime:G,expirationTime:O,sortIndex:-1},G>X?(ae.sortIndex=G,e(l,ae),n(u)===null&&ae===n(l)&&(m?(_(F),F=-1):m=!0,He(T,G-X))):(ae.sortIndex=O,e(u,ae),g||d||(g=!0,De(R))),ae},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(ae){var ve=h;return function(){var G=h;h=ve;try{return ae.apply(this,arguments)}finally{h=G}}}})(aA);(function(t){t.exports=aA})(sA);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uA=B.exports,dr=sA.exports;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lA=new Set,bl={};function Es(t,e){Oa(t,e),Oa(t+"Capture",e)}function Oa(t,e){for(bl[t]=e,t=0;t<e.length;t++)lA.add(e[t])}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),k0=Object.prototype.hasOwnProperty,yD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jw={},eE={};function _D(t){return k0.call(eE,t)?!0:k0.call(Jw,t)?!1:yD.test(t)?eE[t]=!0:(Jw[t]=!0,!1)}function bD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function wD(t,e,n,r){if(e===null||typeof e>"u"||bD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bn(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var En={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){En[t]=new Bn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];En[e]=new Bn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){En[t]=new Bn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){En[t]=new Bn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){En[t]=new Bn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){En[t]=new Bn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){En[t]=new Bn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){En[t]=new Bn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){En[t]=new Bn(t,5,!1,t.toLowerCase(),null,!1,!1)});var z_=/[\-:]([a-z])/g;function B_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(z_,B_);En[e]=new Bn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(z_,B_);En[e]=new Bn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(z_,B_);En[e]=new Bn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){En[t]=new Bn(t,1,!1,t.toLowerCase(),null,!1,!1)});En.xlinkHref=new Bn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){En[t]=new Bn(t,1,!1,t.toLowerCase(),null,!0,!0)});function V_(t,e,n,r){var i=En.hasOwnProperty(e)?En[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(wD(e,n,i,r)&&(n=null),r||i===null?_D(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $i=uA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$c=Symbol.for("react.element"),ra=Symbol.for("react.portal"),ia=Symbol.for("react.fragment"),$_=Symbol.for("react.strict_mode"),I0=Symbol.for("react.profiler"),cA=Symbol.for("react.provider"),fA=Symbol.for("react.context"),j_=Symbol.for("react.forward_ref"),N0=Symbol.for("react.suspense"),D0=Symbol.for("react.suspense_list"),G_=Symbol.for("react.memo"),so=Symbol.for("react.lazy"),hA=Symbol.for("react.offscreen"),tE=Symbol.iterator;function Su(t){return t===null||typeof t!="object"?null:(t=tE&&t[tE]||t["@@iterator"],typeof t=="function"?t:null)}var jt=Object.assign,am;function Yu(t){if(am===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);am=e&&e[1]||""}return`
`+am+t}var um=!1;function lm(t,e){if(!t||um)return"";um=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=a);break}}}finally{um=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yu(t):""}function ED(t){switch(t.tag){case 5:return Yu(t.type);case 16:return Yu("Lazy");case 13:return Yu("Suspense");case 19:return Yu("SuspenseList");case 0:case 2:case 15:return t=lm(t.type,!1),t;case 11:return t=lm(t.type.render,!1),t;case 1:return t=lm(t.type,!0),t;default:return""}}function F0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ia:return"Fragment";case ra:return"Portal";case I0:return"Profiler";case $_:return"StrictMode";case N0:return"Suspense";case D0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fA:return(t.displayName||"Context")+".Consumer";case cA:return(t._context.displayName||"Context")+".Provider";case j_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case G_:return e=t.displayName||null,e!==null?e:F0(t.type)||"Memo";case so:e=t._payload,t=t._init;try{return F0(t(e))}catch{}}return null}function SD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F0(e);case 8:return e===$_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ao(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xD(t){var e=dA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jc(t){t._valueTracker||(t._valueTracker=xD(t))}function pA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function jh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function U0(t,e){var n=e.checked;return jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function nE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ao(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gA(t,e){e=e.checked,e!=null&&V_(t,"checked",e,!1)}function z0(t,e){gA(t,e);var n=Ao(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?B0(t,e.type,n):e.hasOwnProperty("defaultValue")&&B0(t,e.type,Ao(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function B0(t,e,n){(e!=="number"||jh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xu=Array.isArray;function ba(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ao(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function V0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function iE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Xu(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ao(n)}}function mA(t,e){var n=Ao(e.value),r=Ao(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function oE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gc,yA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gc=Gc||document.createElement("div"),Gc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TD=["Webkit","ms","Moz","O"];Object.keys(nl).forEach(function(t){TD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nl[e]=nl[t]})});function _A(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nl.hasOwnProperty(t)&&nl[t]?(""+e).trim():e+"px"}function bA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=_A(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var PD=jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function j0(t,e){if(e){if(PD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function G0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var W0=null;function W_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var H0=null,wa=null,Ea=null;function sE(t){if(t=nc(t)){if(typeof H0!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=Lp(e),H0(t.stateNode,t.type,e))}}function wA(t){wa?Ea?Ea.push(t):Ea=[t]:wa=t}function EA(){if(wa){var t=wa,e=Ea;if(Ea=wa=null,sE(t),e)for(t=0;t<e.length;t++)sE(e[t])}}function SA(t,e){return t(e)}function xA(){}var cm=!1;function TA(t,e,n){if(cm)return t(e,n);cm=!0;try{return SA(t,e,n)}finally{cm=!1,(wa!==null||Ea!==null)&&(xA(),EA())}}function El(t,e){var n=t.stateNode;if(n===null)return null;var r=Lp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var Y0=!1;if(ki)try{var xu={};Object.defineProperty(xu,"passive",{get:function(){Y0=!0}}),window.addEventListener("test",xu,xu),window.removeEventListener("test",xu,xu)}catch{Y0=!1}function AD(t,e,n,r,i,o,s,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var rl=!1,Gh=null,Wh=!1,X0=null,CD={onError:function(t){rl=!0,Gh=t}};function RD(t,e,n,r,i,o,s,a,u){rl=!1,Gh=null,AD.apply(CD,arguments)}function LD(t,e,n,r,i,o,s,a,u){if(RD.apply(this,arguments),rl){if(rl){var l=Gh;rl=!1,Gh=null}else throw Error(oe(198));Wh||(Wh=!0,X0=l)}}function Ss(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function PA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function aE(t){if(Ss(t)!==t)throw Error(oe(188))}function MD(t){var e=t.alternate;if(!e){if(e=Ss(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return aE(i),t;if(o===r)return aE(i),e;o=o.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function AA(t){return t=MD(t),t!==null?CA(t):null}function CA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=CA(t);if(e!==null)return e;t=t.sibling}return null}var RA=dr.unstable_scheduleCallback,uE=dr.unstable_cancelCallback,OD=dr.unstable_shouldYield,kD=dr.unstable_requestPaint,Xt=dr.unstable_now,ID=dr.unstable_getCurrentPriorityLevel,H_=dr.unstable_ImmediatePriority,LA=dr.unstable_UserBlockingPriority,Hh=dr.unstable_NormalPriority,ND=dr.unstable_LowPriority,MA=dr.unstable_IdlePriority,Pp=null,hi=null;function DD(t){if(hi&&typeof hi.onCommitFiberRoot=="function")try{hi.onCommitFiberRoot(Pp,t,void 0,(t.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:zD,FD=Math.log,UD=Math.LN2;function zD(t){return t>>>=0,t===0?32:31-(FD(t)/UD|0)|0}var Wc=64,Hc=4194304;function qu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=qu(a):(o&=s,o!==0&&(r=qu(o)))}else s=n&~i,s!==0?r=qu(s):o!==0&&(r=qu(o));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gr(e),i=1<<n,r|=t[n],e&=~i;return r}function BD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Gr(o),a=1<<s,u=i[s];u===-1?((a&n)===0||(a&r)!==0)&&(i[s]=BD(a,e)):u<=e&&(t.expiredLanes|=a),o&=~a}}function q0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function OA(){var t=Wc;return Wc<<=1,(Wc&4194240)===0&&(Wc=64),t}function fm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ec(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gr(e),t[e]=n}function $D(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Gr(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Y_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var yt=0;function kA(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var IA,X_,NA,DA,FA,Z0=!1,Yc=[],vo=null,yo=null,_o=null,Sl=new Map,xl=new Map,lo=[],jD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lE(t,e){switch(t){case"focusin":case"focusout":vo=null;break;case"dragenter":case"dragleave":yo=null;break;case"mouseover":case"mouseout":_o=null;break;case"pointerover":case"pointerout":Sl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(e.pointerId)}}function Tu(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=nc(e),e!==null&&X_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function GD(t,e,n,r,i){switch(e){case"focusin":return vo=Tu(vo,t,e,n,r,i),!0;case"dragenter":return yo=Tu(yo,t,e,n,r,i),!0;case"mouseover":return _o=Tu(_o,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Sl.set(o,Tu(Sl.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,xl.set(o,Tu(xl.get(o)||null,t,e,n,r,i)),!0}return!1}function UA(t){var e=Ko(t.target);if(e!==null){var n=Ss(e);if(n!==null){if(e=n.tag,e===13){if(e=PA(n),e!==null){t.blockedOn=e,FA(t.priority,function(){NA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=K0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);W0=r,n.target.dispatchEvent(r),W0=null}else return e=nc(n),e!==null&&X_(e),t.blockedOn=n,!1;e.shift()}return!0}function cE(t,e,n){Nf(t)&&n.delete(e)}function WD(){Z0=!1,vo!==null&&Nf(vo)&&(vo=null),yo!==null&&Nf(yo)&&(yo=null),_o!==null&&Nf(_o)&&(_o=null),Sl.forEach(cE),xl.forEach(cE)}function Pu(t,e){t.blockedOn===e&&(t.blockedOn=null,Z0||(Z0=!0,dr.unstable_scheduleCallback(dr.unstable_NormalPriority,WD)))}function Tl(t){function e(i){return Pu(i,t)}if(0<Yc.length){Pu(Yc[0],t);for(var n=1;n<Yc.length;n++){var r=Yc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vo!==null&&Pu(vo,t),yo!==null&&Pu(yo,t),_o!==null&&Pu(_o,t),Sl.forEach(e),xl.forEach(e),n=0;n<lo.length;n++)r=lo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<lo.length&&(n=lo[0],n.blockedOn===null);)UA(n),n.blockedOn===null&&lo.shift()}var Sa=$i.ReactCurrentBatchConfig,Xh=!0;function HD(t,e,n,r){var i=yt,o=Sa.transition;Sa.transition=null;try{yt=1,q_(t,e,n,r)}finally{yt=i,Sa.transition=o}}function YD(t,e,n,r){var i=yt,o=Sa.transition;Sa.transition=null;try{yt=4,q_(t,e,n,r)}finally{yt=i,Sa.transition=o}}function q_(t,e,n,r){if(Xh){var i=K0(t,e,n,r);if(i===null)wm(t,e,r,qh,n),lE(t,r);else if(GD(i,t,e,n,r))r.stopPropagation();else if(lE(t,r),e&4&&-1<jD.indexOf(t)){for(;i!==null;){var o=nc(i);if(o!==null&&IA(o),o=K0(t,e,n,r),o===null&&wm(t,e,r,qh,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else wm(t,e,r,null,n)}}var qh=null;function K0(t,e,n,r){if(qh=null,t=W_(r),t=Ko(t),t!==null)if(e=Ss(t),e===null)t=null;else if(n=e.tag,n===13){if(t=PA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qh=t,null}function zA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ID()){case H_:return 1;case LA:return 4;case Hh:case ND:return 16;case MA:return 536870912;default:return 16}default:return 16}}var ho=null,Z_=null,Df=null;function BA(){if(Df)return Df;var t,e=Z_,n=e.length,r,i="value"in ho?ho.value:ho.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Df=i.slice(t,1<r?1-r:void 0)}function Ff(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xc(){return!0}function fE(){return!1}function mr(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xc:fE,this.isPropagationStopped=fE,this}return jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xc)},persist:function(){},isPersistent:Xc}),e}var ru={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},K_=mr(ru),tc=jt({},ru,{view:0,detail:0}),XD=mr(tc),hm,dm,Au,Ap=jt({},tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Q_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Au&&(Au&&t.type==="mousemove"?(hm=t.screenX-Au.screenX,dm=t.screenY-Au.screenY):dm=hm=0,Au=t),hm)},movementY:function(t){return"movementY"in t?t.movementY:dm}}),hE=mr(Ap),qD=jt({},Ap,{dataTransfer:0}),ZD=mr(qD),KD=jt({},tc,{relatedTarget:0}),pm=mr(KD),QD=jt({},ru,{animationName:0,elapsedTime:0,pseudoElement:0}),JD=mr(QD),eF=jt({},ru,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tF=mr(eF),nF=jt({},ru,{data:0}),dE=mr(nF),rF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oF[t])?!!e[t]:!1}function Q_(){return sF}var aF=jt({},tc,{key:function(t){if(t.key){var e=rF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ff(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Q_,charCode:function(t){return t.type==="keypress"?Ff(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ff(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uF=mr(aF),lF=jt({},Ap,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pE=mr(lF),cF=jt({},tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Q_}),fF=mr(cF),hF=jt({},ru,{propertyName:0,elapsedTime:0,pseudoElement:0}),dF=mr(hF),pF=jt({},Ap,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gF=mr(pF),mF=[9,13,27,32],J_=ki&&"CompositionEvent"in window,il=null;ki&&"documentMode"in document&&(il=document.documentMode);var vF=ki&&"TextEvent"in window&&!il,VA=ki&&(!J_||il&&8<il&&11>=il),gE=String.fromCharCode(32),mE=!1;function $A(t,e){switch(t){case"keyup":return mF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oa=!1;function yF(t,e){switch(t){case"compositionend":return jA(e);case"keypress":return e.which!==32?null:(mE=!0,gE);case"textInput":return t=e.data,t===gE&&mE?null:t;default:return null}}function _F(t,e){if(oa)return t==="compositionend"||!J_&&$A(t,e)?(t=BA(),Df=Z_=ho=null,oa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return VA&&e.locale!=="ko"?null:e.data;default:return null}}var bF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bF[t.type]:e==="textarea"}function GA(t,e,n,r){wA(r),e=Zh(e,"onChange"),0<e.length&&(n=new K_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ol=null,Pl=null;function wF(t){tC(t,0)}function Cp(t){var e=ua(t);if(pA(e))return t}function EF(t,e){if(t==="change")return e}var WA=!1;if(ki){var gm;if(ki){var mm="oninput"in document;if(!mm){var yE=document.createElement("div");yE.setAttribute("oninput","return;"),mm=typeof yE.oninput=="function"}gm=mm}else gm=!1;WA=gm&&(!document.documentMode||9<document.documentMode)}function _E(){ol&&(ol.detachEvent("onpropertychange",HA),Pl=ol=null)}function HA(t){if(t.propertyName==="value"&&Cp(Pl)){var e=[];GA(e,Pl,t,W_(t)),TA(wF,e)}}function SF(t,e,n){t==="focusin"?(_E(),ol=e,Pl=n,ol.attachEvent("onpropertychange",HA)):t==="focusout"&&_E()}function xF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cp(Pl)}function TF(t,e){if(t==="click")return Cp(e)}function PF(t,e){if(t==="input"||t==="change")return Cp(e)}function AF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yr=typeof Object.is=="function"?Object.is:AF;function Al(t,e){if(Yr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!k0.call(e,i)||!Yr(t[i],e[i]))return!1}return!0}function bE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wE(t,e){var n=bE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bE(n)}}function YA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?YA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function XA(){for(var t=window,e=jh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=jh(t.document)}return e}function e1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CF(t){var e=XA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&YA(n.ownerDocument.documentElement,n)){if(r!==null&&e1(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=wE(n,o);var s=wE(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var RF=ki&&"documentMode"in document&&11>=document.documentMode,sa=null,Q0=null,sl=null,J0=!1;function EE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;J0||sa==null||sa!==jh(r)||(r=sa,"selectionStart"in r&&e1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sl&&Al(sl,r)||(sl=r,r=Zh(Q0,"onSelect"),0<r.length&&(e=new K_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=sa)))}function qc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var aa={animationend:qc("Animation","AnimationEnd"),animationiteration:qc("Animation","AnimationIteration"),animationstart:qc("Animation","AnimationStart"),transitionend:qc("Transition","TransitionEnd")},vm={},qA={};ki&&(qA=document.createElement("div").style,"AnimationEvent"in window||(delete aa.animationend.animation,delete aa.animationiteration.animation,delete aa.animationstart.animation),"TransitionEvent"in window||delete aa.transitionend.transition);function Rp(t){if(vm[t])return vm[t];if(!aa[t])return t;var e=aa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qA)return vm[t]=e[n];return t}var ZA=Rp("animationend"),KA=Rp("animationiteration"),QA=Rp("animationstart"),JA=Rp("transitionend"),eC=new Map,SE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ro(t,e){eC.set(t,e),Es(e,[t])}for(var ym=0;ym<SE.length;ym++){var _m=SE[ym],LF=_m.toLowerCase(),MF=_m[0].toUpperCase()+_m.slice(1);Ro(LF,"on"+MF)}Ro(ZA,"onAnimationEnd");Ro(KA,"onAnimationIteration");Ro(QA,"onAnimationStart");Ro("dblclick","onDoubleClick");Ro("focusin","onFocus");Ro("focusout","onBlur");Ro(JA,"onTransitionEnd");Oa("onMouseEnter",["mouseout","mouseover"]);Oa("onMouseLeave",["mouseout","mouseover"]);Oa("onPointerEnter",["pointerout","pointerover"]);Oa("onPointerLeave",["pointerout","pointerover"]);Es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Es("onBeforeInput",["compositionend","keypress","textInput","paste"]);Es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zu));function xE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LD(r,e,void 0,t),t.currentTarget=null}function tC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==o&&i.isPropagationStopped())break e;xE(i,a,l),o=u}else for(s=0;s<r.length;s++){if(a=r[s],u=a.instance,l=a.currentTarget,a=a.listener,u!==o&&i.isPropagationStopped())break e;xE(i,a,l),o=u}}}if(Wh)throw t=X0,Wh=!1,X0=null,t}function Ot(t,e){var n=e[iv];n===void 0&&(n=e[iv]=new Set);var r=t+"__bubble";n.has(r)||(nC(e,t,2,!1),n.add(r))}function bm(t,e,n){var r=0;e&&(r|=4),nC(n,t,r,e)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function Cl(t){if(!t[Zc]){t[Zc]=!0,lA.forEach(function(n){n!=="selectionchange"&&(OF.has(n)||bm(n,!1,t),bm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zc]||(e[Zc]=!0,bm("selectionchange",!1,e))}}function nC(t,e,n,r){switch(zA(e)){case 1:var i=HD;break;case 4:i=YD;break;default:i=q_}n=i.bind(null,e,n,t),i=void 0,!Y0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wm(t,e,n,r,i){var o=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Ko(a),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}a=a.parentNode}}r=r.return}TA(function(){var l=o,c=W_(n),f=[];e:{var h=eC.get(t);if(h!==void 0){var d=K_,g=t;switch(t){case"keypress":if(Ff(n)===0)break e;case"keydown":case"keyup":d=uF;break;case"focusin":g="focus",d=pm;break;case"focusout":g="blur",d=pm;break;case"beforeblur":case"afterblur":d=pm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=hE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=ZD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=fF;break;case ZA:case KA:case QA:d=JD;break;case JA:d=dF;break;case"scroll":d=XD;break;case"wheel":d=gF;break;case"copy":case"cut":case"paste":d=tF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=pE}var m=(e&4)!==0,x=!m&&t==="scroll",_=m?h!==null?h+"Capture":null:h;m=[];for(var y=l,b;y!==null;){b=y;var T=b.stateNode;if(b.tag===5&&T!==null&&(b=T,_!==null&&(T=El(y,_),T!=null&&m.push(Rl(y,T,b)))),x)break;y=y.return}0<m.length&&(h=new d(h,g,null,n,c),f.push({event:h,listeners:m}))}}if((e&7)===0){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==W0&&(g=n.relatedTarget||n.fromElement)&&(Ko(g)||g[Ii]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(g=n.relatedTarget||n.toElement,d=l,g=g?Ko(g):null,g!==null&&(x=Ss(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(d=null,g=l),d!==g)){if(m=hE,T="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=pE,T="onPointerLeave",_="onPointerEnter",y="pointer"),x=d==null?h:ua(d),b=g==null?h:ua(g),h=new m(T,y+"leave",d,n,c),h.target=x,h.relatedTarget=b,T=null,Ko(c)===l&&(m=new m(_,y+"enter",g,n,c),m.target=b,m.relatedTarget=x,T=m),x=T,d&&g)t:{for(m=d,_=g,y=0,b=m;b;b=Ys(b))y++;for(b=0,T=_;T;T=Ys(T))b++;for(;0<y-b;)m=Ys(m),y--;for(;0<b-y;)_=Ys(_),b--;for(;y--;){if(m===_||_!==null&&m===_.alternate)break t;m=Ys(m),_=Ys(_)}m=null}else m=null;d!==null&&TE(f,h,d,m,!1),g!==null&&x!==null&&TE(f,x,g,m,!0)}}e:{if(h=l?ua(l):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var R=EF;else if(vE(h))if(WA)R=PF;else{R=xF;var C=SF}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(R=TF);if(R&&(R=R(t,l))){GA(f,R,n,c);break e}C&&C(t,h,l),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&B0(h,"number",h.value)}switch(C=l?ua(l):window,t){case"focusin":(vE(C)||C.contentEditable==="true")&&(sa=C,Q0=l,sl=null);break;case"focusout":sl=Q0=sa=null;break;case"mousedown":J0=!0;break;case"contextmenu":case"mouseup":case"dragend":J0=!1,EE(f,n,c);break;case"selectionchange":if(RF)break;case"keydown":case"keyup":EE(f,n,c)}var D;if(J_)e:{switch(t){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else oa?$A(t,n)&&(F="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(VA&&n.locale!=="ko"&&(oa||F!=="onCompositionStart"?F==="onCompositionEnd"&&oa&&(D=BA()):(ho=c,Z_="value"in ho?ho.value:ho.textContent,oa=!0)),C=Zh(l,F),0<C.length&&(F=new dE(F,t,null,n,c),f.push({event:F,listeners:C}),D?F.data=D:(D=jA(n),D!==null&&(F.data=D)))),(D=vF?yF(t,n):_F(t,n))&&(l=Zh(l,"onBeforeInput"),0<l.length&&(c=new dE("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=D))}tC(f,e)})}function Rl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=El(t,n),o!=null&&r.unshift(Rl(t,o,i)),o=El(t,e),o!=null&&r.push(Rl(t,o,i))),t=t.return}return r}function Ys(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function TE(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=El(n,o),u!=null&&s.unshift(Rl(n,u,a))):i||(u=El(n,o),u!=null&&s.push(Rl(n,u,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var kF=/\r\n?/g,IF=/\u0000|\uFFFD/g;function PE(t){return(typeof t=="string"?t:""+t).replace(kF,`
`).replace(IF,"")}function Kc(t,e,n){if(e=PE(e),PE(t)!==e&&n)throw Error(oe(425))}function Kh(){}var ev=null,tv=null;function nv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rv=typeof setTimeout=="function"?setTimeout:void 0,NF=typeof clearTimeout=="function"?clearTimeout:void 0,AE=typeof Promise=="function"?Promise:void 0,DF=typeof queueMicrotask=="function"?queueMicrotask:typeof AE<"u"?function(t){return AE.resolve(null).then(t).catch(FF)}:rv;function FF(t){setTimeout(function(){throw t})}function Em(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Tl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Tl(e)}function bo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function CE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var iu=Math.random().toString(36).slice(2),si="__reactFiber$"+iu,Ll="__reactProps$"+iu,Ii="__reactContainer$"+iu,iv="__reactEvents$"+iu,UF="__reactListeners$"+iu,zF="__reactHandles$"+iu;function Ko(t){var e=t[si];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ii]||n[si]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=CE(t);t!==null;){if(n=t[si])return n;t=CE(t)}return e}t=n,n=t.parentNode}return null}function nc(t){return t=t[si]||t[Ii],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ua(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function Lp(t){return t[Ll]||null}var ov=[],la=-1;function Lo(t){return{current:t}}function kt(t){0>la||(t.current=ov[la],ov[la]=null,la--)}function Ct(t,e){la++,ov[la]=t.current,t.current=e}var Co={},On=Lo(Co),Xn=Lo(!1),ls=Co;function ka(t,e){var n=t.type.contextTypes;if(!n)return Co;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function qn(t){return t=t.childContextTypes,t!=null}function Qh(){kt(Xn),kt(On)}function RE(t,e,n){if(On.current!==Co)throw Error(oe(168));Ct(On,e),Ct(Xn,n)}function rC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,SD(t)||"Unknown",i));return jt({},n,r)}function Jh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Co,ls=On.current,Ct(On,t),Ct(Xn,Xn.current),!0}function LE(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=rC(t,e,ls),r.__reactInternalMemoizedMergedChildContext=t,kt(Xn),kt(On),Ct(On,t)):kt(Xn),Ct(Xn,n)}var Ai=null,Mp=!1,Sm=!1;function iC(t){Ai===null?Ai=[t]:Ai.push(t)}function BF(t){Mp=!0,iC(t)}function Mo(){if(!Sm&&Ai!==null){Sm=!0;var t=0,e=yt;try{var n=Ai;for(yt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ai=null,Mp=!1}catch(i){throw Ai!==null&&(Ai=Ai.slice(t+1)),RA(H_,Mo),i}finally{yt=e,Sm=!1}}return null}var ca=[],fa=0,ed=null,td=0,_r=[],br=0,cs=null,Ri=1,Li="";function Wo(t,e){ca[fa++]=td,ca[fa++]=ed,ed=t,td=e}function oC(t,e,n){_r[br++]=Ri,_r[br++]=Li,_r[br++]=cs,cs=t;var r=Ri;t=Li;var i=32-Gr(r)-1;r&=~(1<<i),n+=1;var o=32-Gr(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ri=1<<32-Gr(e)+i|n<<i|r,Li=o+t}else Ri=1<<o|n<<i|r,Li=t}function t1(t){t.return!==null&&(Wo(t,1),oC(t,1,0))}function n1(t){for(;t===ed;)ed=ca[--fa],ca[fa]=null,td=ca[--fa],ca[fa]=null;for(;t===cs;)cs=_r[--br],_r[br]=null,Li=_r[--br],_r[br]=null,Ri=_r[--br],_r[br]=null}var fr=null,lr=null,Nt=!1,Br=null;function sC(t,e){var n=Er(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ME(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fr=t,lr=bo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fr=t,lr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cs!==null?{id:Ri,overflow:Li}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Er(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fr=t,lr=null,!0):!1;default:return!1}}function sv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function av(t){if(Nt){var e=lr;if(e){var n=e;if(!ME(t,e)){if(sv(t))throw Error(oe(418));e=bo(n.nextSibling);var r=fr;e&&ME(t,e)?sC(r,n):(t.flags=t.flags&-4097|2,Nt=!1,fr=t)}}else{if(sv(t))throw Error(oe(418));t.flags=t.flags&-4097|2,Nt=!1,fr=t}}}function OE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fr=t}function Qc(t){if(t!==fr)return!1;if(!Nt)return OE(t),Nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nv(t.type,t.memoizedProps)),e&&(e=lr)){if(sv(t))throw aC(),Error(oe(418));for(;e;)sC(t,e),e=bo(e.nextSibling)}if(OE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){lr=bo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}lr=null}}else lr=fr?bo(t.stateNode.nextSibling):null;return!0}function aC(){for(var t=lr;t;)t=bo(t.nextSibling)}function Ia(){lr=fr=null,Nt=!1}function r1(t){Br===null?Br=[t]:Br.push(t)}var VF=$i.ReactCurrentBatchConfig;function Ur(t,e){if(t&&t.defaultProps){e=jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var nd=Lo(null),rd=null,ha=null,i1=null;function o1(){i1=ha=rd=null}function s1(t){var e=nd.current;kt(nd),t._currentValue=e}function uv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xa(t,e){rd=t,i1=ha=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Hn=!0),t.firstContext=null)}function Tr(t){var e=t._currentValue;if(i1!==t)if(t={context:t,memoizedValue:e,next:null},ha===null){if(rd===null)throw Error(oe(308));ha=t,rd.dependencies={lanes:0,firstContext:t}}else ha=ha.next=t;return e}var Qo=null;function a1(t){Qo===null?Qo=[t]:Qo.push(t)}function uC(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,a1(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ni(t,r)}function Ni(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ao=!1;function u1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function wo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(lt&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ni(t,n)}return i=r.interleaved,i===null?(e.next=e,a1(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ni(t,n)}function Uf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Y_(t,n)}}function kE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function id(t,e,n,r){var i=t.updateQueue;ao=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,s===null?o=l:s.next=l,s=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(o!==null){var f=i.baseState;s=0,c=l=u=null,a=o;do{var h=a.lane,d=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(h=e,d=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){f=g.call(d,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,h=typeof g=="function"?g.call(d,f,h):g,h==null)break e;f=jt({},f,h);break e;case 2:ao=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else d={eventTime:d,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=d,u=f):c=c.next=d,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);hs|=s,t.lanes=s,t.memoizedState=f}}function IE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var cC=new uA.Component().refs;function lv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Op={isMounted:function(t){return(t=t._reactInternals)?Ss(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dn(),i=So(t),o=Mi(r,i);o.payload=e,n!=null&&(o.callback=n),e=wo(t,o,i),e!==null&&(Wr(e,t,i,r),Uf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dn(),i=So(t),o=Mi(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=wo(t,o,i),e!==null&&(Wr(e,t,i,r),Uf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dn(),r=So(t),i=Mi(n,r);i.tag=2,e!=null&&(i.callback=e),e=wo(t,i,r),e!==null&&(Wr(e,t,r,n),Uf(e,t,r))}};function NE(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Al(n,r)||!Al(i,o):!0}function fC(t,e,n){var r=!1,i=Co,o=e.contextType;return typeof o=="object"&&o!==null?o=Tr(o):(i=qn(e)?ls:On.current,r=e.contextTypes,o=(r=r!=null)?ka(t,i):Co),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Op,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function DE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Op.enqueueReplaceState(e,e.state,null)}function cv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=cC,u1(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Tr(o):(o=qn(e)?ls:On.current,i.context=ka(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(lv(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Op.enqueueReplaceState(i,i.state,null),id(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Cu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===cC&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function Jc(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function FE(t){var e=t._init;return e(t._payload)}function hC(t){function e(_,y){if(t){var b=_.deletions;b===null?(_.deletions=[y],_.flags|=16):b.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=xo(_,y),_.index=0,_.sibling=null,_}function o(_,y,b){return _.index=b,t?(b=_.alternate,b!==null?(b=b.index,b<y?(_.flags|=2,y):b):(_.flags|=2,y)):(_.flags|=1048576,y)}function s(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,b,T){return y===null||y.tag!==6?(y=Lm(b,_.mode,T),y.return=_,y):(y=i(y,b),y.return=_,y)}function u(_,y,b,T){var R=b.type;return R===ia?c(_,y,b.props.children,T,b.key):y!==null&&(y.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===so&&FE(R)===y.type)?(T=i(y,b.props),T.ref=Cu(_,y,b),T.return=_,T):(T=Gf(b.type,b.key,b.props,null,_.mode,T),T.ref=Cu(_,y,b),T.return=_,T)}function l(_,y,b,T){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=Mm(b,_.mode,T),y.return=_,y):(y=i(y,b.children||[]),y.return=_,y)}function c(_,y,b,T,R){return y===null||y.tag!==7?(y=is(b,_.mode,T,R),y.return=_,y):(y=i(y,b),y.return=_,y)}function f(_,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Lm(""+y,_.mode,b),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case $c:return b=Gf(y.type,y.key,y.props,null,_.mode,b),b.ref=Cu(_,null,y),b.return=_,b;case ra:return y=Mm(y,_.mode,b),y.return=_,y;case so:var T=y._init;return f(_,T(y._payload),b)}if(Xu(y)||Su(y))return y=is(y,_.mode,b,null),y.return=_,y;Jc(_,y)}return null}function h(_,y,b,T){var R=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return R!==null?null:a(_,y,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $c:return b.key===R?u(_,y,b,T):null;case ra:return b.key===R?l(_,y,b,T):null;case so:return R=b._init,h(_,y,R(b._payload),T)}if(Xu(b)||Su(b))return R!==null?null:c(_,y,b,T,null);Jc(_,b)}return null}function d(_,y,b,T,R){if(typeof T=="string"&&T!==""||typeof T=="number")return _=_.get(b)||null,a(y,_,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case $c:return _=_.get(T.key===null?b:T.key)||null,u(y,_,T,R);case ra:return _=_.get(T.key===null?b:T.key)||null,l(y,_,T,R);case so:var C=T._init;return d(_,y,b,C(T._payload),R)}if(Xu(T)||Su(T))return _=_.get(b)||null,c(y,_,T,R,null);Jc(y,T)}return null}function g(_,y,b,T){for(var R=null,C=null,D=y,F=y=0,W=null;D!==null&&F<b.length;F++){D.index>F?(W=D,D=null):W=D.sibling;var j=h(_,D,b[F],T);if(j===null){D===null&&(D=W);break}t&&D&&j.alternate===null&&e(_,D),y=o(j,y,F),C===null?R=j:C.sibling=j,C=j,D=W}if(F===b.length)return n(_,D),Nt&&Wo(_,F),R;if(D===null){for(;F<b.length;F++)D=f(_,b[F],T),D!==null&&(y=o(D,y,F),C===null?R=D:C.sibling=D,C=D);return Nt&&Wo(_,F),R}for(D=r(_,D);F<b.length;F++)W=d(D,_,F,b[F],T),W!==null&&(t&&W.alternate!==null&&D.delete(W.key===null?F:W.key),y=o(W,y,F),C===null?R=W:C.sibling=W,C=W);return t&&D.forEach(function(H){return e(_,H)}),Nt&&Wo(_,F),R}function m(_,y,b,T){var R=Su(b);if(typeof R!="function")throw Error(oe(150));if(b=R.call(b),b==null)throw Error(oe(151));for(var C=R=null,D=y,F=y=0,W=null,j=b.next();D!==null&&!j.done;F++,j=b.next()){D.index>F?(W=D,D=null):W=D.sibling;var H=h(_,D,j.value,T);if(H===null){D===null&&(D=W);break}t&&D&&H.alternate===null&&e(_,D),y=o(H,y,F),C===null?R=H:C.sibling=H,C=H,D=W}if(j.done)return n(_,D),Nt&&Wo(_,F),R;if(D===null){for(;!j.done;F++,j=b.next())j=f(_,j.value,T),j!==null&&(y=o(j,y,F),C===null?R=j:C.sibling=j,C=j);return Nt&&Wo(_,F),R}for(D=r(_,D);!j.done;F++,j=b.next())j=d(D,_,F,j.value,T),j!==null&&(t&&j.alternate!==null&&D.delete(j.key===null?F:j.key),y=o(j,y,F),C===null?R=j:C.sibling=j,C=j);return t&&D.forEach(function(pe){return e(_,pe)}),Nt&&Wo(_,F),R}function x(_,y,b,T){if(typeof b=="object"&&b!==null&&b.type===ia&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case $c:e:{for(var R=b.key,C=y;C!==null;){if(C.key===R){if(R=b.type,R===ia){if(C.tag===7){n(_,C.sibling),y=i(C,b.props.children),y.return=_,_=y;break e}}else if(C.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===so&&FE(R)===C.type){n(_,C.sibling),y=i(C,b.props),y.ref=Cu(_,C,b),y.return=_,_=y;break e}n(_,C);break}else e(_,C);C=C.sibling}b.type===ia?(y=is(b.props.children,_.mode,T,b.key),y.return=_,_=y):(T=Gf(b.type,b.key,b.props,null,_.mode,T),T.ref=Cu(_,y,b),T.return=_,_=T)}return s(_);case ra:e:{for(C=b.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(_,y.sibling),y=i(y,b.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=Mm(b,_.mode,T),y.return=_,_=y}return s(_);case so:return C=b._init,x(_,y,C(b._payload),T)}if(Xu(b))return g(_,y,b,T);if(Su(b))return m(_,y,b,T);Jc(_,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,b),y.return=_,_=y):(n(_,y),y=Lm(b,_.mode,T),y.return=_,_=y),s(_)):n(_,y)}return x}var Na=hC(!0),dC=hC(!1),rc={},di=Lo(rc),Ml=Lo(rc),Ol=Lo(rc);function Jo(t){if(t===rc)throw Error(oe(174));return t}function l1(t,e){switch(Ct(Ol,e),Ct(Ml,t),Ct(di,rc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$0(e,t)}kt(di),Ct(di,e)}function Da(){kt(di),kt(Ml),kt(Ol)}function pC(t){Jo(Ol.current);var e=Jo(di.current),n=$0(e,t.type);e!==n&&(Ct(Ml,t),Ct(di,n))}function c1(t){Ml.current===t&&(kt(di),kt(Ml))}var zt=Lo(0);function od(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xm=[];function f1(){for(var t=0;t<xm.length;t++)xm[t]._workInProgressVersionPrimary=null;xm.length=0}var zf=$i.ReactCurrentDispatcher,Tm=$i.ReactCurrentBatchConfig,fs=0,$t=null,sn=null,fn=null,sd=!1,al=!1,kl=0,$F=0;function Pn(){throw Error(oe(321))}function h1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yr(t[n],e[n]))return!1;return!0}function d1(t,e,n,r,i,o){if(fs=o,$t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zf.current=t===null||t.memoizedState===null?HF:YF,t=n(r,i),al){o=0;do{if(al=!1,kl=0,25<=o)throw Error(oe(301));o+=1,fn=sn=null,e.updateQueue=null,zf.current=XF,t=n(r,i)}while(al)}if(zf.current=ad,e=sn!==null&&sn.next!==null,fs=0,fn=sn=$t=null,sd=!1,e)throw Error(oe(300));return t}function p1(){var t=kl!==0;return kl=0,t}function oi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?$t.memoizedState=fn=t:fn=fn.next=t,fn}function Pr(){if(sn===null){var t=$t.alternate;t=t!==null?t.memoizedState:null}else t=sn.next;var e=fn===null?$t.memoizedState:fn.next;if(e!==null)fn=e,sn=t;else{if(t===null)throw Error(oe(310));sn=t,t={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},fn===null?$t.memoizedState=fn=t:fn=fn.next=t}return fn}function Il(t,e){return typeof e=="function"?e(t):e}function Pm(t){var e=Pr(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=sn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,u=null,l=o;do{var c=l.lane;if((fs&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,s=r):u=u.next=f,$t.lanes|=c,hs|=c}l=l.next}while(l!==null&&l!==o);u===null?s=r:u.next=a,Yr(r,e.memoizedState)||(Hn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,$t.lanes|=o,hs|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Am(t){var e=Pr(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Yr(o,e.memoizedState)||(Hn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function gC(){}function mC(t,e){var n=$t,r=Pr(),i=e(),o=!Yr(r.memoizedState,i);if(o&&(r.memoizedState=i,Hn=!0),r=r.queue,g1(_C.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||fn!==null&&fn.memoizedState.tag&1){if(n.flags|=2048,Nl(9,yC.bind(null,n,r,i,e),void 0,null),dn===null)throw Error(oe(349));(fs&30)!==0||vC(n,e,i)}return i}function vC(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$t.updateQueue,e===null?(e={lastEffect:null,stores:null},$t.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yC(t,e,n,r){e.value=n,e.getSnapshot=r,bC(e)&&wC(t)}function _C(t,e,n){return n(function(){bC(e)&&wC(t)})}function bC(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yr(t,n)}catch{return!0}}function wC(t){var e=Ni(t,1);e!==null&&Wr(e,t,1,-1)}function UE(t){var e=oi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:t},e.queue=t,t=t.dispatch=WF.bind(null,$t,t),[e.memoizedState,t]}function Nl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$t.updateQueue,e===null?(e={lastEffect:null,stores:null},$t.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function EC(){return Pr().memoizedState}function Bf(t,e,n,r){var i=oi();$t.flags|=t,i.memoizedState=Nl(1|e,n,void 0,r===void 0?null:r)}function kp(t,e,n,r){var i=Pr();r=r===void 0?null:r;var o=void 0;if(sn!==null){var s=sn.memoizedState;if(o=s.destroy,r!==null&&h1(r,s.deps)){i.memoizedState=Nl(e,n,o,r);return}}$t.flags|=t,i.memoizedState=Nl(1|e,n,o,r)}function zE(t,e){return Bf(8390656,8,t,e)}function g1(t,e){return kp(2048,8,t,e)}function SC(t,e){return kp(4,2,t,e)}function xC(t,e){return kp(4,4,t,e)}function TC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function PC(t,e,n){return n=n!=null?n.concat([t]):null,kp(4,4,TC.bind(null,e,t),n)}function m1(){}function AC(t,e){var n=Pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&h1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function CC(t,e){var n=Pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&h1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function RC(t,e,n){return(fs&21)===0?(t.baseState&&(t.baseState=!1,Hn=!0),t.memoizedState=n):(Yr(n,e)||(n=OA(),$t.lanes|=n,hs|=n,t.baseState=!0),e)}function jF(t,e){var n=yt;yt=n!==0&&4>n?n:4,t(!0);var r=Tm.transition;Tm.transition={};try{t(!1),e()}finally{yt=n,Tm.transition=r}}function LC(){return Pr().memoizedState}function GF(t,e,n){var r=So(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},MC(t))OC(e,n);else if(n=uC(t,e,n,r),n!==null){var i=Dn();Wr(n,t,r,i),kC(n,e,r)}}function WF(t,e,n){var r=So(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(MC(t))OC(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Yr(a,s)){var u=e.interleaved;u===null?(i.next=i,a1(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=uC(t,e,i,r),n!==null&&(i=Dn(),Wr(n,t,r,i),kC(n,e,r))}}function MC(t){var e=t.alternate;return t===$t||e!==null&&e===$t}function OC(t,e){al=sd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kC(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Y_(t,n)}}var ad={readContext:Tr,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},HF={readContext:Tr,useCallback:function(t,e){return oi().memoizedState=[t,e===void 0?null:e],t},useContext:Tr,useEffect:zE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bf(4194308,4,TC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bf(4,2,t,e)},useMemo:function(t,e){var n=oi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=oi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=GF.bind(null,$t,t),[r.memoizedState,t]},useRef:function(t){var e=oi();return t={current:t},e.memoizedState=t},useState:UE,useDebugValue:m1,useDeferredValue:function(t){return oi().memoizedState=t},useTransition:function(){var t=UE(!1),e=t[0];return t=jF.bind(null,t[1]),oi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$t,i=oi();if(Nt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),dn===null)throw Error(oe(349));(fs&30)!==0||vC(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,zE(_C.bind(null,r,o,t),[t]),r.flags|=2048,Nl(9,yC.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=oi(),e=dn.identifierPrefix;if(Nt){var n=Li,r=Ri;n=(r&~(1<<32-Gr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=kl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$F++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},YF={readContext:Tr,useCallback:AC,useContext:Tr,useEffect:g1,useImperativeHandle:PC,useInsertionEffect:SC,useLayoutEffect:xC,useMemo:CC,useReducer:Pm,useRef:EC,useState:function(){return Pm(Il)},useDebugValue:m1,useDeferredValue:function(t){var e=Pr();return RC(e,sn.memoizedState,t)},useTransition:function(){var t=Pm(Il)[0],e=Pr().memoizedState;return[t,e]},useMutableSource:gC,useSyncExternalStore:mC,useId:LC,unstable_isNewReconciler:!1},XF={readContext:Tr,useCallback:AC,useContext:Tr,useEffect:g1,useImperativeHandle:PC,useInsertionEffect:SC,useLayoutEffect:xC,useMemo:CC,useReducer:Am,useRef:EC,useState:function(){return Am(Il)},useDebugValue:m1,useDeferredValue:function(t){var e=Pr();return sn===null?e.memoizedState=t:RC(e,sn.memoizedState,t)},useTransition:function(){var t=Am(Il)[0],e=Pr().memoizedState;return[t,e]},useMutableSource:gC,useSyncExternalStore:mC,useId:LC,unstable_isNewReconciler:!1};function Fa(t,e){try{var n="",r=e;do n+=ED(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Cm(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function fv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qF=typeof WeakMap=="function"?WeakMap:Map;function IC(t,e,n){n=Mi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ld||(ld=!0,wv=r),fv(t,e)},n}function NC(t,e,n){n=Mi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){fv(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){fv(t,e),typeof r!="function"&&(Eo===null?Eo=new Set([this]):Eo.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function BE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new qF;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=l4.bind(null,t,e,n),e.then(t,t))}function VE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $E(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mi(-1,1),e.tag=2,wo(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var ZF=$i.ReactCurrentOwner,Hn=!1;function In(t,e,n,r){e.child=t===null?dC(e,null,n,r):Na(e,t.child,n,r)}function jE(t,e,n,r,i){n=n.render;var o=e.ref;return xa(e,i),r=d1(t,e,n,r,o,i),n=p1(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Di(t,e,i)):(Nt&&n&&t1(e),e.flags|=1,In(t,e,r,i),e.child)}function GE(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!x1(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,DC(t,e,o,r,i)):(t=Gf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,(t.lanes&i)===0){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Al,n(s,r)&&t.ref===e.ref)return Di(t,e,i)}return e.flags|=1,t=xo(o,r),t.ref=e.ref,t.return=e,e.child=t}function DC(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Al(o,r)&&t.ref===e.ref)if(Hn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)(t.flags&131072)!==0&&(Hn=!0);else return e.lanes=t.lanes,Di(t,e,i)}return hv(t,e,n,r,i)}function FC(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(pa,or),or|=n;else{if((n&1073741824)===0)return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ct(pa,or),or|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ct(pa,or),or|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ct(pa,or),or|=r;return In(t,e,i,n),e.child}function UC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function hv(t,e,n,r,i){var o=qn(n)?ls:On.current;return o=ka(e,o),xa(e,i),n=d1(t,e,n,r,o,i),r=p1(),t!==null&&!Hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Di(t,e,i)):(Nt&&r&&t1(e),e.flags|=1,In(t,e,n,i),e.child)}function WE(t,e,n,r,i){if(qn(n)){var o=!0;Jh(e)}else o=!1;if(xa(e,i),e.stateNode===null)Vf(t,e),fC(e,n,r),cv(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,l=n.contextType;typeof l=="object"&&l!==null?l=Tr(l):(l=qn(n)?ls:On.current,l=ka(e,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||u!==l)&&DE(e,s,r,l),ao=!1;var h=e.memoizedState;s.state=h,id(e,r,s,i),u=e.memoizedState,a!==r||h!==u||Xn.current||ao?(typeof c=="function"&&(lv(e,n,c,r),u=e.memoizedState),(a=ao||NE(e,n,a,r,h,u,l))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=l,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,lC(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Ur(e.type,a),s.props=l,f=e.pendingProps,h=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Tr(u):(u=qn(n)?ls:On.current,u=ka(e,u));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||h!==u)&&DE(e,s,r,u),ao=!1,h=e.memoizedState,s.state=h,id(e,r,s,i);var g=e.memoizedState;a!==f||h!==g||Xn.current||ao?(typeof d=="function"&&(lv(e,n,d,r),g=e.memoizedState),(l=ao||NE(e,n,l,r,h,g,u)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,g,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,g,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),s.props=r,s.state=g,s.context=u,r=l):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return dv(t,e,n,r,o,i)}function dv(t,e,n,r,i,o){UC(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&LE(e,n,!1),Di(t,e,o);r=e.stateNode,ZF.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Na(e,t.child,null,o),e.child=Na(e,null,a,o)):In(t,e,a,o),e.memoizedState=r.state,i&&LE(e,n,!0),e.child}function zC(t){var e=t.stateNode;e.pendingContext?RE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&RE(t,e.context,!1),l1(t,e.containerInfo)}function HE(t,e,n,r,i){return Ia(),r1(i),e.flags|=256,In(t,e,n,r),e.child}var pv={dehydrated:null,treeContext:null,retryLane:0};function gv(t){return{baseLanes:t,cachePool:null,transitions:null}}function BC(t,e,n){var r=e.pendingProps,i=zt.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ct(zt,i&1),t===null)return av(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},(r&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Dp(s,r,0,null),t=is(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=gv(n),e.memoizedState=pv,t):v1(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return KF(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return(s&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=xo(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=xo(a,o):(o=is(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?gv(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=pv,r}return o=t.child,t=o.sibling,r=xo(o,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function v1(t,e){return e=Dp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ef(t,e,n,r){return r!==null&&r1(r),Na(e,t.child,null,n),t=v1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function KF(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Cm(Error(oe(422))),ef(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Dp({mode:"visible",children:r.children},i,0,null),o=is(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,(e.mode&1)!==0&&Na(e,t.child,null,s),e.child.memoizedState=gv(s),e.memoizedState=pv,o);if((e.mode&1)===0)return ef(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(oe(419)),r=Cm(o,r,void 0),ef(t,e,s,r)}if(a=(s&t.childLanes)!==0,Hn||a){if(r=dn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|s))!==0?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ni(t,i),Wr(r,t,i,-1))}return S1(),r=Cm(Error(oe(421))),ef(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=c4.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,lr=bo(i.nextSibling),fr=e,Nt=!0,Br=null,t!==null&&(_r[br++]=Ri,_r[br++]=Li,_r[br++]=cs,Ri=t.id,Li=t.overflow,cs=e),e=v1(e,r.children),e.flags|=4096,e)}function YE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),uv(t.return,e,n)}function Rm(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function VC(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(In(t,e,r.children,n),r=zt.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&YE(t,n,e);else if(t.tag===19)YE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ct(zt,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&od(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Rm(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&od(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Rm(e,!0,n,null,o);break;case"together":Rm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vf(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Di(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hs|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=xo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function QF(t,e,n){switch(e.tag){case 3:zC(e),Ia();break;case 5:pC(e);break;case 1:qn(e.type)&&Jh(e);break;case 4:l1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ct(nd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ct(zt,zt.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?BC(t,e,n):(Ct(zt,zt.current&1),t=Di(t,e,n),t!==null?t.sibling:null);Ct(zt,zt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return VC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ct(zt,zt.current),r)break;return null;case 22:case 23:return e.lanes=0,FC(t,e,n)}return Di(t,e,n)}var $C,mv,jC,GC;$C=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mv=function(){};jC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Jo(di.current);var o=null;switch(n){case"input":i=U0(t,i),r=U0(t,r),o=[];break;case"select":i=jt({},i,{value:void 0}),r=jt({},r,{value:void 0}),o=[];break;case"textarea":i=V0(t,i),r=V0(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Kh)}j0(n,r);var s;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(bl.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(s in a)!a.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&a[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(bl.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Ot("scroll",t),o||a===u||(o=[])):(o=o||[]).push(l,u))}n&&(o=o||[]).push("style",n);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};GC=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ru(t,e){if(!Nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function An(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function JF(t,e,n){var r=e.pendingProps;switch(n1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return An(e),null;case 1:return qn(e.type)&&Qh(),An(e),null;case 3:return r=e.stateNode,Da(),kt(Xn),kt(On),f1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Br!==null&&(xv(Br),Br=null))),mv(t,e),An(e),null;case 5:c1(e);var i=Jo(Ol.current);if(n=e.type,t!==null&&e.stateNode!=null)jC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return An(e),null}if(t=Jo(di.current),Qc(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[si]=e,r[Ll]=o,t=(e.mode&1)!==0,n){case"dialog":Ot("cancel",r),Ot("close",r);break;case"iframe":case"object":case"embed":Ot("load",r);break;case"video":case"audio":for(i=0;i<Zu.length;i++)Ot(Zu[i],r);break;case"source":Ot("error",r);break;case"img":case"image":case"link":Ot("error",r),Ot("load",r);break;case"details":Ot("toggle",r);break;case"input":nE(r,o),Ot("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ot("invalid",r);break;case"textarea":iE(r,o),Ot("invalid",r)}j0(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Kc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Kc(r.textContent,a,t),i=["children",""+a]):bl.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ot("scroll",r)}switch(n){case"input":jc(r),rE(r,o,!0);break;case"textarea":jc(r),oE(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Kh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[si]=e,t[Ll]=r,$C(t,e,!1,!1),e.stateNode=t;e:{switch(s=G0(n,r),n){case"dialog":Ot("cancel",t),Ot("close",t),i=r;break;case"iframe":case"object":case"embed":Ot("load",t),i=r;break;case"video":case"audio":for(i=0;i<Zu.length;i++)Ot(Zu[i],t);i=r;break;case"source":Ot("error",t),i=r;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),i=r;break;case"details":Ot("toggle",t),i=r;break;case"input":nE(t,r),i=U0(t,r),Ot("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=jt({},r,{value:void 0}),Ot("invalid",t);break;case"textarea":iE(t,r),i=V0(t,r),Ot("invalid",t);break;default:i=r}j0(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?bA(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&yA(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&wl(t,u):typeof u=="number"&&wl(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(bl.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Ot("scroll",t):u!=null&&V_(t,o,u,s))}switch(n){case"input":jc(t),rE(t,r,!1);break;case"textarea":jc(t),oE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ao(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?ba(t,!!r.multiple,o,!1):r.defaultValue!=null&&ba(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Kh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return An(e),null;case 6:if(t&&e.stateNode!=null)GC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=Jo(Ol.current),Jo(di.current),Qc(e)){if(r=e.stateNode,n=e.memoizedProps,r[si]=e,(o=r.nodeValue!==n)&&(t=fr,t!==null))switch(t.tag){case 3:Kc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Kc(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[si]=e,e.stateNode=r}return An(e),null;case 13:if(kt(zt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Nt&&lr!==null&&(e.mode&1)!==0&&(e.flags&128)===0)aC(),Ia(),e.flags|=98560,o=!1;else if(o=Qc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(oe(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(oe(317));o[si]=e}else Ia(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;An(e),o=!1}else Br!==null&&(xv(Br),Br=null),o=!0;if(!o)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(zt.current&1)!==0?an===0&&(an=3):S1())),e.updateQueue!==null&&(e.flags|=4),An(e),null);case 4:return Da(),mv(t,e),t===null&&Cl(e.stateNode.containerInfo),An(e),null;case 10:return s1(e.type._context),An(e),null;case 17:return qn(e.type)&&Qh(),An(e),null;case 19:if(kt(zt),o=e.memoizedState,o===null)return An(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Ru(o,!1);else{if(an!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(s=od(t),s!==null){for(e.flags|=128,Ru(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ct(zt,zt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Xt()>Ua&&(e.flags|=128,r=!0,Ru(o,!1),e.lanes=4194304)}else{if(!r)if(t=od(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ru(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Nt)return An(e),null}else 2*Xt()-o.renderingStartTime>Ua&&n!==1073741824&&(e.flags|=128,r=!0,Ru(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Xt(),e.sibling=null,n=zt.current,Ct(zt,r?n&1|2:n&1),e):(An(e),null);case 22:case 23:return E1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(or&1073741824)!==0&&(An(e),e.subtreeFlags&6&&(e.flags|=8192)):An(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function e4(t,e){switch(n1(e),e.tag){case 1:return qn(e.type)&&Qh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Da(),kt(Xn),kt(On),f1(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return c1(e),null;case 13:if(kt(zt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));Ia()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return kt(zt),null;case 4:return Da(),null;case 10:return s1(e.type._context),null;case 22:case 23:return E1(),null;case 24:return null;default:return null}}var tf=!1,Ln=!1,t4=typeof WeakSet=="function"?WeakSet:Set,Se=null;function da(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Wt(t,e,r)}else n.current=null}function vv(t,e,n){try{n()}catch(r){Wt(t,e,r)}}var XE=!1;function n4(t,e){if(ev=Xh,t=XA(),e1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,u=-1,l=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(u=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++l===i&&(a=s),h===o&&++c===r&&(u=s),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(tv={focusedElem:t,selectionRange:n},Xh=!1,Se=e;Se!==null;)if(e=Se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Se=t;else for(;Se!==null;){e=Se;try{var g=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,x=g.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ur(e.type,m),x);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(T){Wt(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Se=t;break}Se=e.return}return g=XE,XE=!1,g}function ul(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&vv(e,n,o)}i=i.next}while(i!==r)}}function Ip(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function yv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function WC(t){var e=t.alternate;e!==null&&(t.alternate=null,WC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[si],delete e[Ll],delete e[iv],delete e[UF],delete e[zF])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function HC(t){return t.tag===5||t.tag===3||t.tag===4}function qE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||HC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _v(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kh));else if(r!==4&&(t=t.child,t!==null))for(_v(t,e,n),t=t.sibling;t!==null;)_v(t,e,n),t=t.sibling}function bv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(bv(t,e,n),t=t.sibling;t!==null;)bv(t,e,n),t=t.sibling}var yn=null,zr=!1;function Ji(t,e,n){for(n=n.child;n!==null;)YC(t,e,n),n=n.sibling}function YC(t,e,n){if(hi&&typeof hi.onCommitFiberUnmount=="function")try{hi.onCommitFiberUnmount(Pp,n)}catch{}switch(n.tag){case 5:Ln||da(n,e);case 6:var r=yn,i=zr;yn=null,Ji(t,e,n),yn=r,zr=i,yn!==null&&(zr?(t=yn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):yn.removeChild(n.stateNode));break;case 18:yn!==null&&(zr?(t=yn,n=n.stateNode,t.nodeType===8?Em(t.parentNode,n):t.nodeType===1&&Em(t,n),Tl(t)):Em(yn,n.stateNode));break;case 4:r=yn,i=zr,yn=n.stateNode.containerInfo,zr=!0,Ji(t,e,n),yn=r,zr=i;break;case 0:case 11:case 14:case 15:if(!Ln&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&((o&2)!==0||(o&4)!==0)&&vv(n,e,s),i=i.next}while(i!==r)}Ji(t,e,n);break;case 1:if(!Ln&&(da(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Wt(n,e,a)}Ji(t,e,n);break;case 21:Ji(t,e,n);break;case 22:n.mode&1?(Ln=(r=Ln)||n.memoizedState!==null,Ji(t,e,n),Ln=r):Ji(t,e,n);break;default:Ji(t,e,n)}}function ZE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new t4),e.forEach(function(r){var i=f4.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Dr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:yn=a.stateNode,zr=!1;break e;case 3:yn=a.stateNode.containerInfo,zr=!0;break e;case 4:yn=a.stateNode.containerInfo,zr=!0;break e}a=a.return}if(yn===null)throw Error(oe(160));YC(o,s,i),yn=null,zr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Wt(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)XC(e,t),e=e.sibling}function XC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dr(e,t),ti(t),r&4){try{ul(3,t,t.return),Ip(3,t)}catch(m){Wt(t,t.return,m)}try{ul(5,t,t.return)}catch(m){Wt(t,t.return,m)}}break;case 1:Dr(e,t),ti(t),r&512&&n!==null&&da(n,n.return);break;case 5:if(Dr(e,t),ti(t),r&512&&n!==null&&da(n,n.return),t.flags&32){var i=t.stateNode;try{wl(i,"")}catch(m){Wt(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&gA(i,o),G0(a,s);var l=G0(a,o);for(s=0;s<u.length;s+=2){var c=u[s],f=u[s+1];c==="style"?bA(i,f):c==="dangerouslySetInnerHTML"?yA(i,f):c==="children"?wl(i,f):V_(i,c,f,l)}switch(a){case"input":z0(i,o);break;case"textarea":mA(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?ba(i,!!o.multiple,d,!1):h!==!!o.multiple&&(o.defaultValue!=null?ba(i,!!o.multiple,o.defaultValue,!0):ba(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ll]=o}catch(m){Wt(t,t.return,m)}}break;case 6:if(Dr(e,t),ti(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(m){Wt(t,t.return,m)}}break;case 3:if(Dr(e,t),ti(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Tl(e.containerInfo)}catch(m){Wt(t,t.return,m)}break;case 4:Dr(e,t),ti(t);break;case 13:Dr(e,t),ti(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(b1=Xt())),r&4&&ZE(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ln=(l=Ln)||c,Dr(e,t),Ln=l):Dr(e,t),ti(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&(t.mode&1)!==0)for(Se=t,c=t.child;c!==null;){for(f=Se=c;Se!==null;){switch(h=Se,d=h.child,h.tag){case 0:case 11:case 14:case 15:ul(4,h,h.return);break;case 1:da(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Wt(r,n,m)}}break;case 5:da(h,h.return);break;case 22:if(h.memoizedState!==null){QE(f);continue}}d!==null?(d.return=h,Se=d):QE(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,u=f.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=_A("display",s))}catch(m){Wt(t,t.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Wt(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Dr(e,t),ti(t),r&4&&ZE(t);break;case 21:break;default:Dr(e,t),ti(t)}}function ti(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(HC(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wl(i,""),r.flags&=-33);var o=qE(t);bv(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=qE(t);_v(t,a,s);break;default:throw Error(oe(161))}}catch(u){Wt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function r4(t,e,n){Se=t,qC(t)}function qC(t,e,n){for(var r=(t.mode&1)!==0;Se!==null;){var i=Se,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||tf;if(!s){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Ln;a=tf;var l=Ln;if(tf=s,(Ln=u)&&!l)for(Se=i;Se!==null;)s=Se,u=s.child,s.tag===22&&s.memoizedState!==null?JE(i):u!==null?(u.return=s,Se=u):JE(i);for(;o!==null;)Se=o,qC(o),o=o.sibling;Se=i,tf=a,Ln=l}KE(t)}else(i.subtreeFlags&8772)!==0&&o!==null?(o.return=i,Se=o):KE(t)}}function KE(t){for(;Se!==null;){var e=Se;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Ln||Ip(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ln)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ur(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&IE(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}IE(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Tl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}Ln||e.flags&512&&yv(e)}catch(h){Wt(e,e.return,h)}}if(e===t){Se=null;break}if(n=e.sibling,n!==null){n.return=e.return,Se=n;break}Se=e.return}}function QE(t){for(;Se!==null;){var e=Se;if(e===t){Se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Se=n;break}Se=e.return}}function JE(t){for(;Se!==null;){var e=Se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ip(4,e)}catch(u){Wt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Wt(e,i,u)}}var o=e.return;try{yv(e)}catch(u){Wt(e,o,u)}break;case 5:var s=e.return;try{yv(e)}catch(u){Wt(e,s,u)}}}catch(u){Wt(e,e.return,u)}if(e===t){Se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Se=a;break}Se=e.return}}var i4=Math.ceil,ud=$i.ReactCurrentDispatcher,y1=$i.ReactCurrentOwner,Sr=$i.ReactCurrentBatchConfig,lt=0,dn=null,en=null,wn=0,or=0,pa=Lo(0),an=0,Dl=null,hs=0,Np=0,_1=0,ll=null,Wn=null,b1=0,Ua=1/0,Pi=null,ld=!1,wv=null,Eo=null,nf=!1,po=null,cd=0,cl=0,Ev=null,$f=-1,jf=0;function Dn(){return(lt&6)!==0?Xt():$f!==-1?$f:$f=Xt()}function So(t){return(t.mode&1)===0?1:(lt&2)!==0&&wn!==0?wn&-wn:VF.transition!==null?(jf===0&&(jf=OA()),jf):(t=yt,t!==0||(t=window.event,t=t===void 0?16:zA(t.type)),t)}function Wr(t,e,n,r){if(50<cl)throw cl=0,Ev=null,Error(oe(185));ec(t,n,r),((lt&2)===0||t!==dn)&&(t===dn&&((lt&2)===0&&(Np|=n),an===4&&co(t,wn)),Zn(t,r),n===1&&lt===0&&(e.mode&1)===0&&(Ua=Xt()+500,Mp&&Mo()))}function Zn(t,e){var n=t.callbackNode;VD(t,e);var r=Yh(t,t===dn?wn:0);if(r===0)n!==null&&uE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&uE(n),e===1)t.tag===0?BF(eS.bind(null,t)):iC(eS.bind(null,t)),DF(function(){(lt&6)===0&&Mo()}),n=null;else{switch(kA(r)){case 1:n=H_;break;case 4:n=LA;break;case 16:n=Hh;break;case 536870912:n=MA;break;default:n=Hh}n=rR(n,ZC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ZC(t,e){if($f=-1,jf=0,(lt&6)!==0)throw Error(oe(327));var n=t.callbackNode;if(Ta()&&t.callbackNode!==n)return null;var r=Yh(t,t===dn?wn:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=fd(t,r);else{e=r;var i=lt;lt|=2;var o=QC();(dn!==t||wn!==e)&&(Pi=null,Ua=Xt()+500,rs(t,e));do try{a4();break}catch(a){KC(t,a)}while(1);o1(),ud.current=o,lt=i,en!==null?e=0:(dn=null,wn=0,e=an)}if(e!==0){if(e===2&&(i=q0(t),i!==0&&(r=i,e=Sv(t,i))),e===1)throw n=Dl,rs(t,0),co(t,r),Zn(t,Xt()),n;if(e===6)co(t,r);else{if(i=t.current.alternate,(r&30)===0&&!o4(i)&&(e=fd(t,r),e===2&&(o=q0(t),o!==0&&(r=o,e=Sv(t,o))),e===1))throw n=Dl,rs(t,0),co(t,r),Zn(t,Xt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:Ho(t,Wn,Pi);break;case 3:if(co(t,r),(r&130023424)===r&&(e=b1+500-Xt(),10<e)){if(Yh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Dn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=rv(Ho.bind(null,t,Wn,Pi),e);break}Ho(t,Wn,Pi);break;case 4:if(co(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Gr(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Xt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*i4(r/1960))-r,10<r){t.timeoutHandle=rv(Ho.bind(null,t,Wn,Pi),r);break}Ho(t,Wn,Pi);break;case 5:Ho(t,Wn,Pi);break;default:throw Error(oe(329))}}}return Zn(t,Xt()),t.callbackNode===n?ZC.bind(null,t):null}function Sv(t,e){var n=ll;return t.current.memoizedState.isDehydrated&&(rs(t,e).flags|=256),t=fd(t,e),t!==2&&(e=Wn,Wn=n,e!==null&&xv(e)),t}function xv(t){Wn===null?Wn=t:Wn.push.apply(Wn,t)}function o4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Yr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function co(t,e){for(e&=~_1,e&=~Np,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gr(e),r=1<<n;t[n]=-1,e&=~r}}function eS(t){if((lt&6)!==0)throw Error(oe(327));Ta();var e=Yh(t,0);if((e&1)===0)return Zn(t,Xt()),null;var n=fd(t,e);if(t.tag!==0&&n===2){var r=q0(t);r!==0&&(e=r,n=Sv(t,r))}if(n===1)throw n=Dl,rs(t,0),co(t,e),Zn(t,Xt()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ho(t,Wn,Pi),Zn(t,Xt()),null}function w1(t,e){var n=lt;lt|=1;try{return t(e)}finally{lt=n,lt===0&&(Ua=Xt()+500,Mp&&Mo())}}function ds(t){po!==null&&po.tag===0&&(lt&6)===0&&Ta();var e=lt;lt|=1;var n=Sr.transition,r=yt;try{if(Sr.transition=null,yt=1,t)return t()}finally{yt=r,Sr.transition=n,lt=e,(lt&6)===0&&Mo()}}function E1(){or=pa.current,kt(pa)}function rs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NF(n)),en!==null)for(n=en.return;n!==null;){var r=n;switch(n1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qh();break;case 3:Da(),kt(Xn),kt(On),f1();break;case 5:c1(r);break;case 4:Da();break;case 13:kt(zt);break;case 19:kt(zt);break;case 10:s1(r.type._context);break;case 22:case 23:E1()}n=n.return}if(dn=t,en=t=xo(t.current,null),wn=or=e,an=0,Dl=null,_1=Np=hs=0,Wn=ll=null,Qo!==null){for(e=0;e<Qo.length;e++)if(n=Qo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Qo=null}return t}function KC(t,e){do{var n=en;try{if(o1(),zf.current=ad,sd){for(var r=$t.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}sd=!1}if(fs=0,fn=sn=$t=null,al=!1,kl=0,y1.current=null,n===null||n.return===null){an=1,Dl=e,en=null;break}e:{var o=t,s=n.return,a=n,u=e;if(e=wn,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if((c.mode&1)===0&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=VE(s);if(d!==null){d.flags&=-257,$E(d,s,a,o,e),d.mode&1&&BE(o,l,e),e=d,u=l;var g=e.updateQueue;if(g===null){var m=new Set;m.add(u),e.updateQueue=m}else g.add(u);break e}else{if((e&1)===0){BE(o,l,e),S1();break e}u=Error(oe(426))}}else if(Nt&&a.mode&1){var x=VE(s);if(x!==null){(x.flags&65536)===0&&(x.flags|=256),$E(x,s,a,o,e),r1(Fa(u,a));break e}}o=u=Fa(u,a),an!==4&&(an=2),ll===null?ll=[o]:ll.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=IC(o,u,e);kE(o,_);break e;case 1:a=u;var y=o.type,b=o.stateNode;if((o.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Eo===null||!Eo.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var T=NC(o,a,e);kE(o,T);break e}}o=o.return}while(o!==null)}eR(n)}catch(R){e=R,en===n&&n!==null&&(en=n=n.return);continue}break}while(1)}function QC(){var t=ud.current;return ud.current=ad,t===null?ad:t}function S1(){(an===0||an===3||an===2)&&(an=4),dn===null||(hs&268435455)===0&&(Np&268435455)===0||co(dn,wn)}function fd(t,e){var n=lt;lt|=2;var r=QC();(dn!==t||wn!==e)&&(Pi=null,rs(t,e));do try{s4();break}catch(i){KC(t,i)}while(1);if(o1(),lt=n,ud.current=r,en!==null)throw Error(oe(261));return dn=null,wn=0,an}function s4(){for(;en!==null;)JC(en)}function a4(){for(;en!==null&&!OD();)JC(en)}function JC(t){var e=nR(t.alternate,t,or);t.memoizedProps=t.pendingProps,e===null?eR(t):en=e,y1.current=null}function eR(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=JF(n,e,or),n!==null){en=n;return}}else{if(n=e4(n,e),n!==null){n.flags&=32767,en=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{an=6,en=null;return}}if(e=e.sibling,e!==null){en=e;return}en=e=t}while(e!==null);an===0&&(an=5)}function Ho(t,e,n){var r=yt,i=Sr.transition;try{Sr.transition=null,yt=1,u4(t,e,n,r)}finally{Sr.transition=i,yt=r}return null}function u4(t,e,n,r){do Ta();while(po!==null);if((lt&6)!==0)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if($D(t,o),t===dn&&(en=dn=null,wn=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||nf||(nf=!0,rR(Hh,function(){return Ta(),null})),o=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||o){o=Sr.transition,Sr.transition=null;var s=yt;yt=1;var a=lt;lt|=4,y1.current=null,n4(t,n),XC(n,t),CF(tv),Xh=!!ev,tv=ev=null,t.current=n,r4(n),kD(),lt=a,yt=s,Sr.transition=o}else t.current=n;if(nf&&(nf=!1,po=t,cd=i),o=t.pendingLanes,o===0&&(Eo=null),DD(n.stateNode),Zn(t,Xt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ld)throw ld=!1,t=wv,wv=null,t;return(cd&1)!==0&&t.tag!==0&&Ta(),o=t.pendingLanes,(o&1)!==0?t===Ev?cl++:(cl=0,Ev=t):cl=0,Mo(),null}function Ta(){if(po!==null){var t=kA(cd),e=Sr.transition,n=yt;try{if(Sr.transition=null,yt=16>t?16:t,po===null)var r=!1;else{if(t=po,po=null,cd=0,(lt&6)!==0)throw Error(oe(331));var i=lt;for(lt|=4,Se=t.current;Se!==null;){var o=Se,s=o.child;if((Se.flags&16)!==0){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Se=l;Se!==null;){var c=Se;switch(c.tag){case 0:case 11:case 15:ul(8,c,o)}var f=c.child;if(f!==null)f.return=c,Se=f;else for(;Se!==null;){c=Se;var h=c.sibling,d=c.return;if(WC(c),c===l){Se=null;break}if(h!==null){h.return=d,Se=h;break}Se=d}}}var g=o.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var x=m.sibling;m.sibling=null,m=x}while(m!==null)}}Se=o}}if((o.subtreeFlags&2064)!==0&&s!==null)s.return=o,Se=s;else e:for(;Se!==null;){if(o=Se,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:ul(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,Se=_;break e}Se=o.return}}var y=t.current;for(Se=y;Se!==null;){s=Se;var b=s.child;if((s.subtreeFlags&2064)!==0&&b!==null)b.return=s,Se=b;else e:for(s=y;Se!==null;){if(a=Se,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:Ip(9,a)}}catch(R){Wt(a,a.return,R)}if(a===s){Se=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Se=T;break e}Se=a.return}}if(lt=i,Mo(),hi&&typeof hi.onPostCommitFiberRoot=="function")try{hi.onPostCommitFiberRoot(Pp,t)}catch{}r=!0}return r}finally{yt=n,Sr.transition=e}}return!1}function tS(t,e,n){e=Fa(n,e),e=IC(t,e,1),t=wo(t,e,1),e=Dn(),t!==null&&(ec(t,1,e),Zn(t,e))}function Wt(t,e,n){if(t.tag===3)tS(t,t,n);else for(;e!==null;){if(e.tag===3){tS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Eo===null||!Eo.has(r))){t=Fa(n,t),t=NC(e,t,1),e=wo(e,t,1),t=Dn(),e!==null&&(ec(e,1,t),Zn(e,t));break}}e=e.return}}function l4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dn(),t.pingedLanes|=t.suspendedLanes&n,dn===t&&(wn&n)===n&&(an===4||an===3&&(wn&130023424)===wn&&500>Xt()-b1?rs(t,0):_1|=n),Zn(t,e)}function tR(t,e){e===0&&((t.mode&1)===0?e=1:(e=Hc,Hc<<=1,(Hc&130023424)===0&&(Hc=4194304)));var n=Dn();t=Ni(t,e),t!==null&&(ec(t,e,n),Zn(t,n))}function c4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tR(t,n)}function f4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),tR(t,n)}var nR;nR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xn.current)Hn=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return Hn=!1,QF(t,e,n);Hn=(t.flags&131072)!==0}else Hn=!1,Nt&&(e.flags&1048576)!==0&&oC(e,td,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vf(t,e),t=e.pendingProps;var i=ka(e,On.current);xa(e,n),i=d1(null,e,r,t,i,n);var o=p1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qn(r)?(o=!0,Jh(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,u1(e),i.updater=Op,e.stateNode=i,i._reactInternals=e,cv(e,r,t,n),e=dv(null,e,r,!0,o,n)):(e.tag=0,Nt&&o&&t1(e),In(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Vf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=d4(r),t=Ur(r,t),i){case 0:e=hv(null,e,r,t,n);break e;case 1:e=WE(null,e,r,t,n);break e;case 11:e=jE(null,e,r,t,n);break e;case 14:e=GE(null,e,r,Ur(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ur(r,i),hv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ur(r,i),WE(t,e,r,i,n);case 3:e:{if(zC(e),t===null)throw Error(oe(387));r=e.pendingProps,o=e.memoizedState,i=o.element,lC(t,e),id(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Fa(Error(oe(423)),e),e=HE(t,e,r,n,i);break e}else if(r!==i){i=Fa(Error(oe(424)),e),e=HE(t,e,r,n,i);break e}else for(lr=bo(e.stateNode.containerInfo.firstChild),fr=e,Nt=!0,Br=null,n=dC(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ia(),r===i){e=Di(t,e,n);break e}In(t,e,r,n)}e=e.child}return e;case 5:return pC(e),t===null&&av(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,nv(r,i)?s=null:o!==null&&nv(r,o)&&(e.flags|=32),UC(t,e),In(t,e,s,n),e.child;case 6:return t===null&&av(e),null;case 13:return BC(t,e,n);case 4:return l1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Na(e,null,r,n):In(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ur(r,i),jE(t,e,r,i,n);case 7:return In(t,e,e.pendingProps,n),e.child;case 8:return In(t,e,e.pendingProps.children,n),e.child;case 12:return In(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Ct(nd,r._currentValue),r._currentValue=s,o!==null)if(Yr(o.value,s)){if(o.children===i.children&&!Xn.current){e=Di(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Mi(-1,n&-n),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),uv(o.return,n,e),a.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(oe(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),uv(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}In(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xa(e,n),i=Tr(i),r=r(i),e.flags|=1,In(t,e,r,n),e.child;case 14:return r=e.type,i=Ur(r,e.pendingProps),i=Ur(r.type,i),GE(t,e,r,i,n);case 15:return DC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ur(r,i),Vf(t,e),e.tag=1,qn(r)?(t=!0,Jh(e)):t=!1,xa(e,n),fC(e,r,i),cv(e,r,i,n),dv(null,e,r,!0,t,n);case 19:return VC(t,e,n);case 22:return FC(t,e,n)}throw Error(oe(156,e.tag))};function rR(t,e){return RA(t,e)}function h4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(t,e,n,r){return new h4(t,e,n,r)}function x1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function d4(t){if(typeof t=="function")return x1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===j_)return 11;if(t===G_)return 14}return 2}function xo(t,e){var n=t.alternate;return n===null?(n=Er(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gf(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")x1(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ia:return is(n.children,i,o,e);case $_:s=8,i|=8;break;case I0:return t=Er(12,n,e,i|2),t.elementType=I0,t.lanes=o,t;case N0:return t=Er(13,n,e,i),t.elementType=N0,t.lanes=o,t;case D0:return t=Er(19,n,e,i),t.elementType=D0,t.lanes=o,t;case hA:return Dp(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cA:s=10;break e;case fA:s=9;break e;case j_:s=11;break e;case G_:s=14;break e;case so:s=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=Er(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function is(t,e,n,r){return t=Er(7,t,r,e),t.lanes=n,t}function Dp(t,e,n,r){return t=Er(22,t,r,e),t.elementType=hA,t.lanes=n,t.stateNode={isHidden:!1},t}function Lm(t,e,n){return t=Er(6,t,null,e),t.lanes=n,t}function Mm(t,e,n){return e=Er(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function p4(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fm(0),this.expirationTimes=fm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function T1(t,e,n,r,i,o,s,a,u){return t=new p4(t,e,n,a,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Er(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},u1(o),t}function g4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ra,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function iR(t){if(!t)return Co;t=t._reactInternals;e:{if(Ss(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(qn(n))return rC(t,n,e)}return e}function oR(t,e,n,r,i,o,s,a,u){return t=T1(n,r,!0,t,i,o,s,a,u),t.context=iR(null),n=t.current,r=Dn(),i=So(n),o=Mi(r,i),o.callback=e!=null?e:null,wo(n,o,i),t.current.lanes=i,ec(t,i,r),Zn(t,r),t}function Fp(t,e,n,r){var i=e.current,o=Dn(),s=So(i);return n=iR(n),e.context===null?e.context=n:e.pendingContext=n,e=Mi(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=wo(i,e,s),t!==null&&(Wr(t,i,s,o),Uf(t,i,s)),s}function hd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function nS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function P1(t,e){nS(t,e),(t=t.alternate)&&nS(t,e)}function m4(){return null}var sR=typeof reportError=="function"?reportError:function(t){console.error(t)};function A1(t){this._internalRoot=t}Up.prototype.render=A1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));Fp(t,e,null,null)};Up.prototype.unmount=A1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ds(function(){Fp(null,t,null,null)}),e[Ii]=null}};function Up(t){this._internalRoot=t}Up.prototype.unstable_scheduleHydration=function(t){if(t){var e=DA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lo.length&&e!==0&&e<lo[n].priority;n++);lo.splice(n,0,t),n===0&&UA(t)}};function C1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function rS(){}function v4(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=hd(s);o.call(l)}}var s=oR(e,r,t,0,null,!1,!1,"",rS);return t._reactRootContainer=s,t[Ii]=s.current,Cl(t.nodeType===8?t.parentNode:t),ds(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=hd(u);a.call(l)}}var u=T1(t,0,!1,null,null,!1,!1,"",rS);return t._reactRootContainer=u,t[Ii]=u.current,Cl(t.nodeType===8?t.parentNode:t),ds(function(){Fp(e,u,n,r)}),u}function Bp(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var u=hd(s);a.call(u)}}Fp(e,s,t,i)}else s=v4(n,e,t,i,r);return hd(s)}IA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qu(e.pendingLanes);n!==0&&(Y_(e,n|1),Zn(e,Xt()),(lt&6)===0&&(Ua=Xt()+500,Mo()))}break;case 13:ds(function(){var r=Ni(t,1);if(r!==null){var i=Dn();Wr(r,t,1,i)}}),P1(t,1)}};X_=function(t){if(t.tag===13){var e=Ni(t,134217728);if(e!==null){var n=Dn();Wr(e,t,134217728,n)}P1(t,134217728)}};NA=function(t){if(t.tag===13){var e=So(t),n=Ni(t,e);if(n!==null){var r=Dn();Wr(n,t,e,r)}P1(t,e)}};DA=function(){return yt};FA=function(t,e){var n=yt;try{return yt=t,e()}finally{yt=n}};H0=function(t,e,n){switch(e){case"input":if(z0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Lp(r);if(!i)throw Error(oe(90));pA(r),z0(r,i)}}}break;case"textarea":mA(t,n);break;case"select":e=n.value,e!=null&&ba(t,!!n.multiple,e,!1)}};SA=w1;xA=ds;var y4={usingClientEntryPoint:!1,Events:[nc,ua,Lp,wA,EA,w1]},Lu={findFiberByHostInstance:Ko,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},_4={bundleType:Lu.bundleType,version:Lu.version,rendererPackageName:Lu.rendererPackageName,rendererConfig:Lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$i.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=AA(t),t===null?null:t.stateNode},findFiberByHostInstance:Lu.findFiberByHostInstance||m4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{Pp=rf.inject(_4),hi=rf}catch{}}gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=y4;gr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C1(e))throw Error(oe(200));return g4(t,e,null,n)};gr.createRoot=function(t,e){if(!C1(t))throw Error(oe(299));var n=!1,r="",i=sR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=T1(t,1,!1,null,null,n,!1,r,i),t[Ii]=e.current,Cl(t.nodeType===8?t.parentNode:t),new A1(e)};gr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=AA(e),t=t===null?null:t.stateNode,t};gr.flushSync=function(t){return ds(t)};gr.hydrate=function(t,e,n){if(!zp(e))throw Error(oe(200));return Bp(null,t,e,!0,n)};gr.hydrateRoot=function(t,e,n){if(!C1(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=sR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=oR(e,null,t,1,n!=null?n:null,i,!1,o,s),t[Ii]=e.current,Cl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Up(e)};gr.render=function(t,e,n){if(!zp(e))throw Error(oe(200));return Bp(null,t,e,!1,n)};gr.unmountComponentAtNode=function(t){if(!zp(t))throw Error(oe(40));return t._reactRootContainer?(ds(function(){Bp(null,null,t,!1,function(){t._reactRootContainer=null,t[Ii]=null})}),!0):!1};gr.unstable_batchedUpdates=w1;gr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zp(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return Bp(t,e,n,!1,r)};gr.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=gr})(Jl);const b4=Q2(Jl.exports);var iS=Jl.exports;Qw.createRoot=iS.createRoot,Qw.hydrateRoot=iS.hydrateRoot;/**
 * @remix-run/router v1.0.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ut(){return Ut=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ut.apply(this,arguments)}var on;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(on||(on={}));const oS="popstate";function w4(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return os("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Xr(i)}return S4(e,n,null,t)}function E4(){return Math.random().toString(36).substr(2,8)}function sS(t){return{usr:t.state,key:t.key}}function os(t,e,n,r){return n===void 0&&(n=null),Ut({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ji(e):e,{state:n,key:e&&e.key||r||E4()})}function Xr(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ji(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Fl(t){let e=typeof window<"u"&&typeof window.location<"u"&&window.location.origin!=="null"?window.location.origin:"unknown://unknown",n=typeof t=="string"?t:Xr(t);return new URL(n,e)}function S4(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=on.Pop,u=null;function l(){a=on.Pop,u&&u({action:a,location:h.location})}function c(d,g){a=on.Push;let m=os(h.location,d,g);n&&n(m,d);let x=sS(m),_=h.createHref(m);try{s.pushState(x,"",_)}catch{i.location.assign(_)}o&&u&&u({action:a,location:h.location})}function f(d,g){a=on.Replace;let m=os(h.location,d,g);n&&n(m,d);let x=sS(m),_=h.createHref(m);s.replaceState(x,"",_),o&&u&&u({action:a,location:h.location})}let h={get action(){return a},get location(){return t(i,s)},listen(d){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(oS,l),u=d,()=>{i.removeEventListener(oS,l),u=null}},createHref(d){return e(i,d)},encodeLocation(d){let g=Fl(Xr(d));return Ut({},d,{pathname:g.pathname,search:g.search,hash:g.hash})},push:c,replace:f,go(d){return s.go(d)}};return h}var _n;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(_n||(_n={}));function x4(t){return t.index===!0}function aR(t,e,n){return e===void 0&&(e=[]),n===void 0&&(n=new Set),t.map((r,i)=>{let o=[...e,i],s=typeof r.id=="string"?r.id:o.join("-");return Ve(r.index!==!0||!r.children,"Cannot specify children on an index route"),Ve(!n.has(s),'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),n.add(s),x4(r)?Ut({},r,{id:s}):Ut({},r,{id:s,children:r.children?aR(r.children,o,n):void 0})})}function Ku(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?ji(e):e,i=cR(r.pathname||"/",n);if(i==null)return null;let o=uR(t);T4(o);let s=null;for(let a=0;s==null&&a<o.length;++a)s=I4(o[a],D4(i));return s}function uR(t,e,n,r){return e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r=""),t.forEach((i,o)=>{let s={relativePath:i.path||"",caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};s.relativePath.startsWith("/")&&(Ve(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),s.relativePath=s.relativePath.slice(r.length));let a=Oi([r,s.relativePath]),u=n.concat(s);i.children&&i.children.length>0&&(Ve(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+a+'".')),uR(i.children,e,u,a)),!(i.path==null&&!i.index)&&e.push({path:a,score:O4(a,i.index),routesMeta:u})}),e}function T4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:k4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const P4=/^:\w+$/,A4=3,C4=2,R4=1,L4=10,M4=-2,aS=t=>t==="*";function O4(t,e){let n=t.split("/"),r=n.length;return n.some(aS)&&(r+=M4),e&&(r+=C4),n.filter(i=>!aS(i)).reduce((i,o)=>i+(P4.test(o)?A4:o===""?R4:L4),r)}function k4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function I4(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let s=0;s<n.length;++s){let a=n[s],u=s===n.length-1,l=i==="/"?e:e.slice(i.length)||"/",c=lR({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;o.push({params:r,pathname:Oi([i,c.pathname]),pathnameBase:B4(Oi([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=Oi([i,c.pathnameBase]))}return o}function lR(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=N4(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{if(c==="*"){let h=a[f]||"";s=o.slice(0,o.length-h.length).replace(/(.)\/+$/,"$1")}return l[c]=F4(a[f]||"",c),l},{}),pathname:o,pathnameBase:s,pattern:t}}function N4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),R1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(s,a)=>(r.push(a),"([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function D4(t){try{return decodeURI(t)}catch(e){return R1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function F4(t,e){try{return decodeURIComponent(t)}catch(n){return R1(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function cR(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function R1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function U4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ji(t):t;return{pathname:n?n.startsWith("/")?n:z4(n,e):e,search:V4(r),hash:$4(i)}}function z4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Om(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Vp(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function L1(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ji(t):(i=Ut({},t),Ve(!i.pathname||!i.pathname.includes("?"),Om("?","pathname","search",i)),Ve(!i.pathname||!i.pathname.includes("#"),Om("#","pathname","hash",i)),Ve(!i.search||!i.search.includes("#"),Om("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(r||s==null)a=n;else{let f=e.length-1;if(s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}a=f>=0?e[f]:"/"}let u=U4(i,a),l=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const Oi=t=>t.join("/").replace(/\/\/+/g,"/"),B4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),V4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class uS extends Error{}class j4{constructor(e){this.pendingKeys=new Set,this.subscriber=void 0,Ve(e&&typeof e=="object"&&!Array.isArray(e),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((i,o)=>n=o),this.controller=new AbortController;let r=()=>n(new uS("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",r),this.controller.signal.addEventListener("abort",r),this.data=Object.entries(e).reduce((i,o)=>{let[s,a]=o;return Object.assign(i,{[s]:this.trackPromise(s,a)})},{})}trackPromise(e,n){if(!(n instanceof Promise))return n;this.pendingKeys.add(e);let r=Promise.race([n,this.abortPromise]).then(i=>this.onSettle(r,e,null,i),i=>this.onSettle(r,e,i));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(e,n,r,i){if(this.controller.signal.aborted&&r instanceof uS)return this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:()=>r}),Promise.reject(r);this.pendingKeys.delete(n),this.done&&this.unlistenAbortSignal();const o=this.subscriber;return r?(Object.defineProperty(e,"_error",{get:()=>r}),o&&o(!1),Promise.reject(r)):(Object.defineProperty(e,"_data",{get:()=>i}),o&&o(!1),i)}subscribe(e){this.subscriber=e}cancel(){this.controller.abort(),this.pendingKeys.forEach((n,r)=>this.pendingKeys.delete(r));let e=this.subscriber;e&&e(!0)}async resolveData(e){let n=!1;if(!this.done){let r=()=>this.cancel();e.addEventListener("abort",r),n=await new Promise(i=>{this.subscribe(o=>{e.removeEventListener("abort",r),(o||this.done)&&i(o)})})}return n}get done(){return this.pendingKeys.size===0}get unwrappedData(){return Ve(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((e,n)=>{let[r,i]=n;return Object.assign(e,{[r]:W4(i)})},{})}}function G4(t){return t instanceof Promise&&t._tracked===!0}function W4(t){if(!G4(t))return t;if(t._error)throw t._error;return t._data}class ou{constructor(e,n,r){this.status=e,this.statusText=n||"",this.data=r}}function fR(t){return t instanceof ou}const km={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},H4={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Y4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",X4=!Y4;function q4(t){Ve(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let e=aR(t.routes),n=null,r=new Set,i=null,o=null,s=null,a=!1,u=Ku(e,t.history.location,t.basename),l=null;if(u==null){let{matches:Z,route:re,error:fe}=dS(e);u=Z,l={[re.id]:fe}}let c=!u.some(Z=>Z.route.loader)||t.hydrationData!=null,f,h={historyAction:t.history.action,location:t.history.location,matches:u,initialized:c,navigation:km,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||l,fetchers:new Map},d=on.Pop,g=!1,m,x=!1,_=!1,y=[],b=[],T=new Map,R=0,C=-1,D=new Map,F=new Set,W=new Map,j=new Map;function H(){return n=t.history.listen(Z=>{let{action:re,location:fe}=Z;return ae(re,fe)}),h.initialized||ae(on.Pop,h.location),f}function pe(){n&&n(),r.clear(),m&&m.abort(),h.fetchers.forEach((Z,re)=>J(re))}function ue(Z){return r.add(Z),()=>r.delete(Z)}function se(Z){h=Ut({},h,Z),r.forEach(re=>re(h))}function Ce(Z,re){var fe;let Te=h.actionData!=null&&h.navigation.formMethod!=null&&h.navigation.state==="loading"&&((fe=h.navigation.formAction)==null?void 0:fe.split("?")[0])===Z.pathname,Ne=re.loaderData?{loaderData:Nm(h.loaderData,re.loaderData,re.matches||[])}:{};se(Ut({},Te?{}:{actionData:null},re,Ne,{historyAction:d,location:Z,initialized:!0,navigation:km,revalidation:"idle",restoreScrollPosition:h.navigation.formData?!1:xt(Z,re.matches||h.matches),preventScrollReset:g})),x||d===on.Pop||(d===on.Push?t.history.push(Z,Z.state):d===on.Replace&&t.history.replace(Z,Z.state)),d=on.Pop,g=!1,x=!1,_=!1,y=[],b=[]}async function De(Z,re){if(typeof Z=="number"){t.history.go(Z);return}let{path:fe,submission:Te,error:Ne}=lS(Z,re),Ye=os(h.location,fe,re&&re.state);Ye=t.history.encodeLocation(Ye);let Xe=(re&&re.replace)===!0||Te!=null?on.Replace:on.Push,et=re&&"preventScrollReset"in re?re.preventScrollReset===!0:void 0;return await ae(Xe,Ye,{submission:Te,pendingError:Ne,preventScrollReset:et,replace:re&&re.replace})}function He(){if(_e(),se({revalidation:"loading"}),h.navigation.state!=="submitting"){if(h.navigation.state==="idle"){ae(h.historyAction,h.location,{startUninterruptedRevalidation:!0});return}ae(d||h.historyAction,h.navigation.location,{overrideNavigation:h.navigation})}}async function ae(Z,re,fe){m&&m.abort(),m=null,d=Z,x=(fe&&fe.startUninterruptedRevalidation)===!0,wt(h.location,h.matches),g=(fe&&fe.preventScrollReset)===!0;let Te=fe&&fe.overrideNavigation,Ne=Ku(e,re,t.basename);if(!Ne){let{matches:It,route:Vn,error:un}=dS(e);gt(),Ce(re,{matches:It,loaderData:{},errors:{[Vn.id]:un}});return}if(t6(h.location,re)){Ce(re,{matches:Ne});return}m=new AbortController;let Ye=Ou(re,m.signal,fe&&fe.submission),Xe,et;if(fe&&fe.pendingError)et={[ga(Ne).route.id]:fe.pendingError};else if(fe&&fe.submission){let It=await ve(Ye,re,fe.submission,Ne,{replace:fe.replace});if(It.shortCircuited)return;Xe=It.pendingActionData,et=It.pendingActionError,Te=Ut({state:"loading",location:re},fe.submission)}let{shortCircuited:ut,loaderData:it,errors:ct}=await G(Ye,re,Ne,Te,fe&&fe.submission,fe&&fe.replace,Xe,et);ut||(m=null,Ce(re,{matches:Ne,loaderData:it,errors:ct}))}async function ve(Z,re,fe,Te,Ne){_e();let Ye=Ut({state:"submitting",location:re},fe);se({navigation:Ye});let Xe,et=yS(Te,re);if(!et.route.action)Xe=pS(re);else if(Xe=await Mu("action",Z,et,Te,f.basename),Z.signal.aborted)return{shortCircuited:!0};if(Pa(Xe)){let ut=Ut({state:"loading",location:os(h.location,Xe.location)},fe);return await de(Xe,ut,Ne&&Ne.replace),{shortCircuited:!0}}if(fl(Xe)){let ut=ga(Te,et.route.id);return(Ne&&Ne.replace)!==!0&&(d=on.Push),{pendingActionError:{[ut.route.id]:Xe.error}}}if(es(Xe))throw new Error("defer() is not supported in actions");return{pendingActionData:{[et.route.id]:Xe.data}}}async function G(Z,re,fe,Te,Ne,Ye,Xe,et){let ut=Te;ut||(ut={state:"loading",location:re,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0});let[it,ct]=cS(h,fe,Ne,re,_,y,b,Xe,et,W);if(gt(I=>!(fe&&fe.some(K=>K.route.id===I))||it&&it.some(K=>K.route.id===I)),it.length===0&&ct.length===0)return Ce(re,{matches:fe,loaderData:Nm(h.loaderData,{},fe),errors:et||null,actionData:Xe||null}),{shortCircuited:!0};x||(ct.forEach(I=>{let[K]=I,ce=h.fetchers.get(K),he={state:"loading",data:ce&&ce.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};h.fetchers.set(K,he)}),se(Ut({navigation:ut,actionData:Xe||h.actionData||null},ct.length>0?{fetchers:new Map(h.fetchers)}:{}))),C=++R,ct.forEach(I=>{let[K]=I;return T.set(K,m)});let{results:It,loaderResults:Vn,fetcherResults:un}=await le(h.matches,fe,it,ct,Z);if(Z.signal.aborted)return{shortCircuited:!0};ct.forEach(I=>{let[K]=I;return T.delete(K)});let Sn=gS(It);if(Sn){let I=Im(h,Sn);return await de(Sn,I,Ye),{shortCircuited:!0}}let{loaderData:Zr,errors:Rr}=hS(h,fe,it,Vn,et,ct,un,j);j.forEach((I,K)=>{I.subscribe(ce=>{(ce||I.done)&&j.delete(K)})}),ze();let z=Ke(C);return Ut({loaderData:Zr,errors:Rr},z||ct.length>0?{fetchers:new Map(h.fetchers)}:{})}function X(Z){return h.fetchers.get(Z)||H4}function O(Z,re,fe,Te){if(X4)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");T.has(Z)&&Pe(Z);let Ne=Ku(e,fe,t.basename);if(!Ne){be(Z,re,new ou(404,"Not Found",null));return}let{path:Ye,submission:Xe}=lS(fe,Te,!0),et=yS(Ne,Ye);if(Xe){q(Z,re,Ye,et,Ne,Xe);return}W.set(Z,[Ye,et,Ne]),Q(Z,re,Ye,et,Ne)}async function q(Z,re,fe,Te,Ne,Ye){if(_e(),W.delete(Z),!Te.route.action){let{error:Oe}=pS(fe);be(Z,re,Oe);return}let Xe=h.fetchers.get(Z),et=Ut({state:"submitting"},Ye,{data:Xe&&Xe.data});h.fetchers.set(Z,et),se({fetchers:new Map(h.fetchers)});let ut=new AbortController,it=Ou(fe,ut.signal,Ye);T.set(Z,ut);let ct=await Mu("action",it,Te,Ne,f.basename);if(it.signal.aborted){T.get(Z)===ut&&T.delete(Z);return}if(Pa(ct)){T.delete(Z),F.add(Z);let Oe=Ut({state:"loading"},Ye,{data:void 0});h.fetchers.set(Z,Oe),se({fetchers:new Map(h.fetchers)});let qe=Ut({state:"loading",location:os(h.location,ct.location)},Ye);await de(ct,qe);return}if(fl(ct)){be(Z,re,ct.error);return}es(ct)&&Ve(!1,"defer() is not supported in actions");let It=h.navigation.location||h.location,Vn=Ou(It,ut.signal),un=h.navigation.state!=="idle"?Ku(e,h.navigation.location,t.basename):h.matches;Ve(un,"Didn't find any matches after fetcher action");let Sn=++R;D.set(Z,Sn);let Zr=Ut({state:"loading",data:ct.data},Ye);h.fetchers.set(Z,Zr);let[Rr,z]=cS(h,un,Ye,It,_,y,b,{[Te.route.id]:ct.data},void 0,W);z.filter(Oe=>{let[qe]=Oe;return qe!==Z}).forEach(Oe=>{let[qe]=Oe,Yt=h.fetchers.get(qe),Lt={state:"loading",data:Yt&&Yt.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};h.fetchers.set(qe,Lt),T.set(qe,ut)}),se({fetchers:new Map(h.fetchers)});let{results:I,loaderResults:K,fetcherResults:ce}=await le(h.matches,un,Rr,z,Vn);if(ut.signal.aborted)return;D.delete(Z),T.delete(Z),z.forEach(Oe=>{let[qe]=Oe;return T.delete(qe)});let he=gS(I);if(he){let Oe=Im(h,he);await de(he,Oe);return}let{loaderData:ye,errors:Le}=hS(h,h.matches,Rr,K,void 0,z,ce,j),Me={state:"idle",data:ct.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};h.fetchers.set(Z,Me);let Re=Ke(Sn);h.navigation.state==="loading"&&Sn>C?(Ve(d,"Expected pending action"),m&&m.abort(),Ce(h.navigation.location,{matches:un,loaderData:ye,errors:Le,fetchers:new Map(h.fetchers)})):(se(Ut({errors:Le,loaderData:Nm(h.loaderData,ye,un)},Re?{fetchers:new Map(h.fetchers)}:{})),_=!1)}async function Q(Z,re,fe,Te,Ne){let Ye=h.fetchers.get(Z),Xe={state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,data:Ye&&Ye.data};h.fetchers.set(Z,Xe),se({fetchers:new Map(h.fetchers)});let et=new AbortController,ut=Ou(fe,et.signal);T.set(Z,et);let it=await Mu("loader",ut,Te,Ne,f.basename);if(es(it)&&(it=await gR(it,ut.signal,!0)||it),T.get(Z)===et&&T.delete(Z),ut.signal.aborted)return;if(Pa(it)){let It=Im(h,it);await de(it,It);return}if(fl(it)){let It=ga(h.matches,re);h.fetchers.delete(Z),se({fetchers:new Map(h.fetchers),errors:{[It.route.id]:it.error}});return}Ve(!es(it),"Unhandled fetcher deferred data");let ct={state:"idle",data:it.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};h.fetchers.set(Z,ct),se({fetchers:new Map(h.fetchers)})}async function de(Z,re,fe){Z.revalidate&&(_=!0),Ve(re.location,"Expected a location on the redirect navigation"),m=null;let Te=fe===!0?on.Replace:on.Push;await ae(Te,re.location,{overrideNavigation:re})}async function le(Z,re,fe,Te,Ne){let Ye=await Promise.all([...fe.map(ut=>Mu("loader",Ne,ut,re,f.basename)),...Te.map(ut=>{let[,it,ct,It]=ut;return Mu("loader",Ou(it,Ne.signal),ct,It,f.basename)})]),Xe=Ye.slice(0,fe.length),et=Ye.slice(fe.length);return await Promise.all([mS(Z,fe,Xe,Ne.signal,!1,h.loaderData),mS(Z,Te.map(ut=>{let[,,it]=ut;return it}),et,Ne.signal,!0)]),{results:Ye,loaderResults:Xe,fetcherResults:et}}function _e(){_=!0,y.push(...gt()),W.forEach((Z,re)=>{T.has(re)&&(b.push(re),Pe(re))})}function be(Z,re,fe){let Te=ga(h.matches,re);J(Z),se({errors:{[Te.route.id]:fe},fetchers:new Map(h.fetchers)})}function J(Z){T.has(Z)&&Pe(Z),W.delete(Z),D.delete(Z),F.delete(Z),h.fetchers.delete(Z)}function Pe(Z){let re=T.get(Z);Ve(re,"Expected fetch controller: "+Z),re.abort(),T.delete(Z)}function rt(Z){for(let re of Z){let Te={state:"idle",data:X(re).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};h.fetchers.set(re,Te)}}function ze(){let Z=[];for(let re of F){let fe=h.fetchers.get(re);Ve(fe,"Expected fetcher: "+re),fe.state==="loading"&&(F.delete(re),Z.push(re))}rt(Z)}function Ke(Z){let re=[];for(let[fe,Te]of D)if(Te<Z){let Ne=h.fetchers.get(fe);Ve(Ne,"Expected fetcher: "+fe),Ne.state==="loading"&&(Pe(fe),D.delete(fe),re.push(fe))}return rt(re),re.length>0}function gt(Z){let re=[];return j.forEach((fe,Te)=>{(!Z||Z(Te))&&(fe.cancel(),re.push(Te),j.delete(Te))}),re}function Kt(Z,re,fe){if(i=Z,s=re,o=fe||(Te=>Te.key),!a&&h.navigation===km){a=!0;let Te=xt(h.location,h.matches);Te!=null&&se({restoreScrollPosition:Te})}return()=>{i=null,s=null,o=null}}function wt(Z,re){if(i&&o&&s){let fe=re.map(Ne=>vS(Ne,h.loaderData)),Te=o(Z,fe)||Z.key;i[Te]=s()}}function xt(Z,re){if(i&&o&&s){let fe=re.map(Ye=>vS(Ye,h.loaderData)),Te=o(Z,fe)||Z.key,Ne=i[Te];if(typeof Ne=="number")return Ne}return null}return f={get basename(){return t.basename},get state(){return h},get routes(){return e},initialize:H,subscribe:ue,enableScrollRestoration:Kt,navigate:De,fetch:O,revalidate:He,createHref:Z=>t.history.createHref(Z),getFetcher:X,deleteFetcher:J,dispose:pe,_internalFetchControllers:T,_internalActiveDeferreds:j},f}const Z4=new Set(["POST","PUT","PATCH","DELETE"]);[...Z4];function lS(t,e,n){n===void 0&&(n=!1);let r=typeof t=="string"?t:Xr(t);if(!e||!("formMethod"in e)&&!("formData"in e))return{path:r};if(e.formMethod!=null&&e.formMethod!=="get")return{path:r,submission:{formMethod:e.formMethod,formAction:pR(r),formEncType:e&&e.formEncType||"application/x-www-form-urlencoded",formData:e.formData}};if(!e.formData)return{path:r};let i=ji(r);try{let o=dR(e.formData);n&&i.search&&mR(i.search)&&o.append("index",""),i.search="?"+o}catch{return{path:r,error:new ou(400,"Bad Request","Cannot submit binary form data using GET")}}return{path:Xr(i)}}function Im(t,e){let{formMethod:n,formAction:r,formEncType:i,formData:o}=t.navigation;return{state:"loading",location:os(t.location,e.location),formMethod:n||void 0,formAction:r||void 0,formEncType:i||void 0,formData:o||void 0}}function K4(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function cS(t,e,n,r,i,o,s,a,u,l){let c=u?Object.values(u)[0]:a?Object.values(a)[0]:null,f=u?Object.keys(u)[0]:void 0,d=K4(e,f).filter((m,x)=>m.route.loader!=null&&(Q4(t.loaderData,t.matches[x],m)||o.some(_=>_===m.route.id)||fS(t.location,t.matches[x],n,r,m,i,c))),g=[];return l&&l.forEach((m,x)=>{let[_,y,b]=m;s.includes(x)?g.push([x,_,y,b]):i&&fS(_,y,n,_,y,i,c)&&g.push([x,_,y,b])}),[d,g]}function Q4(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function hR(t,e){let n=t.route.path;return t.pathname!==e.pathname||n&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function fS(t,e,n,r,i,o,s){let a=Fl(t),u=e.params,l=Fl(r),c=i.params,f=hR(e,i)||a.toString()===l.toString()||a.search!==l.search||o;if(i.route.shouldRevalidate){let h=i.route.shouldRevalidate(Ut({currentUrl:a,currentParams:u,nextUrl:l,nextParams:c},n,{actionResult:s,defaultShouldRevalidate:f}));if(typeof h=="boolean")return h}return f}async function Mu(t,e,n,r,i,o,s){o===void 0&&(o=!1),s===void 0&&(s=!1);let a,u,l,c=new Promise((h,d)=>l=d),f=()=>l();e.signal.addEventListener("abort",f);try{let h=n.route[t];Ve(h,"Could not find the "+t+' to run on the "'+n.route.id+'" route'),u=await Promise.race([h({request:e,params:n.params}),c])}catch(h){a=_n.error,u=h}finally{e.signal.removeEventListener("abort",f)}if(u instanceof Response){let h=u.status;if(h>=300&&h<=399){let m=u.headers.get("Location");Ve(m,"Redirects returned/thrown from loaders/actions must have a Location header");let x=r.slice(0,r.indexOf(n)+1),_=Vp(x).map(T=>T.pathnameBase),y=Fl(e.url).pathname,b=L1(m,_,y);if(Ve(Xr(b),"Unable to resolve redirect location: "+u.headers.get("Location")),i){let T=b.pathname;b.pathname=T==="/"?i:Oi([i,T])}if(m=Xr(b),o)throw u.headers.set("Location",m),u;return{type:_n.redirect,status:h,location:m,revalidate:u.headers.get("X-Remix-Revalidate")!==null}}if(s)throw{type:a||_n.data,response:u};let d,g=u.headers.get("Content-Type");return g&&g.startsWith("application/json")?d=await u.json():d=await u.text(),a===_n.error?{type:a,error:new ou(h,u.statusText,d),headers:u.headers}:{type:_n.data,data:d,statusCode:u.status,headers:u.headers}}return a===_n.error?{type:a,error:u}:u instanceof j4?{type:_n.deferred,deferredData:u}:{type:_n.data,data:u}}function Ou(t,e,n){let r=Fl(pR(t)).toString(),i={signal:e};if(n){let{formMethod:o,formEncType:s,formData:a}=n;i.method=o.toUpperCase(),i.body=s==="application/x-www-form-urlencoded"?dR(a):a}return new Request(r,i)}function dR(t){let e=new URLSearchParams;for(let[n,r]of t.entries())Ve(typeof r=="string",'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),e.append(n,r);return e}function J4(t,e,n,r,i){let o={},s=null,a,u=!1,l={};return n.forEach((c,f)=>{let h=e[f].route.id;if(Ve(!Pa(c),"Cannot handle redirect results in processLoaderData"),fl(c)){let d=ga(t,h),g=c.error;r&&(g=Object.values(r)[0],r=void 0),s=Object.assign(s||{},{[d.route.id]:g}),u||(u=!0,a=fR(c.error)?c.error.status:500),c.headers&&(l[h]=c.headers)}else es(c)?(i&&i.set(h,c.deferredData),o[h]=c.deferredData.data):(o[h]=c.data,c.statusCode!=null&&c.statusCode!==200&&!u&&(a=c.statusCode),c.headers&&(l[h]=c.headers))}),r&&(s=r),{loaderData:o,errors:s,statusCode:a||200,loaderHeaders:l}}function hS(t,e,n,r,i,o,s,a){let{loaderData:u,errors:l}=J4(e,n,r,i,a);for(let c=0;c<o.length;c++){let[f,,h]=o[c];Ve(s!==void 0&&s[c]!==void 0,"Did not find corresponding fetcher result");let d=s[c];if(fl(d)){let g=ga(t.matches,h.route.id);l&&l[g.route.id]||(l=Ut({},l,{[g.route.id]:d.error})),t.fetchers.delete(f)}else{if(Pa(d))throw new Error("Unhandled fetcher revalidation redirect");if(es(d))throw new Error("Unhandled fetcher deferred data");{let g={state:"idle",data:d.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};t.fetchers.set(f,g)}}}return{loaderData:u,errors:l}}function Nm(t,e,n){let r=Ut({},e);return n.forEach(i=>{let o=i.route.id;e[o]===void 0&&t[o]!==void 0&&(r[o]=t[o])}),r}function ga(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function e6(t,e,n){let r=t.find(i=>i.index||!i.path||i.path==="/")||{id:"__shim-"+e+"-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:r}],route:r,error:new ou(e,n,null)}}function dS(t){return e6(t,404,"Not Found")}function pS(t){let e=typeof t=="string"?t:Xr(t);return console.warn("You're trying to submit to a route that does not have an action.  To fix this, please add an `action` function to the route for "+("["+e+"]")),{type:_n.error,error:new ou(405,"Method Not Allowed","")}}function gS(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Pa(n))return n}}function pR(t){let e=typeof t=="string"?ji(t):t;return Xr(Ut({},e,{hash:""}))}function t6(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash!==e.hash}function es(t){return t.type===_n.deferred}function fl(t){return t.type===_n.error}function Pa(t){return(t&&t.type)===_n.redirect}async function mS(t,e,n,r,i,o){for(let s=0;s<n.length;s++){let a=n[s],u=e[s],l=t.find(f=>f.route.id===u.route.id),c=l!=null&&!hR(l,u)&&(o&&o[u.route.id])!==void 0;es(a)&&(i||c)&&await gR(a,r,i).then(f=>{f&&(n[s]=f||n[s])})}}async function gR(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:_n.data,data:t.deferredData.unwrappedData}}catch(i){return{type:_n.error,error:i}}return{type:_n.data,data:t.deferredData.data}}}function mR(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function vS(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function yS(t,e){let n=typeof e=="string"?ji(e).search:e.search;if(t[t.length-1].route.index&&mR(n||""))return t[t.length-1];let r=Vp(t);return r[r.length-1]}var $p={exports:{}},jp={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n6=B.exports,r6=Symbol.for("react.element"),i6=Symbol.for("react.fragment"),o6=Object.prototype.hasOwnProperty,s6=n6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a6={key:!0,ref:!0,__self:!0,__source:!0};function vR(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)o6.call(e,r)&&!a6.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:r6,type:t,key:o,ref:s,props:i,_owner:s6.current}}jp.Fragment=i6;jp.jsx=vR;jp.jsxs=vR;(function(t){t.exports=jp})($p);const u6=$p.exports.Fragment,ke=$p.exports.jsx,ps=$p.exports.jsxs;/**
 * React Router v6.4.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dd.apply(this,arguments)}function l6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const c6=typeof Object.is=="function"?Object.is:l6,{useState:f6,useEffect:h6,useLayoutEffect:d6,useDebugValue:p6}=O0;function g6(t,e,n){const r=e(),[{inst:i},o]=f6({inst:{value:r,getSnapshot:e}});return d6(()=>{i.value=r,i.getSnapshot=e,Dm(i)&&o({inst:i})},[t,r,e]),h6(()=>(Dm(i)&&o({inst:i}),t(()=>{Dm(i)&&o({inst:i})})),[t]),p6(r),r}function Dm(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!c6(n,r)}catch{return!0}}function m6(t,e,n){return e()}const v6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",y6=!v6,_6=y6?m6:g6,b6="useSyncExternalStore"in O0?(t=>t.useSyncExternalStore)(O0):_6,w6=B.exports.createContext(null),yR=B.exports.createContext(null),Gp=B.exports.createContext(null),M1=B.exports.createContext(null),Wp=B.exports.createContext(null),xs=B.exports.createContext({outlet:null,matches:[]}),_R=B.exports.createContext(null);function E6(t,e){let{relative:n}=e===void 0?{}:e;su()||Ve(!1);let{basename:r,navigator:i}=B.exports.useContext(M1),{hash:o,pathname:s,search:a}=O1(t,{relative:n}),u=s;return r!=="/"&&(u=s==="/"?r:Oi([r,s])),i.createHref({pathname:u,search:a,hash:o})}function su(){return B.exports.useContext(Wp)!=null}function au(){return su()||Ve(!1),B.exports.useContext(Wp).location}function Due(t){su()||Ve(!1);let{pathname:e}=au();return B.exports.useMemo(()=>lR(t,e),[e,t])}function S6(){su()||Ve(!1);let{basename:t,navigator:e}=B.exports.useContext(M1),{matches:n}=B.exports.useContext(xs),{pathname:r}=au(),i=JSON.stringify(Vp(n).map(a=>a.pathnameBase)),o=B.exports.useRef(!1);return B.exports.useEffect(()=>{o.current=!0}),B.exports.useCallback(function(a,u){if(u===void 0&&(u={}),!o.current)return;if(typeof a=="number"){e.go(a);return}let l=L1(a,JSON.parse(i),r,u.relative==="path");t!=="/"&&(l.pathname=l.pathname==="/"?t:Oi([t,l.pathname])),(u.replace?e.replace:e.push)(l,u.state,u)},[t,e,i,r])}const bR=B.exports.createContext(null);function Fue(){return B.exports.useContext(bR)}function x6(t){let e=B.exports.useContext(xs).outlet;return e&&ke(bR.Provider,{value:t,children:e})}function O1(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=B.exports.useContext(xs),{pathname:i}=au(),o=JSON.stringify(Vp(r).map(s=>s.pathnameBase));return B.exports.useMemo(()=>L1(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function T6(t,e){su()||Ve(!1);let n=B.exports.useContext(Gp),{matches:r}=B.exports.useContext(xs),i=r[r.length-1],o=i?i.params:{};i&&i.pathname;let s=i?i.pathnameBase:"/";i&&i.route;let a=au(),u;if(e){var l;let g=typeof e=="string"?ji(e):e;s==="/"||((l=g.pathname)==null?void 0:l.startsWith(s))||Ve(!1),u=g}else u=a;let c=u.pathname||"/",f=s==="/"?c:c.slice(s.length)||"/",h=Ku(t,{pathname:f}),d=R6(h&&h.map(g=>Object.assign({},g,{params:Object.assign({},o,g.params),pathname:Oi([s,g.pathname]),pathnameBase:g.pathnameBase==="/"?s:Oi([s,g.pathnameBase])})),r,n||void 0);return e&&d?ke(Wp.Provider,{value:{location:dd({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:on.Pop},children:d}):d}function P6(){let t=L6(),e=fR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r};return ps(u6,{children:[ke("h2",{children:"Unhandled Thrown Error!"}),ke("h3",{style:{fontStyle:"italic"},children:e}),n?ke("pre",{style:i,children:n}):null,ke("p",{children:"\u{1F4BF} Hey developer \u{1F44B}"}),ps("p",{children:["You can provide a way better UX than this when your app throws errors by providing your own\xA0",ke("code",{style:o,children:"errorElement"})," props on\xA0",ke("code",{style:o,children:"<Route>"})]})]})}class A6 extends B.exports.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location?{error:e.error,location:e.location}:{error:e.error||n.error,location:n.location}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?ke(_R.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function C6(t){let{routeContext:e,match:n,children:r}=t,i=B.exports.useContext(w6);return i&&n.route.errorElement&&(i._deepestRenderedBoundaryId=n.route.id),ke(xs.Provider,{value:e,children:r})}function R6(t,e,n){if(e===void 0&&(e=[]),t==null)if(n!=null&&n.errors)t=n.matches;else return null;let r=t,i=n==null?void 0:n.errors;if(i!=null){let o=r.findIndex(s=>s.route.id&&(i==null?void 0:i[s.route.id]));o>=0||Ve(!1),r=r.slice(0,Math.min(r.length,o+1))}return r.reduceRight((o,s,a)=>{let u=s.route.id?i==null?void 0:i[s.route.id]:null,l=n?s.route.errorElement||ke(P6,{}):null,c=()=>ke(C6,{match:s,routeContext:{outlet:o,matches:e.concat(r.slice(0,a+1))},children:u?l:s.route.element!==void 0?s.route.element:o});return n&&(s.route.errorElement||a===0)?ke(A6,{location:n.location,component:l,error:u,children:c()}):c()},null)}var _S;(function(t){t.UseRevalidator="useRevalidator"})(_S||(_S={}));var pd;(function(t){t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"})(pd||(pd={}));function wR(t){let e=B.exports.useContext(Gp);return e||Ve(!1),e}function Uue(){let t=wR(pd.UseLoaderData),e=B.exports.useContext(xs);e||Ve(!1);let n=e.matches[e.matches.length-1];return n.route.id||Ve(!1),t.loaderData[n.route.id]}function L6(){var t;let e=B.exports.useContext(_R),n=wR(pd.UseRouteError),r=B.exports.useContext(xs),i=r.matches[r.matches.length-1];return e||(r||Ve(!1),i.route.id||Ve(!1),(t=n.errors)==null?void 0:t[i.route.id])}function zue(t){let{fallbackElement:e,router:n}=t,r=b6(n.subscribe,()=>n.state,()=>n.state),i=B.exports.useMemo(()=>({createHref:n.createHref,go:s=>n.navigate(s),push:(s,a,u)=>n.navigate(s,{state:a,preventScrollReset:u==null?void 0:u.preventScrollReset}),replace:(s,a,u)=>n.navigate(s,{replace:!0,state:a,preventScrollReset:u==null?void 0:u.preventScrollReset})}),[n]),o=n.basename||"/";return ke(yR.Provider,{value:{router:n,navigator:i,static:!1,basename:o},children:ke(Gp.Provider,{value:r,children:ke(O6,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:i,children:n.state.initialized?ke(k6,{}):e})})})}function Bue(t){return x6(t.context)}function M6(t){Ve(!1)}function O6(t){let{basename:e="/",children:n=null,location:r,navigationType:i=on.Pop,navigator:o,static:s=!1}=t;su()&&Ve(!1);let a=e.replace(/^\/*/,"/"),u=B.exports.useMemo(()=>({basename:a,navigator:o,static:s}),[a,o,s]);typeof r=="string"&&(r=ji(r));let{pathname:l="/",search:c="",hash:f="",state:h=null,key:d="default"}=r,g=B.exports.useMemo(()=>{let m=cR(l,a);return m==null?null:{pathname:m,search:c,hash:f,state:h,key:d}},[a,l,c,f,h,d]);return g==null?null:ke(M1.Provider,{value:u,children:ke(Wp.Provider,{children:n,value:{location:g,navigationType:i}})})}function k6(t){let{children:e,location:n}=t,r=B.exports.useContext(yR),i=r&&!e?r.router.routes:Tv(e);return T6(i,n)}var bS;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(bS||(bS={}));new Promise(()=>{});function Tv(t,e){e===void 0&&(e=[]);let n=[];return B.exports.Children.forEach(t,(r,i)=>{if(!B.exports.isValidElement(r))return;if(r.type===B.exports.Fragment){n.push.apply(n,Tv(r.props.children,e));return}r.type!==M6&&Ve(!1),!r.props.index||!r.props.children||Ve(!1);let o=[...e,i],s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(s.children=Tv(r.props.children,o)),n.push(s)}),n}function ER(t){return t.map(e=>{let n=dd({},e);return n.hasErrorBoundary==null&&(n.hasErrorBoundary=n.errorElement!=null),n.children&&(n.children=ER(n.children)),n})}/**
 * React Router DOM v6.4.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function SR(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function I6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function N6(t,e){return t.button===0&&(!e||e==="_self")&&!I6(t)}const D6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],F6=["aria-current","caseSensitive","className","end","style","to","children"];function Vue(t,e){var n;return q4({basename:e==null?void 0:e.basename,history:w4({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||((n=window)==null?void 0:n.__staticRouterHydrationData),routes:ER(t)}).initialize()}const U6=B.exports.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:a,target:u,to:l,preventScrollReset:c}=e,f=SR(e,D6),h=E6(l,{relative:i}),d=z6(l,{replace:s,state:a,target:u,preventScrollReset:c,relative:i});function g(m){r&&r(m),m.defaultPrevented||d(m)}return ke("a",{...f,href:h,onClick:o?r:g,ref:n,target:u})}),$ue=B.exports.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:s=!1,style:a,to:u,children:l}=e,c=SR(e,F6),f=O1(u,{relative:c.relative}),h=au(),d=B.exports.useContext(Gp),g=f.pathname,m=h.pathname,x=d&&d.navigation&&d.navigation.location?d.navigation.location.pathname:null;i||(m=m.toLowerCase(),x=x?x.toLowerCase():null,g=g.toLowerCase());let _=m===g||!s&&m.startsWith(g)&&m.charAt(g.length)==="/",y=x!=null&&(x===g||!s&&x.startsWith(g)&&x.charAt(g.length)==="/"),b=_?r:void 0,T;typeof o=="function"?T=o({isActive:_,isPending:y}):T=[o,_?"active":null,y?"pending":null].filter(Boolean).join(" ");let R=typeof a=="function"?a({isActive:_,isPending:y}):a;return ke(U6,{...c,"aria-current":b,className:T,ref:n,style:R,to:u,children:typeof l=="function"?l({isActive:_,isPending:y}):l})});var wS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(wS||(wS={}));var ES;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ES||(ES={}));function z6(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s}=e===void 0?{}:e,a=S6(),u=au(),l=O1(t,{relative:s});return B.exports.useCallback(c=>{if(N6(c,n)){c.preventDefault();let f=r!==void 0?r:Xr(u)===Xr(l);a(t,{replace:f,state:i,preventScrollReset:o,relative:s})}},[u,a,l,r,i,n,t,o,s])}function B6(t){const e=new Error(t);if(e.stack===void 0)try{throw e}catch{}return e}var V6=B6,Be=V6;function $6(t){return!!t&&typeof t.then=="function"}var Dt=$6;function j6(t,e){if(t!=null)return t;throw Be(e!=null?e:"Got unexpected null or undefined")}var Ft=j6;function Ue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Hp{getValue(){throw Be("BaseLoadable")}toPromise(){throw Be("BaseLoadable")}valueMaybe(){throw Be("BaseLoadable")}valueOrThrow(){throw Be(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Be("BaseLoadable")}promiseOrThrow(){throw Be(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Be("BaseLoadable")}errorOrThrow(){throw Be(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw Be("BaseLoadable")}}class G6 extends Hp{constructor(e){super(),Ue(this,"state","hasValue"),Ue(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const n=e(this.contents);return Dt(n)?gs(n):za(n)?n:ic(n)}catch(n){return Dt(n)?gs(n.next(()=>this.map(e))):Yp(n)}}}class W6 extends Hp{constructor(e){super(),Ue(this,"state","hasError"),Ue(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class xR extends Hp{constructor(e){super(),Ue(this,"state","loading"),Ue(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return gs(this.contents.then(n=>{const r=e(n);if(za(r)){const i=r;switch(i.state){case"hasValue":return i.contents;case"hasError":throw i.contents;case"loading":return i.contents}}return r}).catch(n=>{if(Dt(n))return n.then(()=>this.map(e).contents);throw n}))}}function ic(t){return Object.freeze(new G6(t))}function Yp(t){return Object.freeze(new W6(t))}function gs(t){return Object.freeze(new xR(t))}function TR(){return Object.freeze(new xR(new Promise(()=>{})))}function H6(t){return t.every(e=>e.state==="hasValue")?ic(t.map(e=>e.contents)):t.some(e=>e.state==="hasError")?Yp(Ft(t.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):gs(Promise.all(t.map(e=>e.contents)))}function PR(t){const n=(Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(i=>t[i])).map(i=>za(i)?i:Dt(i)?gs(i):ic(i)),r=H6(n);return Array.isArray(t)?r:r.map(i=>Object.getOwnPropertyNames(t).reduce((o,s,a)=>({...o,[s]:i[a]}),{}))}function za(t){return t instanceof Hp}const Y6={of:t=>Dt(t)?gs(t):za(t)?t:ic(t),error:t=>Yp(t),loading:()=>TR(),all:PR,isLoadable:za};var Ts={loadableWithValue:ic,loadableWithError:Yp,loadableWithPromise:gs,loadableLoading:TR,loadableAll:PR,isLoadable:za,RecoilLoadable:Y6},X6=Ts.loadableWithValue,q6=Ts.loadableWithError,Z6=Ts.loadableWithPromise,K6=Ts.loadableLoading,Q6=Ts.loadableAll,J6=Ts.isLoadable,e5=Ts.RecoilLoadable,oc=Object.freeze({__proto__:null,loadableWithValue:X6,loadableWithError:q6,loadableWithPromise:Z6,loadableLoading:K6,loadableAll:Q6,isLoadable:J6,RecoilLoadable:e5});const Xp=new Map().set("recoil_hamt_2020",!0).set("recoil_sync_external_store",!0).set("recoil_suppress_rerender_in_callback",!0).set("recoil_memory_managament_2020",!0);function qp(t){var e;return(e=Xp.get(t))!==null&&e!==void 0?e:!1}qp.setPass=t=>{Xp.set(t,!0)};qp.setFail=t=>{Xp.set(t,!1)};qp.clear=()=>{Xp.clear()};var Et=qp;function t5(t,e,{error:n}={}){return null}var n5=t5,k1=n5,Fm,Um,zm;const r5=(Fm=Rt.createMutableSource)!==null&&Fm!==void 0?Fm:Rt.unstable_createMutableSource,AR=(Um=Rt.useMutableSource)!==null&&Um!==void 0?Um:Rt.unstable_useMutableSource,CR=(zm=Rt.useSyncExternalStore)!==null&&zm!==void 0?zm:Rt.unstable_useSyncExternalStore;function i5(){var t;const{ReactCurrentDispatcher:e,ReactCurrentOwner:n}=Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((t=e==null?void 0:e.current)!==null&&t!==void 0?t:n.currentDispatcher).useSyncExternalStore!=null}function o5(){return Et("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:Et("recoil_sync_external_store")&&CR!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:Et("recoil_mutable_source")&&AR!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?Et("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:Et("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function s5(){return!1}var sc={createMutableSource:r5,useMutableSource:AR,useSyncExternalStore:CR,currentRendererSupportsUseSyncExternalStore:i5,reactMode:o5,isFastRefreshEnabled:s5};const RR={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0};function a5(){var t,e,n;if(typeof process>"u"||((t=process)===null||t===void 0?void 0:t.env)==null)return;const r=(e=process.env.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED)===null||e===void 0||(n=e.toLowerCase())===null||n===void 0?void 0:n.trim();if(r==null||r==="")return;if(!["true","false"].includes(r))throw Be(`process.env.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED value must be 'true', 'false', or empty: ${r}`);RR.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=r==="true"}a5();var LR=RR;class I1{constructor(e){Ue(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class MR extends I1{}class OR extends I1{}function u5(t){return t instanceof MR||t instanceof OR}var Zp={AbstractRecoilValue:I1,RecoilState:MR,RecoilValueReadOnly:OR,isRecoilValue:u5},l5=Zp.AbstractRecoilValue,c5=Zp.RecoilState,f5=Zp.RecoilValueReadOnly,h5=Zp.isRecoilValue,Ba=Object.freeze({__proto__:null,AbstractRecoilValue:l5,RecoilState:c5,RecoilValueReadOnly:f5,isRecoilValue:h5});function d5(t,e){return function*(){let n=0;for(const r of t)yield e(r,n++)}()}var Kp=d5;class kR{}const p5=new kR,ms=new Map,N1=new Map;function g5(t){return Kp(t,e=>Ft(N1.get(e)))}function m5(t){if(ms.has(t)){const e=`Duplicate atom key "${t}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function v5(t){LR.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&m5(t.key),ms.set(t.key,t);const e=t.set==null?new Ba.RecoilValueReadOnly(t.key):new Ba.RecoilState(t.key);return N1.set(t.key,e),e}class IR extends Error{}function y5(t){const e=ms.get(t);if(e==null)throw new IR(`Missing definition for RecoilValue: "${t}""`);return e}function _5(t){return ms.get(t)}const gd=new Map;function b5(t){var e;if(!Et("recoil_memory_managament_2020"))return;const n=ms.get(t);if(n!=null&&(e=n.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(n)){var r;ms.delete(t),(r=NR(t))===null||r===void 0||r(),gd.delete(t)}}function w5(t,e){!Et("recoil_memory_managament_2020")||(e===void 0?gd.delete(t):gd.set(t,e))}function NR(t){return gd.get(t)}var Qn={nodes:ms,recoilValues:N1,registerNode:v5,getNode:y5,getNodeMaybe:_5,deleteNodeConfigIfPossible:b5,setConfigDeletionHandler:w5,getConfigDeletionHandler:NR,recoilValuesForKeys:g5,NodeMissingError:IR,DefaultValue:kR,DEFAULT_VALUE:p5};function E5(t,e){e()}var S5={enqueueExecution:E5};function x5(t,e){return e={exports:{}},t(e,e.exports),e.exports}var T5=x5(function(t){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},n={},r=5,i=Math.pow(2,r),o=i-1,s=i/2,a=i/4,u={},l=function(I){return function(){return I}},c=n.hash=function(z){var I=typeof z>"u"?"undefined":e(z);if(I==="number")return z;I!=="string"&&(z+="");for(var K=0,ce=0,he=z.length;ce<he;++ce){var ye=z.charCodeAt(ce);K=(K<<5)-K+ye|0}return K},f=function(I){return I-=I>>1&1431655765,I=(I&858993459)+(I>>2&858993459),I=I+(I>>4)&252645135,I+=I>>8,I+=I>>16,I&127},h=function(I,K){return K>>>I&o},d=function(I){return 1<<I},g=function(I,K){return f(I&K-1)},m=function(I,K,ce,he){var ye=he;if(!I){var Le=he.length;ye=new Array(Le);for(var Me=0;Me<Le;++Me)ye[Me]=he[Me]}return ye[K]=ce,ye},x=function(I,K,ce){var he=ce.length-1,ye=0,Le=0,Me=ce;if(I)ye=Le=K;else for(Me=new Array(he);ye<K;)Me[Le++]=ce[ye++];for(++ye;ye<=he;)Me[Le++]=ce[ye++];return I&&(Me.length=he),Me},_=function(I,K,ce,he){var ye=he.length;if(I){for(var Le=ye;Le>=K;)he[Le--]=he[Le];return he[K]=ce,he}for(var Me=0,Re=0,Oe=new Array(ye+1);Me<K;)Oe[Re++]=he[Me++];for(Oe[K]=ce;Me<ye;)Oe[++Re]=he[Me++];return Oe},y=1,b=2,T=3,R=4,C={__hamt_isEmpty:!0},D=function(I){return I===C||I&&I.__hamt_isEmpty},F=function(I,K,ce,he){return{type:y,edit:I,hash:K,key:ce,value:he,_modify:ae}},W=function(I,K,ce){return{type:b,edit:I,hash:K,children:ce,_modify:ve}},j=function(I,K,ce){return{type:T,edit:I,mask:K,children:ce,_modify:G}},H=function(I,K,ce){return{type:R,edit:I,size:K,children:ce,_modify:X}},pe=function(I){return I===C||I.type===y||I.type===b},ue=function(I,K,ce,he,ye){for(var Le=[],Me=he,Re=0,Oe=0;Me;++Oe)Me&1&&(Le[Oe]=ye[Re++]),Me>>>=1;return Le[K]=ce,H(I,Re+1,Le)},se=function(I,K,ce,he){for(var ye=new Array(K-1),Le=0,Me=0,Re=0,Oe=he.length;Re<Oe;++Re)if(Re!==ce){var qe=he[Re];qe&&!D(qe)&&(ye[Le++]=qe,Me|=1<<Re)}return j(I,Me,ye)},Ce=function z(I,K,ce,he,ye,Le){if(ce===ye)return W(I,ce,[Le,he]);var Me=h(K,ce),Re=h(K,ye);return j(I,d(Me)|d(Re),Me===Re?[z(I,K+r,ce,he,ye,Le)]:Me<Re?[he,Le]:[Le,he])},De=function(I,K,ce,he,ye,Le,Me,Re){for(var Oe=ye.length,qe=0;qe<Oe;++qe){var Yt=ye[qe];if(ce(Me,Yt.key)){var Lt=Yt.value,xn=Le(Lt);return xn===Lt?ye:xn===u?(--Re.value,x(I,qe,ye)):m(I,qe,F(K,he,Me,xn),ye)}}var kn=Le();return kn===u?ye:(++Re.value,m(I,Oe,F(K,he,Me,kn),ye))},He=function(I,K){return I===K.edit},ae=function(I,K,ce,he,ye,Le,Me){if(K(Le,this.key)){var Re=he(this.value);return Re===this.value?this:Re===u?(--Me.value,C):He(I,this)?(this.value=Re,this):F(I,ye,Le,Re)}var Oe=he();return Oe===u?this:(++Me.value,Ce(I,ce,this.hash,this,ye,F(I,ye,Le,Oe)))},ve=function(I,K,ce,he,ye,Le,Me){if(ye===this.hash){var Re=He(I,this),Oe=De(Re,I,K,this.hash,this.children,he,Le,Me);return Oe===this.children?this:Oe.length>1?W(I,this.hash,Oe):Oe[0]}var qe=he();return qe===u?this:(++Me.value,Ce(I,ce,this.hash,this,ye,F(I,ye,Le,qe)))},G=function(I,K,ce,he,ye,Le,Me){var Re=this.mask,Oe=this.children,qe=h(ce,ye),Yt=d(qe),Lt=g(Re,Yt),xn=Re&Yt,kn=xn?Oe[Lt]:C,Kr=kn._modify(I,K,ce+r,he,ye,Le,Me);if(kn===Kr)return this;var Lr=He(I,this),Qr=Re,Jr=void 0;if(xn&&D(Kr)){if(Qr&=~Yt,!Qr)return C;if(Oe.length<=2&&pe(Oe[Lt^1]))return Oe[Lt^1];Jr=x(Lr,Lt,Oe)}else if(!xn&&!D(Kr)){if(Oe.length>=s)return ue(I,qe,Kr,Re,Oe);Qr|=Yt,Jr=_(Lr,Lt,Kr,Oe)}else Jr=m(Lr,Lt,Kr,Oe);return Lr?(this.mask=Qr,this.children=Jr,this):j(I,Qr,Jr)},X=function(I,K,ce,he,ye,Le,Me){var Re=this.size,Oe=this.children,qe=h(ce,ye),Yt=Oe[qe],Lt=(Yt||C)._modify(I,K,ce+r,he,ye,Le,Me);if(Yt===Lt)return this;var xn=He(I,this),kn=void 0;if(D(Yt)&&!D(Lt))++Re,kn=m(xn,qe,Lt,Oe);else if(!D(Yt)&&D(Lt)){if(--Re,Re<=a)return se(I,Re,qe,Oe);kn=m(xn,qe,C,Oe)}else kn=m(xn,qe,Lt,Oe);return xn?(this.size=Re,this.children=kn,this):H(I,Re,kn)};C._modify=function(z,I,K,ce,he,ye,Le){var Me=ce();return Me===u?C:(++Le.value,F(z,he,ye,Me))};function O(z,I,K,ce,he){this._editable=z,this._edit=I,this._config=K,this._root=ce,this._size=he}O.prototype.setTree=function(z,I){return this._editable?(this._root=z,this._size=I,this):z===this._root?this:new O(this._editable,this._edit,this._config,z,I)};var q=n.tryGetHash=function(z,I,K,ce){for(var he=ce._root,ye=0,Le=ce._config.keyEq;;)switch(he.type){case y:return Le(K,he.key)?he.value:z;case b:{if(I===he.hash)for(var Me=he.children,Re=0,Oe=Me.length;Re<Oe;++Re){var qe=Me[Re];if(Le(K,qe.key))return qe.value}return z}case T:{var Yt=h(ye,I),Lt=d(Yt);if(he.mask&Lt){he=he.children[g(he.mask,Lt)],ye+=r;break}return z}case R:{if(he=he.children[h(ye,I)],he){ye+=r;break}return z}default:return z}};O.prototype.tryGetHash=function(z,I,K){return q(z,I,K,this)};var Q=n.tryGet=function(z,I,K){return q(z,K._config.hash(I),I,K)};O.prototype.tryGet=function(z,I){return Q(z,I,this)};var de=n.getHash=function(z,I,K){return q(void 0,z,I,K)};O.prototype.getHash=function(z,I){return de(z,I,this)},n.get=function(z,I){return q(void 0,I._config.hash(z),z,I)},O.prototype.get=function(z,I){return Q(I,z,this)};var le=n.has=function(z,I,K){return q(u,z,I,K)!==u};O.prototype.hasHash=function(z,I){return le(z,I,this)};var _e=n.has=function(z,I){return le(I._config.hash(z),z,I)};O.prototype.has=function(z){return _e(z,this)};var be=function(I,K){return I===K};n.make=function(z){return new O(0,0,{keyEq:z&&z.keyEq||be,hash:z&&z.hash||c},C,0)},n.empty=n.make();var J=n.isEmpty=function(z){return z&&!!D(z._root)};O.prototype.isEmpty=function(){return J(this)};var Pe=n.modifyHash=function(z,I,K,ce){var he={value:ce._size},ye=ce._root._modify(ce._editable?ce._edit:NaN,ce._config.keyEq,0,z,I,K,he);return ce.setTree(ye,he.value)};O.prototype.modifyHash=function(z,I,K){return Pe(K,z,I,this)};var rt=n.modify=function(z,I,K){return Pe(z,K._config.hash(I),I,K)};O.prototype.modify=function(z,I){return rt(I,z,this)};var ze=n.setHash=function(z,I,K,ce){return Pe(l(K),z,I,ce)};O.prototype.setHash=function(z,I,K){return ze(z,I,K,this)};var Ke=n.set=function(z,I,K){return ze(K._config.hash(z),z,I,K)};O.prototype.set=function(z,I){return Ke(z,I,this)};var gt=l(u),Kt=n.removeHash=function(z,I,K){return Pe(gt,z,I,K)};O.prototype.removeHash=O.prototype.deleteHash=function(z,I){return Kt(z,I,this)};var wt=n.remove=function(z,I){return Kt(I._config.hash(z),z,I)};O.prototype.remove=O.prototype.delete=function(z){return wt(z,this)};var xt=n.beginMutation=function(z){return new O(z._editable+1,z._edit+1,z._config,z._root,z._size)};O.prototype.beginMutation=function(){return xt(this)};var Z=n.endMutation=function(z){return z._editable=z._editable&&z._editable-1,z};O.prototype.endMutation=function(){return Z(this)};var re=n.mutate=function(z,I){var K=xt(I);return z(K),Z(K)};O.prototype.mutate=function(z){return re(z,this)};var fe=function(I){return I&&Te(I[0],I[1],I[2],I[3],I[4])},Te=function(I,K,ce,he,ye){for(;ce<I;){var Le=K[ce++];if(Le&&!D(Le))return Ne(Le,he,[I,K,ce,he,ye])}return fe(ye)},Ne=function(I,K,ce){switch(I.type){case y:return{value:K(I),rest:ce};case b:case R:case T:var he=I.children;return Te(he.length,he,0,K,ce);default:return fe(ce)}},Ye={done:!0};function Xe(z){this.v=z}Xe.prototype.next=function(){if(!this.v)return Ye;var z=this.v;return this.v=fe(z.rest),z},Xe.prototype[Symbol.iterator]=function(){return this};var et=function(I,K){return new Xe(Ne(I._root,K))},ut=function(I){return[I.key,I.value]},it=n.entries=function(z){return et(z,ut)};O.prototype.entries=O.prototype[Symbol.iterator]=function(){return it(this)};var ct=function(I){return I.key},It=n.keys=function(z){return et(z,ct)};O.prototype.keys=function(){return It(this)};var Vn=function(I){return I.value},un=n.values=O.prototype.values=function(z){return et(z,Vn)};O.prototype.values=function(){return un(this)};var Sn=n.fold=function(z,I,K){var ce=K._root;if(ce.type===y)return z(I,ce.value,ce.key);for(var he=[ce.children],ye=void 0;ye=he.pop();)for(var Le=0,Me=ye.length;Le<Me;){var Re=ye[Le++];Re&&Re.type&&(Re.type===y?I=z(I,Re.value,Re.key):he.push(Re.children))}return I};O.prototype.fold=function(z,I){return Sn(z,I,this)};var Zr=n.forEach=function(z,I){return Sn(function(K,ce,he){return z(ce,he,I)},null,I)};O.prototype.forEach=function(z){return Zr(z,this)};var Rr=n.count=function(z){return z._size};O.prototype.count=function(){return Rr(this)},Object.defineProperty(O.prototype,"size",{get:O.prototype.count}),t.exports?t.exports=n:(void 0).hamt=n});class P5{constructor(e){Ue(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,n){return this._map.set(e,n),this}delete(e){return this._map.delete(e),this}clone(){return F1(this)}toMap(){return new Map(this._map)}}class D1{constructor(e){if(Ue(this,"_hamt",T5.empty.beginMutation()),e instanceof D1){const n=e._hamt.endMutation();e._hamt=n.beginMutation(),this._hamt=n.beginMutation()}else if(e)for(const[n,r]of e.entries())this._hamt.set(n,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,n){return this._hamt.set(e,n),this}delete(e){return this._hamt.delete(e),this}clone(){return F1(this)}toMap(){return new Map(this._hamt)}}function F1(t){return Et("recoil_hamt_2020")?new D1(t):new P5(t)}var A5={persistentMap:F1},C5=A5.persistentMap,R5=Object.freeze({__proto__:null,persistentMap:C5});function L5(t,...e){const n=new Set;e:for(const r of t){for(const i of e)if(i.has(r))continue e;n.add(r)}return n}var hl=L5;function M5(t,e){const n=new Map;return t.forEach((r,i)=>{n.set(i,e(r,i))}),n}var md=M5;function O5(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function k5(t){return{nodeDeps:md(t.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:md(t.nodeToNodeSubscriptions,e=>new Set(e))}}function Bm(t,e,n,r){const{nodeDeps:i,nodeToNodeSubscriptions:o}=n,s=i.get(t);if(s&&r&&s!==r.nodeDeps.get(t))return;i.set(t,e);const a=s==null?e:hl(e,s);for(const u of a)o.has(u)||o.set(u,new Set),Ft(o.get(u)).add(t);if(s){const u=hl(s,e);for(const l of u){if(!o.has(l))return;const c=Ft(o.get(l));c.delete(t),c.size===0&&o.delete(l)}}}function I5(t,e,n,r){var i,o,s,a;const u=n.getState();r===u.currentTree.version||r===((i=u.nextTree)===null||i===void 0?void 0:i.version)||((o=u.previousTree)===null||o===void 0||o.version);const l=n.getGraph(r);if(Bm(t,e,l),r===((s=u.previousTree)===null||s===void 0?void 0:s.version)){const f=n.getGraph(u.currentTree.version);Bm(t,e,f,l)}if(r===((a=u.previousTree)===null||a===void 0?void 0:a.version)||r===u.currentTree.version){var c;const f=(c=u.nextTree)===null||c===void 0?void 0:c.version;if(f!==void 0){const h=n.getGraph(f);Bm(t,e,h,l)}}}var ac={cloneGraph:k5,graph:O5,saveDepsToStore:I5};let N5=0;const D5=()=>N5++;let F5=0;const U5=()=>F5++;let z5=0;const B5=()=>z5++;var Qp={getNextTreeStateVersion:D5,getNextStoreID:U5,getNextComponentID:B5};const{persistentMap:SS}=R5,{graph:V5}=ac,{getNextTreeStateVersion:DR}=Qp;function FR(){const t=DR();return{version:t,stateID:t,transactionMetadata:{},dirtyAtoms:new Set,atomValues:SS(),nonvalidatedAtoms:SS()}}function $5(){const t=FR();return{currentTree:t,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(t.version,V5()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var UR={makeEmptyTreeState:FR,makeEmptyStoreState:$5,getNextTreeStateVersion:DR};class zR{}function j5(){return new zR}var Jp={RetentionZone:zR,retentionZone:j5};function G5(t,e){const n=new Set(t);return n.add(e),n}function W5(t,e){const n=new Set(t);return n.delete(e),n}function H5(t,e,n){const r=new Map(t);return r.set(e,n),r}function Y5(t,e,n){const r=new Map(t);return r.set(e,n(r.get(e))),r}function X5(t,e){const n=new Map(t);return n.delete(e),n}function q5(t,e){const n=new Map(t);return e.forEach(r=>n.delete(r)),n}var BR={setByAddingToSet:G5,setByDeletingFromSet:W5,mapBySettingInMap:H5,mapByUpdatingInMap:Y5,mapByDeletingFromMap:X5,mapByDeletingMultipleFromMap:q5};function*Z5(t,e){let n=0;for(const r of t)e(r,n++)&&(yield r)}var U1=Z5;function K5(t,e){return new Proxy(t,{get:(r,i)=>(!(i in r)&&i in e&&(r[i]=e[i]()),r[i]),ownKeys:r=>Object.keys(r)})}var VR=K5;const{getNode:uc,getNodeMaybe:Q5,recoilValuesForKeys:xS}=Qn,{RetentionZone:TS}=Jp,{setByAddingToSet:J5}=BR,eU=Object.freeze(new Set);class tU extends Error{}function nU(t,e,n){if(!Et("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=t.getState().retention;function i(o){let s=r.get(o);s||r.set(o,s=new Set),s.add(e)}if(n instanceof TS)i(n);else if(Array.isArray(n))for(const o of n)i(o);return()=>{if(!Et("recoil_memory_managament_2020"))return;const{retention:o}=t.getState();function s(a){const u=o.nodesRetainedByZone.get(a);u==null||u.delete(e),u&&u.size===0&&o.nodesRetainedByZone.delete(a)}if(n instanceof TS)s(n);else if(Array.isArray(n))for(const a of n)s(a)}}function z1(t,e,n,r){const i=t.getState();if(i.nodeCleanupFunctions.has(n))return;const o=uc(n),s=nU(t,n,o.retainedBy),a=o.init(t,e,r);i.nodeCleanupFunctions.set(n,()=>{a(),s()})}function rU(t,e,n){z1(t,t.getState().currentTree,e,n)}function iU(t,e){var n;const r=t.getState();(n=r.nodeCleanupFunctions.get(e))===null||n===void 0||n(),r.nodeCleanupFunctions.delete(e)}function oU(t,e,n){return z1(t,e,n,"get"),uc(n).get(t,e)}function $R(t,e,n){return uc(n).peek(t,e)}function sU(t,e,n){var r;const i=Q5(e);return i==null||(r=i.invalidate)===null||r===void 0||r.call(i,t),{...t,atomValues:t.atomValues.clone().delete(e),nonvalidatedAtoms:t.nonvalidatedAtoms.clone().set(e,n),dirtyAtoms:J5(t.dirtyAtoms,e)}}function aU(t,e,n,r){const i=uc(n);if(i.set==null)throw new tU(`Attempt to set read-only RecoilValue: ${n}`);const o=i.set;return z1(t,e,n,"set"),o(t,e,r)}function uU(t,e,n){const r=t.getState(),i=t.getGraph(e.version),o=uc(n).nodeType;return VR({type:o},{loadable:()=>$R(t,e,n),isActive:()=>r.knownAtoms.has(n)||r.knownSelectors.has(n),isSet:()=>o==="selector"?!1:e.atomValues.has(n),isModified:()=>e.dirtyAtoms.has(n),deps:()=>{var s;return xS((s=i.nodeDeps.get(n))!==null&&s!==void 0?s:[])},subscribers:()=>{var s,a;return{nodes:xS(U1(jR(t,e,new Set([n])),u=>u!==n)),components:Kp((s=(a=r.nodeToComponentSubscriptions.get(n))===null||a===void 0?void 0:a.values())!==null&&s!==void 0?s:[],([u])=>({name:u}))}}})}function jR(t,e,n){const r=new Set,i=Array.from(n),o=t.getGraph(e.version);for(let a=i.pop();a;a=i.pop()){var s;r.add(a);const u=(s=o.nodeToNodeSubscriptions.get(a))!==null&&s!==void 0?s:eU;for(const l of u)r.has(l)||i.push(l)}return r}var Oo={getNodeLoadable:oU,peekNodeLoadable:$R,setNodeValue:aU,initializeNode:rU,cleanUpNode:iU,setUnvalidatedAtomValue_DEPRECATED:sU,peekNodeInfo:uU,getDownstreamNodes:jR};let GR=null;function lU(t){GR=t}function cU(){var t;(t=GR)===null||t===void 0||t()}var WR={setInvalidateMemoizedSnapshot:lU,invalidateMemoizedSnapshot:cU};const{getDownstreamNodes:fU,getNodeLoadable:HR,setNodeValue:hU}=Oo,{getNextComponentID:dU}=Qp,{getNode:pU,getNodeMaybe:YR}=Qn,{DefaultValue:B1}=Qn,{reactMode:gU}=sc,{AbstractRecoilValue:mU,RecoilState:vU,RecoilValueReadOnly:yU,isRecoilValue:_U}=Ba,{invalidateMemoizedSnapshot:bU}=WR;function wU(t,{key:e},n=t.getState().currentTree){var r,i;const o=t.getState();n.version===o.currentTree.version||n.version===((r=o.nextTree)===null||r===void 0?void 0:r.version)||(n.version,(i=o.previousTree)===null||i===void 0||i.version);const s=HR(t,n,e);return s.state==="loading"&&s.contents.catch(()=>{}),s}function EU(t,e){const n=t.clone();return e.forEach((r,i)=>{r.state==="hasValue"&&r.contents instanceof B1?n.delete(i):n.set(i,r)}),n}function SU(t,e,{key:n},r){if(typeof r=="function"){const i=HR(t,e,n);if(i.state==="loading"){const o=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw Be(o)}else if(i.state==="hasError")throw i.contents;return r(i.contents)}else return r}function xU(t,e,n){if(n.type==="set"){const{recoilValue:i,valueOrUpdater:o}=n,s=SU(t,e,i,o),a=hU(t,e,i.key,s);for(const[u,l]of a.entries())Pv(e,u,l)}else if(n.type==="setLoadable"){const{recoilValue:{key:i},loadable:o}=n;Pv(e,i,o)}else if(n.type==="markModified"){const{recoilValue:{key:i}}=n;e.dirtyAtoms.add(i)}else if(n.type==="setUnvalidated"){var r;const{recoilValue:{key:i},unvalidatedValue:o}=n,s=YR(i);s==null||(r=s.invalidate)===null||r===void 0||r.call(s,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,o),e.dirtyAtoms.add(i)}else k1(`Unknown action ${n.type}`)}function Pv(t,e,n){n.state==="hasValue"&&n.contents instanceof B1?t.atomValues.delete(e):t.atomValues.set(e,n),t.dirtyAtoms.add(e),t.nonvalidatedAtoms.delete(e)}function XR(t,e){t.replaceState(n=>{const r=qR(n);for(const i of e)xU(t,r,i);return ZR(t,r),bU(),r})}function eg(t,e){if(dl.length){const n=dl[dl.length-1];let r=n.get(t);r||n.set(t,r=[]),r.push(e)}else XR(t,[e])}const dl=[];function TU(){const t=new Map;return dl.push(t),()=>{for(const[e,n]of t)XR(e,n);dl.pop()}}function qR(t){return{...t,atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(t.dirtyAtoms)}}function ZR(t,e){const n=fU(t,e,e.dirtyAtoms);for(const o of n){var r,i;(r=YR(o))===null||r===void 0||(i=r.invalidate)===null||i===void 0||i.call(r,e)}}function KR(t,e,n){eg(t,{type:"set",recoilValue:e,valueOrUpdater:n})}function PU(t,e,n){if(n instanceof B1)return KR(t,e,n);eg(t,{type:"setLoadable",recoilValue:e,loadable:n})}function AU(t,e){eg(t,{type:"markModified",recoilValue:e})}function CU(t,e,n){eg(t,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:n})}function RU(t,{key:e},n,r=null){const i=dU(),o=t.getState();o.nodeToComponentSubscriptions.has(e)||o.nodeToComponentSubscriptions.set(e,new Map),Ft(o.nodeToComponentSubscriptions.get(e)).set(i,[r!=null?r:"<not captured>",n]);const s=gU();if(s.early&&(s.mode==="LEGACY"||s.mode==="MUTABLE_SOURCE")){const a=t.getState().nextTree;a&&a.dirtyAtoms.has(e)&&n(a)}return{release:()=>{const a=t.getState(),u=a.nodeToComponentSubscriptions.get(e);u===void 0||!u.has(i)||(u.delete(i),u.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function LU(t,e){var n;const{currentTree:r}=t.getState(),i=pU(e.key);(n=i.clearCache)===null||n===void 0||n.call(i,t,r)}var vi={RecoilValueReadOnly:yU,AbstractRecoilValue:mU,RecoilState:vU,getRecoilValueAsLoadable:wU,setRecoilValue:KR,setRecoilValueLoadable:PU,markRecoilValueModified:AU,setUnvalidatedRecoilValue:CU,subscribeToRecoilValue:RU,isRecoilValue:_U,applyAtomValueWrites:EU,batchStart:TU,writeLoadableToTreeState:Pv,invalidateDownstreams:ZR,copyTreeState:qR,refreshRecoilValue:LU};function MU(t,e,n){const r=t.entries();let i=r.next();for(;!i.done;){const o=i.value;if(e.call(n,o[1],o[0],t))return!0;i=r.next()}return!1}var OU=MU;const{cleanUpNode:kU}=Oo,{deleteNodeConfigIfPossible:IU,getNode:QR}=Qn,{RetentionZone:JR}=Jp,NU=12e4,eL=new Set;function tL(t,e){const n=t.getState(),r=n.currentTree;if(n.nextTree)return;const i=new Set;for(const s of e)if(s instanceof JR)for(const a of zU(n,s))i.add(a);else i.add(s);const o=DU(t,i);for(const s of o)UU(t,r,s)}function DU(t,e){const n=t.getState(),r=n.currentTree,i=t.getGraph(r.version),o=new Set,s=new Set;return a(e),o;function a(u){const l=new Set,c=FU(t,r,u,o,s);for(const g of c){var f;if(QR(g).retainedBy==="recoilRoot"){s.add(g);continue}if(((f=n.retention.referenceCounts.get(g))!==null&&f!==void 0?f:0)>0){s.add(g);continue}if(nL(g).some(x=>n.retention.referenceCounts.get(x))){s.add(g);continue}const m=i.nodeToNodeSubscriptions.get(g);if(m&&OU(m,x=>s.has(x))){s.add(g);continue}o.add(g),l.add(g)}const h=new Set;for(const g of l)for(const m of(d=i.nodeDeps.get(g))!==null&&d!==void 0?d:eL){var d;o.has(m)||h.add(m)}h.size&&a(h)}}function FU(t,e,n,r,i){const o=t.getGraph(e.version),s=[],a=new Set;for(;n.size>0;)u(Ft(n.values().next().value));return s;function u(l){if(r.has(l)||i.has(l)){n.delete(l);return}if(a.has(l))return;const c=o.nodeToNodeSubscriptions.get(l);if(c)for(const f of c)u(f);a.add(l),n.delete(l),s.push(l)}}function UU(t,e,n){if(!Et("recoil_memory_managament_2020"))return;kU(t,n);const r=t.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const i=nL(n);for(const u of i){var o;(o=r.retention.nodesRetainedByZone.get(u))===null||o===void 0||o.delete(n)}e.atomValues.delete(n),e.dirtyAtoms.delete(n),e.nonvalidatedAtoms.delete(n);const s=r.graphsByVersion.get(e.version);if(s){const u=s.nodeDeps.get(n);if(u!==void 0){s.nodeDeps.delete(n);for(const l of u){var a;(a=s.nodeToNodeSubscriptions.get(l))===null||a===void 0||a.delete(n)}}s.nodeToNodeSubscriptions.delete(n)}IU(n)}function zU(t,e){var n;return(n=t.retention.nodesRetainedByZone.get(e))!==null&&n!==void 0?n:eL}function nL(t){const e=QR(t).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof JR?[e]:e}function BU(t,e){const n=t.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(e):tL(t,new Set([e]))}function VU(t,e,n){var r;if(!Et("recoil_memory_managament_2020"))return;const i=t.getState().retention.referenceCounts,o=((r=i.get(e))!==null&&r!==void 0?r:0)+n;o===0?rL(t,e):i.set(e,o)}function rL(t,e){if(!Et("recoil_memory_managament_2020"))return;t.getState().retention.referenceCounts.delete(e),BU(t,e)}function $U(t){if(!Et("recoil_memory_managament_2020"))return;const e=t.getState();tL(t,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function jU(t){return t===void 0?"recoilRoot":t}var Ps={SUSPENSE_TIMEOUT_MS:NU,updateRetainCount:VU,updateRetainCountToZero:rL,releaseScheduledRetainablesNow:$U,retainedByOptionWithDefault:jU};const{unstable_batchedUpdates:GU}=b4;var WU={unstable_batchedUpdates:GU};const{unstable_batchedUpdates:HU}=WU;var YU={unstable_batchedUpdates:HU};const{batchStart:XU}=vi,{unstable_batchedUpdates:qU}=YU;let V1=qU;const ZU=t=>{V1=t},KU=()=>V1,QU=t=>{V1(()=>{let e=()=>{};try{e=XU(),t()}finally{e()}})};var tg={getBatcher:KU,setBatcher:ZU,batchUpdates:QU};function*JU(t){for(const e of t)for(const n of e)yield n}var iL=JU;const oL=typeof Window>"u"||typeof window>"u",ez=t=>!oL&&(t===window||t instanceof Window),tz=typeof navigator<"u"&&navigator.product==="ReactNative";var $1={isSSR:oL,isReactNative:tz,isWindow:ez};function nz(t,e){let n;return(...i)=>{n||(n={});const o=e(...i);return Object.hasOwnProperty.call(n,o)||(n[o]=t(...i)),n[o]}}function rz(t,e){let n,r;return(...o)=>{const s=e(...o);return n===s||(n=s,r=t(...o)),r}}function iz(t,e){let n,r;return[(...s)=>{const a=e(...s);return n===a||(n=a,r=t(...s)),r},()=>{n=null}]}var oz={memoizeWithArgsHash:nz,memoizeOneWithArgsHash:rz,memoizeOneWithArgsHashAndInvalidation:iz};const{batchUpdates:Av}=tg,{initializeNode:sz,peekNodeInfo:az}=Oo,{graph:uz}=ac,{getNextStoreID:lz}=Qp,{DEFAULT_VALUE:cz,recoilValues:PS,recoilValuesForKeys:AS}=Qn,{AbstractRecoilValue:fz,getRecoilValueAsLoadable:hz,setRecoilValue:CS,setUnvalidatedRecoilValue:dz}=vi,{updateRetainCount:Wf}=Ps,{setInvalidateMemoizedSnapshot:pz}=WR,{getNextTreeStateVersion:gz,makeEmptyStoreState:mz}=UR,{isSSR:vz}=$1,{memoizeOneWithArgsHashAndInvalidation:yz}=oz;class ng{constructor(e,n){Ue(this,"_store",void 0),Ue(this,"_refCount",1),Ue(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),hz(this._store,r))),Ue(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),Ue(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const s=this._store.getState().currentTree;return AS(s.dirtyAtoms)}const i=this._store.getState().knownAtoms,o=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?PS.values():r.isInitialized===!0?AS(iL([i,o])):U1(PS.values(),({key:s})=>!i.has(s)&&!o.has(s))}),Ue(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),az(this._store,this._store.getState().currentTree,r))),Ue(this,"map",r=>{this.checkRefCount_INTERNAL();const i=new Cv(this,Av);return r(i),i}),Ue(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const i=new Cv(this,Av);return i.retain(),await r(i),i.autoRelease_INTERNAL(),i}),this._store={storeID:lz(),parentStoreID:n,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const i=e.graphsByVersion;if(i.has(r))return Ft(i.get(r));const o=uz();return i.set(r,o),o},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Be("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)sz(this._store,r,"get"),Wf(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){vz||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!Et("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){Et("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function sL(t,e,n=!1){const r=t.getState(),i=n?gz():e.version;return{currentTree:{version:n?i:e.version,stateID:n?i:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,t.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(Kp(r.nodeCleanupFunctions.entries(),([o])=>[o,()=>{}]))}}function _z(t){const e=new ng(mz());return t!=null?e.map(t):e}const[RS,aL]=yz((t,e)=>{var n;const r=t.getState(),i=e==="latest"?(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree:Ft(r.previousTree);return new ng(sL(t,i),t.storeID)},(t,e)=>{var n,r;return String(e)+String(t.storeID)+String((n=t.getState().nextTree)===null||n===void 0?void 0:n.version)+String(t.getState().currentTree.version)+String((r=t.getState().previousTree)===null||r===void 0?void 0:r.version)});pz(aL);function bz(t,e="latest"){const n=RS(t,e);return n.isRetained()?n:(aL(),RS(t,e))}class Cv extends ng{constructor(e,n){super(sL(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),Ue(this,"_batch",void 0),Ue(this,"set",(r,i)=>{this.checkRefCount_INTERNAL();const o=this.getStore_INTERNAL();this._batch(()=>{Wf(o,r.key,1),CS(this.getStore_INTERNAL(),r,i)})}),Ue(this,"reset",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();this._batch(()=>{Wf(i,r.key,1),CS(this.getStore_INTERNAL(),r,cz)})}),Ue(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();Av(()=>{for(const[o,s]of r.entries())Wf(i,o,1),dz(i,new fz(o),s)})}),this._batch=n}}var rg={Snapshot:ng,MutableSnapshot:Cv,freshSnapshot:_z,cloneSnapshot:bz},wz=rg.Snapshot,Ez=rg.MutableSnapshot,Sz=rg.freshSnapshot,xz=rg.cloneSnapshot,ig=Object.freeze({__proto__:null,Snapshot:wz,MutableSnapshot:Ez,freshSnapshot:Sz,cloneSnapshot:xz});function Tz(...t){const e=new Set;for(const n of t)for(const r of n)e.add(r);return e}var Pz=Tz;const{useRef:Az}=Rt;function Cz(t){const e=Az(t);return e.current===t&&typeof t=="function"&&(e.current=t()),e}var LS=Cz;const{getNextTreeStateVersion:Rz,makeEmptyStoreState:uL}=UR,{cleanUpNode:Lz,getDownstreamNodes:Mz,initializeNode:Oz,setNodeValue:kz,setUnvalidatedAtomValue_DEPRECATED:Iz}=Oo,{graph:Nz}=ac,{cloneGraph:Dz}=ac,{getNextStoreID:lL}=Qp,{createMutableSource:Vm,reactMode:cL}=sc,{applyAtomValueWrites:Fz}=vi,{releaseScheduledRetainablesNow:fL}=Ps,{freshSnapshot:Uz}=ig,{useCallback:zz,useContext:hL,useEffect:Rv,useMemo:Bz,useRef:Vz,useState:$z}=Rt;function ku(){throw Be("This component must be used inside a <RecoilRoot> component.")}const dL=Object.freeze({storeID:lL(),getState:ku,replaceState:ku,getGraph:ku,subscribeToTransactions:ku,addTransactionMetadata:ku});let Lv=!1;function MS(t){if(Lv)throw Be("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=t.getState();if(e.nextTree===null){Et("recoil_memory_managament_2020")&&Et("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&fL(t);const n=e.currentTree.version,r=Rz();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,Dz(Ft(e.graphsByVersion.get(n))))}}const pL=Rt.createContext({current:dL}),og=()=>hL(pL),gL=Rt.createContext(null);function jz(){return hL(gL)}function j1(t,e,n){const r=Mz(t,n,n.dirtyAtoms);for(const i of r){const o=e.nodeToComponentSubscriptions.get(i);if(o)for(const[s,[a,u]]of o)u(n)}}function mL(t){const e=t.getState(),n=e.currentTree,r=n.dirtyAtoms;if(r.size){for(const[i,o]of e.nodeTransactionSubscriptions)if(r.has(i))for(const[s,a]of o)a(t);for(const[i,o]of e.transactionSubscriptions)o(t);(!cL().early||e.suspendedComponentResolvers.size>0)&&(j1(t,e,n),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(n)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function Gz(t){const e=t.getState();e.commitDepth++;try{const{nextTree:n}=e;if(n==null)return;e.previousTree=e.currentTree,e.currentTree=n,e.nextTree=null,mL(t),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):k1("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,Et("recoil_memory_managament_2020")&&n==null&&fL(t)}finally{e.commitDepth--}}function Wz({setNotifyBatcherOfChange:t}){const e=og(),[,n]=$z([]);return t(()=>n({})),Rv(()=>(t(()=>n({})),()=>{t(()=>{})}),[t]),Rv(()=>{S5.enqueueExecution("Batcher",()=>{Gz(e.current)})}),null}function Hz(t,e){const n=uL();return e({set:(r,i)=>{const o=n.currentTree,s=kz(t,o,r.key,i),a=new Set(s.keys()),u=o.nonvalidatedAtoms.clone();for(const l of a)u.delete(l);n.currentTree={...o,dirtyAtoms:Pz(o.dirtyAtoms,a),atomValues:Fz(o.atomValues,s),nonvalidatedAtoms:u}},setUnvalidatedAtomValues:r=>{r.forEach((i,o)=>{n.currentTree=Iz(n.currentTree,o,i)})}}),n}function Yz(t){const e=Uz(t),n=e.getStore_INTERNAL().getState();return e.retain(),n.nodeCleanupFunctions.forEach(r=>r()),n.nodeCleanupFunctions.clear(),n}let OS=0;function Xz({initializeState_DEPRECATED:t,initializeState:e,store_INTERNAL:n,children:r}){let i;const o=d=>{const g=i.current.graphsByVersion;if(g.has(d))return Ft(g.get(d));const m=Nz();return g.set(d,m),m},s=(d,g)=>{if(g==null){const{transactionSubscriptions:m}=f.current.getState(),x=OS++;return m.set(x,d),{release:()=>{m.delete(x)}}}else{const{nodeTransactionSubscriptions:m}=f.current.getState();m.has(g)||m.set(g,new Map);const x=OS++;return Ft(m.get(g)).set(x,d),{release:()=>{const _=m.get(g);_&&(_.delete(x),_.size===0&&m.delete(g))}}}},a=d=>{MS(f.current);for(const g of Object.keys(d))Ft(f.current.getState().nextTree).transactionMetadata[g]=d[g]},u=d=>{MS(f.current);const g=Ft(i.current.nextTree);let m;try{Lv=!0,m=d(g)}finally{Lv=!1}m!==g&&(i.current.nextTree=m,cL().early&&j1(f.current,i.current,m),Ft(l.current)())},l=Vz(null),c=zz(d=>{l.current=d},[l]),f=LS(()=>n!=null?n:{storeID:lL(),getState:()=>i.current,replaceState:u,getGraph:o,subscribeToTransactions:s,addTransactionMetadata:a});n!=null&&(f.current=n),i=LS(()=>t!=null?Hz(f.current,t):e!=null?Yz(e):uL());const h=Bz(()=>Vm==null?void 0:Vm(i,()=>i.current.currentTree.version),[i]);return Rv(()=>{const d=f.current;for(const g of new Set(d.getState().knownAtoms))Oz(d,g,"get");return()=>{for(const g of d.getState().knownAtoms)Lz(d,g)}},[f]),ke(pL.Provider,{value:f,children:ps(gL.Provider,{value:h,children:[ke(Wz,{setNotifyBatcherOfChange:c}),r]})})}function qz(t){const{override:e,...n}=t,r=og();return e===!1&&r.current!==dL?t.children:ke(Xz,{...n})}function Zz(){return og().current.storeID}var Gi={RecoilRoot:qz,useStoreRef:og,useRecoilMutableSource:jz,useRecoilStoreID:Zz,notifyComponents_FOR_TESTING:j1,sendEndOfBatchNotifications_FOR_TESTING:mL};function Kz(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}var Qz=Kz;const{useEffect:Jz,useRef:eB}=Rt;function tB(t){const e=eB();return Jz(()=>{e.current=t}),e.current}var vL=tB;const{useStoreRef:nB}=Gi,{SUSPENSE_TIMEOUT_MS:rB}=Ps,{updateRetainCount:Iu}=Ps,{RetentionZone:iB}=Jp,{useEffect:oB,useRef:sB}=Rt,{isSSR:kS}=$1;function aB(t){if(!!Et("recoil_memory_managament_2020"))return uB(t)}function uB(t){const n=(Array.isArray(t)?t:[t]).map(s=>s instanceof iB?s:s.key),r=nB();oB(()=>{if(!Et("recoil_memory_managament_2020"))return;const s=r.current;if(i.current&&!kS)window.clearTimeout(i.current),i.current=null;else for(const a of n)Iu(s,a,1);return()=>{for(const a of n)Iu(s,a,-1)}},[r,...n]);const i=sB(),o=vL(n);if(!kS&&(o===void 0||!Qz(o,n))){const s=r.current;for(const a of n)Iu(s,a,1);if(o)for(const a of o)Iu(s,a,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(const a of n)Iu(s,a,-1)},rB)}}var G1=aB;function lB(){return"<component name not available>"}var lc=lB;const{batchUpdates:cB}=tg,{DEFAULT_VALUE:yL}=Qn,{currentRendererSupportsUseSyncExternalStore:fB,reactMode:uu,useMutableSource:hB,useSyncExternalStore:dB}=sc,{useRecoilMutableSource:pB,useStoreRef:yi}=Gi,{AbstractRecoilValue:Mv,getRecoilValueAsLoadable:cc,setRecoilValue:vd,setUnvalidatedRecoilValue:gB,subscribeToRecoilValue:Va}=vi,{useCallback:Kn,useEffect:$a,useMemo:_L,useRef:pl,useState:W1}=Rt,{setByAddingToSet:mB}=BR;function H1(t,e,n){if(t.state==="hasValue")return t.contents;throw t.state==="loading"?new Promise(i=>{n.current.getState().suspendedComponentResolvers.add(i)}):t.state==="hasError"?t.contents:Be(`Invalid value of loadable atom "${e.key}"`)}function vB(){const t=lc(),e=yi(),[,n]=W1([]),r=pl(new Set);r.current=new Set;const i=pl(new Set),o=pl(new Map),s=Kn(u=>{const l=o.current.get(u);l&&(l.release(),o.current.delete(u))},[o]),a=Kn((u,l)=>{o.current.has(l)&&n([])},[]);return $a(()=>{const u=e.current;hl(r.current,i.current).forEach(l=>{if(o.current.has(l))return;const c=Va(u,new Mv(l),h=>a(h,l),t);o.current.set(l,c),u.getState().nextTree?u.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(u.getState(),l)}):a(u.getState(),l)}),hl(i.current,r.current).forEach(l=>{s(l)}),i.current=r.current}),$a(()=>{const u=o.current;return hl(r.current,new Set(u.keys())).forEach(l=>{const c=Va(e.current,new Mv(l),f=>a(f,l),t);u.set(l,c)}),()=>u.forEach((l,c)=>s(c))},[t,e,s,a]),_L(()=>{function u(g){return m=>{vd(e.current,g,m)}}function l(g){return()=>vd(e.current,g,yL)}function c(g){var m;r.current.has(g.key)||(r.current=mB(r.current,g.key));const x=e.current.getState();return cc(e.current,g,uu().early&&(m=x.nextTree)!==null&&m!==void 0?m:x.currentTree)}function f(g){const m=c(g);return H1(m,g,e)}function h(g){return[f(g),u(g)]}function d(g){return[c(g),u(g)]}return{getRecoilValue:f,getRecoilValueLoadable:c,getRecoilState:h,getRecoilStateLoadable:d,getSetRecoilState:u,getResetRecoilState:l}},[r,e])}const yB={current:0};function _B(t){const e=yi(),n=lc(),r=Kn(()=>{var a;const u=e.current,l=u.getState(),c=uu().early&&(a=l.nextTree)!==null&&a!==void 0?a:l.currentTree;return{loadable:cc(u,t,c),key:t.key}},[e,t]),i=Kn(a=>{let u;return()=>{var l,c;const f=a();return(l=u)!==null&&l!==void 0&&l.loadable.is(f.loadable)&&((c=u)===null||c===void 0?void 0:c.key)===f.key?u:(u=f,f)}},[]),o=_L(()=>i(r),[r,i]),s=Kn(a=>{const u=e.current;return Va(u,t,a,n).release},[e,t,n]);return dB(s,o,o).loadable}function bB(t){const e=yi(),n=Kn(()=>{var l;const c=e.current,f=c.getState(),h=uu().early&&(l=f.nextTree)!==null&&l!==void 0?l:f.currentTree;return cc(c,t,h)},[e,t]),r=Kn(()=>n(),[n]),i=lc(),o=Kn((l,c)=>{const f=e.current;return Va(f,t,()=>{if(!Et("recoil_suppress_rerender_in_callback"))return c();const d=n();u.current.is(d)||c(),u.current=d},i).release},[e,t,i,n]),s=pB();if(s==null)throw Be("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=hB(s,r,o),u=pl(a);return $a(()=>{u.current=a}),a}function Ov(t){const e=yi(),n=lc(),r=Kn(()=>{var u;const l=e.current,c=l.getState(),f=uu().early&&(u=c.nextTree)!==null&&u!==void 0?u:c.currentTree;return cc(l,t,f)},[e,t]),i=Kn(()=>({loadable:r(),key:t.key}),[r,t.key]),o=Kn(u=>{const l=i();return u.loadable.is(l.loadable)&&u.key===l.key?u:l},[i]);$a(()=>{const u=Va(e.current,t,l=>{a(o)},n);return a(o),u.release},[n,t,e,o]);const[s,a]=W1(i);return s.key!==t.key?i().loadable:s.loadable}function wB(t){const e=yi(),[,n]=W1([]),r=lc(),i=Kn(()=>{var a;const u=e.current,l=u.getState(),c=uu().early&&(a=l.nextTree)!==null&&a!==void 0?a:l.currentTree;return cc(u,t,c)},[e,t]),o=i(),s=pl(o);return $a(()=>{s.current=o}),$a(()=>{const a=e.current,u=a.getState(),l=Va(a,t,f=>{var h;if(!Et("recoil_suppress_rerender_in_callback"))return n([]);const d=i();(h=s.current)!==null&&h!==void 0&&h.is(d)||n(d),s.current=d},r);if(u.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{s.current=null,n([])});else{var c;if(!Et("recoil_suppress_rerender_in_callback"))return n([]);const f=i();(c=s.current)!==null&&c!==void 0&&c.is(f)||n(f),s.current=f}return l.release},[r,i,t,e]),o}function Y1(t){return Et("recoil_memory_managament_2020")&&G1(t),{TRANSITION_SUPPORT:Ov,SYNC_EXTERNAL_STORE:fB()?_B:Ov,MUTABLE_SOURCE:bB,LEGACY:wB}[uu().mode](t)}function bL(t){const e=yi(),n=Y1(t);return H1(n,t,e)}function sg(t){const e=yi();return Kn(n=>{vd(e.current,t,n)},[e,t])}function EB(t){const e=yi();return Kn(()=>{vd(e.current,t,yL)},[e,t])}function SB(t){return[bL(t),sg(t)]}function xB(t){return[Y1(t),sg(t)]}function TB(){const t=yi();return(e,n={})=>{cB(()=>{t.current.addTransactionMetadata(n),e.forEach((r,i)=>gB(t.current,new Mv(i),r))})}}function wL(t){return Et("recoil_memory_managament_2020")&&G1(t),Ov(t)}function EL(t){const e=yi(),n=wL(t);return H1(n,t,e)}function PB(t){return[EL(t),sg(t)]}var AB={recoilComponentGetRecoilValueCount_FOR_TESTING:yB,useRecoilInterface:vB,useRecoilState:SB,useRecoilStateLoadable:xB,useRecoilValue:bL,useRecoilValueLoadable:Y1,useResetRecoilState:EB,useSetRecoilState:sg,useSetUnvalidatedAtomValues:TB,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:wL,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:EL,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:PB};function CB(t,e){const n=new Map;for(const[r,i]of t)e(i,r)&&n.set(r,i);return n}var RB=CB;function LB(t,e){const n=new Set;for(const r of t)e(r)&&n.add(r);return n}var MB=LB;function OB(...t){const e=new Map;for(let n=0;n<t.length;n++){const r=t[n].keys();let i;for(;!(i=r.next()).done;)e.set(i.value,t[n].get(i.value))}return e}var kB=OB;const{batchUpdates:IB}=tg,{DEFAULT_VALUE:NB,getNode:SL,nodes:DB}=Qn,{useStoreRef:X1}=Gi,{AbstractRecoilValue:FB,setRecoilValueLoadable:UB}=vi,{SUSPENSE_TIMEOUT_MS:zB}=Ps,{cloneSnapshot:yd}=ig,{useCallback:ag,useEffect:xL,useRef:IS,useState:BB}=Rt,{isSSR:NS}=$1;function ug(t){const e=X1();xL(()=>e.current.subscribeToTransactions(t).release,[t,e])}function DS(t){const e=t.atomValues.toMap(),n=md(RB(e,(r,i)=>{const s=SL(i).persistence_UNSTABLE;return s!=null&&s.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return kB(t.nonvalidatedAtoms.toMap(),n)}function VB(t){ug(ag(e=>{let n=e.getState().previousTree;const r=e.getState().currentTree;n||(n=e.getState().currentTree);const i=DS(r),o=DS(n),s=md(DB,u=>{var l,c,f,h;return{persistence_UNSTABLE:{type:(l=(c=u.persistence_UNSTABLE)===null||c===void 0?void 0:c.type)!==null&&l!==void 0?l:"none",backButton:(f=(h=u.persistence_UNSTABLE)===null||h===void 0?void 0:h.backButton)!==null&&f!==void 0?f:!1}}}),a=MB(r.dirtyAtoms,u=>i.has(u)||o.has(u));t({atomValues:i,previousAtomValues:o,atomInfo:s,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[t]))}function $B(t){ug(ag(e=>{const n=yd(e,"latest"),r=yd(e,"previous");t({snapshot:n,previousSnapshot:r})},[t]))}function jB(){const t=X1(),[e,n]=BB(()=>yd(t.current)),r=vL(e),i=IS(),o=IS();if(ug(ag(a=>n(yd(a)),[])),xL(()=>{const a=e.retain();if(i.current&&!NS){var u;window.clearTimeout(i.current),i.current=null,(u=o.current)===null||u===void 0||u.call(o),o.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!NS){if(i.current){var s;window.clearTimeout(i.current),i.current=null,(s=o.current)===null||s===void 0||s.call(o),o.current=null}o.current=e.retain(),i.current=window.setTimeout(()=>{var a;i.current=null,(a=o.current)===null||a===void 0||a.call(o),o.current=null},zB)}return e}function TL(t,e){var n;const r=t.getState(),i=(n=r.nextTree)!==null&&n!==void 0?n:r.currentTree,o=e.getStore_INTERNAL().getState().currentTree;IB(()=>{const s=new Set;for(const l of[i.atomValues.keys(),o.atomValues.keys()])for(const c of l){var a,u;((a=i.atomValues.get(c))===null||a===void 0?void 0:a.contents)!==((u=o.atomValues.get(c))===null||u===void 0?void 0:u.contents)&&SL(c).shouldRestoreFromSnapshots&&s.add(c)}s.forEach(l=>{UB(t,new FB(l),o.atomValues.has(l)?Ft(o.atomValues.get(l)):NB)}),t.replaceState(l=>({...l,stateID:e.getID()}))})}function GB(){const t=X1();return ag(e=>TL(t.current,e),[t])}var PL={useRecoilSnapshot:jB,gotoSnapshot:TL,useGotoRecoilSnapshot:GB,useRecoilTransactionObserver:$B,useTransactionObservation_DEPRECATED:VB,useTransactionSubscription_DEPRECATED:ug};const{peekNodeInfo:WB}=Oo,{useStoreRef:HB}=Gi;function YB(){const t=HB();return({key:e})=>WB(t.current,t.current.getState().currentTree,e)}var XB=YB;const{reactMode:qB}=sc,{RecoilRoot:ZB,useStoreRef:KB}=Gi,{useMemo:QB}=Rt;function JB(){qB().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const t=KB().current;return QB(()=>{function e({children:n}){return ke(ZB,{store_INTERNAL:t,children:n})}return e},[t])}var eV=JB;const{loadableWithValue:tV}=oc,{initializeNode:nV}=Oo,{DEFAULT_VALUE:rV,getNode:iV}=Qn,{copyTreeState:oV,getRecoilValueAsLoadable:sV,invalidateDownstreams:aV,writeLoadableToTreeState:uV}=vi;function FS(t){return iV(t.key).nodeType==="atom"}class lV{constructor(e,n){Ue(this,"_store",void 0),Ue(this,"_treeState",void 0),Ue(this,"_changes",void 0),Ue(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!FS(r))throw Be("Reading selectors within atomicUpdate is not supported");const i=sV(this._store,r,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:Be(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),Ue(this,"set",(r,i)=>{if(!FS(r))throw Be("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){const o=this.get(r);this._changes.set(r.key,i(o))}else nV(this._store,r.key,"set"),this._changes.set(r.key,i)}),Ue(this,"reset",r=>{this.set(r,rV)}),this._store=e,this._treeState=n,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=oV(this._treeState);for(const[n,r]of this._changes)uV(e,n,tV(r));return aV(this._store,e),e}}function cV(t){return e=>{t.replaceState(n=>{const r=new lV(t,n);return e(r),r.newTreeState_INTERNAL()})}}var fV={atomicUpdater:cV},hV=fV.atomicUpdater,AL=Object.freeze({__proto__:null,atomicUpdater:hV});function dV(t,e){if(!t)throw new Error(e)}var pV=dV,Qu=pV;const{atomicUpdater:gV}=AL,{batchUpdates:mV}=tg,{DEFAULT_VALUE:vV}=Qn,{useStoreRef:yV}=Gi,{refreshRecoilValue:_V,setRecoilValue:US}=vi,{cloneSnapshot:bV}=ig,{gotoSnapshot:wV}=PL,{useCallback:EV}=Rt;class CL{}const SV=new CL;function RL(t,e,n,r){let i=SV,o;if(mV(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw Be(a);const u=VR({...r!=null?r:{},set:(c,f)=>US(t,c,f),reset:c=>US(t,c,vV),refresh:c=>_V(t,c),gotoSnapshot:c=>wV(t,c),transact_UNSTABLE:c=>gV(t)(c)},{snapshot:()=>{const c=bV(t);return o=c.retain(),c}}),l=e(u);if(typeof l!="function")throw Be(a);i=l(...n)}),i instanceof CL&&Qu(!1),Dt(i))i.finally(()=>{var a;(a=o)===null||a===void 0||a()});else{var s;(s=o)===null||s===void 0||s()}return i}function xV(t,e){const n=yV();return EV((...r)=>RL(n.current,t,r),e!=null?[...e,n]:void 0)}var LL={recoilCallback:RL,useRecoilCallback:xV};const{useStoreRef:TV}=Gi,{refreshRecoilValue:PV}=vi,{useCallback:AV}=Rt;function CV(t){const e=TV();return AV(()=>{const n=e.current;PV(n,t)},[t,e])}var RV=CV;const{atomicUpdater:LV}=AL,{useStoreRef:MV}=Gi,{useMemo:OV}=Rt;function kV(t,e){const n=MV();return OV(()=>(...r)=>{LV(n.current)(o=>{t(o)(...r)})},e!=null?[...e,n]:void 0)}var IV=kV;class NV{constructor(e){Ue(this,"value",void 0),this.value=e}}var DV={WrappedValue:NV},FV=DV.WrappedValue,ML=Object.freeze({__proto__:null,WrappedValue:FV});const{isFastRefreshEnabled:UV}=sc;class zS extends Error{}class zV{constructor(e){var n,r,i;Ue(this,"_name",void 0),Ue(this,"_numLeafs",void 0),Ue(this,"_root",void 0),Ue(this,"_onHit",void 0),Ue(this,"_onSet",void 0),Ue(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(n=e==null?void 0:e.onHit)!==null&&n!==void 0?n:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:o=>o}size(){return this._numLeafs}root(){return this._root}get(e,n){var r;return(r=this.getLeafNode(e,n))===null||r===void 0?void 0:r.value}getLeafNode(e,n){if(this._root==null)return;let r=this._root;for(;r;){if(n==null||n.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const i=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(i)}}set(e,n,r){const i=()=>{var o,s,a,u;let l,c;for(const[x,_]of e){var f,h,d;const y=this._root;if((y==null?void 0:y.type)==="leaf")throw this.invalidCacheError();const b=l;if(l=b?b.branches.get(c):y,l=(f=l)!==null&&f!==void 0?f:{type:"branch",nodeKey:x,parent:b,branches:new Map,branchKey:c},l.type!=="branch"||l.nodeKey!==x)throw this.invalidCacheError();b==null||b.branches.set(c,l),r==null||(h=r.onNodeVisit)===null||h===void 0||h.call(r,l),c=this._mapNodeValue(_),this._root=(d=this._root)!==null&&d!==void 0?d:l}const g=l?(o=l)===null||o===void 0?void 0:o.branches.get(c):this._root;if(g!=null&&(g.type!=="leaf"||g.branchKey!==c))throw this.invalidCacheError();const m={type:"leaf",value:n,parent:l,branchKey:c};(s=l)===null||s===void 0||s.branches.set(c,m),this._root=(a=this._root)!==null&&a!==void 0?a:m,this._numLeafs++,this._onSet(m),r==null||(u=r.onNodeVisit)===null||u===void 0||u.call(r,m)};try{i()}catch(o){if(o instanceof zS)this.clear(),i();else throw o}}delete(e){const n=this.root();if(!n)return!1;if(e===n)return this._root=null,this._numLeafs=0,!0;let r=e.parent,i=e.branchKey;for(;r;){var o;if(r.branches.delete(i),r===n)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;i=(o=r)===null||o===void 0?void 0:o.branchKey,r=r.parent}for(;r!==n;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=UV()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw k1(e+(this._name!=null?` - ${this._name}`:"")),new zS}}var BV={TreeCache:zV},VV=BV.TreeCache,OL=Object.freeze({__proto__:null,TreeCache:VV});class $V{constructor(e){var n;Ue(this,"_maxSize",void 0),Ue(this,"_size",void 0),Ue(this,"_head",void 0),Ue(this,"_tail",void 0),Ue(this,"_map",void 0),Ue(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(n=e.mapKey)!==null&&n!==void 0?n:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const n=this._keyMapper(e),r=this._map.get(n);if(!!r)return this.set(e,r.value),r.value}set(e,n){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const o=this.head(),s={key:e,right:o,left:null,value:n};o?o.left=s:this._tail=s,this._map.set(r,s),this._head=s,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const n=this._keyMapper(e);if(!this._size||!this._map.has(n))return;const r=Ft(this._map.get(n)),i=r.right,o=r.left;i&&(i.left=r.left),o&&(o.right=r.right),r===this.head()&&(this._head=i),r===this.tail()&&(this._tail=o),this._map.delete(n),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var jV={LRUCache:$V},GV=jV.LRUCache,kL=Object.freeze({__proto__:null,LRUCache:GV});const{LRUCache:WV}=kL,{TreeCache:HV}=OL;function YV({name:t,maxSize:e,mapNodeValue:n=r=>r}){const r=new WV({maxSize:e}),i=new HV({name:t,mapNodeValue:n,onHit:o=>{r.set(o,!0)},onSet:o=>{const s=r.tail();r.set(o,!0),s&&i.size()>e&&i.delete(s.key)}});return i}var BS=YV;function Fr(t,e,n){if(typeof t=="string"&&!t.includes('"')&&!t.includes("\\"))return`"${t}"`;switch(typeof t){case"undefined":return"";case"boolean":return t?"true":"false";case"number":case"symbol":return String(t);case"string":return JSON.stringify(t);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw Be("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${t.name})__`}if(t===null)return"null";if(typeof t!="object"){var r;return(r=JSON.stringify(t))!==null&&r!==void 0?r:""}if(Dt(t))return"__PROMISE__";if(Array.isArray(t))return`[${t.map((i,o)=>Fr(i,e,o.toString()))}]`;if(typeof t.toJSON=="function")return Fr(t.toJSON(n),e,n);if(t instanceof Map){const i={};for(const[o,s]of t)i[typeof o=="string"?o:Fr(o,e)]=s;return Fr(i,e,n)}return t instanceof Set?Fr(Array.from(t).sort((i,o)=>Fr(i,e).localeCompare(Fr(o,e))),e,n):Symbol!==void 0&&t[Symbol.iterator]!=null&&typeof t[Symbol.iterator]=="function"?Fr(Array.from(t),e,n):`{${Object.keys(t).filter(i=>t[i]!==void 0).sort().map(i=>`${Fr(i,e)}:${Fr(t[i],e,i)}`).join(",")}}`}function XV(t,e={allowFunctions:!1}){return Fr(t,e)}var lg=XV;const{TreeCache:qV}=OL,of={equality:"reference",eviction:"keep-all",maxSize:1/0};function ZV({equality:t=of.equality,eviction:e=of.eviction,maxSize:n=of.maxSize}=of,r){const i=KV(t);return QV(e,n,i,r)}function KV(t){switch(t){case"reference":return e=>e;case"value":return e=>lg(e)}throw Be(`Unrecognized equality policy ${t}`)}function QV(t,e,n,r){switch(t){case"keep-all":return new qV({name:r,mapNodeValue:n});case"lru":return BS({name:r,maxSize:Ft(e),mapNodeValue:n});case"most-recent":return BS({name:r,maxSize:1,mapNodeValue:n})}throw Be(`Unrecognized eviction policy ${t}`)}var JV=ZV;function e$(t){return()=>null}var t$={startPerfBlock:e$};const{isLoadable:n$,loadableWithError:sf,loadableWithPromise:r$,loadableWithValue:$m}=oc,{WrappedValue:IL}=ML,{getNodeLoadable:af,peekNodeLoadable:i$,setNodeValue:o$}=Oo,{saveDepsToStore:s$}=ac,{DEFAULT_VALUE:a$,getConfigDeletionHandler:u$,getNode:l$,registerNode:VS}=Qn,{isRecoilValue:c$}=Ba,{markRecoilValueModified:$S}=vi,{retainedByOptionWithDefault:f$}=Ps,{recoilCallback:h$}=LL,{startPerfBlock:d$}=t$;class NL{}const Nu=new NL,Du=[],uf=new Map,p$=(()=>{let t=0;return()=>t++})();function DL(t){let e=null;const{key:n,get:r,cachePolicy_UNSTABLE:i}=t,o=t.set!=null?t.set:void 0,s=new Set,a=JV(i!=null?i:{equality:"reference",eviction:"keep-all"},n),u=f$(t.retainedBy_UNSTABLE),l=new Map;let c=0;function f(){return!Et("recoil_memory_managament_2020")||c>0}function h(O){return O.getState().knownSelectors.add(n),c++,()=>{c--}}function d(){return u$(n)!==void 0&&!f()}function g(O,q,Q,de,le){De(q,de,le),m(O,Q)}function m(O,q){se(O,q)&&ue(O),_(q,!0)}function x(O,q){se(O,q)&&(Ft(j(O)).stateVersions.clear(),_(q,!1))}function _(O,q){const Q=uf.get(O);if(Q!=null){for(const de of Q)$S(de,Ft(e));q&&uf.delete(O)}}function y(O,q){let Q=uf.get(q);Q==null&&uf.set(q,Q=new Set),Q.add(O)}function b(O,q,Q,de,le,_e){return q.then(be=>{if(!f())throw ue(O),Nu;const J=$m(be);return g(O,Q,le,J,de),be}).catch(be=>{if(!f())throw ue(O),Nu;if(Dt(be))return T(O,be,Q,de,le,_e);const J=sf(be);throw g(O,Q,le,J,de),be})}function T(O,q,Q,de,le,_e){return q.then(be=>{if(!f())throw ue(O),Nu;_e.loadingDepKey!=null&&_e.loadingDepPromise===q?Q.atomValues.set(_e.loadingDepKey,$m(be)):O.getState().knownSelectors.forEach(ze=>{Q.atomValues.delete(ze)});const J=D(O,Q);if(J&&J.state!=="loading"){if((se(O,le)||j(O)==null)&&m(O,le),J.state==="hasValue")return J.contents;throw J.contents}if(!se(O,le)){const ze=W(O,Q);if(ze!=null)return ze.loadingLoadable.contents}const[Pe,rt]=C(O,Q,le);if(Pe.state!=="loading"&&g(O,Q,le,Pe,rt),Pe.state==="hasError")throw Pe.contents;return Pe.contents}).catch(be=>{if(be instanceof NL)throw Nu;if(!f())throw ue(O),Nu;const J=sf(be);throw g(O,Q,le,J,de),be})}function R(O,q,Q,de){var le,_e,be,J;if(se(O,de)||q.version===((le=O.getState())===null||le===void 0||(_e=le.currentTree)===null||_e===void 0?void 0:_e.version)||q.version===((be=O.getState())===null||be===void 0||(J=be.nextTree)===null||J===void 0?void 0:J.version)){var Pe,rt,ze;s$(n,Q,O,(Pe=(rt=O.getState())===null||rt===void 0||(ze=rt.nextTree)===null||ze===void 0?void 0:ze.version)!==null&&Pe!==void 0?Pe:O.getState().currentTree.version)}for(const Ke of Q)s.add(Ke)}function C(O,q,Q){const de=d$(n);let le=!0,_e=!0;const be=()=>{de(),_e=!1};let J,Pe=!1,rt;const ze={loadingDepKey:null,loadingDepPromise:null},Ke=new Map;function gt({key:wt}){const xt=af(O,q,wt);switch(Ke.set(wt,xt),le||(R(O,q,new Set(Ke.keys()),Q),x(O,Q)),xt.state){case"hasValue":return xt.contents;case"hasError":throw xt.contents;case"loading":throw ze.loadingDepKey=wt,ze.loadingDepPromise=xt.contents,xt.contents}throw Be("Invalid Loadable state")}const Kt=wt=>(...xt)=>{if(_e)throw Be("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&Qu(!1),h$(O,wt,xt,{node:e})};try{J=r({get:gt,getCallback:Kt}),J=c$(J)?gt(J):J,n$(J)&&(J.state==="hasError"&&(Pe=!0),J=J.contents),Dt(J)?J=b(O,J,q,Ke,Q,ze).finally(be):be(),J=J instanceof IL?J.value:J}catch(wt){J=wt,Dt(J)?J=T(O,J,q,Ke,Q,ze).finally(be):(Pe=!0,be())}return Pe?rt=sf(J):Dt(J)?rt=r$(J):rt=$m(J),le=!1,pe(O,Q,Ke),R(O,q,new Set(Ke.keys()),Q),[rt,Ke]}function D(O,q){let Q=q.atomValues.get(n);if(Q!=null)return Q;const de=new Set;try{Q=a.get(_e=>(typeof _e!="string"&&Qu(!1),af(O,q,_e).contents),{onNodeVisit:_e=>{_e.type==="branch"&&_e.nodeKey!==n&&de.add(_e.nodeKey)}})}catch(_e){throw Be(`Problem with cache lookup for selector "${n}": ${_e.message}`)}if(Q){var le;q.atomValues.set(n,Q),R(O,q,de,(le=j(O))===null||le===void 0?void 0:le.executionID)}return Q}function F(O,q){const Q=D(O,q);if(Q!=null)return ue(O),Q;const de=W(O,q);if(de!=null){var le;return((le=de.loadingLoadable)===null||le===void 0?void 0:le.state)==="loading"&&y(O,de.executionID),de.loadingLoadable}const _e=p$(),[be,J]=C(O,q,_e);return be.state==="loading"?(H(O,_e,be,J,q),y(O,_e)):(ue(O),De(q,be,J)),be}function W(O,q){const Q=iL([l.has(O)?[Ft(l.get(O))]:[],Kp(U1(l,([le])=>le!==O),([,le])=>le)]);function de(le){for(const[_e,be]of le)if(!af(O,q,_e).is(be))return!0;return!1}for(const le of Q){if(le.stateVersions.get(q.version)||!de(le.depValuesDiscoveredSoFarDuringAsyncWork))return le.stateVersions.set(q.version,!0),le;le.stateVersions.set(q.version,!1)}}function j(O){return l.get(O)}function H(O,q,Q,de,le){l.set(O,{depValuesDiscoveredSoFarDuringAsyncWork:de,executionID:q,loadingLoadable:Q,stateVersions:new Map([[le.version,!0]])})}function pe(O,q,Q){if(se(O,q)){const de=j(O);de!=null&&(de.depValuesDiscoveredSoFarDuringAsyncWork=Q)}}function ue(O){l.delete(O)}function se(O,q){var Q;return q===((Q=j(O))===null||Q===void 0?void 0:Q.executionID)}function Ce(O){return Array.from(O.entries()).map(([q,Q])=>[q,Q.contents])}function De(O,q,Q){O.atomValues.set(n,q);try{a.set(Ce(Q),q)}catch(de){throw Be(`Problem with setting cache for selector "${n}": ${de.message}`)}}function He(O){if(Du.includes(n)){const q=`Recoil selector has circular dependencies: ${Du.slice(Du.indexOf(n)).join(" \u2192 ")}`;return sf(Be(q))}Du.push(n);try{return O()}finally{Du.pop()}}function ae(O,q){const Q=q.atomValues.get(n);return Q!=null?Q:a.get(de=>{var le;return typeof de!="string"&&Qu(!1),(le=i$(O,q,de))===null||le===void 0?void 0:le.contents})}function ve(O,q){return He(()=>F(O,q))}function G(O){O.atomValues.delete(n)}function X(O,q){e==null&&Qu(!1);for(const de of s){var Q;const le=l$(de);(Q=le.clearCache)===null||Q===void 0||Q.call(le,O,q)}s.clear(),G(q),a.clear(),$S(O,e)}return o!=null?e=VS({key:n,nodeType:"selector",peek:ae,get:ve,set:(q,Q,de)=>{let le=!1;const _e=new Map;function be({key:ze}){if(le)throw Be("Recoil: Async selector sets are not currently supported.");const Ke=af(q,Q,ze);if(Ke.state==="hasValue")return Ke.contents;if(Ke.state==="loading"){const gt=`Getting value of asynchronous atom or selector "${ze}" in a pending state while setting selector "${n}" is not yet supported.`;throw Be(gt)}else throw Ke.contents}function J(ze,Ke){if(le)throw Be("Recoil: Async selector sets are not currently supported.");const gt=typeof Ke=="function"?Ke(be(ze)):Ke;o$(q,Q,ze.key,gt).forEach((wt,xt)=>_e.set(xt,wt))}function Pe(ze){J(ze,a$)}const rt=o({set:J,get:be,reset:Pe},de);if(rt!==void 0)throw Dt(rt)?Be("Recoil: Async selector sets are not currently supported."):Be("Recoil: selector set should be a void function.");return le=!0,_e},init:h,invalidate:G,clearCache:X,shouldDeleteConfigOnRelease:d,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:u}):e=VS({key:n,nodeType:"selector",peek:ae,get:ve,init:h,invalidate:G,clearCache:X,shouldDeleteConfigOnRelease:d,dangerouslyAllowMutability:t.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:u})}DL.value=t=>new IL(t);var ja=DL;const{isLoadable:g$,loadableWithError:jm,loadableWithPromise:Gm,loadableWithValue:Xs}=oc,{WrappedValue:FL}=ML,{peekNodeInfo:m$}=Oo,{DEFAULT_VALUE:qo,DefaultValue:uo,getConfigDeletionHandler:UL,registerNode:v$,setConfigDeletionHandler:y$}=Qn,{isRecoilValue:_$}=Ba,{getRecoilValueAsLoadable:b$,markRecoilValueModified:w$,setRecoilValue:jS,setRecoilValueLoadable:E$}=vi,{retainedByOptionWithDefault:S$}=Ps,Fu=t=>t instanceof FL?t.value:t;function x$(t){const{key:e,persistence_UNSTABLE:n}=t,r=S$(t.retainedBy_UNSTABLE);let i=0;function o(y){return Gm(y.then(b=>(s=Xs(b),b)).catch(b=>{throw s=jm(b),b}))}let s=Dt(t.default)?o(t.default):g$(t.default)?t.default.state==="loading"?o(t.default.contents):t.default:Xs(Fu(t.default));s.contents;let a;const u=new Map;function l(y){return y}function c(y,b){const T=b.then(R=>{var C,D;return((D=((C=y.getState().nextTree)!==null&&C!==void 0?C:y.getState().currentTree).atomValues.get(e))===null||D===void 0?void 0:D.contents)===T&&jS(y,_,R),R}).catch(R=>{var C,D;throw((D=((C=y.getState().nextTree)!==null&&C!==void 0?C:y.getState().currentTree).atomValues.get(e))===null||D===void 0?void 0:D.contents)===T&&E$(y,_,jm(R)),R});return T}function f(y,b,T){var R;i++;const C=()=>{var j;i--,(j=u.get(y))===null||j===void 0||j.forEach(H=>H()),u.delete(y)};if(y.getState().knownAtoms.add(e),s.state==="loading"){const j=()=>{var H;((H=y.getState().nextTree)!==null&&H!==void 0?H:y.getState().currentTree).atomValues.has(e)||w$(y,_)};s.contents.finally(j)}const D=(R=t.effects)!==null&&R!==void 0?R:t.effects_UNSTABLE;if(D!=null){let se=function(G){if(H&&G.key===e){const X=j;return X instanceof uo?h(y,b):Dt(X)?Gm(X.then(O=>O instanceof uo?s.toPromise():O)):Xs(X)}return b$(y,G)},Ce=function(G){return se(G).toPromise()},De=function(G){var X;const O=m$(y,(X=y.getState().nextTree)!==null&&X!==void 0?X:y.getState().currentTree,G.key);return H&&G.key===e&&!(j instanceof uo)?{...O,isSet:!0,loadable:se(G)}:O},j=qo,H=!0,pe=!1,ue=null;const He=G=>X=>{if(H){const O=se(_),q=O.state==="hasValue"?O.contents:qo;j=typeof X=="function"?X(q):X,Dt(j)&&(j=j.then(Q=>(ue={effect:G,value:Q},Q)))}else{if(Dt(X))throw Be("Setting atoms to async values is not implemented.");typeof X!="function"&&(ue={effect:G,value:Fu(X)}),jS(y,_,typeof X=="function"?O=>{const q=Fu(X(O));return ue={effect:G,value:q},q}:Fu(X))}},ae=G=>()=>He(G)(qo),ve=G=>X=>{var O;const{release:q}=y.subscribeToTransactions(Q=>{var de;let{currentTree:le,previousTree:_e}=Q.getState();_e||(_e=le);const be=(de=le.atomValues.get(e))!==null&&de!==void 0?de:s;if(be.state==="hasValue"){var J,Pe,rt,ze;const Ke=be.contents,gt=(J=_e.atomValues.get(e))!==null&&J!==void 0?J:s,Kt=gt.state==="hasValue"?gt.contents:qo;((Pe=ue)===null||Pe===void 0?void 0:Pe.effect)!==G||((rt=ue)===null||rt===void 0?void 0:rt.value)!==Ke?X(Ke,Kt,!le.atomValues.has(e)):((ze=ue)===null||ze===void 0?void 0:ze.effect)===G&&(ue=null)}},e);u.set(y,[...(O=u.get(y))!==null&&O!==void 0?O:[],q])};for(const G of D)try{const X=G({node:_,storeID:y.storeID,parentStoreID_UNSTABLE:y.parentStoreID,trigger:T,setSelf:He(G),resetSelf:ae(G),onSet:ve(G),getPromise:Ce,getLoadable:se,getInfo_UNSTABLE:De});if(X!=null){var F;u.set(y,[...(F=u.get(y))!==null&&F!==void 0?F:[],X])}}catch(X){j=X,pe=!0}if(H=!1,!(j instanceof uo)){var W;const G=pe?jm(j):Dt(j)?Gm(c(y,j)):Xs(Fu(j));G.contents,b.atomValues.set(e,G),(W=y.getState().nextTree)===null||W===void 0||W.atomValues.set(e,G)}}return C}function h(y,b){var T,R;return(T=(R=b.atomValues.get(e))!==null&&R!==void 0?R:a)!==null&&T!==void 0?T:s}function d(y,b){if(b.atomValues.has(e))return Ft(b.atomValues.get(e));if(b.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(n==null)return s;const T=b.nonvalidatedAtoms.get(e),R=n.validator(T,qo);return a=R instanceof uo?s:Xs(R),a}else return s}function g(){a=void 0}function m(y,b,T){if(b.atomValues.has(e)){const R=Ft(b.atomValues.get(e));if(R.state==="hasValue"&&T===R.contents)return new Map}else if(!b.nonvalidatedAtoms.has(e)&&T instanceof uo)return new Map;return a=void 0,new Map().set(e,Xs(T))}function x(){return UL(e)!==void 0&&i<=0}const _=v$({key:e,nodeType:"atom",peek:h,get:d,set:m,init:f,invalidate:g,shouldDeleteConfigOnRelease:x,dangerouslyAllowMutability:t.dangerouslyAllowMutability,persistence_UNSTABLE:t.persistence_UNSTABLE?{type:t.persistence_UNSTABLE.type,backButton:t.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return _}function q1(t){const{...e}=t,n="default"in t?t.default:new Promise(()=>{});return _$(n)?T$({...e,default:n}):x$({...e,default:n})}function T$(t){const e=q1({...t,default:qo,persistence_UNSTABLE:t.persistence_UNSTABLE===void 0?void 0:{...t.persistence_UNSTABLE,validator:r=>r instanceof uo?r:Ft(t.persistence_UNSTABLE).validator(r,qo)},effects:t.effects,effects_UNSTABLE:t.effects_UNSTABLE}),n=ja({key:`${t.key}__withFallback`,get:({get:r})=>{const i=r(e);return i instanceof uo?t.default:i},set:({set:r},i)=>r(e,i),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:t.dangerouslyAllowMutability});return y$(n.key,UL(t.key)),n}q1.value=t=>new FL(t);var zL=q1;class P${constructor(e){var n;Ue(this,"_map",void 0),Ue(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(n=e==null?void 0:e.mapKey)!==null&&n!==void 0?n:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,n){this._map.set(this._keyMapper(e),n)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var A$={MapCache:P$},C$=A$.MapCache,R$=Object.freeze({__proto__:null,MapCache:C$});const{LRUCache:GS}=kL,{MapCache:L$}=R$,lf={equality:"reference",eviction:"none",maxSize:1/0};function M$({equality:t=lf.equality,eviction:e=lf.eviction,maxSize:n=lf.maxSize}=lf){const r=O$(t);return k$(e,n,r)}function O$(t){switch(t){case"reference":return e=>e;case"value":return e=>lg(e)}throw Be(`Unrecognized equality policy ${t}`)}function k$(t,e,n){switch(t){case"keep-all":return new L$({mapKey:n});case"lru":return new GS({mapKey:n,maxSize:Ft(e)});case"most-recent":return new GS({mapKey:n,maxSize:1})}throw Be(`Unrecognized eviction policy ${t}`)}var BL=M$;const{setConfigDeletionHandler:I$}=Qn;function N$(t){var e,n;const r=BL({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var o,s;const a=r.get(i);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:u,...l}=t,c="default"in t?t.default:new Promise(()=>{}),f=zL({...l,key:`${t.key}__${(o=lg(i))!==null&&o!==void 0?o:"void"}`,default:typeof c=="function"?c(i):c,retainedBy_UNSTABLE:typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE,effects:typeof t.effects=="function"?t.effects(i):typeof t.effects_UNSTABLE=="function"?t.effects_UNSTABLE(i):(s=t.effects)!==null&&s!==void 0?s:t.effects_UNSTABLE});return r.set(i,f),I$(f.key,()=>{r.delete(i)}),f}}var D$=N$;const{setConfigDeletionHandler:F$}=Qn;let U$=0;function z$(t){var e,n;const r=BL({equality:(e=(n=t.cachePolicyForParams_UNSTABLE)===null||n===void 0?void 0:n.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var o;let s;try{s=r.get(i)}catch(h){throw Be(`Problem with cache lookup for selector ${t.key}: ${h.message}`)}if(s!=null)return s;const a=`${t.key}__selectorFamily/${(o=lg(i,{allowFunctions:!0}))!==null&&o!==void 0?o:"void"}/${U$++}`,u=h=>t.get(i)(h),l=t.cachePolicy_UNSTABLE,c=typeof t.retainedBy_UNSTABLE=="function"?t.retainedBy_UNSTABLE(i):t.retainedBy_UNSTABLE;let f;if(t.set!=null){const h=t.set;f=ja({key:a,get:u,set:(g,m)=>h(i)(g,m),cachePolicy_UNSTABLE:l,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:c})}else f=ja({key:a,get:u,cachePolicy_UNSTABLE:l,dangerouslyAllowMutability:t.dangerouslyAllowMutability,retainedBy_UNSTABLE:c});return r.set(i,f),F$(f.key,()=>{r.delete(i)}),f}}var ko=z$;const B$=ko({key:"__constant",get:t=>()=>t,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function V$(t){return B$(t)}var $$=V$;const j$=ko({key:"__error",get:t=>()=>{throw Be(t)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function G$(t){return j$(t)}var W$=G$;function H$(t){return t}var Y$=H$;const{loadableWithError:VL,loadableWithPromise:$L,loadableWithValue:jL}=oc;function cg(t,e){const n=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[i,o]of e.entries())try{n[i]=t(o)}catch(s){r[i]=s}return[n,r]}function X$(t){return t!=null&&!Dt(t)}function fg(t){return Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e])}function kv(t,e){return Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,r,i)=>({...n,[r]:e[i]}),{})}function Aa(t,e,n){const r=n.map((i,o)=>i==null?jL(e[o]):Dt(i)?$L(i):VL(i));return kv(t,r)}function q$(t,e){return e.map((n,r)=>n===void 0?t[r]:n)}const Z$=ko({key:"__waitForNone",get:t=>({get:e})=>{const n=fg(t),[r,i]=cg(e,n);return Aa(t,r,i)},dangerouslyAllowMutability:!0}),K$=ko({key:"__waitForAny",get:t=>({get:e})=>{const n=fg(t),[r,i]=cg(e,n);return i.some(o=>!Dt(o))?Aa(t,r,i):new Promise(o=>{for(const[s,a]of i.entries())Dt(a)&&a.then(u=>{r[s]=u,i[s]=void 0,o(Aa(t,r,i))}).catch(u=>{i[s]=u,o(Aa(t,r,i))})})},dangerouslyAllowMutability:!0}),Q$=ko({key:"__waitForAll",get:t=>({get:e})=>{const n=fg(t),[r,i]=cg(e,n);if(i.every(s=>s==null))return kv(t,r);const o=i.find(X$);if(o!=null)throw o;return Promise.all(i).then(s=>kv(t,q$(r,s)))},dangerouslyAllowMutability:!0}),J$=ko({key:"__waitForAllSettled",get:t=>({get:e})=>{const n=fg(t),[r,i]=cg(e,n);return i.every(o=>!Dt(o))?Aa(t,r,i):Promise.all(i.map((o,s)=>Dt(o)?o.then(a=>{r[s]=a,i[s]=void 0}).catch(a=>{r[s]=void 0,i[s]=a}):null)).then(()=>Aa(t,r,i))},dangerouslyAllowMutability:!0}),e8=ko({key:"__noWait",get:t=>({get:e})=>{try{return ja.value(jL(e(t)))}catch(n){return ja.value(Dt(n)?$L(n):VL(n))}},dangerouslyAllowMutability:!0});var t8={waitForNone:Z$,waitForAny:K$,waitForAll:Q$,waitForAllSettled:J$,noWait:e8};const{RecoilLoadable:n8}=oc,{DefaultValue:r8}=Qn,{RecoilRoot:i8,useRecoilStoreID:o8}=Gi,{isRecoilValue:s8}=Ba,{retentionZone:a8}=Jp,{freshSnapshot:u8}=ig,{useRecoilState:l8,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:c8,useRecoilStateLoadable:f8,useRecoilValue:h8,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:d8,useRecoilValueLoadable:p8,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:g8,useResetRecoilState:m8,useSetRecoilState:v8}=AB,{useGotoRecoilSnapshot:y8,useRecoilSnapshot:_8,useRecoilTransactionObserver:b8}=PL,{useRecoilCallback:w8}=LL,{noWait:E8,waitForAll:S8,waitForAllSettled:x8,waitForAny:T8,waitForNone:P8}=t8;var Z1={DefaultValue:r8,isRecoilValue:s8,RecoilLoadable:n8,RecoilEnv:LR,RecoilRoot:i8,useRecoilStoreID:o8,useRecoilBridgeAcrossReactRoots_UNSTABLE:eV,atom:zL,selector:ja,atomFamily:D$,selectorFamily:ko,constSelector:$$,errorSelector:W$,readOnlySelector:Y$,noWait:E8,waitForNone:P8,waitForAny:T8,waitForAll:S8,waitForAllSettled:x8,useRecoilValue:h8,useRecoilValueLoadable:p8,useRecoilState:l8,useRecoilStateLoadable:f8,useSetRecoilState:v8,useResetRecoilState:m8,useGetRecoilValueInfo_UNSTABLE:XB,useRecoilRefresher_UNSTABLE:RV,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:g8,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:d8,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:c8,useRecoilCallback:w8,useRecoilTransaction_UNSTABLE:IV,useGotoRecoilSnapshot:y8,useRecoilSnapshot:_8,useRecoilTransactionObserver_UNSTABLE:b8,snapshot_UNSTABLE:u8,useRetain:G1,retentionZone:a8},A8=Z1.RecoilRoot,K1=Z1.atom,Ul=Z1.useRecoilState;const C8="modulepreload",R8=function(t){return"/itsb/"+t},WS={},L8=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=R8(o),o in WS)return;WS[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const f=i[c];if(f.href===o&&(!s||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const l=document.createElement("link");if(l.rel=s?"stylesheet":C8,s||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),s)return new Promise((c,f)=>{l.addEventListener("load",c),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())},Q1=B.exports.createContext(null),M8=t=>{const[e,n]=B.exports.useState({}),r=B.exports.useCallback((o,s="default")=>{n(a=>{if(s==="current")throw new Error("'current' cannot be used as map id");if(a[s])throw new Error(`Multiple maps with the same id: ${s}`);return{...a,[s]:o}})},[]),i=B.exports.useCallback((o="default")=>{n(s=>{if(s[o]){const a={...s};return delete a[o],a}return s})},[]);return ke(Q1.Provider,{value:{maps:e,onMapMount:r,onMapUnmount:i},children:t.children})};function O8(){var t;const e=(t=B.exports.useContext(Q1))===null||t===void 0?void 0:t.maps,n=B.exports.useContext(fc);return B.exports.useMemo(()=>({...e,current:n==null?void 0:n.map}),[e,n])}function k8(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function HS(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function YS(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const i=t.center;t.center=new i.constructor(n.longitude,n.latitude),r=r||i!==t.center}if("zoom"in n){const i=t.zoom;t.zoom=n.zoom,r=r||i!==t.zoom}if("bearing"in n){const i=t.bearing;t.bearing=n.bearing,r=r||i!==t.bearing}if("pitch"in n){const i=t.pitch;t.pitch=n.pitch,r=r||i!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const I8=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function XS(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{const i=e[r.ref];let o=null;if("interactive"in r&&(o={...r},delete o.interactive),i){o=o||{...r},delete o.ref;for(const s of I8)s in i&&(o[s]=i[s])}return o||r});return{...t,layers:n}}function N8(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===o}function fo(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!fo(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!e.hasOwnProperty(i)||!fo(t[i],e[i]))return!1;return!0}return!1}const qS={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Wm={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},ZS={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},D8=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],F8=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Ga{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const o=this.props[ZS[i.type]];o&&o(i)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const o=this.props[qS[i.type]];if(o){if(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"){const s=this._hoveredFeatures||this._map.queryRenderedFeatures(i.point,{layers:this.props.interactiveLayerIds});i.features=s}o(i),delete i.features}},this._onCameraEvent=i=>{if(!this._internalUpdate){const o=this.props[Wm[i.type]];o&&o(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n);r&&this._createShadowTransform(this._map);const i=this._updateSize(e),o=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(r||i||o&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=Ga.savedMaps.pop();if(!r)return null;const i=r.map,o=i.getContainer();for(n.className=o.className;o.childNodes.length>0;)n.appendChild(o.childNodes[0]);i._container=n,r.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:s}=e;return s&&(s.bounds?i.fitBounds(s.bounds,{...s.fitBoundsOptions,duration:0}):r._updateViewState(s,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),r}_initialize(e){const{props:n}=this,r={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||U8()||null,container:e,style:XS(n.mapStyle)},i=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),n.gl){const l=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=l,n.gl)}const o=new this._MapClass(r);i.padding&&o.setPadding(i.padding),n.cursor&&(o.getCanvas().style.cursor=n.cursor),this._createShadowTransform(o);const s=o._render;o._render=l=>{this._inRender=!0,s.call(o,l),this._inRender=!1};const a=o._renderTaskQueue.run;o._renderTaskQueue.run=l=>{a.call(o._renderTaskQueue,l),this._onBeforeRepaint()},o.on("render",()=>this._onAfterRepaint());const u=o.fire;o.fire=this._fireEvent.bind(this,u),o.on("resize",()=>{this._renderTransform.resize(o.transform.width,o.transform.height)}),o.on("styledata",()=>this._updateStyleComponents(this.props,{})),o.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const l in qS)o.on(l,this._onPointerEvent);for(const l in Wm)o.on(l,this._onCameraEvent);for(const l in ZS)o.on(l,this._onEvent);this._map=o}recycle(){Ga.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=k8(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const r=this._map,i=this._renderTransform,{zoom:o,pitch:s,bearing:a}=i,u=r.isMoving();u&&(i.cameraElevationReference="sea");const l=YS(i,{...HS(r.transform),...e});if(u&&(i.cameraElevationReference="ground"),l&&n){const c=this._deferredEvents;c.move=!0,c.zoom||(c.zoom=o!==i.zoom),c.rotate||(c.rotate=a!==i.bearing),c.pitch||(c.pitch=s!==i.pitch)}return u||YS(r.transform,e),l}_updateSettings(e,n){const r=this._map;let i=!1;for(const o of D8)o in e&&!fo(e[o],n[o])&&(i=!0,r[`set${o[0].toUpperCase()}${o.slice(1)}`](e[o]));return i}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor),e.mapStyle!==n.mapStyle){const r={diff:e.styleDiffing};return"localIdeographFontFamily"in e&&(r.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(XS(e.mapStyle),r),!0}return!1}_updateStyleComponents(e,n){const r=this._map;let i=!1;return r.style.loaded()&&("light"in e&&!fo(e.light,n.light)&&(i=!0,r.setLight(e.light)),"fog"in e&&!fo(e.fog,n.fog)&&(i=!0,r.setFog(e.fog)),"terrain"in e&&!fo(e.terrain,n.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(i=!0,r.setTerrain(e.terrain))),i}_updateHandlers(e,n){const r=this._map;let i=!1;for(const o of F8){const s=e[o];fo(s,n[o])||(i=!0,s?r[o].enable(s):r[o].disable())}return i}_updateHover(e){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const o=e.type,s=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0;let a;if(o==="mousemove")try{a=this._map.queryRenderedFeatures(e.point,{layers:r.interactiveLayerIds})}catch{a=[]}else a=[];const u=a.length>0;!u&&s&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,u&&!s&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=o}else this._hoveredFeatures=null}_fireEvent(e,n,r){const i=this._map,o=i.transform,s=typeof n=="string"?n:n.type;return s==="move"&&this._updateViewState(this.props,!1),s in Wm&&(typeof n=="object"&&(n.viewState=HS(o)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,n,r),i.transform=o,i):(e.call(i,n,r),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const n=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=n}}}Ga.savedMaps=[];function U8(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||process.env.MapboxAccessToken}catch{}try{t=t||process.env.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const z8=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function B8(t,e){if(!t)return null;const n=t.map,r={getMap:()=>n,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:i=>t.transform.locationPoint(e.LngLat.convert(i)),unproject:i=>t.transform.pointLocation(e.Point.convert(i)),queryTerrainElevation:(i,o)=>{const s=n.transform;n.transform=t.transform;const a=n.queryTerrainElevation(i,o);return n.transform=s,a}};for(const i of V8(n))!(i in r)&&!z8.includes(i)&&(r[i]=n[i].bind(n));return r}function V8(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const $8=typeof document<"u"?B.exports.useLayoutEffect:B.exports.useEffect,j8=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function G8(t,e){for(const n of j8)n in e&&(t[n]=e[n]);e.RTLTextPlugin&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(e.RTLTextPlugin,n=>{n&&console.error(n)},!1)}const fc=B.exports.createContext(null),W8={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:t=>console.error(t.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},hg=B.exports.forwardRef((t,e)=>{const n=B.exports.useContext(Q1),[r,i]=B.exports.useState(null),o=B.exports.useRef(),{current:s}=B.exports.useRef({mapLib:null,map:null});B.exports.useEffect(()=>{const u=t.mapLib;let l=!0,c;return Promise.resolve(u||L8(()=>import("./maplibre-gl.a15038c0.js").then(f=>f.m),[])).then(f=>{if(!!l){if(f.Map||(f=f.default),!f||!f.Map)throw new Error("Invalid mapLib");if(f.supported(t))G8(f,t),t.reuseMaps&&(c=Ga.reuse(t,o.current)),c||(c=new Ga(f.Map,t,o.current)),s.map=B8(c,f),s.mapLib=f,i(c),n==null||n.onMapMount(s.map,t.id);else throw new Error("Map is not supported by this browser")}}).catch(f=>{t.onError({type:"error",target:null,originalEvent:null,error:f})}),()=>{l=!1,c&&(n==null||n.onMapUnmount(t.id),t.reuseMaps?c.recycle():c.destroy())}},[]),$8(()=>{r&&r.setProps(t)}),B.exports.useImperativeHandle(e,()=>s.map,[r]);const a=B.exports.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]);return ke("div",{id:t.id,ref:o,style:a,children:r&&ke(fc.Provider,{value:s,children:t.children})})});hg.displayName="Map";hg.defaultProps=W8;const H8=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function As(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!H8.test(r)?n[r]=`${i}px`:n[r]=i}}const Y8={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function GL(t){const{map:e,mapLib:n}=B.exports.useContext(fc),r=B.exports.useRef({props:t});r.current.props=t;const i=B.exports.useMemo(()=>{let o=!1;B.exports.Children.forEach(t.children,u=>{u&&(o=!0)});const s={...t,element:o?document.createElement("div"):null},a=new n.Marker(s).setLngLat([t.longitude,t.latitude]);return a.getElement().addEventListener("click",u=>{var l,c;(c=(l=r.current.props).onClick)===null||c===void 0||c.call(l,{type:"click",target:a,originalEvent:u})}),a.on("dragstart",u=>{var l,c;const f=u;f.lngLat=i.getLngLat(),(c=(l=r.current.props).onDragStart)===null||c===void 0||c.call(l,f)}),a.on("drag",u=>{var l,c;const f=u;f.lngLat=i.getLngLat(),(c=(l=r.current.props).onDrag)===null||c===void 0||c.call(l,f)}),a.on("dragend",u=>{var l,c;const f=u;f.lngLat=i.getLngLat(),(c=(l=r.current.props).onDragEnd)===null||c===void 0||c.call(l,f)}),a},[]);return B.exports.useEffect(()=>(i.addTo(e.getMap()),()=>{i.remove()}),[]),B.exports.useEffect(()=>{As(i.getElement(),t.style)},[t.style]),(i.getLngLat().lng!==t.longitude||i.getLngLat().lat!==t.latitude)&&i.setLngLat([t.longitude,t.latitude]),t.offset&&!N8(i.getOffset(),t.offset)&&i.setOffset(t.offset),i.isDraggable()!==t.draggable&&i.setDraggable(t.draggable),i.getRotation()!==t.rotation&&i.setRotation(t.rotation),i.getRotationAlignment()!==t.rotationAlignment&&i.setRotationAlignment(t.rotationAlignment),i.getPitchAlignment()!==t.pitchAlignment&&i.setPitchAlignment(t.pitchAlignment),i.getPopup()!==t.popup&&i.setPopup(t.popup),Jl.exports.createPortal(t.children,i.getElement())}GL.defaultProps=Y8;B.exports.memo(GL);function KS(t){return new Set(t?t.trim().split(/\s+/):[])}function X8(t){const{map:e,mapLib:n}=B.exports.useContext(fc),r=B.exports.useMemo(()=>document.createElement("div"),[]),i=B.exports.useRef({props:t});i.current.props=t;const o=B.exports.useMemo(()=>{const s={...t},a=new n.Popup(s).setLngLat([t.longitude,t.latitude]);return a.once("open",u=>{var l,c;(c=(l=i.current.props).onOpen)===null||c===void 0||c.call(l,u)}),a},[]);if(B.exports.useEffect(()=>{const s=a=>{var u,l;(l=(u=i.current.props).onClose)===null||l===void 0||l.call(u,a)};return o.on("close",s),o.setDOMContent(r).addTo(e.getMap()),()=>{o.off("close",s),o.isOpen()&&o.remove()}},[]),B.exports.useEffect(()=>{As(o.getElement(),t.style)},[t.style]),o.isOpen()&&((o.getLngLat().lng!==t.longitude||o.getLngLat().lat!==t.latitude)&&o.setLngLat([t.longitude,t.latitude]),t.offset&&!fo(o.options.offset,t.offset)&&o.setOffset(t.offset),(o.options.anchor!==t.anchor||o.options.maxWidth!==t.maxWidth)&&(o.options.anchor=t.anchor,o.setMaxWidth(t.maxWidth)),o.options.className!==t.className)){const s=KS(o.options.className),a=KS(t.className);for(const u of s)a.has(u)||o.removeClassName(u);for(const u of a)s.has(u)||o.addClassName(u);o.options.className=t.className}return Jl.exports.createPortal(t.children,r)}B.exports.memo(X8);function hc(t,e,n,r){const i=B.exports.useContext(fc),o=B.exports.useMemo(()=>t(i),[]);return B.exports.useEffect(()=>{const s=r||n||e,a=typeof e=="function"&&typeof n=="function"?e:null,u=typeof n=="function"?n:typeof e=="function"?e:null,{map:l}=i;return l.hasControl(o)||(l.addControl(o,s==null?void 0:s.position),a&&a(i)),()=>{u&&u(i),l.hasControl(o)&&l.removeControl(o)}},[]),o}function q8(t){const e=hc(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return B.exports.useEffect(()=>{As(e._container,t.style)},[t.style]),null}B.exports.memo(q8);function Z8(t){const e=hc(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return B.exports.useEffect(()=>{As(e._controlContainer,t.style)},[t.style]),null}B.exports.memo(Z8);const WL=B.exports.forwardRef((t,e)=>{const n=B.exports.useRef({props:t}),r=hc(({mapLib:i})=>{const o=new i.GeolocateControl(t),s=o._setupUI;return o._setupUI=a=>{o._container.hasChildNodes()||s(a)},o.on("geolocate",a=>{var u,l;(l=(u=n.current.props).onGeolocate)===null||l===void 0||l.call(u,a)}),o.on("error",a=>{var u,l;(l=(u=n.current.props).onError)===null||l===void 0||l.call(u,a)}),o.on("outofmaxbounds",a=>{var u,l;(l=(u=n.current.props).onOutOfMaxBounds)===null||l===void 0||l.call(u,a)}),o.on("trackuserlocationstart",a=>{var u,l;(l=(u=n.current.props).onTrackUserLocationStart)===null||l===void 0||l.call(u,a)}),o.on("trackuserlocationend",a=>{var u,l;(l=(u=n.current.props).onTrackUserLocationEnd)===null||l===void 0||l.call(u,a)}),o},{position:t.position});return n.current.props=t,B.exports.useImperativeHandle(e,()=>({trigger:()=>r.trigger()}),[]),B.exports.useEffect(()=>{As(r._container,t.style)},[t.style]),null});WL.displayName="GeolocateControl";B.exports.memo(WL);function K8(t){const e=hc(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return B.exports.useEffect(()=>{As(e._container,t.style)},[t.style]),null}B.exports.memo(K8);const Q8={unit:"metric",maxWidth:100};function HL(t){const e=hc(({mapLib:n})=>new n.ScaleControl(t),{position:t.position});return(e.options.unit!==t.unit||e.options.maxWidth!==t.maxWidth)&&(e.options.maxWidth=t.maxWidth,e.setUnit(t.unit)),B.exports.useEffect(()=>{As(e._container,t.style)},[t.style]),null}HL.defaultProps=Q8;B.exports.memo(HL);var wr;(function(t){t.MOBILE="MOBILE",t.DESKTOP="DESKTOP"})(wr||(wr={}));const YL="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,XL=B.exports.createContext({size:wr.DESKTOP,isTouchDevice:YL}),J8=t=>{const[e,n]=B.exports.useState({size:window.innerWidth>t.breakPoint?wr.DESKTOP:wr.MOBILE,isTouchDevice:YL});return B.exports.useLayoutEffect(()=>{const r=i=>{const o=window.innerWidth;o>t.breakPoint&&e.size===wr.MOBILE?n({...e,size:wr.DESKTOP}):o<t.breakPoint&&e.size===wr.DESKTOP&&n({...e,size:wr.MOBILE})};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[t.breakPoint,e]),ke(XL.Provider,{value:e,children:t.children})},qL=()=>B.exports.useContext(XL),jue=t=>ke(A8,{children:ke(J8,{breakPoint:t.breakPoint||540,children:ke(M8,{children:t.children})})});const ej=B.exports.createContext({}),ZL=()=>B.exports.useContext(ej);var _d;(function(t){t.PENDING="PENDING",t.OK="OK",t.FAILED="FAILED"})(_d||(_d={}));const tj=K1({key:"search",default:{args:{},status:_d.OK}}),KL=()=>{const[t,e]=Ul(tj),n=(u={})=>e({args:u,status:_d.PENDING,result:t.result});return{changeSearchQuery:u=>n({...t.args,query:u}),clearSearchQuery:()=>n({...t.args,query:void 0}),refreshSearch:()=>n({...t.args}),search:t,setActiveAggregation:u=>e({args:{...t.args,activeAggregation:u},status:t.status,result:t.result}),setFilter:u=>{const l=[...(t.args.filters||[]).filter(c=>c.name!==u.name),u];n({...t.args,filters:l})},setSearchState:e}};var nj=function(e){ij(e);var n=rj(e);return e.on=n.on,e.off=n.off,e.fire=n.fire,e};function rj(t){var e=Object.create(null);return{on:function(n,r,i){if(typeof r!="function")throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:r,ctx:i}),t},off:function(n,r){var i=typeof n>"u";if(i)return e=Object.create(null),t;if(e[n]){var o=typeof r!="function";if(o)delete e[n];else for(var s=e[n],a=0;a<s.length;++a)s[a].callback===r&&s.splice(a,1)}return t},fire:function(n){var r=e[n];if(!r)return t;var i;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var o=0;o<r.length;++o){var s=r[o];s.callback.apply(s.ctx,i)}return t}}}function ij(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}var Gue=sj,oj=nj;function sj(t){if(t=t||{},"uniqueLinkId"in t&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),t.multigraph=t.uniqueLinkId),t.multigraph===void 0&&(t.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,n=new Map,r={},i=0,o=t.multigraph?T:b,s=[],a=De,u=De,l=De,c=De,f={version:20,addNode:m,addLink:y,removeLink:F,removeNode:_,getNode:x,getNodeCount:R,getLinkCount:C,getEdgeCount:C,getLinksCount:C,getNodesCount:R,getLinks:D,forEachNode:ve,forEachLinkedNode:ue,forEachLink:pe,beginUpdate:l,endUpdate:c,clear:H,hasLink:j,hasNode:x,getLink:j};return oj(f),h(),f;function h(){var G=f.on;f.on=X;function X(){return f.beginUpdate=l=He,f.endUpdate=c=ae,a=d,u=g,f.on=G,G.apply(f,arguments)}}function d(G,X){s.push({link:G,changeType:X})}function g(G,X){s.push({node:G,changeType:X})}function m(G,X){if(G===void 0)throw new Error("Invalid node identifier");l();var O=x(G);return O?(O.data=X,u(O,"update")):(O=new aj(G,X),u(O,"add")),e.set(G,O),c(),O}function x(G){return e.get(G)}function _(G){var X=x(G);if(!X)return!1;l();var O=X.links;return O&&(O.forEach(W),X.links=null),e.delete(G),u(X,"remove"),c(),!0}function y(G,X,O){l();var q=x(G)||m(G),Q=x(X)||m(X),de=o(G,X,O),le=n.has(de.id);return n.set(de.id,de),QS(q,de),G!==X&&QS(Q,de),a(de,le?"update":"add"),c(),de}function b(G,X,O){var q=cf(G,X),Q=n.get(q);return Q?(Q.data=O,Q):new JS(G,X,O,q)}function T(G,X,O){var q=cf(G,X),Q=r.hasOwnProperty(q);if(Q||j(G,X)){Q||(r[q]=0);var de="@"+ ++r[q];q=cf(G+de,X+de)}return new JS(G,X,O,q)}function R(){return e.size}function C(){return n.size}function D(G){var X=x(G);return X?X.links:null}function F(G,X){return X!==void 0&&(G=j(G,X)),W(G)}function W(G){if(!G||!n.get(G.id))return!1;l(),n.delete(G.id);var X=x(G.fromId),O=x(G.toId);return X&&X.links.delete(G),O&&O.links.delete(G),a(G,"remove"),c(),!0}function j(G,X){if(!(G===void 0||X===void 0))return n.get(cf(G,X))}function H(){l(),ve(function(G){_(G.id)}),c()}function pe(G){if(typeof G=="function")for(var X=n.values(),O=X.next();!O.done;){if(G(O.value))return!0;O=X.next()}}function ue(G,X,O){var q=x(G);if(q&&q.links&&typeof X=="function")return O?Ce(q.links,G,X):se(q.links,G,X)}function se(G,X,O){for(var q,Q=G.values(),de=Q.next();!de.done;){var le=de.value,_e=le.fromId===X?le.toId:le.fromId;if(q=O(e.get(_e),le),q)return!0;de=Q.next()}}function Ce(G,X,O){for(var q,Q=G.values(),de=Q.next();!de.done;){var le=de.value;if(le.fromId===X&&(q=O(e.get(le.toId),le),q))return!0;de=Q.next()}}function De(){}function He(){i+=1}function ae(){i-=1,i===0&&s.length>0&&(f.fire("changed",s),s.length=0)}function ve(G){if(typeof G!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+G);for(var X=e.values(),O=X.next();!O.done;){if(G(O.value))return!0;O=X.next()}}}function aj(t,e){this.id=t,this.links=null,this.data=e}function QS(t,e){t.links?t.links.add(e):t.links=new Set([e])}function JS(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function cf(t,e){return t.toString()+"\u{1F449} "+e.toString()}function Fi(t){return Array.isArray?Array.isArray(t):eM(t)==="[object Array]"}const uj=1/0;function lj(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-uj?"-0":e}function cj(t){return t==null?"":lj(t)}function ci(t){return typeof t=="string"}function QL(t){return typeof t=="number"}function fj(t){return t===!0||t===!1||hj(t)&&eM(t)=="[object Boolean]"}function JL(t){return typeof t=="object"}function hj(t){return JL(t)&&t!==null}function ar(t){return t!=null}function Hm(t){return!t.trim().length}function eM(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const dj="Incorrect 'index' type",pj=t=>`Invalid value for key ${t}`,gj=t=>`Pattern length exceeds max of ${t}.`,mj=t=>`Missing ${t} property in key`,vj=t=>`Property 'weight' in key '${t}' must be a positive integer`,ex=Object.prototype.hasOwnProperty;class yj{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let i=tM(r);n+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function tM(t){let e=null,n=null,r=null,i=1,o=null;if(ci(t)||Fi(t))r=t,e=tx(t),n=Iv(t);else{if(!ex.call(t,"name"))throw new Error(mj("name"));const s=t.name;if(r=s,ex.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(vj(s));e=tx(s),n=Iv(s),o=t.getFn}return{path:e,id:n,weight:i,src:r,getFn:o}}function tx(t){return Fi(t)?t:t.split(".")}function Iv(t){return Fi(t)?t.join("."):t}function _j(t,e){let n=[],r=!1;const i=(o,s,a)=>{if(!!ar(o))if(!s[a])n.push(o);else{let u=s[a];const l=o[u];if(!ar(l))return;if(a===s.length-1&&(ci(l)||QL(l)||fj(l)))n.push(cj(l));else if(Fi(l)){r=!0;for(let c=0,f=l.length;c<f;c+=1)i(l[c],s,a+1)}else s.length&&i(l,s,a+1)}};return i(t,ci(e)?e.split("."):e,0),r?n:n[0]}const bj={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},wj={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Ej={location:0,threshold:.6,distance:100},Sj={useExtendedSearch:!1,getFn:_j,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Fe={...wj,...bj,...Ej,...Sj};const xj=/[^ ]+/g;function Tj(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(i){const o=i.match(xj).length;if(n.has(o))return n.get(o);const s=1/Math.pow(o,.5*t),a=parseFloat(Math.round(s*r)/r);return n.set(o,a),a},clear(){n.clear()}}}class J1{constructor({getFn:e=Fe.getFn,fieldNormWeight:n=Fe.fieldNormWeight}={}){this.norm=Tj(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ci(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();ci(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!ar(e)||Hm(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((i,o)=>{let s=i.getFn?i.getFn(e):this.getFn(e,i.path);if(!!ar(s)){if(Fi(s)){let a=[];const u=[{nestedArrIndex:-1,value:s}];for(;u.length;){const{nestedArrIndex:l,value:c}=u.pop();if(!!ar(c))if(ci(c)&&!Hm(c)){let f={v:c,i:l,n:this.norm.get(c)};a.push(f)}else Fi(c)&&c.forEach((f,h)=>{u.push({nestedArrIndex:h,value:f})})}r.$[o]=a}else if(ci(s)&&!Hm(s)){let a={v:s,n:this.norm.get(s)};r.$[o]=a}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function nM(t,e,{getFn:n=Fe.getFn,fieldNormWeight:r=Fe.fieldNormWeight}={}){const i=new J1({getFn:n,fieldNormWeight:r});return i.setKeys(t.map(tM)),i.setSources(e),i.create(),i}function Pj(t,{getFn:e=Fe.getFn,fieldNormWeight:n=Fe.fieldNormWeight}={}){const{keys:r,records:i}=t,o=new J1({getFn:e,fieldNormWeight:n});return o.setKeys(r),o.setIndexRecords(i),o}function ff(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Fe.distance,ignoreLocation:o=Fe.ignoreLocation}={}){const s=e/t.length;if(o)return s;const a=Math.abs(r-n);return i?s+a/i:a?1:s}function Aj(t=[],e=Fe.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let s=t.length;o<s;o+=1){let a=t[o];a&&r===-1?r=o:!a&&r!==-1&&(i=o-1,i-r+1>=e&&n.push([r,i]),r=-1)}return t[o-1]&&o-r>=e&&n.push([r,o-1]),n}const Zo=32;function Cj(t,e,n,{location:r=Fe.location,distance:i=Fe.distance,threshold:o=Fe.threshold,findAllMatches:s=Fe.findAllMatches,minMatchCharLength:a=Fe.minMatchCharLength,includeMatches:u=Fe.includeMatches,ignoreLocation:l=Fe.ignoreLocation}={}){if(e.length>Zo)throw new Error(gj(Zo));const c=e.length,f=t.length,h=Math.max(0,Math.min(r,f));let d=o,g=h;const m=a>1||u,x=m?Array(f):[];let _;for(;(_=t.indexOf(e,g))>-1;){let D=ff(e,{currentLocation:_,expectedLocation:h,distance:i,ignoreLocation:l});if(d=Math.min(D,d),g=_+c,m){let F=0;for(;F<c;)x[_+F]=1,F+=1}}g=-1;let y=[],b=1,T=c+f;const R=1<<c-1;for(let D=0;D<c;D+=1){let F=0,W=T;for(;F<W;)ff(e,{errors:D,currentLocation:h+W,expectedLocation:h,distance:i,ignoreLocation:l})<=d?F=W:T=W,W=Math.floor((T-F)/2+F);T=W;let j=Math.max(1,h-W+1),H=s?f:Math.min(h+W,f)+c,pe=Array(H+2);pe[H+1]=(1<<D)-1;for(let se=H;se>=j;se-=1){let Ce=se-1,De=n[t.charAt(Ce)];if(m&&(x[Ce]=+!!De),pe[se]=(pe[se+1]<<1|1)&De,D&&(pe[se]|=(y[se+1]|y[se])<<1|1|y[se+1]),pe[se]&R&&(b=ff(e,{errors:D,currentLocation:Ce,expectedLocation:h,distance:i,ignoreLocation:l}),b<=d)){if(d=b,g=Ce,g<=h)break;j=Math.max(1,2*h-g)}}if(ff(e,{errors:D+1,currentLocation:h,expectedLocation:h,distance:i,ignoreLocation:l})>d)break;y=pe}const C={isMatch:g>=0,score:Math.max(.001,b)};if(m){const D=Aj(x,a);D.length?u&&(C.indices=D):C.isMatch=!1}return C}function Rj(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}class rM{constructor(e,{location:n=Fe.location,threshold:r=Fe.threshold,distance:i=Fe.distance,includeMatches:o=Fe.includeMatches,findAllMatches:s=Fe.findAllMatches,minMatchCharLength:a=Fe.minMatchCharLength,isCaseSensitive:u=Fe.isCaseSensitive,ignoreLocation:l=Fe.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:l},this.pattern=u?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(h,d)=>{this.chunks.push({pattern:h,alphabet:Rj(h),startIndex:d})},f=this.pattern.length;if(f>Zo){let h=0;const d=f%Zo,g=f-d;for(;h<g;)c(this.pattern.substr(h,Zo),h),h+=Zo;if(d){const m=f-Zo;c(this.pattern.substr(m),m)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let g={isMatch:!0,score:0};return r&&(g.indices=[[0,e.length-1]]),g}const{location:i,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:u,ignoreLocation:l}=this.options;let c=[],f=0,h=!1;this.chunks.forEach(({pattern:g,alphabet:m,startIndex:x})=>{const{isMatch:_,score:y,indices:b}=Cj(e,g,m,{location:i+x,distance:o,threshold:s,findAllMatches:a,minMatchCharLength:u,includeMatches:r,ignoreLocation:l});_&&(h=!0),f+=y,_&&b&&(c=[...c,...b])});let d={isMatch:h,score:h?f/this.chunks.length:1};return h&&r&&(d.indices=c),d}}class Io{constructor(e){this.pattern=e}static isMultiMatch(e){return nx(e,this.multiRegex)}static isSingleMatch(e){return nx(e,this.singleRegex)}search(){}}function nx(t,e){const n=t.match(e);return n?n[1]:null}class Lj extends Io{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Mj extends Io{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Oj extends Io{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class kj extends Io{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Ij extends Io{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Nj extends Io{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class iM extends Io{constructor(e,{location:n=Fe.location,threshold:r=Fe.threshold,distance:i=Fe.distance,includeMatches:o=Fe.includeMatches,findAllMatches:s=Fe.findAllMatches,minMatchCharLength:a=Fe.minMatchCharLength,isCaseSensitive:u=Fe.isCaseSensitive,ignoreLocation:l=Fe.ignoreLocation}={}){super(e),this._bitapSearch=new rM(e,{location:n,threshold:r,distance:i,includeMatches:o,findAllMatches:s,minMatchCharLength:a,isCaseSensitive:u,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class oM extends Io{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const i=[],o=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+o,i.push([r,n-1]);const s=!!i.length;return{isMatch:s,score:s?0:1,indices:i}}}const Nv=[Lj,oM,Oj,kj,Nj,Ij,Mj,iM],rx=Nv.length,Dj=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Fj="|";function Uj(t,e={}){return t.split(Fj).map(n=>{let r=n.trim().split(Dj).filter(o=>o&&!!o.trim()),i=[];for(let o=0,s=r.length;o<s;o+=1){const a=r[o];let u=!1,l=-1;for(;!u&&++l<rx;){const c=Nv[l];let f=c.isMultiMatch(a);f&&(i.push(new c(f,e)),u=!0)}if(!u)for(l=-1;++l<rx;){const c=Nv[l];let f=c.isSingleMatch(a);if(f){i.push(new c(f,e));break}}}return i})}const zj=new Set([iM.type,oM.type]);class Bj{constructor(e,{isCaseSensitive:n=Fe.isCaseSensitive,includeMatches:r=Fe.includeMatches,minMatchCharLength:i=Fe.minMatchCharLength,ignoreLocation:o=Fe.ignoreLocation,findAllMatches:s=Fe.findAllMatches,location:a=Fe.location,threshold:u=Fe.threshold,distance:l=Fe.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:i,findAllMatches:s,ignoreLocation:o,location:a,threshold:u,distance:l},this.pattern=n?e:e.toLowerCase(),this.query=Uj(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let o=0,s=[],a=0;for(let u=0,l=n.length;u<l;u+=1){const c=n[u];s.length=0,o=0;for(let f=0,h=c.length;f<h;f+=1){const d=c[f],{isMatch:g,indices:m,score:x}=d.search(e);if(g){if(o+=1,a+=x,r){const _=d.constructor.type;zj.has(_)?s=[...s,...m]:s.push(m)}}else{a=0,o=0,s.length=0;break}}if(o){let f={isMatch:!0,score:a/o};return r&&(f.indices=s),f}}return{isMatch:!1,score:1}}}const Dv=[];function Vj(...t){Dv.push(...t)}function Fv(t,e){for(let n=0,r=Dv.length;n<r;n+=1){let i=Dv[n];if(i.condition(t,e))return new i(t,e)}return new rM(t,e)}const bd={AND:"$and",OR:"$or"},Uv={PATH:"$path",PATTERN:"$val"},zv=t=>!!(t[bd.AND]||t[bd.OR]),$j=t=>!!t[Uv.PATH],jj=t=>!Fi(t)&&JL(t)&&!zv(t),ix=t=>({[bd.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function sM(t,e,{auto:n=!0}={}){const r=i=>{let o=Object.keys(i);const s=$j(i);if(!s&&o.length>1&&!zv(i))return r(ix(i));if(jj(i)){const u=s?i[Uv.PATH]:o[0],l=s?i[Uv.PATTERN]:i[u];if(!ci(l))throw new Error(pj(u));const c={keyId:Iv(u),pattern:l};return n&&(c.searcher=Fv(l,e)),c}let a={children:[],operator:o[0]};return o.forEach(u=>{const l=i[u];Fi(l)&&l.forEach(c=>{a.children.push(r(c))})}),a};return zv(t)||(t=ix(t)),r(t)}function Gj(t,{ignoreFieldNorm:e=Fe.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:o,score:s})=>{const a=i?i.weight:null;r*=Math.pow(s===0&&a?Number.EPSILON:s,(a||1)*(e?1:o))}),n.score=r})}function Wj(t,e){const n=t.matches;e.matches=[],ar(n)&&n.forEach(r=>{if(!ar(r.indices)||!r.indices.length)return;const{indices:i,value:o}=r;let s={indices:i,value:o};r.key&&(s.key=r.key.src),r.idx>-1&&(s.refIndex=r.idx),e.matches.push(s)})}function Hj(t,e){e.score=t.score}function Yj(t,e,{includeMatches:n=Fe.includeMatches,includeScore:r=Fe.includeScore}={}){const i=[];return n&&i.push(Wj),r&&i.push(Hj),t.map(o=>{const{idx:s}=o,a={item:e[s],refIndex:s};return i.length&&i.forEach(u=>{u(o,a)}),a})}class dc{constructor(e,n={},r){this.options={...Fe,...n},this.options.useExtendedSearch,this._keyStore=new yj(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof J1))throw new Error(dj);this._myIndex=n||nM(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){!ar(e)||(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const o=this._docs[r];e(o,r)&&(this.removeAt(r),r-=1,i-=1,n.push(o))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:o,sortFn:s,ignoreFieldNorm:a}=this.options;let u=ci(e)?ci(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Gj(u,{ignoreFieldNorm:a}),o&&u.sort(s),QL(n)&&n>-1&&(u=u.slice(0,n)),Yj(u,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){const n=Fv(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:o,i:s,n:a})=>{if(!ar(o))return;const{isMatch:u,score:l,indices:c}=n.searchIn(o);u&&i.push({item:o,idx:s,matches:[{score:l,value:o,norm:a,indices:c}]})}),i}_searchLogical(e){const n=sM(e,this.options),r=(a,u,l)=>{if(!a.children){const{keyId:f,searcher:h}=a,d=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(u,f),searcher:h});return d&&d.length?[{idx:l,item:u,matches:d}]:[]}const c=[];for(let f=0,h=a.children.length;f<h;f+=1){const d=a.children[f],g=r(d,u,l);if(g.length)c.push(...g);else if(a.operator===bd.AND)return[]}return c},i=this._myIndex.records,o={},s=[];return i.forEach(({$:a,i:u})=>{if(ar(a)){let l=r(n,a,u);l.length&&(o[u]||(o[u]={idx:u,item:a,matches:[]},s.push(o[u])),l.forEach(({matches:c})=>{o[u].matches.push(...c)}))}}),s}_searchObjectList(e){const n=Fv(e,this.options),{keys:r,records:i}=this._myIndex,o=[];return i.forEach(({$:s,i:a})=>{if(!ar(s))return;let u=[];r.forEach((l,c)=>{u.push(...this._findMatches({key:l,value:s[c],searcher:n}))}),u.length&&o.push({idx:a,item:s,matches:u})}),o}_findMatches({key:e,value:n,searcher:r}){if(!ar(n))return[];let i=[];if(Fi(n))n.forEach(({v:o,i:s,n:a})=>{if(!ar(o))return;const{isMatch:u,score:l,indices:c}=r.searchIn(o);u&&i.push({score:l,key:e,value:o,idx:s,norm:a,indices:c})});else{const{v:o,n:s}=n,{isMatch:a,score:u,indices:l}=r.searchIn(o);a&&i.push({score:u,key:e,value:o,norm:s,indices:l})}return i}}dc.version="6.6.2";dc.createIndex=nM;dc.parseIndex=Pj;dc.config=Fe;dc.parseQuery=sM;Vj(Bj);function Xj(t,e,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function qj(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ox(t[0])||!ox(t[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:t};return Xj(r,e,n)}function ox(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function aM(t,e,n){if(t!==null)for(var r,i,o,s,a,u,l,c=0,f=0,h,d=t.type,g=d==="FeatureCollection",m=d==="Feature",x=g?t.features.length:1,_=0;_<x;_++){l=g?t.features[_].geometry:m?t.geometry:t,h=l?l.type==="GeometryCollection":!1,a=h?l.geometries.length:1;for(var y=0;y<a;y++){var b=0,T=0;if(s=h?l.geometries[y]:l,s!==null){u=s.coordinates;var R=s.type;switch(c=n&&(R==="Polygon"||R==="MultiPolygon")?1:0,R){case null:break;case"Point":if(e(u,f,_,b,T)===!1)return!1;f++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(e(u[r],f,_,b,T)===!1)return!1;f++,R==="MultiPoint"&&b++}R==="LineString"&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(e(u[r][i],f,_,b,T)===!1)return!1;f++}R==="MultiLineString"&&b++,R==="Polygon"&&T++}R==="Polygon"&&b++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(T=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(e(u[r][i][o],f,_,b,T)===!1)return!1;f++}T++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(aM(s.geometries[r],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var uM={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},sx=Rt.createContext&&Rt.createContext(uM),To=globalThis&&globalThis.__assign||function(){return To=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},To.apply(this,arguments)},Zj=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function lM(t){return t&&t.map(function(e,n){return Rt.createElement(e.tag,To({key:n},e.attr),lM(e.child))})}function pc(t){return function(e){return ke(Kj,{...To({attr:To({},t.attr)},e),children:lM(t.child)})}}function Kj(t){var e=function(n){var r=t.attr,i=t.size,o=t.title,s=Zj(t,["attr","size","title"]),a=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),ps("svg",{...To({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:u,style:To(To({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),children:[o&&ke("title",{children:o}),t.children]})};return sx!==void 0?ke(sx.Consumer,{children:function(n){return e(n)}}):e(uM)}var Qj={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(t,e){(function(n,r){t.exports=r()})(nD,function(){for(var n=function(p,v,E){return v===void 0&&(v=0),E===void 0&&(E=1),p<v?v:p>E?E:p},r=n,i=function(p){p._clipped=!1,p._unclipped=p.slice(0);for(var v=0;v<=3;v++)v<3?((p[v]<0||p[v]>255)&&(p._clipped=!0),p[v]=r(p[v],0,255)):v===3&&(p[v]=r(p[v],0,1));return p},o={},s=0,a=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];s<a.length;s+=1){var u=a[s];o["[object "+u+"]"]=u.toLowerCase()}var l=function(p){return o[Object.prototype.toString.call(p)]||"object"},c=l,f=function(p,v){return v===void 0&&(v=null),p.length>=3?Array.prototype.slice.call(p):c(p[0])=="object"&&v?v.split("").filter(function(E){return p[0][E]!==void 0}).map(function(E){return p[0][E]}):p[0]},h=l,d=function(p){if(p.length<2)return null;var v=p.length-1;return h(p[v])=="string"?p[v].toLowerCase():null},g=Math.PI,m={clip_rgb:i,limit:n,type:l,unpack:f,last:d,PI:g,TWOPI:g*2,PITHIRD:g/3,DEG2RAD:g/180,RAD2DEG:180/g},x={format:{},autodetect:[]},_=m.last,y=m.clip_rgb,b=m.type,T=x,R=function(){for(var v=[],E=arguments.length;E--;)v[E]=arguments[E];var A=this;if(b(v[0])==="object"&&v[0].constructor&&v[0].constructor===this.constructor)return v[0];var k=_(v),N=!1;if(!k){N=!0,T.sorted||(T.autodetect=T.autodetect.sort(function(ee,ge){return ge.p-ee.p}),T.sorted=!0);for(var L=0,U=T.autodetect;L<U.length;L+=1){var V=U[L];if(k=V.test.apply(V,v),k)break}}if(T.format[k]){var Y=T.format[k].apply(null,N?v:v.slice(0,-1));A._rgb=y(Y)}else throw new Error("unknown format: "+v);A._rgb.length===3&&A._rgb.push(1)};R.prototype.toString=function(){return b(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var C=R,D=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(D.Color,[null].concat(p)))};D.Color=C,D.version="2.4.2";var F=D,W=m.unpack,j=Math.max,H=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=W(p,"rgb"),A=E[0],k=E[1],N=E[2];A=A/255,k=k/255,N=N/255;var L=1-j(A,j(k,N)),U=L<1?1/(1-L):0,V=(1-A-L)*U,Y=(1-k-L)*U,ee=(1-N-L)*U;return[V,Y,ee,L]},pe=H,ue=m.unpack,se=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=ue(p,"cmyk");var E=p[0],A=p[1],k=p[2],N=p[3],L=p.length>4?p[4]:1;return N===1?[0,0,0,L]:[E>=1?0:255*(1-E)*(1-N),A>=1?0:255*(1-A)*(1-N),k>=1?0:255*(1-k)*(1-N),L]},Ce=se,De=F,He=C,ae=x,ve=m.unpack,G=m.type,X=pe;He.prototype.cmyk=function(){return X(this._rgb)},De.cmyk=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(He,[null].concat(p,["cmyk"])))},ae.format.cmyk=Ce,ae.autodetect.push({p:2,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=ve(p,"cmyk"),G(p)==="array"&&p.length===4)return"cmyk"}});var O=m.unpack,q=m.last,Q=function(p){return Math.round(p*100)/100},de=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=O(p,"hsla"),A=q(p)||"lsa";return E[0]=Q(E[0]||0),E[1]=Q(E[1]*100)+"%",E[2]=Q(E[2]*100)+"%",A==="hsla"||E.length>3&&E[3]<1?(E[3]=E.length>3?E[3]:1,A="hsla"):E.length=3,A+"("+E.join(",")+")"},le=de,_e=m.unpack,be=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=_e(p,"rgba");var E=p[0],A=p[1],k=p[2];E/=255,A/=255,k/=255;var N=Math.min(E,A,k),L=Math.max(E,A,k),U=(L+N)/2,V,Y;return L===N?(V=0,Y=Number.NaN):V=U<.5?(L-N)/(L+N):(L-N)/(2-L-N),E==L?Y=(A-k)/(L-N):A==L?Y=2+(k-E)/(L-N):k==L&&(Y=4+(E-A)/(L-N)),Y*=60,Y<0&&(Y+=360),p.length>3&&p[3]!==void 0?[Y,V,U,p[3]]:[Y,V,U]},J=be,Pe=m.unpack,rt=m.last,ze=le,Ke=J,gt=Math.round,Kt=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=Pe(p,"rgba"),A=rt(p)||"rgb";return A.substr(0,3)=="hsl"?ze(Ke(E),A):(E[0]=gt(E[0]),E[1]=gt(E[1]),E[2]=gt(E[2]),(A==="rgba"||E.length>3&&E[3]<1)&&(E[3]=E.length>3?E[3]:1,A="rgba"),A+"("+E.slice(0,A==="rgb"?3:4).join(",")+")")},wt=Kt,xt=m.unpack,Z=Math.round,re=function(){for(var p,v=[],E=arguments.length;E--;)v[E]=arguments[E];v=xt(v,"hsl");var A=v[0],k=v[1],N=v[2],L,U,V;if(k===0)L=U=V=N*255;else{var Y=[0,0,0],ee=[0,0,0],ge=N<.5?N*(1+k):N+k-N*k,ne=2*N-ge,xe=A/360;Y[0]=xe+1/3,Y[1]=xe,Y[2]=xe-1/3;for(var Ee=0;Ee<3;Ee++)Y[Ee]<0&&(Y[Ee]+=1),Y[Ee]>1&&(Y[Ee]-=1),6*Y[Ee]<1?ee[Ee]=ne+(ge-ne)*6*Y[Ee]:2*Y[Ee]<1?ee[Ee]=ge:3*Y[Ee]<2?ee[Ee]=ne+(ge-ne)*(2/3-Y[Ee])*6:ee[Ee]=ne;p=[Z(ee[0]*255),Z(ee[1]*255),Z(ee[2]*255)],L=p[0],U=p[1],V=p[2]}return v.length>3?[L,U,V,v[3]]:[L,U,V,1]},fe=re,Te=fe,Ne=x,Ye=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Xe=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,et=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ut=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,it=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ct=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,It=Math.round,Vn=function(p){p=p.toLowerCase().trim();var v;if(Ne.format.named)try{return Ne.format.named(p)}catch{}if(v=p.match(Ye)){for(var E=v.slice(1,4),A=0;A<3;A++)E[A]=+E[A];return E[3]=1,E}if(v=p.match(Xe)){for(var k=v.slice(1,5),N=0;N<4;N++)k[N]=+k[N];return k}if(v=p.match(et)){for(var L=v.slice(1,4),U=0;U<3;U++)L[U]=It(L[U]*2.55);return L[3]=1,L}if(v=p.match(ut)){for(var V=v.slice(1,5),Y=0;Y<3;Y++)V[Y]=It(V[Y]*2.55);return V[3]=+V[3],V}if(v=p.match(it)){var ee=v.slice(1,4);ee[1]*=.01,ee[2]*=.01;var ge=Te(ee);return ge[3]=1,ge}if(v=p.match(ct)){var ne=v.slice(1,4);ne[1]*=.01,ne[2]*=.01;var xe=Te(ne);return xe[3]=+v[4],xe}};Vn.test=function(p){return Ye.test(p)||Xe.test(p)||et.test(p)||ut.test(p)||it.test(p)||ct.test(p)};var un=Vn,Sn=F,Zr=C,Rr=x,z=m.type,I=wt,K=un;Zr.prototype.css=function(p){return I(this._rgb,p)},Sn.css=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Zr,[null].concat(p,["css"])))},Rr.format.css=K,Rr.autodetect.push({p:5,test:function(p){for(var v=[],E=arguments.length-1;E-- >0;)v[E]=arguments[E+1];if(!v.length&&z(p)==="string"&&K.test(p))return"css"}});var ce=C,he=F,ye=x,Le=m.unpack;ye.format.gl=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=Le(p,"rgba");return E[0]*=255,E[1]*=255,E[2]*=255,E},he.gl=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(ce,[null].concat(p,["gl"])))},ce.prototype.gl=function(){var p=this._rgb;return[p[0]/255,p[1]/255,p[2]/255,p[3]]};var Me=m.unpack,Re=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=Me(p,"rgb"),A=E[0],k=E[1],N=E[2],L=Math.min(A,k,N),U=Math.max(A,k,N),V=U-L,Y=V*100/255,ee=L/(255-V)*100,ge;return V===0?ge=Number.NaN:(A===U&&(ge=(k-N)/V),k===U&&(ge=2+(N-A)/V),N===U&&(ge=4+(A-k)/V),ge*=60,ge<0&&(ge+=360)),[ge,Y,ee]},Oe=Re,qe=m.unpack,Yt=Math.floor,Lt=function(){for(var p,v,E,A,k,N,L=[],U=arguments.length;U--;)L[U]=arguments[U];L=qe(L,"hcg");var V=L[0],Y=L[1],ee=L[2],ge,ne,xe;ee=ee*255;var Ee=Y*255;if(Y===0)ge=ne=xe=ee;else{V===360&&(V=0),V>360&&(V-=360),V<0&&(V+=360),V/=60;var Ge=Yt(V),Qe=V-Ge,ot=ee*(1-Y),ft=ot+Ee*(1-Qe),gn=ot+Ee*Qe,cn=ot+Ee;switch(Ge){case 0:p=[cn,gn,ot],ge=p[0],ne=p[1],xe=p[2];break;case 1:v=[ft,cn,ot],ge=v[0],ne=v[1],xe=v[2];break;case 2:E=[ot,cn,gn],ge=E[0],ne=E[1],xe=E[2];break;case 3:A=[ot,ft,cn],ge=A[0],ne=A[1],xe=A[2];break;case 4:k=[gn,ot,cn],ge=k[0],ne=k[1],xe=k[2];break;case 5:N=[cn,ot,ft],ge=N[0],ne=N[1],xe=N[2];break}}return[ge,ne,xe,L.length>3?L[3]:1]},xn=Lt,kn=m.unpack,Kr=m.type,Lr=F,Qr=C,Jr=x,Ac=Oe;Qr.prototype.hcg=function(){return Ac(this._rgb)},Lr.hcg=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Qr,[null].concat(p,["hcg"])))},Jr.format.hcg=xn,Jr.autodetect.push({p:1,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=kn(p,"hcg"),Kr(p)==="array"&&p.length===3)return"hcg"}});var pu=m.unpack,Rg=m.last,No=Math.round,Lg=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=pu(p,"rgba"),A=E[0],k=E[1],N=E[2],L=E[3],U=Rg(p)||"auto";L===void 0&&(L=1),U==="auto"&&(U=L<1?"rgba":"rgb"),A=No(A),k=No(k),N=No(N);var V=A<<16|k<<8|N,Y="000000"+V.toString(16);Y=Y.substr(Y.length-6);var ee="0"+No(L*255).toString(16);switch(ee=ee.substr(ee.length-2),U.toLowerCase()){case"rgba":return"#"+Y+ee;case"argb":return"#"+ee+Y;default:return"#"+Y}},gu=Lg,Cc=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Rc=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Lc=function(p){if(p.match(Cc)){(p.length===4||p.length===7)&&(p=p.substr(1)),p.length===3&&(p=p.split(""),p=p[0]+p[0]+p[1]+p[1]+p[2]+p[2]);var v=parseInt(p,16),E=v>>16,A=v>>8&255,k=v&255;return[E,A,k,1]}if(p.match(Rc)){(p.length===5||p.length===9)&&(p=p.substr(1)),p.length===4&&(p=p.split(""),p=p[0]+p[0]+p[1]+p[1]+p[2]+p[2]+p[3]+p[3]);var N=parseInt(p,16),L=N>>24&255,U=N>>16&255,V=N>>8&255,Y=Math.round((N&255)/255*100)/100;return[L,U,V,Y]}throw new Error("unknown hex color: "+p)},Ls=Lc,wi=F,Yi=C,Do=m.type,Fo=x,mu=gu;Yi.prototype.hex=function(p){return mu(this._rgb,p)},wi.hex=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Yi,[null].concat(p,["hex"])))},Fo.format.hex=Ls,Fo.autodetect.push({p:4,test:function(p){for(var v=[],E=arguments.length-1;E-- >0;)v[E]=arguments[E+1];if(!v.length&&Do(p)==="string"&&[3,4,5,6,7,8,9].indexOf(p.length)>=0)return"hex"}});var Mg=m.unpack,Mc=m.TWOPI,Ms=Math.min,$n=Math.sqrt,Xi=Math.acos,ei=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=Mg(p,"rgb"),A=E[0],k=E[1],N=E[2];A/=255,k/=255,N/=255;var L,U=Ms(A,k,N),V=(A+k+N)/3,Y=V>0?1-U/V:0;return Y===0?L=NaN:(L=(A-k+(A-N))/2,L/=$n((A-k)*(A-k)+(A-N)*(k-N)),L=Xi(L),N>k&&(L=Mc-L),L/=Mc),[L*360,Y,V]},Mr=ei,Uo=m.unpack,jn=m.limit,Tn=m.TWOPI,Os=m.PITHIRD,Ei=Math.cos,ks=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=Uo(p,"hsi");var E=p[0],A=p[1],k=p[2],N,L,U;return isNaN(E)&&(E=0),isNaN(A)&&(A=0),E>360&&(E-=360),E<0&&(E+=360),E/=360,E<1/3?(U=(1-A)/3,N=(1+A*Ei(Tn*E)/Ei(Os-Tn*E))/3,L=1-(U+N)):E<2/3?(E-=1/3,N=(1-A)/3,L=(1+A*Ei(Tn*E)/Ei(Os-Tn*E))/3,U=1-(N+L)):(E-=2/3,L=(1-A)/3,U=(1+A*Ei(Tn*E)/Ei(Os-Tn*E))/3,N=1-(L+U)),N=jn(k*N*3),L=jn(k*L*3),U=jn(k*U*3),[N*255,L*255,U*255,p.length>3?p[3]:1]},er=ks,Is=m.unpack,vu=m.type,yu=F,Ns=C,Ds=x,Fs=Mr;Ns.prototype.hsi=function(){return Fs(this._rgb)},yu.hsi=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Ns,[null].concat(p,["hsi"])))},Ds.format.hsi=er,Ds.autodetect.push({p:2,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=Is(p,"hsi"),vu(p)==="array"&&p.length===3)return"hsi"}});var Or=m.unpack,Og=m.type,Oc=F,Us=C,_u=x,kg=J;Us.prototype.hsl=function(){return kg(this._rgb)},Oc.hsl=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Us,[null].concat(p,["hsl"])))},_u.format.hsl=fe,_u.autodetect.push({p:2,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=Or(p,"hsl"),Og(p)==="array"&&p.length===3)return"hsl"}});var Ig=m.unpack,S=Math.min,P=Math.max,M=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=Ig(p,"rgb");var E=p[0],A=p[1],k=p[2],N=S(E,A,k),L=P(E,A,k),U=L-N,V,Y,ee;return ee=L/255,L===0?(V=Number.NaN,Y=0):(Y=U/L,E===L&&(V=(A-k)/U),A===L&&(V=2+(k-E)/U),k===L&&(V=4+(E-A)/U),V*=60,V<0&&(V+=360)),[V,Y,ee]},$=M,te=m.unpack,we=Math.floor,je=function(){for(var p,v,E,A,k,N,L=[],U=arguments.length;U--;)L[U]=arguments[U];L=te(L,"hsv");var V=L[0],Y=L[1],ee=L[2],ge,ne,xe;if(ee*=255,Y===0)ge=ne=xe=ee;else{V===360&&(V=0),V>360&&(V-=360),V<0&&(V+=360),V/=60;var Ee=we(V),Ge=V-Ee,Qe=ee*(1-Y),ot=ee*(1-Y*Ge),ft=ee*(1-Y*(1-Ge));switch(Ee){case 0:p=[ee,ft,Qe],ge=p[0],ne=p[1],xe=p[2];break;case 1:v=[ot,ee,Qe],ge=v[0],ne=v[1],xe=v[2];break;case 2:E=[Qe,ee,ft],ge=E[0],ne=E[1],xe=E[2];break;case 3:A=[Qe,ot,ee],ge=A[0],ne=A[1],xe=A[2];break;case 4:k=[ft,Qe,ee],ge=k[0],ne=k[1],xe=k[2];break;case 5:N=[ee,Qe,ot],ge=N[0],ne=N[1],xe=N[2];break}}return[ge,ne,xe,L.length>3?L[3]:1]},Qt=je,nn=m.unpack,pn=m.type,vr=F,Xb=C,qb=x,ik=$;Xb.prototype.hsv=function(){return ik(this._rgb)},vr.hsv=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Xb,[null].concat(p,["hsv"])))},qb.format.hsv=Qt,qb.autodetect.push({p:2,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=nn(p,"hsv"),pn(p)==="array"&&p.length===3)return"hsv"}});var kc={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},zs=kc,ok=m.unpack,Zb=Math.pow,sk=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=ok(p,"rgb"),A=E[0],k=E[1],N=E[2],L=ak(A,k,N),U=L[0],V=L[1],Y=L[2],ee=116*V-16;return[ee<0?0:ee,500*(U-V),200*(V-Y)]},Ng=function(p){return(p/=255)<=.04045?p/12.92:Zb((p+.055)/1.055,2.4)},Dg=function(p){return p>zs.t3?Zb(p,1/3):p/zs.t2+zs.t0},ak=function(p,v,E){p=Ng(p),v=Ng(v),E=Ng(E);var A=Dg((.4124564*p+.3575761*v+.1804375*E)/zs.Xn),k=Dg((.2126729*p+.7151522*v+.072175*E)/zs.Yn),N=Dg((.0193339*p+.119192*v+.9503041*E)/zs.Zn);return[A,k,N]},Kb=sk,Bs=kc,uk=m.unpack,lk=Math.pow,ck=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=uk(p,"lab");var E=p[0],A=p[1],k=p[2],N,L,U,V,Y,ee;return L=(E+16)/116,N=isNaN(A)?L:L+A/500,U=isNaN(k)?L:L-k/200,L=Bs.Yn*Ug(L),N=Bs.Xn*Ug(N),U=Bs.Zn*Ug(U),V=Fg(3.2404542*N-1.5371385*L-.4985314*U),Y=Fg(-.969266*N+1.8760108*L+.041556*U),ee=Fg(.0556434*N-.2040259*L+1.0572252*U),[V,Y,ee,p.length>3?p[3]:1]},Fg=function(p){return 255*(p<=.00304?12.92*p:1.055*lk(p,1/2.4)-.055)},Ug=function(p){return p>Bs.t1?p*p*p:Bs.t2*(p-Bs.t0)},Qb=ck,fk=m.unpack,hk=m.type,dk=F,Jb=C,ew=x,pk=Kb;Jb.prototype.lab=function(){return pk(this._rgb)},dk.lab=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Jb,[null].concat(p,["lab"])))},ew.format.lab=Qb,ew.autodetect.push({p:2,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=fk(p,"lab"),hk(p)==="array"&&p.length===3)return"lab"}});var gk=m.unpack,mk=m.RAD2DEG,vk=Math.sqrt,yk=Math.atan2,_k=Math.round,bk=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=gk(p,"lab"),A=E[0],k=E[1],N=E[2],L=vk(k*k+N*N),U=(yk(N,k)*mk+360)%360;return _k(L*1e4)===0&&(U=Number.NaN),[A,L,U]},tw=bk,wk=m.unpack,Ek=Kb,Sk=tw,xk=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=wk(p,"rgb"),A=E[0],k=E[1],N=E[2],L=Ek(A,k,N),U=L[0],V=L[1],Y=L[2];return Sk(U,V,Y)},Tk=xk,Pk=m.unpack,Ak=m.DEG2RAD,Ck=Math.sin,Rk=Math.cos,Lk=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=Pk(p,"lch"),A=E[0],k=E[1],N=E[2];return isNaN(N)&&(N=0),N=N*Ak,[A,Rk(N)*k,Ck(N)*k]},nw=Lk,Mk=m.unpack,Ok=nw,kk=Qb,Ik=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=Mk(p,"lch");var E=p[0],A=p[1],k=p[2],N=Ok(E,A,k),L=N[0],U=N[1],V=N[2],Y=kk(L,U,V),ee=Y[0],ge=Y[1],ne=Y[2];return[ee,ge,ne,p.length>3?p[3]:1]},rw=Ik,Nk=m.unpack,Dk=rw,Fk=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=Nk(p,"hcl").reverse();return Dk.apply(void 0,E)},Uk=Fk,zk=m.unpack,Bk=m.type,iw=F,Ic=C,zg=x,ow=Tk;Ic.prototype.lch=function(){return ow(this._rgb)},Ic.prototype.hcl=function(){return ow(this._rgb).reverse()},iw.lch=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Ic,[null].concat(p,["lch"])))},iw.hcl=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Ic,[null].concat(p,["hcl"])))},zg.format.lch=rw,zg.format.hcl=Uk,["lch","hcl"].forEach(function(p){return zg.autodetect.push({p:2,test:function(){for(var v=[],E=arguments.length;E--;)v[E]=arguments[E];if(v=zk(v,p),Bk(v)==="array"&&v.length===3)return p}})});var Vk={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},sw=Vk,$k=C,aw=x,jk=m.type,bu=sw,Gk=Ls,Wk=gu;$k.prototype.name=function(){for(var p=Wk(this._rgb,"rgb"),v=0,E=Object.keys(bu);v<E.length;v+=1){var A=E[v];if(bu[A]===p)return A.toLowerCase()}return p},aw.format.named=function(p){if(p=p.toLowerCase(),bu[p])return Gk(bu[p]);throw new Error("unknown color name: "+p)},aw.autodetect.push({p:5,test:function(p){for(var v=[],E=arguments.length-1;E-- >0;)v[E]=arguments[E+1];if(!v.length&&jk(p)==="string"&&bu[p.toLowerCase()])return"named"}});var Hk=m.unpack,Yk=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=Hk(p,"rgb"),A=E[0],k=E[1],N=E[2];return(A<<16)+(k<<8)+N},Xk=Yk,qk=m.type,Zk=function(p){if(qk(p)=="number"&&p>=0&&p<=16777215){var v=p>>16,E=p>>8&255,A=p&255;return[v,E,A,1]}throw new Error("unknown num color: "+p)},Kk=Zk,Qk=F,uw=C,lw=x,Jk=m.type,eI=Xk;uw.prototype.num=function(){return eI(this._rgb)},Qk.num=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(uw,[null].concat(p,["num"])))},lw.format.num=Kk,lw.autodetect.push({p:5,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p.length===1&&Jk(p[0])==="number"&&p[0]>=0&&p[0]<=16777215)return"num"}});var tI=F,Bg=C,cw=x,fw=m.unpack,hw=m.type,dw=Math.round;Bg.prototype.rgb=function(p){return p===void 0&&(p=!0),p===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(dw)},Bg.prototype.rgba=function(p){return p===void 0&&(p=!0),this._rgb.slice(0,4).map(function(v,E){return E<3?p===!1?v:dw(v):v})},tI.rgb=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Bg,[null].concat(p,["rgb"])))},cw.format.rgb=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=fw(p,"rgba");return E[3]===void 0&&(E[3]=1),E},cw.autodetect.push({p:3,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=fw(p,"rgba"),hw(p)==="array"&&(p.length===3||p.length===4&&hw(p[3])=="number"&&p[3]>=0&&p[3]<=1))return"rgb"}});var Nc=Math.log,nI=function(p){var v=p/100,E,A,k;return v<66?(E=255,A=v<6?0:-155.25485562709179-.44596950469579133*(A=v-2)+104.49216199393888*Nc(A),k=v<20?0:-254.76935184120902+.8274096064007395*(k=v-10)+115.67994401066147*Nc(k)):(E=351.97690566805693+.114206453784165*(E=v-55)-40.25366309332127*Nc(E),A=325.4494125711974+.07943456536662342*(A=v-50)-28.0852963507957*Nc(A),k=255),[E,A,k,1]},pw=nI,rI=pw,iI=m.unpack,oI=Math.round,sI=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];for(var E=iI(p,"rgb"),A=E[0],k=E[2],N=1e3,L=4e4,U=.4,V;L-N>U;){V=(L+N)*.5;var Y=rI(V);Y[2]/Y[0]>=k/A?L=V:N=V}return oI(V)},aI=sI,Vg=F,Dc=C,$g=x,uI=aI;Dc.prototype.temp=Dc.prototype.kelvin=Dc.prototype.temperature=function(){return uI(this._rgb)},Vg.temp=Vg.kelvin=Vg.temperature=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(Dc,[null].concat(p,["temp"])))},$g.format.temp=$g.format.kelvin=$g.format.temperature=pw;var lI=m.unpack,jg=Math.cbrt,cI=Math.pow,fI=Math.sign,hI=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=lI(p,"rgb"),A=E[0],k=E[1],N=E[2],L=[Gg(A/255),Gg(k/255),Gg(N/255)],U=L[0],V=L[1],Y=L[2],ee=jg(.4122214708*U+.5363325363*V+.0514459929*Y),ge=jg(.2119034982*U+.6806995451*V+.1073969566*Y),ne=jg(.0883024619*U+.2817188376*V+.6299787005*Y);return[.2104542553*ee+.793617785*ge-.0040720468*ne,1.9779984951*ee-2.428592205*ge+.4505937099*ne,.0259040371*ee+.7827717662*ge-.808675766*ne]},gw=hI;function Gg(p){var v=Math.abs(p);return v<.04045?p/12.92:(fI(p)||1)*cI((v+.055)/1.055,2.4)}var dI=m.unpack,Fc=Math.pow,pI=Math.sign,gI=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=dI(p,"lab");var E=p[0],A=p[1],k=p[2],N=Fc(E+.3963377774*A+.2158037573*k,3),L=Fc(E-.1055613458*A-.0638541728*k,3),U=Fc(E-.0894841775*A-1.291485548*k,3);return[255*Wg(4.0767416621*N-3.3077115913*L+.2309699292*U),255*Wg(-1.2684380046*N+2.6097574011*L-.3413193965*U),255*Wg(-.0041960863*N-.7034186147*L+1.707614701*U),p.length>3?p[3]:1]},mw=gI;function Wg(p){var v=Math.abs(p);return v>.0031308?(pI(p)||1)*(1.055*Fc(v,1/2.4)-.055):p*12.92}var mI=m.unpack,vI=m.type,yI=F,vw=C,yw=x,_I=gw;vw.prototype.oklab=function(){return _I(this._rgb)},yI.oklab=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(vw,[null].concat(p,["oklab"])))},yw.format.oklab=mw,yw.autodetect.push({p:3,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=mI(p,"oklab"),vI(p)==="array"&&p.length===3)return"oklab"}});var bI=m.unpack,wI=gw,EI=tw,SI=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];var E=bI(p,"rgb"),A=E[0],k=E[1],N=E[2],L=wI(A,k,N),U=L[0],V=L[1],Y=L[2];return EI(U,V,Y)},xI=SI,TI=m.unpack,PI=nw,AI=mw,CI=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];p=TI(p,"lch");var E=p[0],A=p[1],k=p[2],N=PI(E,A,k),L=N[0],U=N[1],V=N[2],Y=AI(L,U,V),ee=Y[0],ge=Y[1],ne=Y[2];return[ee,ge,ne,p.length>3?p[3]:1]},RI=CI,LI=m.unpack,MI=m.type,OI=F,_w=C,bw=x,kI=xI;_w.prototype.oklch=function(){return kI(this._rgb)},OI.oklch=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];return new(Function.prototype.bind.apply(_w,[null].concat(p,["oklch"])))},bw.format.oklch=RI,bw.autodetect.push({p:3,test:function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];if(p=LI(p,"oklch"),MI(p)==="array"&&p.length===3)return"oklch"}});var ww=C,II=m.type;ww.prototype.alpha=function(p,v){return v===void 0&&(v=!1),p!==void 0&&II(p)==="number"?v?(this._rgb[3]=p,this):new ww([this._rgb[0],this._rgb[1],this._rgb[2],p],"rgb"):this._rgb[3]};var NI=C;NI.prototype.clipped=function(){return this._rgb._clipped||!1};var zo=C,DI=kc;zo.prototype.darken=function(p){p===void 0&&(p=1);var v=this,E=v.lab();return E[0]-=DI.Kn*p,new zo(E,"lab").alpha(v.alpha(),!0)},zo.prototype.brighten=function(p){return p===void 0&&(p=1),this.darken(-p)},zo.prototype.darker=zo.prototype.darken,zo.prototype.brighter=zo.prototype.brighten;var FI=C;FI.prototype.get=function(p){var v=p.split("."),E=v[0],A=v[1],k=this[E]();if(A){var N=E.indexOf(A)-(E.substr(0,2)==="ok"?2:0);if(N>-1)return k[N];throw new Error("unknown channel "+A+" in mode "+E)}else return k};var Vs=C,UI=m.type,zI=Math.pow,BI=1e-7,VI=20;Vs.prototype.luminance=function(p){if(p!==void 0&&UI(p)==="number"){if(p===0)return new Vs([0,0,0,this._rgb[3]],"rgb");if(p===1)return new Vs([255,255,255,this._rgb[3]],"rgb");var v=this.luminance(),E="rgb",A=VI,k=function(L,U){var V=L.interpolate(U,.5,E),Y=V.luminance();return Math.abs(p-Y)<BI||!A--?V:Y>p?k(L,V):k(V,U)},N=(v>p?k(new Vs([0,0,0]),this):k(this,new Vs([255,255,255]))).rgb();return new Vs(N.concat([this._rgb[3]]))}return $I.apply(void 0,this._rgb.slice(0,3))};var $I=function(p,v,E){return p=Hg(p),v=Hg(v),E=Hg(E),.2126*p+.7152*v+.0722*E},Hg=function(p){return p/=255,p<=.03928?p/12.92:zI((p+.055)/1.055,2.4)},tr={},Ew=C,Sw=m.type,Uc=tr,xw=function(p,v,E){E===void 0&&(E=.5);for(var A=[],k=arguments.length-3;k-- >0;)A[k]=arguments[k+3];var N=A[0]||"lrgb";if(!Uc[N]&&!A.length&&(N=Object.keys(Uc)[0]),!Uc[N])throw new Error("interpolation mode "+N+" is not defined");return Sw(p)!=="object"&&(p=new Ew(p)),Sw(v)!=="object"&&(v=new Ew(v)),Uc[N](p,v,E).alpha(p.alpha()+E*(v.alpha()-p.alpha()))},Tw=C,jI=xw;Tw.prototype.mix=Tw.prototype.interpolate=function(p,v){v===void 0&&(v=.5);for(var E=[],A=arguments.length-2;A-- >0;)E[A]=arguments[A+2];return jI.apply(void 0,[this,p,v].concat(E))};var Pw=C;Pw.prototype.premultiply=function(p){p===void 0&&(p=!1);var v=this._rgb,E=v[3];return p?(this._rgb=[v[0]*E,v[1]*E,v[2]*E,E],this):new Pw([v[0]*E,v[1]*E,v[2]*E,E],"rgb")};var Yg=C,GI=kc;Yg.prototype.saturate=function(p){p===void 0&&(p=1);var v=this,E=v.lch();return E[1]+=GI.Kn*p,E[1]<0&&(E[1]=0),new Yg(E,"lch").alpha(v.alpha(),!0)},Yg.prototype.desaturate=function(p){return p===void 0&&(p=1),this.saturate(-p)};var Aw=C,Cw=m.type;Aw.prototype.set=function(p,v,E){E===void 0&&(E=!1);var A=p.split("."),k=A[0],N=A[1],L=this[k]();if(N){var U=k.indexOf(N)-(k.substr(0,2)==="ok"?2:0);if(U>-1){if(Cw(v)=="string")switch(v.charAt(0)){case"+":L[U]+=+v;break;case"-":L[U]+=+v;break;case"*":L[U]*=+v.substr(1);break;case"/":L[U]/=+v.substr(1);break;default:L[U]=+v}else if(Cw(v)==="number")L[U]=v;else throw new Error("unsupported value for Color.set");var V=new Aw(L,k);return E?(this._rgb=V._rgb,this):V}throw new Error("unknown channel "+N+" in mode "+k)}else return L};var WI=C,HI=function(p,v,E){var A=p._rgb,k=v._rgb;return new WI(A[0]+E*(k[0]-A[0]),A[1]+E*(k[1]-A[1]),A[2]+E*(k[2]-A[2]),"rgb")};tr.rgb=HI;var YI=C,Xg=Math.sqrt,$s=Math.pow,XI=function(p,v,E){var A=p._rgb,k=A[0],N=A[1],L=A[2],U=v._rgb,V=U[0],Y=U[1],ee=U[2];return new YI(Xg($s(k,2)*(1-E)+$s(V,2)*E),Xg($s(N,2)*(1-E)+$s(Y,2)*E),Xg($s(L,2)*(1-E)+$s(ee,2)*E),"rgb")};tr.lrgb=XI;var qI=C,ZI=function(p,v,E){var A=p.lab(),k=v.lab();return new qI(A[0]+E*(k[0]-A[0]),A[1]+E*(k[1]-A[1]),A[2]+E*(k[2]-A[2]),"lab")};tr.lab=ZI;var Rw=C,js=function(p,v,E,A){var k,N,L,U;A==="hsl"?(L=p.hsl(),U=v.hsl()):A==="hsv"?(L=p.hsv(),U=v.hsv()):A==="hcg"?(L=p.hcg(),U=v.hcg()):A==="hsi"?(L=p.hsi(),U=v.hsi()):A==="lch"||A==="hcl"?(A="hcl",L=p.hcl(),U=v.hcl()):A==="oklch"&&(L=p.oklch().reverse(),U=v.oklch().reverse());var V,Y,ee,ge,ne,xe;(A.substr(0,1)==="h"||A==="oklch")&&(k=L,V=k[0],ee=k[1],ne=k[2],N=U,Y=N[0],ge=N[1],xe=N[2]);var Ee,Ge,Qe,ot;return!isNaN(V)&&!isNaN(Y)?(Y>V&&Y-V>180?ot=Y-(V+360):Y<V&&V-Y>180?ot=Y+360-V:ot=Y-V,Ge=V+E*ot):isNaN(V)?isNaN(Y)?Ge=Number.NaN:(Ge=Y,(ne==1||ne==0)&&A!="hsv"&&(Ee=ge)):(Ge=V,(xe==1||xe==0)&&A!="hsv"&&(Ee=ee)),Ee===void 0&&(Ee=ee+E*(ge-ee)),Qe=ne+E*(xe-ne),A==="oklch"?new Rw([Qe,Ee,Ge],A):new Rw([Ge,Ee,Qe],A)},KI=js,Lw=function(p,v,E){return KI(p,v,E,"lch")};tr.lch=Lw,tr.hcl=Lw;var QI=C,JI=function(p,v,E){var A=p.num(),k=v.num();return new QI(A+E*(k-A),"num")};tr.num=JI;var eN=js,tN=function(p,v,E){return eN(p,v,E,"hcg")};tr.hcg=tN;var nN=js,rN=function(p,v,E){return nN(p,v,E,"hsi")};tr.hsi=rN;var iN=js,oN=function(p,v,E){return iN(p,v,E,"hsl")};tr.hsl=oN;var sN=js,aN=function(p,v,E){return sN(p,v,E,"hsv")};tr.hsv=aN;var uN=C,lN=function(p,v,E){var A=p.oklab(),k=v.oklab();return new uN(A[0]+E*(k[0]-A[0]),A[1]+E*(k[1]-A[1]),A[2]+E*(k[2]-A[2]),"oklab")};tr.oklab=lN;var cN=js,fN=function(p,v,E){return cN(p,v,E,"oklch")};tr.oklch=fN;var qg=C,hN=m.clip_rgb,Zg=Math.pow,Kg=Math.sqrt,Qg=Math.PI,Mw=Math.cos,Ow=Math.sin,dN=Math.atan2,pN=function(p,v,E){v===void 0&&(v="lrgb"),E===void 0&&(E=null);var A=p.length;E||(E=Array.from(new Array(A)).map(function(){return 1}));var k=A/E.reduce(function(Ge,Qe){return Ge+Qe});if(E.forEach(function(Ge,Qe){E[Qe]*=k}),p=p.map(function(Ge){return new qg(Ge)}),v==="lrgb")return gN(p,E);for(var N=p.shift(),L=N.get(v),U=[],V=0,Y=0,ee=0;ee<L.length;ee++)if(L[ee]=(L[ee]||0)*E[0],U.push(isNaN(L[ee])?0:E[0]),v.charAt(ee)==="h"&&!isNaN(L[ee])){var ge=L[ee]/180*Qg;V+=Mw(ge)*E[0],Y+=Ow(ge)*E[0]}var ne=N.alpha()*E[0];p.forEach(function(Ge,Qe){var ot=Ge.get(v);ne+=Ge.alpha()*E[Qe+1];for(var ft=0;ft<L.length;ft++)if(!isNaN(ot[ft]))if(U[ft]+=E[Qe+1],v.charAt(ft)==="h"){var gn=ot[ft]/180*Qg;V+=Mw(gn)*E[Qe+1],Y+=Ow(gn)*E[Qe+1]}else L[ft]+=ot[ft]*E[Qe+1]});for(var xe=0;xe<L.length;xe++)if(v.charAt(xe)==="h"){for(var Ee=dN(Y/U[xe],V/U[xe])/Qg*180;Ee<0;)Ee+=360;for(;Ee>=360;)Ee-=360;L[xe]=Ee}else L[xe]=L[xe]/U[xe];return ne/=A,new qg(L,v).alpha(ne>.99999?1:ne,!0)},gN=function(p,v){for(var E=p.length,A=[0,0,0,0],k=0;k<p.length;k++){var N=p[k],L=v[k]/E,U=N._rgb;A[0]+=Zg(U[0],2)*L,A[1]+=Zg(U[1],2)*L,A[2]+=Zg(U[2],2)*L,A[3]+=U[3]*L}return A[0]=Kg(A[0]),A[1]=Kg(A[1]),A[2]=Kg(A[2]),A[3]>.9999999&&(A[3]=1),new qg(hN(A))},kr=F,Gs=m.type,mN=Math.pow,Jg=function(p){var v="rgb",E=kr("#ccc"),A=0,k=[0,1],N=[],L=[0,0],U=!1,V=[],Y=!1,ee=0,ge=1,ne=!1,xe={},Ee=!0,Ge=1,Qe=function(ie){if(ie=ie||["#fff","#000"],ie&&Gs(ie)==="string"&&kr.brewer&&kr.brewer[ie.toLowerCase()]&&(ie=kr.brewer[ie.toLowerCase()]),Gs(ie)==="array"){ie.length===1&&(ie=[ie[0],ie[0]]),ie=ie.slice(0);for(var Ie=0;Ie<ie.length;Ie++)ie[Ie]=kr(ie[Ie]);N.length=0;for(var Ze=0;Ze<ie.length;Ze++)N.push(Ze/(ie.length-1))}return Gn(),V=ie},ot=function(ie){if(U!=null){for(var Ie=U.length-1,Ze=0;Ze<Ie&&ie>=U[Ze];)Ze++;return Ze-1}return 0},ft=function(ie){return ie},gn=function(ie){return ie},cn=function(ie,Ie){var Ze,We;if(Ie==null&&(Ie=!1),isNaN(ie)||ie===null)return E;if(Ie)We=ie;else if(U&&U.length>2){var mn=ot(ie);We=mn/(U.length-2)}else ge!==ee?We=(ie-ee)/(ge-ee):We=1;We=gn(We),Ie||(We=ft(We)),Ge!==1&&(We=mN(We,Ge)),We=L[0]+We*(1-L[0]-L[1]),We=Math.min(1,Math.max(0,We));var Tt=Math.floor(We*1e4);if(Ee&&xe[Tt])Ze=xe[Tt];else{if(Gs(V)==="array")for(var st=0;st<N.length;st++){var dt=N[st];if(We<=dt){Ze=V[st];break}if(We>=dt&&st===N.length-1){Ze=V[st];break}if(We>dt&&We<N[st+1]){We=(We-dt)/(N[st+1]-dt),Ze=kr.interpolate(V[st],V[st+1],We,v);break}}else Gs(V)==="function"&&(Ze=V(We));Ee&&(xe[Tt]=Ze)}return Ze},Gn=function(){return xe={}};Qe(p);var nt=function(ie){var Ie=kr(cn(ie));return Y&&Ie[Y]?Ie[Y]():Ie};return nt.classes=function(ie){if(ie!=null){if(Gs(ie)==="array")U=ie,k=[ie[0],ie[ie.length-1]];else{var Ie=kr.analyze(k);ie===0?U=[Ie.min,Ie.max]:U=kr.limits(Ie,"e",ie)}return nt}return U},nt.domain=function(ie){if(!arguments.length)return k;ee=ie[0],ge=ie[ie.length-1],N=[];var Ie=V.length;if(ie.length===Ie&&ee!==ge)for(var Ze=0,We=Array.from(ie);Ze<We.length;Ze+=1){var mn=We[Ze];N.push((mn-ee)/(ge-ee))}else{for(var Tt=0;Tt<Ie;Tt++)N.push(Tt/(Ie-1));if(ie.length>2){var st=ie.map(function(pt,mt){return mt/(ie.length-1)}),dt=ie.map(function(pt){return(pt-ee)/(ge-ee)});dt.every(function(pt,mt){return st[mt]===pt})||(gn=function(pt){if(pt<=0||pt>=1)return pt;for(var mt=0;pt>=dt[mt+1];)mt++;var Nr=(pt-dt[mt])/(dt[mt+1]-dt[mt]),Ki=st[mt]+Nr*(st[mt+1]-st[mt]);return Ki})}}return k=[ee,ge],nt},nt.mode=function(ie){return arguments.length?(v=ie,Gn(),nt):v},nt.range=function(ie,Ie){return Qe(ie),nt},nt.out=function(ie){return Y=ie,nt},nt.spread=function(ie){return arguments.length?(A=ie,nt):A},nt.correctLightness=function(ie){return ie==null&&(ie=!0),ne=ie,Gn(),ne?ft=function(Ie){for(var Ze=cn(0,!0).lab()[0],We=cn(1,!0).lab()[0],mn=Ze>We,Tt=cn(Ie,!0).lab()[0],st=Ze+(We-Ze)*Ie,dt=Tt-st,pt=0,mt=1,Nr=20;Math.abs(dt)>.01&&Nr-- >0;)(function(){return mn&&(dt*=-1),dt<0?(pt=Ie,Ie+=(mt-Ie)*.5):(mt=Ie,Ie+=(pt-Ie)*.5),Tt=cn(Ie,!0).lab()[0],dt=Tt-st})();return Ie}:ft=function(Ie){return Ie},nt},nt.padding=function(ie){return ie!=null?(Gs(ie)==="number"&&(ie=[ie,ie]),L=ie,nt):L},nt.colors=function(ie,Ie){arguments.length<2&&(Ie="hex");var Ze=[];if(arguments.length===0)Ze=V.slice(0);else if(ie===1)Ze=[nt(.5)];else if(ie>1){var We=k[0],mn=k[1]-We;Ze=vN(0,ie,!1).map(function(mt){return nt(We+mt/(ie-1)*mn)})}else{p=[];var Tt=[];if(U&&U.length>2)for(var st=1,dt=U.length,pt=1<=dt;pt?st<dt:st>dt;pt?st++:st--)Tt.push((U[st-1]+U[st])*.5);else Tt=k;Ze=Tt.map(function(mt){return nt(mt)})}return kr[Ie]&&(Ze=Ze.map(function(mt){return mt[Ie]()})),Ze},nt.cache=function(ie){return ie!=null?(Ee=ie,nt):Ee},nt.gamma=function(ie){return ie!=null?(Ge=ie,nt):Ge},nt.nodata=function(ie){return ie!=null?(E=kr(ie),nt):E},nt};function vN(p,v,E){for(var A=[],k=p<v,N=E?k?v+1:v-1:v,L=p;k?L<N:L>N;k?L++:L--)A.push(L);return A}var wu=C,yN=Jg,_N=function(p){for(var v=[1,1],E=1;E<p;E++){for(var A=[1],k=1;k<=v.length;k++)A[k]=(v[k]||0)+v[k-1];v=A}return v},bN=function(p){var v,E,A,k,N,L,U;if(p=p.map(function(ne){return new wu(ne)}),p.length===2)v=p.map(function(ne){return ne.lab()}),N=v[0],L=v[1],k=function(ne){var xe=[0,1,2].map(function(Ee){return N[Ee]+ne*(L[Ee]-N[Ee])});return new wu(xe,"lab")};else if(p.length===3)E=p.map(function(ne){return ne.lab()}),N=E[0],L=E[1],U=E[2],k=function(ne){var xe=[0,1,2].map(function(Ee){return(1-ne)*(1-ne)*N[Ee]+2*(1-ne)*ne*L[Ee]+ne*ne*U[Ee]});return new wu(xe,"lab")};else if(p.length===4){var V;A=p.map(function(ne){return ne.lab()}),N=A[0],L=A[1],U=A[2],V=A[3],k=function(ne){var xe=[0,1,2].map(function(Ee){return(1-ne)*(1-ne)*(1-ne)*N[Ee]+3*(1-ne)*(1-ne)*ne*L[Ee]+3*(1-ne)*ne*ne*U[Ee]+ne*ne*ne*V[Ee]});return new wu(xe,"lab")}}else if(p.length>=5){var Y,ee,ge;Y=p.map(function(ne){return ne.lab()}),ge=p.length-1,ee=_N(ge),k=function(ne){var xe=1-ne,Ee=[0,1,2].map(function(Ge){return Y.reduce(function(Qe,ot,ft){return Qe+ee[ft]*Math.pow(xe,ge-ft)*Math.pow(ne,ft)*ot[Ge]},0)});return new wu(Ee,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return k},wN=function(p){var v=bN(p);return v.scale=function(){return yN(v)},v},em=F,Ir=function(p,v,E){if(!Ir[E])throw new Error("unknown blend mode "+E);return Ir[E](p,v)},qi=function(p){return function(v,E){var A=em(E).rgb(),k=em(v).rgb();return em.rgb(p(A,k))}},Zi=function(p){return function(v,E){var A=[];return A[0]=p(v[0],E[0]),A[1]=p(v[1],E[1]),A[2]=p(v[2],E[2]),A}},EN=function(p){return p},SN=function(p,v){return p*v/255},xN=function(p,v){return p>v?v:p},TN=function(p,v){return p>v?p:v},PN=function(p,v){return 255*(1-(1-p/255)*(1-v/255))},AN=function(p,v){return v<128?2*p*v/255:255*(1-2*(1-p/255)*(1-v/255))},CN=function(p,v){return 255*(1-(1-v/255)/(p/255))},RN=function(p,v){return p===255?255:(p=255*(v/255)/(1-p/255),p>255?255:p)};Ir.normal=qi(Zi(EN)),Ir.multiply=qi(Zi(SN)),Ir.screen=qi(Zi(PN)),Ir.overlay=qi(Zi(AN)),Ir.darken=qi(Zi(xN)),Ir.lighten=qi(Zi(TN)),Ir.dodge=qi(Zi(RN)),Ir.burn=qi(Zi(CN));for(var LN=Ir,tm=m.type,MN=m.clip_rgb,ON=m.TWOPI,kN=Math.pow,IN=Math.sin,NN=Math.cos,kw=F,DN=function(p,v,E,A,k){p===void 0&&(p=300),v===void 0&&(v=-1.5),E===void 0&&(E=1),A===void 0&&(A=1),k===void 0&&(k=[0,1]);var N=0,L;tm(k)==="array"?L=k[1]-k[0]:(L=0,k=[k,k]);var U=function(V){var Y=ON*((p+120)/360+v*V),ee=kN(k[0]+L*V,A),ge=N!==0?E[0]+V*N:E,ne=ge*ee*(1-ee)/2,xe=NN(Y),Ee=IN(Y),Ge=ee+ne*(-.14861*xe+1.78277*Ee),Qe=ee+ne*(-.29227*xe-.90649*Ee),ot=ee+ne*(1.97294*xe);return kw(MN([Ge*255,Qe*255,ot*255,1]))};return U.start=function(V){return V==null?p:(p=V,U)},U.rotations=function(V){return V==null?v:(v=V,U)},U.gamma=function(V){return V==null?A:(A=V,U)},U.hue=function(V){return V==null?E:(E=V,tm(E)==="array"?(N=E[1]-E[0],N===0&&(E=E[1])):N=0,U)},U.lightness=function(V){return V==null?k:(tm(V)==="array"?(k=V,L=V[1]-V[0]):(k=[V,V],L=0),U)},U.scale=function(){return kw.scale(U)},U.hue(E),U},FN=C,UN="0123456789abcdef",zN=Math.floor,BN=Math.random,VN=function(){for(var p="#",v=0;v<6;v++)p+=UN.charAt(zN(BN()*16));return new FN(p,"hex")},nm=l,Iw=Math.log,$N=Math.pow,jN=Math.floor,GN=Math.abs,Nw=function(p,v){v===void 0&&(v=null);var E={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return nm(p)==="object"&&(p=Object.values(p)),p.forEach(function(A){v&&nm(A)==="object"&&(A=A[v]),A!=null&&!isNaN(A)&&(E.values.push(A),E.sum+=A,A<E.min&&(E.min=A),A>E.max&&(E.max=A),E.count+=1)}),E.domain=[E.min,E.max],E.limits=function(A,k){return Dw(E,A,k)},E},Dw=function(p,v,E){v===void 0&&(v="equal"),E===void 0&&(E=7),nm(p)=="array"&&(p=Nw(p));var A=p.min,k=p.max,N=p.values.sort(function(im,om){return im-om});if(E===1)return[A,k];var L=[];if(v.substr(0,1)==="c"&&(L.push(A),L.push(k)),v.substr(0,1)==="e"){L.push(A);for(var U=1;U<E;U++)L.push(A+U/E*(k-A));L.push(k)}else if(v.substr(0,1)==="l"){if(A<=0)throw new Error("Logarithmic scales are only possible for values > 0");var V=Math.LOG10E*Iw(A),Y=Math.LOG10E*Iw(k);L.push(A);for(var ee=1;ee<E;ee++)L.push($N(10,V+ee/E*(Y-V)));L.push(k)}else if(v.substr(0,1)==="q"){L.push(A);for(var ge=1;ge<E;ge++){var ne=(N.length-1)*ge/E,xe=jN(ne);if(xe===ne)L.push(N[xe]);else{var Ee=ne-xe;L.push(N[xe]*(1-Ee)+N[xe+1]*Ee)}}L.push(k)}else if(v.substr(0,1)==="k"){var Ge,Qe=N.length,ot=new Array(Qe),ft=new Array(E),gn=!0,cn=0,Gn=null;Gn=[],Gn.push(A);for(var nt=1;nt<E;nt++)Gn.push(A+nt/E*(k-A));for(Gn.push(k);gn;){for(var ie=0;ie<E;ie++)ft[ie]=0;for(var Ie=0;Ie<Qe;Ie++)for(var Ze=N[Ie],We=Number.MAX_VALUE,mn=void 0,Tt=0;Tt<E;Tt++){var st=GN(Gn[Tt]-Ze);st<We&&(We=st,mn=Tt),ft[mn]++,ot[Ie]=mn}for(var dt=new Array(E),pt=0;pt<E;pt++)dt[pt]=null;for(var mt=0;mt<Qe;mt++)Ge=ot[mt],dt[Ge]===null?dt[Ge]=N[mt]:dt[Ge]+=N[mt];for(var Nr=0;Nr<E;Nr++)dt[Nr]*=1/ft[Nr];gn=!1;for(var Ki=0;Ki<E;Ki++)if(dt[Ki]!==Gn[Ki]){gn=!0;break}Gn=dt,cn++,cn>200&&(gn=!1)}for(var Qi={},Ws=0;Ws<E;Ws++)Qi[Ws]=[];for(var Hs=0;Hs<Qe;Hs++)Ge=ot[Hs],Qi[Ge].push(N[Hs]);for(var xi=[],Bo=0;Bo<E;Bo++)xi.push(Qi[Bo][0]),xi.push(Qi[Bo][Qi[Bo].length-1]);xi=xi.sort(function(im,om){return im-om}),L.push(xi[0]);for(var Eu=1;Eu<xi.length;Eu+=2){var Vo=xi[Eu];!isNaN(Vo)&&L.indexOf(Vo)===-1&&L.push(Vo)}}return L},Fw={analyze:Nw,limits:Dw},Uw=C,WN=function(p,v){p=new Uw(p),v=new Uw(v);var E=p.luminance(),A=v.luminance();return E>A?(E+.05)/(A+.05):(A+.05)/(E+.05)},zw=C,Si=Math.sqrt,Jt=Math.pow,HN=Math.min,YN=Math.max,Bw=Math.atan2,Vw=Math.abs,zc=Math.cos,$w=Math.sin,XN=Math.exp,jw=Math.PI,qN=function(p,v,E,A,k){E===void 0&&(E=1),A===void 0&&(A=1),k===void 0&&(k=1);var N=function(Vo){return 360*Vo/(2*jw)},L=function(Vo){return 2*jw*Vo/360};p=new zw(p),v=new zw(v);var U=Array.from(p.lab()),V=U[0],Y=U[1],ee=U[2],ge=Array.from(v.lab()),ne=ge[0],xe=ge[1],Ee=ge[2],Ge=(V+ne)/2,Qe=Si(Jt(Y,2)+Jt(ee,2)),ot=Si(Jt(xe,2)+Jt(Ee,2)),ft=(Qe+ot)/2,gn=.5*(1-Si(Jt(ft,7)/(Jt(ft,7)+Jt(25,7)))),cn=Y*(1+gn),Gn=xe*(1+gn),nt=Si(Jt(cn,2)+Jt(ee,2)),ie=Si(Jt(Gn,2)+Jt(Ee,2)),Ie=(nt+ie)/2,Ze=N(Bw(ee,cn)),We=N(Bw(Ee,Gn)),mn=Ze>=0?Ze:Ze+360,Tt=We>=0?We:We+360,st=Vw(mn-Tt)>180?(mn+Tt+360)/2:(mn+Tt)/2,dt=1-.17*zc(L(st-30))+.24*zc(L(2*st))+.32*zc(L(3*st+6))-.2*zc(L(4*st-63)),pt=Tt-mn;pt=Vw(pt)<=180?pt:Tt<=mn?pt+360:pt-360,pt=2*Si(nt*ie)*$w(L(pt)/2);var mt=ne-V,Nr=ie-nt,Ki=1+.015*Jt(Ge-50,2)/Si(20+Jt(Ge-50,2)),Qi=1+.045*Ie,Ws=1+.015*Ie*dt,Hs=30*XN(-Jt((st-275)/25,2)),xi=2*Si(Jt(Ie,7)/(Jt(Ie,7)+Jt(25,7))),Bo=-xi*$w(2*L(Hs)),Eu=Si(Jt(mt/(E*Ki),2)+Jt(Nr/(A*Qi),2)+Jt(pt/(k*Ws),2)+Bo*(Nr/(A*Qi))*(pt/(k*Ws)));return YN(0,HN(100,Eu))},Gw=C,ZN=function(p,v,E){E===void 0&&(E="lab"),p=new Gw(p),v=new Gw(v);var A=p.get(E),k=v.get(E),N=0;for(var L in A){var U=(A[L]||0)-(k[L]||0);N+=U*U}return Math.sqrt(N)},KN=C,QN=function(){for(var p=[],v=arguments.length;v--;)p[v]=arguments[v];try{return new(Function.prototype.bind.apply(KN,[null].concat(p))),!0}catch{return!1}},Ww=F,Hw=Jg,JN={cool:function(){return Hw([Ww.hsl(180,1,.9),Ww.hsl(250,.7,.4)])},hot:function(){return Hw(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Bc={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},rm=0,Yw=Object.keys(Bc);rm<Yw.length;rm+=1){var Xw=Yw[rm];Bc[Xw.toLowerCase()]=Bc[Xw]}var eD=Bc,ln=F;ln.average=pN,ln.bezier=wN,ln.blend=LN,ln.cubehelix=DN,ln.mix=ln.interpolate=xw,ln.random=VN,ln.scale=Jg,ln.analyze=Fw.analyze,ln.contrast=WN,ln.deltaE=qN,ln.distance=ZN,ln.limits=Fw.limits,ln.valid=QN,ln.scales=JN,ln.colors=sw,ln.brewer=eD;var tD=ln;return tD})})(Qj);function Jj(t){return pc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144m224 0L144 368"}}]})(t)}function e7(t){return pc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(t)}function t7(t){return pc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(t)}const eb=K1({key:"mapView",default:{}}),wd=t=>{const{longitude:e,latitude:n,zoom:r}=t;return e&&n&&r},n7=K1({key:"selected",default:null});function Ed(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const tb=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),ax=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);ax&&parseFloat(ax[1]);const r7="3.2.11";function Ui(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Hf=typeof process!="object"||String(process)!=="[object process]"||process.browser,i7=typeof window<"u"&&typeof window.orientation<"u",ux=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);ux&&parseFloat(ux[1]);function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class o7{constructor(e,n){w(this,"name",void 0),w(this,"workerThread",void 0),w(this,"isRunning",!0),w(this,"result",void 0),w(this,"_resolve",()=>{}),w(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Ui(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Ui(this.isRunning),this.isRunning=!1,this._reject(e)}}class Ym{}const Xm=new Map;function s7(t){Ui(t.source&&!t.url||!t.source&&t.url);let e=Xm.get(t.source||t.url);return e||(t.url&&(e=a7(t.url),Xm.set(t.url,e)),t.source&&(e=cM(t.source),Xm.set(t.source,e))),Ui(e),e}function a7(t){if(!t.startsWith("http"))return t;const e=u7(t);return cM(e)}function cM(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function u7(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function fM(t,e=!0,n){const r=n||new Set;if(t){if(lx(t))r.add(t);else if(lx(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)fM(t[i],e,r)}}return n===void 0?Array.from(r):[]}function lx(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const qm=()=>{};class Bv{static isSupported(){return typeof Worker<"u"&&Hf||typeof Ym<"u"&&!Hf}constructor(e){w(this,"name",void 0),w(this,"source",void 0),w(this,"url",void 0),w(this,"terminated",!1),w(this,"worker",void 0),w(this,"onMessage",void 0),w(this,"onError",void 0),w(this,"_loadableURL","");const{name:n,source:r,url:i}=e;Ui(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=qm,this.onError=o=>console.log(o),this.worker=Hf?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=qm,this.onError=qm,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,n){n=n||fM(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=s7({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new Ym(r,{eval:!1})}else if(this.source)e=new Ym(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class l7{static isSupported(){return Bv.isSupported()}constructor(e){w(this,"name","unnamed"),w(this,"source",void 0),w(this,"url",void 0),w(this,"maxConcurrency",1),w(this,"maxMobileConcurrency",1),w(this,"onDebug",()=>{}),w(this,"reuseWorkers",!0),w(this,"props",{}),w(this,"jobQueue",[]),w(this,"idleQueue",[]),w(this,"count",0),w(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,n=(i,o,s)=>i.done(s),r=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new o7(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Bv({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return i7?this.maxMobileConcurrency:this.maxConcurrency}}const c7={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Ci{static isSupported(){return Bv.isSupported()}static getWorkerFarm(e={}){return Ci._workerFarm=Ci._workerFarm||new Ci({}),Ci._workerFarm.setProps(e),Ci._workerFarm}constructor(e){w(this,"props",void 0),w(this,"workerPools",new Map),this.props={...c7},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let o=this.workerPools.get(n);return o||(o=new l7({name:n,source:r,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}w(Ci,"_workerFarm",void 0);const f7="latest";function h7(t,e={}){const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let o=t.version;o==="latest"&&(o=f7);const s=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(s,"/dist/").concat(r)}return Ui(i),i}function d7(t,e=r7){Ui(t,"no worker provided");const n=t.version;return!(!e||!n)}function p7(t,e){return!Ci.isSupported()||!Hf&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function g7(t,e,n,r,i){const o=t.id,s=h7(t,n),u=Ci.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const l=await u.startJob("process-on-worker",m7.bind(null,i));return l.postMessage("process",{input:e,options:n,context:r}),await(await l.result).result}async function m7(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:o,options:s}=r;try{const a=await t(o,s);e.postMessage("done",{id:i,result:a})}catch(a){const u=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:u})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function hM(t){return t&&typeof t=="object"&&t.isBuffer}function v7(t){return hM(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}function dM(t){if(hM(t))return v7(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function y7(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}function _7(...t){const e=t.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),n=e.reduce((o,s)=>o+s.byteLength,0),r=new Uint8Array(n);let i=0;for(const o of e)r.set(o,i),i+=o.byteLength;return r.buffer}async function b7(t){const e=[];for await(const n of t)e.push(n);return _7(...e)}function cx(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class fx{constructor(e,n){w(this,"name",void 0),w(this,"type",void 0),w(this,"sampleSize",1),w(this,"time",void 0),w(this,"count",void 0),w(this,"samples",void 0),w(this,"lastTiming",void 0),w(this,"lastSampleTime",void 0),w(this,"lastSampleCount",void 0),w(this,"_count",0),w(this,"_time",0),w(this,"_samples",0),w(this,"_startTime",0),w(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=cx(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(cx()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class nb{constructor(e){w(this,"id",void 0),w(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof fx?this.stats[n]=e:this.stats[n]=new fx(n,r)),this.stats[n]}}let w7="";const hx={};function E7(t){for(const e in hx)if(t.startsWith(e)){const n=hx[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(w7).concat(t)),t}function S7(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}const x7=t=>typeof t=="boolean",gl=t=>typeof t=="function",gc=t=>t!==null&&typeof t=="object",dx=t=>gc(t)&&t.constructor==={}.constructor,T7=t=>t&&typeof t[Symbol.iterator]=="function",P7=t=>t&&typeof t[Symbol.asyncIterator]=="function",lu=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,cu=t=>typeof Blob<"u"&&t instanceof Blob,A7=t=>t&&typeof t=="object"&&t.isBuffer,C7=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||gc(t)&&gl(t.tee)&&gl(t.cancel)&&gl(t.getReader),R7=t=>gc(t)&&gl(t.read)&&gl(t.pipe)&&x7(t.readable),pM=t=>C7(t)||R7(t),L7=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,M7=/^([-\w.]+\/[-\w.+]+)/;function O7(t){const e=M7.exec(t);return e?e[1]:t}function px(t){const e=L7.exec(t);return e?e[1]:""}const k7=/\?.*/;function dg(t){if(lu(t)){const e=Zm(t.url||""),n=t.headers.get("content-type")||"";return{url:e,type:O7(n)||px(e)}}return cu(t)?{url:Zm(t.name||""),type:t.type||""}:typeof t=="string"?{url:Zm(t),type:px(t)}:{url:"",type:""}}function I7(t){return lu(t)?t.headers["content-length"]||-1:cu(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function Zm(t){return t.replace(k7,"")}async function gM(t){if(lu(t))return t;const e={},n=I7(t);n>=0&&(e["content-length"]=String(n));const{url:r,type:i}=dg(t);i&&(e["content-type"]=i);const o=await F7(t);o&&(e["x-first-bytes"]=o),typeof t=="string"&&(t=new TextEncoder().encode(t));const s=new Response(t,{headers:e});return Object.defineProperty(s,"url",{value:r}),s}async function N7(t){if(!t.ok){const e=await D7(t);throw new Error(e)}}async function D7(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function F7(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=o=>{var s;return r(o==null||(s=o.target)===null||s===void 0?void 0:s.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=U7(n);return"data:base64,".concat(r)}return null}function U7(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function gx(t,e){if(typeof t=="string"){t=E7(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await gM(t)}function mM(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Wi(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||mM()}const Yf={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},hf=Yf.window||Yf.self||Yf.global,Uu=Yf.process||{},vM=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Wi();const Km=globalThis;function yM(t){if(!t&&!Wi())return"Node";if(mM(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":Km.chrome?"Chrome":Km.safari?"Safari":Km.mozInnerScreenX?"Firefox":"Unknown"}function z7(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class B7{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";w(this,"storage",void 0),w(this,"id",void 0),w(this,"config",{}),this.storage=z7(r),this.id=e,this.config={},Object.assign(this.config,n),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}return this}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function V7(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function $7(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function Qm(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let Sd;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Sd||(Sd={}));function mx(t){return typeof t=="string"?Sd[t.toUpperCase()]||Sd.WHITE:t}function j7(t,e,n){return!Wi&&typeof t=="string"&&(e&&(e=mx(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=mx(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function G7(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(o=>i===o)||(t[i]=t[i].bind(t)))}function xd(t,e){if(!t)throw new Error(e||"Assertion failed")}function qs(){let t;if(Wi&&"performance"in hf){var e,n;t=hf==null||(e=hf.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in Uu){var r;const i=Uu==null||(r=Uu.hrtime)===null||r===void 0?void 0:r.call(Uu);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Zs={debug:Wi&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},W7={enabled:!0,level:0};function yr(){}const vx={},yx={once:!0};class mc{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};w(this,"id",void 0),w(this,"VERSION",vM),w(this,"_startTs",qs()),w(this,"_deltaTs",qs()),w(this,"_storage",void 0),w(this,"userData",{}),w(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this._storage=new B7("__probe-".concat(this.id,"__"),W7),this.userData={},this.timeStamp("".concat(this.id," started")),G7(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((qs()-this._startTs).toPrecision(10))}getDelta(){return Number((qs()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:e}),this}setLevel(e){return this._storage.updateConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.updateConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){xd(e,n)}warn(e){return this._getLogFunction(0,e,Zs.warn,arguments,yx)}error(e){return this._getLogFunction(0,e,Zs.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Zs.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Zs.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return this._getLogFunction(e,n,Zs.debug||Zs.info,arguments,yx)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||yr,r&&[r],{tag:q7(n)}):yr}image(e){let{logLevel:n,priority:r,image:i,message:o="",scale:s=1}=e;return this._shouldLog(n||r)?Wi?X7({image:i,message:o,scale:s}):Y7({image:i,message:o,scale:s}):yr}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||yr)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=_x({logLevel:e,message:n,opts:r}),{collapsed:o}=r;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||yr)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=_M(e)}_getLogFunction(e,n,r,i,o){if(this._shouldLog(e)){o=_x({logLevel:e,message:n,args:i,opts:o}),r=r||o.method,xd(r),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=qs();const s=o.tag||o.message;if(o.once)if(!vx[s])vx[s]=qs();else return yr;return n=H7(this.id,o.message,o),r.bind(console,n,...o.args)}return yr}}w(mc,"VERSION",vM);function _M(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return xd(Number.isFinite(e)&&e>=0),e}function _x(t){const{logLevel:e,message:n}=t;t.logLevel=_M(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return xd(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function H7(t,e,n){if(typeof e=="string"){const r=n.time?$7(V7(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=j7(e,n.color,n.background)}return e}function Y7(t){let{image:e,message:n="",scale:r=1}=t;return(void 0)({image:e,message:n,scale:r}),yr}function X7(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const o=new Image;return o.onload=()=>{const s=Qm(o,n,r);console.log(...s)},o.src=e,yr}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...Qm(e,n,r)),yr;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...Qm(o,n,r)),o.src=e.toDataURL(),yr}return yr}function q7(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const bx=new mc({id:"loaders.gl"});class Z7{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class K7{constructor(){w(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const bM={fetch:null,mimeType:void 0,nothrow:!1,log:new K7,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:tb,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Q7={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function wM(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const EM=()=>{const t=wM();return t.globalOptions=t.globalOptions||{...bM},t.globalOptions};function J7(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],e9(t,n),n9(e,t,r)}function SM(t,e){const n=EM(),r=t||n;return typeof r.fetch=="function"?r.fetch:gc(r.fetch)?i=>gx(i,r):e!=null&&e.fetch?e==null?void 0:e.fetch:gx}function e9(t,e){wx(t,null,bM,Q7,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};wx(r,n.id,i,o,e)}}function wx(t,e,n,r,i){const o=e||"Top level",s=e?"".concat(e,"."):"";for(const a in t){const u=!e&&gc(t[a]),l=a==="baseUri"&&!e,c=a==="workerUrl"&&e;if(!(a in n)&&!l&&!c){if(a in r)bx.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!u){const f=t9(a,i);bx.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(f))()}}}}function t9(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const o in i.options){if(t===o)return"Did you mean '".concat(i.id,".").concat(o,"'?");const s=o.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(o,"'?"))}return r}function n9(t,e,n){const i={...t.options||{}};return r9(i,n),i.log===null&&(i.log=new Z7),Ex(i,EM()),Ex(i,e),i}function Ex(t,e){for(const n in e)if(n in e){const r=e[n];dx(r)&&dx(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function r9(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function rb(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function ib(t){var e,n;Ed(t,"null loader"),Ed(rb(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const xM=()=>{const t=wM();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function i9(t){const e=xM();t=Array.isArray(t)?t:[t];for(const n of t){const r=ib(n);e.find(i=>r===i)||e.unshift(r)}}function o9(){return xM()}const s9=new mc({id:"loaders.gl"}),a9=/\.([^.]+)$/;async function u9(t,e=[],n,r){if(!TM(t))return null;let i=Sx(t,e,{...n,nothrow:!0},r);if(i)return i;if(cu(t)&&(t=await t.slice(0,10).arrayBuffer(),i=Sx(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(PM(t));return i}function Sx(t,e=[],n,r){if(!TM(t))return null;if(e&&!Array.isArray(e))return ib(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...o9()),c9(i);const o=l9(t,i,n,r);if(!o&&!(n!=null&&n.nothrow))throw new Error(PM(t));return o}function l9(t,e,n,r){const{url:i,type:o}=dg(t),s=i||(r==null?void 0:r.url);let a=null,u="";if(n!=null&&n.mimeType&&(a=Jm(e,n==null?void 0:n.mimeType),u="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),a=a||f9(e,s),u=u||(a?"matched url ".concat(s):""),a=a||Jm(e,o),u=u||(a?"matched MIME type ".concat(o):""),a=a||d9(e,t),u=u||(a?"matched initial data ".concat(AM(t)):""),a=a||Jm(e,n==null?void 0:n.fallbackMimeType),u=u||(a?"matched fallback MIME type ".concat(o):""),u){var l;s9.log(1,"selectLoader selected ".concat((l=a)===null||l===void 0?void 0:l.name,": ").concat(u,"."))}return a}function TM(t){return!(t instanceof Response&&t.status===204)}function PM(t){const{url:e,type:n}=dg(t);let r="No valid loader found (";r+=e?"".concat(S7(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?AM(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function c9(t){for(const e of t)ib(e)}function f9(t,e){const n=e&&a9.exec(e),r=n&&n[1];return r?h9(t,r):null}function h9(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function Jm(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function d9(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(p9(e,n))return n}else if(ArrayBuffer.isView(e)){if(xx(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&xx(e,0,n))return n;return null}function p9(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function xx(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>g9(t,e,n,i))}function g9(t,e,n,r){if(r instanceof ArrayBuffer)return y7(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const i=Vv(t,e,r.length);return r===i;default:return!1}}function AM(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?Vv(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?Vv(t,0,e):""}function Vv(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}const m9=256*1024;function*v9(t,e){const n=(e==null?void 0:e.chunkSize)||m9;let r=0;const i=new TextEncoder;for(;r<t.length;){const o=Math.min(t.length-r,n),s=t.slice(r,r+o);r+=o,yield i.encode(s)}}const y9=256*1024;function*_9(t,e={}){const{chunkSize:n=y9}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),o=new ArrayBuffer(i),s=new Uint8Array(t,r,i);new Uint8Array(o).set(s),r+=i,yield o}}const b9=1024*1024;async function*w9(t,e){const n=(e==null?void 0:e.chunkSize)||b9;let r=0;for(;r<t.size;){const i=r+n,o=await t.slice(r,i).arrayBuffer();r=i,yield o}}function Tx(t,e){return tb?E9(t,e):S9(t)}async function*E9(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:o,value:s}=await i;if(o)return;yield dM(s)}}catch{n.releaseLock()}}async function*S9(t,e){for await(const n of t)yield dM(n)}function x9(t,e){if(typeof t=="string")return v9(t,e);if(t instanceof ArrayBuffer)return _9(t,e);if(cu(t))return w9(t,e);if(pM(t))return Tx(t,e);if(lu(t))return Tx(t.body,e);throw new Error("makeIterator")}const CM="Cannot convert supplied data type";function T9(t,e,n){if(e.text&&typeof t=="string")return t;if(A7(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(CM)}async function P9(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return T9(t,e);if(cu(t)&&(t=await gM(t)),lu(t)){const i=t;return await N7(i),e.binary?await i.arrayBuffer():await i.text()}if(pM(t)&&(t=x9(t,n)),T7(t)||P7(t))return b7(t);throw new Error(CM)}function A9(t,e,n=null){if(n)return n;const r={fetch:SM(e,t),...t};return Array.isArray(r.loaders)||(r.loaders=null),r}function C9(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function ob(t,e,n,r){Ui(!r||typeof r=="object"),e&&!Array.isArray(e)&&!rb(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const{url:i}=dg(t),s=C9(e,r),a=await u9(t,s,n);return a?(n=J7(n,a,s,i),r=A9({url:i,parse:ob,loaders:s},n,r),await R9(a,t,n,r)):null}async function R9(t,e,n,r){if(d7(t),lu(e)){const i=e,{ok:o,redirected:s,status:a,statusText:u,type:l,url:c}=i,f=Object.fromEntries(i.headers.entries());r.response={headers:f,ok:o,redirected:s,status:a,statusText:u,type:l,url:c}}if(e=await P9(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(p7(t,n))return await g7(t,e,n,r,ob);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw Ui(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function Td(t,e,n,r){!Array.isArray(e)&&!rb(e)&&(n=e,e=void 0);const i=SM(n);let o=t;return typeof t=="string"&&(o=await i(t)),cu(t)&&(o=await i(t)),await ob(o,e,n)}const L9="3.2.11",{_parseImageNode:M9}=globalThis,$v=typeof Image<"u",jv=typeof ImageBitmap<"u",O9=Boolean(M9),Gv=tb?!0:O9;function k9(t){switch(t){case"auto":return jv||$v||Gv;case"imagebitmap":return jv;case"image":return $v;case"data":return Gv;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function I9(){if(jv)return"imagebitmap";if($v)return"image";if(Gv)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function N9(t){const e=F9(t);if(!e)throw new Error("Not an image");return e}function D9(t){switch(N9(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function F9(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const U9=/^data:image\/svg\+xml/,z9=/\.svg((\?|#).*)?$/;function sb(t){return t&&(U9.test(t)||z9.test(t))}function B9(t,e){if(sb(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return RM(t,e)}function RM(t,e){if(sb(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function LM(t,e,n){const r=B9(t,n),i=self.URL||self.webkitURL,o=typeof r!="string"&&i.createObjectURL(r);try{return await V9(o||r,e)}finally{o&&i.revokeObjectURL(o)}}async function V9(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=o=>i(new Error("Could not load image ".concat(t,": ").concat(o)))}catch(o){i(o)}})}const $9={};let Px=!0;async function j9(t,e,n){let r;sb(n)?r=await LM(t,e,n):r=RM(t,n);const i=e&&e.imagebitmap;return await G9(r,i)}async function G9(t,e=null){if((W9(e)||!Px)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),Px=!1}return await createImageBitmap(t)}function W9(t){for(const e in t||$9)return!1;return!0}const ai=!1,ml=!0;function MM(t){const e=vc(t);return H9(e)||q9(e)||Y9(e)||X9(e)}function H9(t){const e=vc(t);return e.byteLength>=24&&e.getUint32(0,ai)===2303741511?{mimeType:"image/png",width:e.getUint32(16,ai),height:e.getUint32(20,ai)}:null}function Y9(t){const e=vc(t);return e.byteLength>=10&&e.getUint32(0,ai)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,ml),height:e.getUint16(8,ml)}:null}function X9(t){const e=vc(t);return e.byteLength>=14&&e.getUint16(0,ai)===16973&&e.getUint32(2,ml)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,ml),height:e.getUint32(22,ml)}:null}function q9(t){const e=vc(t);if(!(e.byteLength>=3&&e.getUint16(0,ai)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=Z9();let o=2;for(;o+9<e.byteLength;){const s=e.getUint16(o,ai);if(i.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,ai),width:e.getUint16(o+7,ai)};if(!r.has(s))return null;o+=2,o+=e.getUint16(o,ai)}return null}function Z9(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function vc(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function K9(t,e){const{mimeType:n}=MM(t)||{},r=globalThis._parseImageNode;return Ed(r),await r(t,n)}async function Q9(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:o}=n||{},s=J9(i);let a;switch(s){case"imagebitmap":a=await j9(t,e,o);break;case"image":a=await LM(t,e,o);break;case"data":a=await K9(t);break;default:Ed(!1)}return i==="data"&&(a=D9(a)),a}function J9(t){switch(t){case"auto":case"data":return I9();default:return k9(t),t}}const eG=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],tG=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],nG={image:{type:"auto",decode:!0}},OM={id:"image",module:"images",name:"Images",version:L9,mimeTypes:tG,extensions:eG,parse:Q9,tests:[t=>Boolean(MM(new DataView(t)))],options:nG},$e=new mc({id:"deck"});let Wv={};function rG(t){Wv=t}function Rn(t,e,n,r){$e.level>0&&Wv[t]&&Wv[t].call(null,e,n,r)}function iG(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const oG={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:iG,parseTextSync:JSON.parse},vl="8.8.16",Xf=globalThis.deck&&globalThis.deck.VERSION;if(Xf&&Xf!==vl)throw new Error("deck.gl - multiple versions detected: ".concat(Xf," vs ").concat(vl));Xf||($e.log(1,"deck.gl ".concat(vl))(),globalThis.deck={...globalThis.deck,VERSION:vl,version:vl,log:$e,_registerLoggers:rG},i9([oG,[OM,{imagebitmap:{premultiplyAlpha:"none"}}]]));const sG=globalThis.deck,Ae=new mc({id:"luma.gl"});function Nn(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const aG="Invalid WebGLRenderingContext",uG="Requires WebGL2";function pg(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&Number.isFinite(t._version))}function Je(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function lG(t){return Je(t)?t:null}function gg(t){return Nn(pg(t),aG),t}function Mn(t){return Nn(Je(t),uG),t}const Ju={};function cG(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function fG(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function hG(t,e){Ju[t]=!0,e!==void 0&&cG(e)}function dG(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(Ju[r]=!0);while(r!==0);for(r in Ju)if(Ju[r])return delete Ju[r],parseInt(r,10);return 0}}const yc=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};yc.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};yc.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Cs=function(e){const n=this;this.gl=e,dG(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(o){return o===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(o){const s=n.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,o);const a=s.attribs[o];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(o){const s=n.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,o);const a=s.attribs[o];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(o,s){switch(o){case 34962:n.currentArrayBuffer=s;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=s;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(o,s){const u=n.currentVertexArrayObject.attribs[o];switch(s){case 34975:return u.buffer;case 34338:return u.enabled;case 34339:return u.size;case 34340:return u.stride;case 34341:return u.type;case 34922:return u.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(o,s,a,u,l,c){const f=n.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,o);const h=f.attribs[o];return h.buffer=n.currentArrayBuffer,h.size=s,h.type=a,h.normalized=u,h.stride=l,h.offset=c,h.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{fG("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Cs.prototype.VERTEX_ARRAY_BINDING_OES=34229;Cs.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new yc(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Cs.prototype.createVertexArrayOES=function(){const e=new yc(this);return this.vertexArrayObjects.push(e),e};Cs.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};Cs.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof yc&&e.hasBeenBound&&e.ext===this)};Cs.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){hG(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(i===o)return;(!i||o.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,o.elementArrayBuffer);let s=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,o.maxAttrib);for(let u=0;u<=a;u++){const l=o.attribs[u],c=i?i.attribs[u]:null;if((!i||l.enabled!==c.enabled)&&(l.enabled?r.enableVertexAttribArray.call(n,u):r.disableVertexAttribArray.call(n,u)),l.enabled){let f=!1;(!i||l.buffer!==c.buffer)&&(s!==l.buffer&&(r.bindBuffer.call(n,34962,l.buffer),s=l.buffer),f=!0),(f||l.cached!==c.cached)&&r.vertexAttribPointer.call(n,u,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==s&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function pG(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const n=t.getExtension;t.getExtension=function(i){const o=n.call(this,i);return o||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Cs(this)),this.__OESVertexArrayObject))}}const Ax="OES_element_index",Cx="WEBGL_draw_buffers",gG="EXT_disjoint_timer_query",mG="EXT_disjoint_timer_query_webgl2",vG="EXT_texture_filter_anisotropic",Rx="WEBGL_debug_renderer_info",yG=35723,_G=4352,bG=36795,wG=34047,EG=37445,SG=37446,Pt=t=>Je(t)?void 0:0,xG={[3074]:t=>Je(t)?void 0:36064,[yG]:t=>Je(t)?void 0:_G,[35977]:Pt,[32937]:Pt,[bG]:(t,e)=>{const n=Je(t)?t.getExtension(mG):t.getExtension(gG);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[EG]:(t,e)=>{const n=t.getExtension(Rx);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[SG]:(t,e)=>{const n=t.getExtension(Rx);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[wG]:(t,e)=>{const n=t.luma.extensions[vG];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:Pt,[35071]:Pt,[37447]:Pt,[36063]:(t,e)=>{if(!Je(t)){const n=t.getExtension(Cx);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:Pt,[35374]:Pt,[35377]:Pt,[34852]:t=>{if(!Je(t)){const e=t.getExtension(Cx);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:t=>t.getExtension(Ax)?2147483647:65535,[33001]:t=>t.getExtension(Ax)?16777216:65535,[33e3]:t=>16777216,[37157]:Pt,[35373]:Pt,[35657]:Pt,[36183]:Pt,[37137]:Pt,[34045]:Pt,[35978]:Pt,[35979]:Pt,[35968]:Pt,[35376]:Pt,[35375]:Pt,[35659]:Pt,[37154]:Pt,[35371]:Pt,[35658]:Pt,[35076]:Pt,[35077]:Pt,[35380]:Pt};function TG(t,e,n){const r=xG[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}const PG="OES_vertex_array_object",kM="ANGLE_instanced_arrays",AG="WEBGL_draw_buffers",CG="EXT_disjoint_timer_query",RG="EXT_texture_filter_anisotropic",LG="VertexArray requires WebGL2 or OES_vertex_array_object extension";function MG(t,e){return{webgl2:Je(t),ext:t.getExtension(e)}}const IM={[PG]:{meta:{suffix:"OES"},createVertexArray:()=>{Nn(!1,LG)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[kM]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Nn(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[AG]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Nn(!1)}},[CG]:{meta:{suffix:"EXT"},createQuery:()=>{Nn(!1)},deleteQuery:()=>{Nn(!1)},beginQuery:()=>{Nn(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},e0={readBuffer:(t,e,n)=>{Je(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:o}=MG(t,kM);let s;switch(r){case 35069:s=i?void 0:!1;break;case 35070:s=!i&&!o?0:void 0;break}return s!==void 0?s:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!Je(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!Je(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:i}=t.luma,o=i[RG];r=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:TG,hint(t,e,n,r){return e(n,r)}};function OG(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(pG(t),kG(t),NG(t,IM),IG(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=OG;function kG(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function IG(t,e){let{target:n,target2:r}=e;Object.keys(e0).forEach(i=>{if(typeof e0[i]=="function"){const o=t[i]?t[i].bind(t):()=>{},s=e0[i].bind(null,t,o);n[i]=s,r[i]=s}})}function NG(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&DG(t,{extension:n,target:t.luma,target2:t})}function DG(t,e){let{extension:n,target:r,target2:i}=e;const o=IM[n];Nn(o);const{meta:s={}}=o,{suffix:a=""}=s,u=t.getExtension(n);for(const l of Object.keys(o)){const c="".concat(l).concat(a);let f=null;l==="meta"||typeof t[l]=="function"||(u&&typeof u[c]=="function"?f=function(){return u[c](...arguments)}:typeof o[l]=="function"&&(f=o[l].bind(r))),f&&(r[l]=f,i[l]=f)}}const ab={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},eo=(t,e,n)=>e?t.enable(n):t.disable(n),Lx=(t,e,n)=>t.hint(n,e),nr=(t,e,n)=>t.pixelStorei(n,e),FG=(t,e)=>{const n=Je(t)?36009:36160;return t.bindFramebuffer(n,e)},UG=(t,e)=>t.bindFramebuffer(36008,e);function zu(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const zG={[3042]:eo,[32773]:(t,e)=>t.blendColor(...e),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(t,e)=>t.clearColor(...e),[3107]:(t,e)=>t.colorMask(...e),[2884]:eo,[2885]:(t,e)=>t.cullFace(e),[2929]:eo,[2931]:(t,e)=>t.clearDepth(e),[2932]:(t,e)=>t.depthFunc(e),[2928]:(t,e)=>t.depthRange(...e),[2930]:(t,e)=>t.depthMask(e),[3024]:eo,[35723]:Lx,[36006]:FG,[2886]:(t,e)=>t.frontFace(e),[33170]:Lx,[2849]:(t,e)=>t.lineWidth(e),[32823]:eo,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:eo,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:eo,[3088]:(t,e)=>t.scissor(...e),[2960]:eo,[2961]:(t,e)=>t.clearStencil(e),[2968]:(t,e)=>t.stencilMaskSeparate(1028,e),[36005]:(t,e)=>t.stencilMaskSeparate(1029,e),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(t,e)=>t.viewport(...e),[3333]:nr,[3317]:nr,[37440]:nr,[37441]:nr,[37443]:nr,[3330]:nr,[3332]:nr,[3331]:nr,[36010]:UG,[3314]:nr,[32878]:nr,[3316]:nr,[3315]:nr,[32877]:nr,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=zu(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=zu(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=zu(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=zu(e)&&e.length===3?[...e,...e]:e;const[n,r,i,o,s,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,o,s,a)},stencilOp:(t,e)=>{e=zu(e)&&e.length===3?[...e,...e]:e;const[n,r,i,o,s,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,o,s,a)},viewport:(t,e)=>t.viewport(...e)};function Gt(t,e,n){return e[t]!==void 0?e[t]:n[t]}const BG={blendEquation:(t,e,n)=>t.blendEquationSeparate(Gt(32777,e,n),Gt(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Gt(32969,e,n),Gt(32968,e,n),Gt(32971,e,n),Gt(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Gt(32824,e,n),Gt(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Gt(32938,e,n),Gt(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Gt(2962,e,n),Gt(2967,e,n),Gt(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Gt(34816,e,n),Gt(36003,e,n),Gt(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Gt(2964,e,n),Gt(2965,e,n),Gt(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Gt(34817,e,n),Gt(34818,e,n),Gt(34819,e,n))},Mx={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({[36006]:n,[36010]:n});case 36009:return t({[36006]:n});case 36008:return t({[36010]:n});default:return null}},blendColor:(t,e,n,r,i)=>t({[32773]:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({[32777]:e,[34877]:e}),blendEquationSeparate:(t,e,n)=>t({[32777]:e,[34877]:n}),blendFunc:(t,e,n)=>t({[32969]:e,[32968]:n,[32971]:e,[32970]:n}),blendFuncSeparate:(t,e,n,r,i)=>t({[32969]:e,[32968]:n,[32971]:r,[32970]:i}),clearColor:(t,e,n,r,i)=>t({[3106]:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({[2931]:e}),clearStencil:(t,e)=>t({[2961]:e}),colorMask:(t,e,n,r,i)=>t({[3107]:[e,n,r,i]}),cullFace:(t,e)=>t({[2885]:e}),depthFunc:(t,e)=>t({[2932]:e}),depthRange:(t,e,n)=>t({[2928]:new Float32Array([e,n])}),depthMask:(t,e)=>t({[2930]:e}),frontFace:(t,e)=>t({[2886]:e}),lineWidth:(t,e)=>t({[2849]:e}),polygonOffset:(t,e,n)=>t({[32824]:e,[10752]:n}),sampleCoverage:(t,e,n)=>t({[32938]:e,[32939]:n}),scissor:(t,e,n,r,i)=>t({[3088]:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({[2968]:e,[36005]:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({[2962]:e,[2967]:n,[2963]:r,[34816]:e,[36003]:n,[36004]:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({[2964]:e,[2965]:n,[2966]:r,[34817]:e,[34818]:n,[34819]:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({[2978]:[e,n,r,i]})},ni=(t,e)=>t.isEnabled(e),Ox={[3042]:ni,[2884]:ni,[2929]:ni,[3024]:ni,[32823]:ni,[32926]:ni,[32928]:ni,[3089]:ni,[2960]:ni,[35977]:ni};function NM(t){for(const e in t)return!1;return!0}function VG(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function kx(t,e){const n=t[e].bind(t);t[e]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache?t.state.enable?t.state.cache[i]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function $G(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];const{valueChanged:u,oldValue:l}=n(t.state._updateCache,...s);return u&&r(...s),l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function jG(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class GG{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?HG(e):Object.assign({},ab),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Nn(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];zi(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in e){Nn(o!==void 0);const s=e[o],a=this.cache[o];VG(s,a)||(n=!0,r=a,i&&!(o in i)&&(i[o]=a),this.cache[o]=s)}return{valueChanged:n,oldValue:r}}}function DM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(Nn(r!==void 0),!t.state){const{polyfillContext:i}=globalThis;i&&i(t),t.state=new GG(t,{copyState:r}),jG(t);for(const o in Mx){const s=Mx[o];$G(t,o,s)}kx(t,"getParameter"),kx(t,"isEnabled")}return t.state.enable=n,t}function WG(t){t.state||DM(t,{copyState:!1}),t.state.push()}function Ix(t){Nn(t.state),t.state.pop()}function zi(t,e){if(Nn(pg(t),"setParameters requires a WebGL context"),NM(e))return;const n={};for(const i in e){const o=Number(i),s=zG[i];s&&(typeof s=="string"?n[s]=!0:s(t,e[i],o))}const r=t.state&&t.state.cache;if(r)for(const i in n){const o=BG[i];o(t,e,r)}}function HG(t,e){if(e=e||ab,typeof e=="number"){const i=e,o=Ox[i];return o?o(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const o=Ox[i];r[i]=o?o(t,Number(i)):t.getParameter(Number(i))}return r}function YG(t){zi(t,ab)}function xr(t,e,n){if(NM(e))return n(t);const{nocatch:r=!0}=e;WG(t),zi(t,e);let i;if(r)i=n(t),Ix(t);else try{i=n(t)}finally{Ix(t)}return i}function Wa(t){const{luma:e}=t;if(t.canvas&&e){const{clientWidth:n}=e.canvasSizeInfo;return n?t.drawingBufferWidth/n:1}return 1}function t0(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=Wa(t),i=t.drawingBufferWidth,o=t.drawingBufferHeight;return qG(e,r,i,o,n)}function XG(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function qG(t,e,n,r,i){const o=Nx(t[0],e,n);let s=Dx(t[1],e,r,i),a=Nx(t[0]+1,e,n);const u=a===n-1?a:a-1;a=Dx(t[1]+1,e,r,i);let l;return i?(a=a===0?a:a+1,l=s,s=a):l=a===r-1?a:a-1,{x:o,y:s,width:Math.max(u-o+1,1),height:Math.max(l-s+1,1)}}function Nx(t,e,n){return Math.min(Math.round(t*e),n-1)}function Dx(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const ub=Wi(),ZG=ub&&typeof document<"u",FM={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function UM(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Nn(ub,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},FM,t);const{width:e,height:n}=t;function r(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=r;let i;const{canvas:o}=t,s=eW({canvas:o,width:e,height:n,onError:r});return i=JG(s,t),i?(i=lb(i,t),tW(i),i):null}function lb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||nW(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},FM,e);const{manageState:n,debug:r}=e;return n&&DM(t,{copyState:!1,log:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return Ae.log(1,...o)()}}),ub&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),Ae.level=Math.max(Ae.level,1)):Ae.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function KG(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),o=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:o||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function QG(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const r=XG(e.useDevicePixels);rW(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function JG(t,e){const{onError:n}=e;let r=null;const i=u=>r=u.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:s=!0}=e;let a=null;return s&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),o&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function eW(t){let{canvas:e,width:n=800,height:r=600,onError:i}=t,o;return typeof e=="string"?(ZG&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(e,"' before page was loaded")),o=document.getElementById(e)):e?o=e:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",o.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function tW(t){const e=Je(t)?"WebGL2":"WebGL1",n=KG(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";Ae.info(1,"".concat(e).concat(i," context ").concat(r))()}function nW(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function rW(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&(Ae.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const o=t.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==e){let s=e;const a=Math.floor(r*s),u=Math.floor(i*s);t.canvas.width=a,t.canvas.height=u,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==u)&&(Ae.warn("Device pixel ratio clamped")(),s=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*s),t.canvas.height=Math.floor(i*s)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}const yl="8.5.17",iW="set luma.log.level=1 (or higher) to trace rendering";class oW{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new nb({id:e})),this.stats.get(e)}}const ts=new oW;if(globalThis.luma&&globalThis.luma.VERSION!==yl)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(yl));globalThis.luma||(Wi()&&Ae.log(1,"luma.gl ".concat(yl," - ").concat(iW))(),globalThis.luma=globalThis.luma||{VERSION:yl,version:yl,log:Ae,stats:ts,globals:{modules:{},nodeIO:{}}});function sW(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function aW(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function me(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function n0(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return me(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function Po(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const r0={};function gi(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";r0[t]=r0[t]||1;const e=r0[t]++;return"".concat(t,"-").concat(e)}function Fx(t){return me(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function Ha(t){let e=!0;for(const n in t){e=!1;break}return e}function zM(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);r.forEach(s=>{o.methodName||(o[s]=()=>{throw Ae.removed("Calling removed method ".concat(e,".").concat(s,": "),i)(),new Error(s)})})}const Ks="Resource subclass must define virtual methods";class Hi{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gg(e);const{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||gi(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=n0(this.gl,e),me(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const o=Je(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,u="webgl2"in i?i.webgl2:i.webgl1;return o?u:a}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},o=Je(this.gl),s={},a=n||Object.keys(i);for(const u of a){const l=i[u];if(l&&(!("webgl2"in l)||o)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const f=r?Po(this.gl,u):u;s[f]=this.getParameter(u,e),r&&l.type==="GLenum"&&(s[f]=Po(this.gl,s[f]))}}return s}setParameter(e,n){e=n0(this.gl,e),me(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const o=Je(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=n0(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return zM(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(Ks)}_deleteHandle(){throw new Error(Ks)}_bindHandle(e){throw new Error(Ks)}_getOptsFromHandle(){throw new Error(Ks)}_getParameter(e,n){throw new Error(Ks)}_setParameter(e,n){throw new Error(Ks)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=ts.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];ts.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id)}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const i=ts.get("Memory Usage".concat(r));i.get("GPU Memory").addCount(e),i.get("".concat(n," Memory")).addCount(e),this.byteLength=e}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id)}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=ts.get("Memory Usage".concat(n));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const uW="Failed to deduce GL constant from typed array";function Hv(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(uW)}}function zl(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function lW(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:o}=t;const s=n*i;o=o||new Uint8Array(s);for(let a=0;a<r/2;++a){const u=a*s,l=(r-a-1)*s;o.set(e.subarray(u,u+s)),e.copyWithin(u,l,l+s),e.set(o,l)}}function cW(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),o=Math.round(r/2),s=new Uint8Array(i*o*4);for(let a=0;a<o;a++)for(let u=0;u<i;u++)for(let l=0;l<4;l++)s[(a*i+u)*4+l]=e[(a*2*n+u*2)*4+l];return{data:s,width:i,height:o}}function Yv(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:o={}}=n;for(const a in r)if(a in e){const l=r[a]?"".concat(t,".").concat(r[a]):"N/A";Ae.removed("".concat(t,".").concat(a),l)()}for(const a in i)if(a in e){const u=i[a];Ae.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(u))()}let s=null;for(const a in o)if(a in e){const u=o[a];Ae.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(u))(),s=s||Object.assign({},e),s[u]=e[a],delete s[a]}return s||e}const fW={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},hW={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class ur{static getBytesPerElement(e){return zl(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return me(e.size),zl(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new ur(fW,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return ur.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return ur.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=Yv("Accessor",e,hW),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const Ux=10,BM={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},dW={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:BM},pW={removedProps:BM};class _t extends Hi{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/ur.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/ur.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=Yv("Buffer",e,dW),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=Yv("Buffer",e,pW),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new ur(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:i=0}=e,o=e.byteLength||e.length;me(n);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),i!==0||o!==void 0?(Mn(this.gl),this.gl.bufferSubData(this.target,r,n,i,o)):this.gl.bufferSubData(s,r,n),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:i=0,size:o}=e;const{gl:s}=this;return Mn(s),s.bindBuffer(36662,n.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,i,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Mn(this.gl);const o=zl(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(n),a=r;let u,l;e?(l=e.length,u=l-a):(u=Math.min(s,i||s),l=a+u);const c=Math.min(s,u);return i=i||c,me(i<=c),e=e||new o(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):(me(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(Ux,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;me(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,Ux),this.bytesUsed=r,this._trackAllocatedMemory(r);const o=Hv(e);return me(o),this.setAccessor(new ur(this.accessor,{type:o})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;me(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=zl(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new ur(this.accessor,{type:Hv(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return Ae.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Ae.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return Ae.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return Ae.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new ur(this.accessor,e),this}}const cb={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},VM={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},$M={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function gW(t,e){const n=cb[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=Je(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function mW(t,e){const n=cb[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const vW=[9729,9728],zx=globalThis.WebGLBuffer||function(){};class vs extends Hi{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:i}=n;let o=!0;return r&&(o=o&&gW(e,r),o=o&&(!i||mW(e,r))),o}constructor(e,n){const{id:r=gi("texture"),handle:i,target:o}=n;super(e,{id:r,handle:i}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(y=>this.initialize(Object.assign({},e,{pixels:y,data:y}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:o=6408,border:s=0,recreate:a=!1,parameters:u={},pixelStore:l={},textureUnit:c=void 0}=e;n||(n=i);let{width:f,height:h,dataFormat:d,type:g,compressed:m=!1,mipmaps:x=!0}=e;const{depth:_=0}=e;return{width:f,height:h,compressed:m,dataFormat:d,type:g}=this._deduceParameters({format:o,type:g,dataFormat:d,compressed:m,data:n,width:f,height:h}),this.width=f,this.height=h,this.depth=_,this.format=o,this.type=g,this.dataFormat=d,this.border=s,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),x&&this._isNPOT()&&(Ae.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),x=!1,this._updateForNPOT(u)),this.mipmaps=x,this.setImageData({data:n,width:f,height:h,depth:_,format:o,type:g,dataFormat:d,border:s,mipmaps:x,parameters:l,compressed:m}),x&&this.generateMipmap(),this.setParameters(u),a&&(this.data=n),r&&(this._video={video:n,parameters:u,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:i=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Ae.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),xr(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:i=0,format:o=this.format,border:s=this.border,offset:a=0,parameters:u={}}=e;let{data:l=null,type:c=this.type,width:f=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:g=!1}=e;l||(l=r),{type:c,dataFormat:d,compressed:g,width:f,height:h}=this._deduceParameters({format:o,type:c,dataFormat:d,compressed:g,data:l,width:f,height:h});const{gl:m}=this;m.bindTexture(this.target,this.handle);let x=null;({data:l,dataType:x}=this._getDataType({data:l,compressed:g}));let _,y=0;if(xr(this.gl,u,()=>{switch(x){case"null":m.texImage2D(n,i,o,f,h,s,d,c,l);break;case"typed-array":m.texImage2D(n,i,o,f,h,s,d,c,l,a);break;case"buffer":_=Mn(m),_.bindBuffer(35052,l.handle||l),_.texImage2D(n,i,o,f,h,s,d,c,a),_.bindBuffer(35052,null);break;case"browser-object":Je(m)?m.texImage2D(n,i,o,f,h,s,d,c,l):m.texImage2D(n,i,o,d,c,l);break;case"compressed":for(const[b,T]of l.entries())m.compressedTexImage2D(n,b,T.format,T.width,T.height,s,T.data),y+=T.levelSize;break;default:me(!1,"Unknown image data type")}}),x==="compressed")this._trackAllocatedMemory(y,"Texture");else if(l&&l.byteLength)this._trackAllocatedMemory(l.byteLength,"Texture");else{const b=VM[this.dataFormat]||4,T=$M[this.type]||1;this._trackAllocatedMemory(this.width*this.height*b*T,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:i=null,x:o=0,y:s=0,width:a=this.width,height:u=this.height,level:l=0,format:c=this.format,type:f=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:g=0,border:m=this.border,parameters:x={}}=e;if({type:f,dataFormat:h,compressed:d,width:a,height:u}=this._deduceParameters({format:c,type:f,dataFormat:h,compressed:d,data:i,width:a,height:u}),me(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const _=i;i=_.data,a=_.shape[0],u=_.shape[1]}i instanceof _t&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),xr(this.gl,x,()=>{if(d)this.gl.compressedTexSubImage2D(n,l,o,s,a,u,c,i);else if(i===null)this.gl.texSubImage2D(n,l,o,s,a,u,h,f,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(n,l,o,s,a,u,h,f,i,g);else if(i instanceof zx){const _=Mn(this.gl);_.bindBuffer(35052,i),_.texSubImage2D(n,l,o,s,a,u,h,f,g),_.bindBuffer(35052,null)}else Je(this.gl)?Mn(this.gl).texSubImage2D(n,l,o,s,a,u,h,f,i):this.gl.texSubImage2D(n,l,o,s,h,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Ae.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof _t?{data:n.handle,dataType:"buffer"}:n instanceof zx?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:i,height:o,dataFormat:s,type:a,compressed:u}=e;const l=cb[n];return s=s||l&&l.dataFormat,a=a||l&&l.types[0],u=u||l&&l.compressed,{width:i,height:o}=this._deduceImageSize(r,i,o),{dataFormat:s,type:a,compressed:u,width:i,height:o,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},me(i,"Could not deduced texture size"),me(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),me(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:me(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Je(this.gl)||!this.width||!this.height?!1:!Fx(this.width)||!Fx(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:vW.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let yW="";function _W(t,e){return me(typeof t=="string"),t=yW+t,new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}class Fn extends vs{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return vs.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gg(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:_W(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const Xv=[34069,34070,34071,34072,34073,34074];class jM extends vs{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};gg(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:n,data:r,x:i=0,y:o=0,mipmapLevel:s=0}=e;return this._subImage({target:n,data:r,x:i,y:o,mipmapLevel:s})}async setCubeMapImageData(e){let{width:n,height:r,pixels:i,data:o,border:s=0,format:a=6408,type:u=5121}=e;const{gl:l}=this,c=i||o,f=await Promise.all(Xv.map(h=>{const d=c[h];return Promise.all(Array.isArray(d)?d:[d])}));this.bind(),Xv.forEach((h,d)=>{f[d].length>1&&this.opts.mipmaps!==!1&&Ae.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[d].forEach((g,m)=>{n&&r?l.texImage2D(h,m,a,n,r,s,a,u,g):l.texImage2D(h,m,a,a,u,g)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:i,pixels:o,data:s,border:a=0,format:u=6408,type:l=5121}=e,{gl:c}=this,f=o||s;return this.bind(),f instanceof Promise?f.then(h=>this.setImageDataForFace(Object.assign({},e,{face:n,data:h,pixels:h}))):this.width||this.height?c.texImage2D(n,0,u,r,i,a,u,l,f):c.texImage2D(n,0,u,u,l,f),this}}jM.FACES=Xv;class bW extends vs{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return Je(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Mn(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:i,height:o,depth:s=1,border:a=0,format:u,type:l=5121,offset:c=0,data:f,parameters:h={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),xr(this.gl,h,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,n,r,i,o,s,a,u,l,f),f instanceof _t&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,n,r,i,o,s,a,u,l,c))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const d=VM[this.dataFormat]||4,g=$M[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*d*g,"Texture")}return this.loaded=!0,this}}const $o="EXT_color_buffer_float",Bx={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:$o,bpp:2},[33327]:{gl2:$o,bpp:4},[34842]:{gl2:$o,bpp:8},[33326]:{gl2:$o,bpp:4},[33328]:{gl2:$o,bpp:8},[34836]:{gl2:$o,bpp:16},[35898]:{gl2:$o,bpp:4}};function wW(t,e,n){const r=n[e];if(!r)return!1;const i=Je(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}class ma extends Hi{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||wW(e,n,Bx)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:i=1,samples:o=0}=e;return me(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&Je(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,n,r,i):this.gl.renderbufferStorage(36161,n,r,i),this.format=n,this.width=r,this.height=i,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Bx[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const EW=256,SW=1024,xW=16384,Vx=6144,$x=6145,jx=6146,Gx=34041,GM="clear: bad arguments";function fb(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o={};e&&(o.framebuffer=e);let s=0;n&&(s|=xW,n!==!0&&(o.clearColor=n)),r&&(s|=EW,r!==!0&&(o.clearDepth=r)),i&&(s|=SW,r!==!0&&(o.clearStencil=r)),me(s!==0,GM),xr(t,o,()=>{t.clear(s)})}function TW(t){let{framebuffer:e=null,buffer:n=Vx,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Mn(t),xr(t,{framebuffer:e},()=>{switch(n){case Vx:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case $x:t.clearBufferfv($x,0,[i]);break;case jx:t.clearBufferiv(jx,0,[i]);break;case Gx:const[o,s]=i;t.clearBufferfi(Gx,0,o,s);break;default:me(!1,GM)}})}function PW(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return me(!1),0}}function mg(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:u,sourceType:l}=e;const{framebuffer:c,deleteFramebuffer:f}=WM(t);me(c);const{gl:h,handle:d,attachments:g}=c;a=a||c.width,u=u||c.height,o===36064&&d===null&&(o=1028),me(g[o]),l=l||g[o].type,s=CW(s,l,i,a,u),l=l||Hv(s);const m=h.bindFramebuffer(36160,d);return h.readPixels(n,r,a,u,i,l,s),h.bindFramebuffer(36160,m||null),f&&c.delete(),s}function Wx(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=mg(t,{sourceAttachment:e}),{width:i,height:o}=t;for(;o>n;)({data:r,width:i,height:o}=cW({data:r,width:i,height:o}));lW({data:r,width:i,height:o});const s=document.createElement("canvas");s.width=i,s.height=o;const a=s.getContext("2d"),u=a.createImageData(i,o);return u.data.set(r),a.putImageData(u,0,0),s.toDataURL()}function AW(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=n;let{targetX:a,targetY:u,targetZ:l,width:c,height:f}=n;const{framebuffer:h,deleteFramebuffer:d}=WM(t);me(h);const{gl:g,handle:m}=h,x=typeof a<"u"||typeof u<"u"||typeof l<"u";a=a||0,u=u||0,l=l||0;const _=g.bindFramebuffer(36160,m);me(e);let y=null;if(e instanceof vs&&(y=e,c=Number.isFinite(c)?c:y.width,f=Number.isFinite(f)?f:y.height,y.bind(0),e=y.target),!x)g.copyTexImage2D(e,o,s,r,i,c,f,0);else switch(e){case 3553:case 34067:g.copyTexSubImage2D(e,o,a,u,r,i,c,f);break;case 35866:case 32879:Mn(g).copyTexSubImage3D(e,o,a,u,l,r,i,c,f);break}return y&&y.unbind(),g.bindFramebuffer(36160,_||null),d&&h.delete(),y}function WM(t){return t instanceof tn?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:FW(t),deleteFramebuffer:!0}}function CW(t,e,n,r,i){if(t)return t;e=e||5121;const o=zl(e,{clamped:!1}),s=PW(n);return new o(r*i*s)}const At={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function RW(t){const e=new Fn(t,{format:6408,type:5126,dataFormat:6408}),n=new tn(t,{id:"test-framebuffer",check:!1,attachments:{[36064]:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const HM={[At.WEBGL2]:[!1,!0],[At.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[At.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[At.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[At.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[At.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[At.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[At.FLOAT_BLEND]:["EXT_float_blend"],[At.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[At.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[At.TEXTURE_FLOAT]:["OES_texture_float",!0],[At.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[At.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[At.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[At.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[At.COLOR_ATTACHMENT_RGBA32F]:[RW,"EXT_color_buffer_float"],[At.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[At.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[At.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[At.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[At.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[At.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},LW=2;function YM(t,e){return hb(t,e)}function hb(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>XM(t,n))}function MW(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in HM)t.luma.caps[e]===void 0&&(t.luma.caps[e]=XM(t,e));return t.luma.caps}function XM(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=OW(t,e)),t.luma.caps[e]||Ae.log(LW,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function OW(t,e){const n=HM[e];me(n,e);let r;const i=Je(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(const o of i)r=r&&Boolean(t.getExtension(o))}else typeof i=="string"?r=Boolean(t.getExtension(i)):typeof i=="boolean"?r=i:me(!1);return r}const Hx="Multiple render targets not supported";class tn extends Hi{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:i}=n;let o=!0;return r&&(o=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(o=o&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new tn(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Mn(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Mn(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:i=null,color:o=!0,depth:s=!0,stencil:a=!1,check:u=!0,readBuffer:l=void 0,drawBuffers:c=void 0}=e;if(me(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,i)for(const f in i){const h=i[f];(Array.isArray(h)?h[0]:h).resize({width:n,height:r})}else i=this._createDefaultAttachments(o,s,a,n,r);this.update({clearAttachments:!0,attachments:i,readBuffer:l,drawBuffers:c}),i&&u&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:i,clearAttachments:o=!1,resizeAttachments:s=!0}=e;this.attach(n,{clearAttachments:o,resizeAttachments:s});const{gl:a}=this,u=a.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,u||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return me(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&Ae.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(const i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};n&&Object.keys(this.attachments).forEach(s=>{i[s]=null}),Object.assign(i,e);const o=this.gl.bindFramebuffer(36160,this.handle);for(const s in i){me(s!==void 0,"Misspelled framebuffer binding point?");const a=Number(s),u=i[a];let l=u;if(!l)this._unattach(a);else if(l instanceof ma)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(u)){const[c,f=0,h=0]=u;l=c,this._attachTexture({attachment:a,texture:c,layer:f,level:h})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});r&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(s=>!this.attachments[s]).forEach(s=>{delete this.attachments[s]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(IW(e));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:r,stencil:i,drawBuffers:o=[]}=e,s=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&fb(this.gl,{color:n,depth:r,stencil:i}),o.forEach((a,u)=>{TW(this.gl,{drawBuffer:u,value:a})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){return Ae.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Ae.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Ae.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Ae.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Ae.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Ae.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:i=0,width:o,height:s}=e;const a=Mn(this.gl),u=a.bindFramebuffer(36008,this.handle);return r===0&&i===0&&o===void 0&&s===void 0?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,r,i,o,s),a.bindFramebuffer(36008,u),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=Po(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const o of r){const s=n?Po(this.gl,o):o;i[s]=this.getAttachmentParameter(e,o,n)}return i}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),r={};for(const i of n){const o=Number(i),s=e?Po(this.gl,o):o;r[s]=this.getAttachmentParameters(o,e)}return r}show(){return typeof window<"u"&&window.open(Wx(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>Ae.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const r=Wx(this,{targetMaxHeight:100});return Ae.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,o){let s=null;return e&&(s=s||{},s[36064]=new Fn(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(s[36064])),n&&r?(s=s||{},s[33306]=new ma(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(s[33306])):n?(s=s||{},s[36096]=new ma(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(s[36096])):r&&me(!1),s}_unattach(e){const n=this.attachments[e];!n||(n instanceof ma?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e;const{gl:i}=this;i.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:i,level:o}=e;const{gl:s}=this;switch(s.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:Mn(s).framebufferTextureLayer(36160,n,r.target,o,i);break;case 34067:const u=kW(i);s.framebufferTexture2D(36160,n,u,r.handle,o);break;case 3553:s.framebufferTexture2D(36160,n,3553,r.handle,o);break;default:me(!1,"Illegal texture type")}s.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){const n=lG(this.gl);n?n.readBuffer(e):me(e===36064||e===1029,Hx),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=Mn(n);if(r)r.drawBuffers(e);else{const i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):me(e.length===1&&(e[0]===36064||e[0]===1029),Hx)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=MW(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function kW(t){return t<34069?t+34069:t}function IW(t){return(tn.STATUS||{})[t]||"Framebuffer error ".concat(t)}const NW=[36049,36048,33296,33298,33299,33300,33301,33302,33303];tn.ATTACHMENT_PARAMETERS=NW;function DW(t,e){me(t instanceof Fn||t instanceof jM||t instanceof bW);const n=t.constructor,{gl:r,width:i,height:o,format:s,type:a,dataFormat:u,border:l,mipmaps:c}=t,f=Object.assign({width:i,height:o,format:s,type:a,dataFormat:u,border:l,mipmaps:c},e);return new n(r,f)}function FW(t,e){const{gl:n,width:r,height:i,id:o}=t;return new tn(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:r,height:i,attachments:{[36064]:t}}))}function qf(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const UW=35632,zW=35633;function BW(t){switch(t){case UW:return"fragment";case zW:return"vertex";default:return"unknown type"}}function VW(t,e,n,r){const i=t.split(/\r?\n/),o={},s={},a=r||qf(e)||"(unnamed)",u="".concat(BW(n)," shader ").concat(a);for(let c=0;c<i.length;c++){const f=i[c];if(f.length<=1)continue;const h=f.split(":"),d=h[0],g=parseInt(h[2],10);if(isNaN(g))throw new Error("GLSL compilation error in ".concat(u,": ").concat(t));d!=="WARNING"?o[g]=f:s[g]=f}const l=$W(e);return{shaderName:u,errors:Yx(o,l),warnings:Yx(s,l)}}function Yx(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(i,`
`),t[r+1])){const o=t[r+1],s=o.split(":",3),a=s[0],u=parseInt(s[1],10)||0,l=o.substring(s.join(":").length+1).trim();n+=qM("^^^ ".concat(a,": ").concat(l,`

`),u)}}return n}function $W(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((o,s)=>{const a=String(s+e),u=a.length;return qM(a,i-u)+n+o})}function qM(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function ZM(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const jW="Shader: GLSL source code must be a JavaScript string";class Bl extends Hi{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return me(!1),"unknown"}}constructor(e,n){gg(e),me(typeof n.source=="string",jW);const r=qf(n.source,null)||n.id||gi("unnamed ".concat(Bl.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const r=qf(n,null);r&&(this.id=gi(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(Bl.getTypeName(this.shaderType),":").concat(this.id)}getName(){return qf(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:o,warnings:s}=VW(r,this.source,this.shaderType,this.id);throw Ae.error("GLSL compilation errors in ".concat(i,`
`).concat(o))(),Ae.warn("GLSL compilation warnings in ".concat(i,`
`).concat(s))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class i0 extends Bl{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class o0 extends Bl{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const GW={[5126]:Mt.bind(null,"uniform1fv",rr,1,Cn),[35664]:Mt.bind(null,"uniform2fv",rr,2,Cn),[35665]:Mt.bind(null,"uniform3fv",rr,3,Cn),[35666]:Mt.bind(null,"uniform4fv",rr,4,Cn),[5124]:Mt.bind(null,"uniform1iv",to,1,Cn),[35667]:Mt.bind(null,"uniform2iv",to,2,Cn),[35668]:Mt.bind(null,"uniform3iv",to,3,Cn),[35669]:Mt.bind(null,"uniform4iv",to,4,Cn),[35670]:Mt.bind(null,"uniform1iv",to,1,Cn),[35671]:Mt.bind(null,"uniform2iv",to,2,Cn),[35672]:Mt.bind(null,"uniform3iv",to,3,Cn),[35673]:Mt.bind(null,"uniform4iv",to,4,Cn),[35674]:Mt.bind(null,"uniformMatrix2fv",rr,4,Ti),[35675]:Mt.bind(null,"uniformMatrix3fv",rr,9,Ti),[35676]:Mt.bind(null,"uniformMatrix4fv",rr,16,Ti),[35678]:vn,[35680]:vn,[5125]:Mt.bind(null,"uniform1uiv",df,1,Cn),[36294]:Mt.bind(null,"uniform2uiv",df,2,Cn),[36295]:Mt.bind(null,"uniform3uiv",df,3,Cn),[36296]:Mt.bind(null,"uniform4uiv",df,4,Cn),[35685]:Mt.bind(null,"uniformMatrix2x3fv",rr,6,Ti),[35686]:Mt.bind(null,"uniformMatrix2x4fv",rr,8,Ti),[35687]:Mt.bind(null,"uniformMatrix3x2fv",rr,6,Ti),[35688]:Mt.bind(null,"uniformMatrix3x4fv",rr,12,Ti),[35689]:Mt.bind(null,"uniformMatrix4x2fv",rr,8,Ti),[35690]:Mt.bind(null,"uniformMatrix4x3fv",rr,12,Ti),[35678]:vn,[35680]:vn,[35679]:vn,[35682]:vn,[36289]:vn,[36292]:vn,[36293]:vn,[36298]:vn,[36299]:vn,[36300]:vn,[36303]:vn,[36306]:vn,[36307]:vn,[36308]:vn,[36311]:vn},WW={},HW={},YW={},Xx=[0];function db(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(Xx[0]=t,t=Xx);const i=t.length;if(i%e&&Ae.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let o=r[i];o||(o=new n(i),r[i]=o);for(let s=0;s<i;s++)o[s]=t[s];return o}function rr(t,e){return db(t,e,Float32Array,WW)}function to(t,e){return db(t,e,Int32Array,HW)}function df(t,e){return db(t,e,Uint32Array,YW)}function qx(t,e,n){const r=GW[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function XW(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:Boolean(n[2])}}function qW(t,e,n){for(const r in t){const i=t[r];if((!n||Boolean(n[r]))&&!ZW(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function ZW(t){return Array.isArray(t)||ArrayBuffer.isView(t)?QW(t):isFinite(t)||t===!0||t===!1||t instanceof vs||t instanceof ma?!0:t instanceof tn?Boolean(t.texture):!1}function KW(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let i=0,o=n.length;i<o;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function QW(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function vn(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function Mt(t,e,n,r){let i=null,o=null;return(s,a,u)=>{const l=e(u,n),c=l.length;let f=!1;if(i===null)i=new Float32Array(c),o=c,f=!0;else{me(o===c,"Uniform length cannot change.");for(let h=0;h<c;++h)if(l[h]!==i[h]){f=!0;break}}return f&&(r(s,t,a,l),i.set(l)),f}}function Cn(t,e,n,r){t[e](n,r)}function Ti(t,e,n,r){t[e](n,!1,r)}const JW=5120,eH=5121,tH=5122,nH=5123,Zx=0,pf=1,rH=2,iH=3,gf=4,oH=5,sH=6,rn=5126,aH=35664,uH=35665,lH=35666,Bu=5124,cH=35667,fH=35668,hH=35669,Vu=5125,dH=36294,pH=36295,gH=36296,mH=35670,vH=35671,yH=35672,_H=35673,bH=35674,wH=35675,EH=35676,SH=35685,xH=35686,TH=35687,PH=35688,AH=35689,CH=35690,qv={[rn]:[rn,1,"float"],[aH]:[rn,2,"vec2"],[uH]:[rn,3,"vec3"],[lH]:[rn,4,"vec4"],[Bu]:[Bu,1,"int"],[cH]:[Bu,2,"ivec2"],[fH]:[Bu,3,"ivec3"],[hH]:[Bu,4,"ivec4"],[Vu]:[Vu,1,"uint"],[dH]:[Vu,2,"uvec2"],[pH]:[Vu,3,"uvec3"],[gH]:[Vu,4,"uvec4"],[mH]:[rn,1,"bool"],[vH]:[rn,2,"bvec2"],[yH]:[rn,3,"bvec3"],[_H]:[rn,4,"bvec4"],[bH]:[rn,8,"mat2"],[SH]:[rn,8,"mat2x3"],[xH]:[rn,8,"mat2x4"],[wH]:[rn,12,"mat3"],[TH]:[rn,12,"mat3x2"],[PH]:[rn,12,"mat3x4"],[EH]:[rn,16,"mat4"],[AH]:[rn,16,"mat4x2"],[CH]:[rn,16,"mat4x3"]};function RH(t){switch(t){case Zx:return Zx;case pf:return pf;case iH:return pf;case rH:return pf;case gf:return gf;case oH:return gf;case sH:return gf;default:return me(!1),0}}function Kx(t){const e=qv[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function KM(t,e){switch(t){case JW:case eH:case tH:case nH:t=rn;break}for(const n in qv){const[r,i,o]=qv[n];if(r===t&&i===e)return{glType:n,name:o}}return null}class LH{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:o,type:s,size:a}=n.getActiveAttrib(e.handle,i),u=n.getAttribLocation(e.handle,o);u>=0&&this._addAttribute(u,o,s,a)}this.attributeInfos.sort((i,o)=>i.location-o.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!Je(n))return;const r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:o,type:s,size:a}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,o,s,a)}this.varyingInfos.sort((i,o)=>i.location-o.location)}_addAttribute(e,n,r,i){const{type:o,components:s}=Kx(r),a={type:o,size:i*s};this._inferProperties(e,n,a);const u={location:e,name:n,accessor:new ur(a)};this.attributeInfos.push(u),this.attributeInfosByLocation[e]=u,this.attributeInfosByName[u.name]=u}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){const{type:o,components:s}=Kx(r),a=new ur({type:o,size:i*s}),u={location:e,name:n,accessor:a};this.varyingInfos.push(u),this.varyingInfosByName[u.name]=u}}const Qx=4,MH=35981,OH=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class QM extends Hi{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",OH),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:r,fs:i,varyings:o,bufferMode:s=MH}=e;return this.hash=n||"",this.vs=typeof r=="string"?new i0(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new o0(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,me(this.vs instanceof i0),me(this.fs instanceof o0),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Mn(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new LH(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:i,offset:o=0,start:s,end:a,isIndexed:u=!1,indexType:l=5123,instanceCount:c=0,isInstanced:f=c>0,vertexArray:h=null,transformFeedback:d,framebuffer:g,parameters:m={},uniforms:x,samplers:_}=e;if((x||_)&&(Ae.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(x||{})),Ae.priority>=n){const y=g?g.id:"default",b="mode=".concat(Po(this.gl,r)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(Po(this.gl,l)," ")+"isInstanced=".concat(f," isIndexed=").concat(u," ")+"Framebuffer=".concat(y);Ae.log(n,b)()}return me(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||f&&c===0?!1:(h.bindForDraw(i,c,()=>{if(g!==void 0&&(m=Object.assign({},m,{framebuffer:g})),d){const y=RH(r);d.begin(y)}this._bindTextures(),xr(this.gl,m,()=>{u&&f?this.gl2.drawElementsInstanced(r,i,l,o,c):u&&Je(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(r,s,a,i,l,o):u?this.gl.drawElements(r,i,l,o):f?this.gl2.drawArraysInstanced(r,o,i,c):this.gl.drawArrays(r,o,i)}),d&&d.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ae.priority>=2&&qW(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],i=this._uniformSetters[n];if(i){let o=r,s=!1;if(o instanceof tn&&(o=o.texture),o instanceof vs)if(s=this.uniforms[n]!==r,s){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=o,{textureIndex:u}=i;a.bind(u),o=u,this._textureUniforms[n]=a}else o=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(o)||s)&&KW(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new i0({handle:i});break;case 35632:r.fs=new o0({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=gi(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),Ae.time(Qx,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),Ae.timeEnd(Qx,"linkProgram for ".concat(this._getName()))(),e.debug||Ae.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:i}=XW(r.name);let o=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=qx(e,o,r),r.size>1)for(let s=0;s<r.size;s++)o=e.getUniformLocation(this.handle,"".concat(i,"[").concat(s,"]")),this._uniformSetters["".concat(i,"[").concat(s,"]")]=qx(e,o,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const kH=34918,IH=34919,NH=35007,DH=36795,FH=35976,UH=35887,zH=36202;class Pd extends Hi{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=Je(e),i=hb(e,At.TIMER_QUERY);let o=r||i;for(const s of n)switch(s){case"queries":o=o&&r;break;case"timers":o=o&&i;break;default:me(!1)}return o}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(NH)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?zH:UH)}beginTransformFeedbackQuery(){return this.begin(FH)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,IH);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(DH)}getResult(){return this.gl2.getQueryParameter(this.handle,kH)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{const o=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return Pd.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class JM extends Hi{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return Je(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Mn(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Ha(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:i,byteSize:o,byteOffset:s}=this._getBufferParams(n);return r<0?(this.unused[e]=i,Ae.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,s,o),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof _t?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const o=n&&n.handle;return!o||i===void 0?this.gl.bindBufferBase(35982,e,o):this.gl.bindBufferRange(35982,e,o,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let mf=null;function BH(t){return(!mf||mf.byteLength<t)&&(mf=new ArrayBuffer(t)),mf}function VH(t,e){const n=BH(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function $H(t){let{target:e,source:n,start:r=0,count:i=1}=t;const o=n.length,s=i*o;let a=0;for(let u=r;a<o;a++)e[u++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+s-a),a=s);return e}const jH="elements must be GL.ELEMENT_ARRAY_BUFFER";class ir extends Hi{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Je(e)||yM()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new ir(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return ir.MAX_ATTRIBUTES=ir.MAX_ATTRIBUTES||e.getParameter(34921),ir.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:ir._setConstantFloatArray(e,n,r);break;case Int32Array:ir._setConstantIntArray(e,n,r);break;case Uint32Array:ir._setConstantUintArray(e,n,r);break;default:me(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return ir.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return me(!e||e.target===34963,jH),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:i,type:o,stride:s,offset:a,normalized:u,integer:l,divisor:c}=r,{gl:f,gl2:h}=this;return e=Number(e),this.bind(()=>{f.bindBuffer(34962,n.handle),l?(me(Je(f)),h.vertexAttribIPointer(e,i,o,s,a)):f.vertexAttribPointer(e,i,o,u,s,a),f.enableVertexAttribArray(e),h.vertexAttribDivisor(e,c||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!ir.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,o=r.length*e;let s=!this.buffer;if(this.buffer=this.buffer||new _t(this.gl,i),s=s||this.buffer.reallocate(i),s=s||!this._compareConstantArrayValues(r,this.bufferValue),s){const a=VH(n.constructor,o);$H({target:a,source:r,start:0,count:o}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:me(!1)}}static _setConstantIntArray(e,n,r){switch(me(Je(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:me(!1)}}static _setConstantUintArray(e,n,r){switch(me(Je(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:me(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return me(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}}const GH="VertexArray: attributes must be Buffers or constants (i.e. typed array)",WH=/^(.+)__LOCATION_([0-9]+)$/,HH=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class YH{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new ir(e),zM(this,"VertexArray","v6.0",HH),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);const{location:i,accessor:o}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,o)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:o}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new _t(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof _t&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof _t&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){const o={location:-1,accessor:null},{location:s,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(s)||s<0)return this.unused[e]=n,Ae.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),o;const u=this._getAttributeInfo(a||s);if(!u)return o;const l=this.accessors[s]||{},c=ur.resolve(u.accessor,l,r,i),{size:f,type:h}=c;return me(Number.isFinite(f)&&Number.isFinite(h)),{location:s,accessor:c}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=WH.exec(e),i=r?r[1]:e,o=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof _t)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof _t){const r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof _t){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(GH)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}_setConstantAttributeZero(e,n){if(ir.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){ir.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],i=this.accessors[n];if(!r)return;const{divisor:o}=i,s=o>0;if(e.isInstanced=e.isInstanced||s,r instanceof _t){const a=r;if(s){const u=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,u)}else{const u=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,u)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ae.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function XH(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let s=0;s<t.length&&s<n;++s)s>0&&(i+=",".concat(s%r===0?" ":"")),i+=Vl(t[s],e);const o=t.length>n?"...":"]";return"".concat(i).concat(o)}function Vl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return XH(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function Jx(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;me(n);const o=".*_.*",s=".*Matrix",a=n._uniformSetters,u={},l=Object.keys(a).sort();let c=0;for(const d of l)!d.match(o)&&!d.match(s)&&s0({table:u,header:e,uniforms:r,uniformName:d,undefinedOnly:i})&&c++;for(const d of l)d.match(s)&&s0({table:u,header:e,uniforms:r,uniformName:d,undefinedOnly:i})&&c++;for(const d of l)u[d]||s0({table:u,header:e,uniforms:r,uniformName:d,undefinedOnly:i})&&c++;let f=0;const h={};if(!i)for(const d in r){const g=r[d];u[d]||(f++,h[d]={Type:"NOT USED: ".concat(g),[e]:Vl(g)})}return{table:u,count:c,unusedTable:h,unusedCount:f}}function s0(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:o}=t;const s=r[i],a=qH(s);return!o||!a?(e[i]={[n]:a?Vl(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},!0):!1}function qH(t){return t!=null}function ZH(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=eT(e,e.elements,null,n));const i=e.values;for(const o in i){const s=e._getAttributeInfo(o);if(s){let a="".concat(o,": ").concat(s.name);const u=e.accessors[s.location];u&&(a="".concat(o,": ").concat(KH(s.name,u))),r[a]=eT(e,i[o],u,n)}}return r}function eT(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let o="NOT PROVIDED",s=1,a=0,u=0,l,c,f;if(n&&(o=n.type,s=n.size,o=String(o).replace("Array",""),l=o.indexOf("nt")!==-1),e instanceof _t){const h=e,{data:d,changed:g}=h.getDebugData();c=g?"*":"",f=d,u=h.byteLength,a=u/d.BYTES_PER_ELEMENT/s;let m;if(n){const x=n.divisor>0;m="".concat(x?"I ":"P "," ").concat(a," (x").concat(s,"=").concat(u," bytes ").concat(Po(i,o),")")}else l=!0,m="".concat(u," bytes");return{[r]:"".concat(c).concat(Vl(f,{size:s,isInteger:l})),"Format ":m}}return f=e,s=e.length,o=String(e.constructor.name).replace("Array",""),l=o.indexOf("nt")!==-1,{[r]:"".concat(Vl(f,{size:s,isInteger:l})," (constant)"),"Format ":"".concat(s,"x").concat(o," (constant)")}}function KH(t,e){const{type:n,size:r}=e,i=KM(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function QH(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const i=tT(r);e["in ".concat(i)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const i=tT(r);e["out ".concat(i)]={[n]:JSON.stringify(r.accessor)}}return e}function tT(t){const{type:e,size:n}=t.accessor,r=KM(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const nT=Wi()&&typeof document<"u";let JH=0;class eY{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=x=>UM(x),onAddHTML:r=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:s=()=>{},onError:a,gl:u=null,glOptions:l={},debug:c=!1,createFramebuffer:f=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:g=ts.get("animation-loop-".concat(JH++))}=e;let{useDevicePixels:m=!0}=e;"useDevicePixelRatio"in e&&(Ae.deprecated("useDevicePixelRatio","useDevicePixels")(),m=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:o,onFinalize:s,onError:a,gl:u,glOptions:l,debug:c,createFramebuffer:f},this.gl=u,this.needsRedraw=null,this.timeline=null,this.stats=g,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:m}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return me(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Pd.isSupported(this.gl,["timers"])?new Pd(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return Ae.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=nT?new Promise((e,n)=>{if(nT&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):aW(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):sW(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?lb(this.props.gl,e):this.onCreateContext(e),!pg(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");YG(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&QG(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new tn(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const _c="vs",pb="fs";function hr(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const a0={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function tY(t){const e={};for(const n in t){const r=t[n],i=nY(r);e[n]=i}return e}function nY(t){let e=rT(t);return e==="object"?t?"type"in t?Object.assign({},t,a0[t.type]):"value"in t?(e=rT(t.value),Object.assign({type:e},t,a0[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},a0[e])}function rT(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const rY="vs",iY="fs";class iT{constructor(e){let{name:n,vs:r,fs:i,dependencies:o=[],uniforms:s,getUniforms:a,deprecations:u=[],defines:l={},inject:c={},vertexShader:f,fragmentShader:h}=e;hr(typeof n=="string"),this.name=n,this.vs=r||f,this.fs=i||h,this.getModuleUniforms=a,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(u),this.defines=l,this.injections=oY(c),s&&(this.uniforms=tY(s))}getModuleSource(e){let n;switch(e){case rY:n=this.vs||"";break;case iY:n=this.fs||"";break;default:hr(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},r=this.uniforms;for(const i in r){const o=r[i];i in e&&!o.private?(o.validate&&hr(o.validate(e[i],o),"".concat(this.name,": invalid ").concat(i)),n[i]=e[i]):n[i]=o.value}return n}}function oY(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function sY(t){return aY(tO(t))}function aY(t){const e={},n={};return eO({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function eO(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const o of e)r[o.name]=o,(i[o.name]===void 0||i[o.name]<n)&&(i[o.name]=n);for(const o of e)o.dependencies&&eO({modules:o.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function tO(t,e){return t.map(n=>(n instanceof iT||(hr(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),hr(n.name,"shader module has no name"),n=new iT(n),n.dependencies=tO(n.dependencies)),n))}function uY(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}const lY=7936,cY=7937,fY=7938,hY=35724,gb={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Yo={};Object.keys(gb).forEach(t=>{Yo[t]=t});function dY(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function pY(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||lY),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||cY);return{gpuVendor:gY(n,r),vendor:n,renderer:r,version:t.getParameter(fY),shadingLanguageVersion:t.getParameter(hY)}}function gY(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const u0={};function oT(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=gb[e];if(hr(r,e),!uY(n))return!0;if(e in u0)return u0[e];const i=r[0],o=n.behavior||"enable",s="#extension GL_".concat(i," : ").concat(o,`
void main(void) {}`),a=t.createShader(35633);t.shaderSource(a,s),t.compileShader(a);const u=t.getShaderParameter(a,35713);return t.deleteShader(a),u0[e]=u,u}function mY(t,e){const n=gb[e];hr(n,e);const r=dY(t)&&n[1]||n[0],i=typeof r=="string"?Boolean(t.getExtension(r)):r;return hr(i===!1||i===!0),i}function vf(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>mY(t,n))}function vY(t){switch(pY(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function yY(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return vf(t,Yo.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),vf(t,Yo.GLSL_DERIVATIVES)&&oT(t,Yo.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),vf(t,Yo.GLSL_FRAG_DATA)&&oT(t,Yo.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),vf(t,Yo.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const _Y=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,bY=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,wY={[_c]:_Y,[pb]:bY},Zf="__LUMA_INJECT_DECLARATIONS__",sT=/void\s+main\s*\([^)]*\)\s*\{\n?/,aT=/}\n?[^{}]*$/,l0=[];function uT(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=e===_c;for(const o in n){const s=n[o];s.sort((u,l)=>u.order-l.order),l0.length=s.length;for(let u=0,l=s.length;u<l;++u)l0[u]=s[u].injection;const a="".concat(l0.join(`
`),`
`);switch(o){case"vs:#decl":i&&(t=t.replace(Zf,a));break;case"vs:#main-start":i&&(t=t.replace(sT,u=>u+a));break;case"vs:#main-end":i&&(t=t.replace(aT,u=>a+u));break;case"fs:#decl":i||(t=t.replace(Zf,a));break;case"fs:#main-start":i||(t=t.replace(sT,u=>u+a));break;case"fs:#main-end":i||(t=t.replace(aT,u=>a+u));break;default:t=t.replace(o,u=>u+a)}}return t=t.replace(Zf,""),r&&(t=t.replace(/\}\s*$/,o=>o+wY[e])),t}function Zv(t){const e={};return hr(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function Ya(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const nO=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],EY=[...nO,[Ya("attribute"),"in $1"],[Ya("varying"),"out $1"]],SY=[...nO,[Ya("varying"),"in $1"]],rO=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],xY=[...rO,[Ya("in"),"attribute $1"],[Ya("out"),"varying $1"]],TY=[...rO,[Ya("in"),"varying $1"]],Kv="gl_FragColor",Qv=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,PY=/void\s+main\s*\([^)]*\)\s*\{\n?/;function AY(t,e,n){switch(e){case 300:return n?Ad(t,EY):CY(t);case 100:return n?Ad(t,xY):RY(t);default:throw new Error("unknown GLSL version ".concat(e))}}function Ad(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function CY(t){t=Ad(t,SY);const e=t.match(Qv);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(Kv,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(PY,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat(Kv,"\\b"),"g"),n)}return t}function RY(t){t=Ad(t,TY);const e=t.match(Qv);if(e){const n=e[1];t=t.replace(Qv,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),Kv)}return t}const LY=`

`.concat(Zf,`

`),iO={[_c]:"vertex",[pb]:"fragment"},MY=`precision highp float;

`;function OY(t,e){const{vs:n,fs:r}=e,i=sY(e.modules||[]);return{gl:t,vs:lT(t,Object.assign({},e,{source:n,type:_c,modules:i})),fs:lT(t,Object.assign({},e,{source:r,type:pb,modules:i})),getUniforms:kY(i)}}function lT(t,e){let{id:n,source:r,type:i,modules:o,defines:s={},hookFunctions:a=[],inject:u={},transpileToGLSL100:l=!1,prologue:c=!0,log:f}=e;hr(typeof r=="string","shader source must be a string");const h=i===_c,d=r.split(`
`);let g=100,m="",x=r;d[0].indexOf("#version ")===0?(g=300,m=d[0],x=d.slice(1).join(`
`)):m="#version ".concat(g);const _={};o.forEach(D=>{Object.assign(_,D.getDefines())}),Object.assign(_,s);let y=c?"".concat(m,`
`).concat(NY({id:n,source:r,type:i}),`
`).concat(IY({type:i}),`
`).concat(vY(t),`
`).concat(yY(t),`
`).concat(DY(_),`
`).concat(h?"":MY,`
`):"".concat(m,`
`);const b=UY(a),T={},R={},C={};for(const D in u){const F=typeof u[D]=="string"?{injection:u[D],order:0}:u[D],W=D.match(/^(v|f)s:(#)?([\w-]+)$/);if(W){const j=W[2],H=W[3];j?H==="decl"?R[D]=[F]:C[D]=[F]:T[D]=[F]}else C[D]=[F]}for(const D of o){f&&D.checkDeprecations(x,f);const F=D.getModuleSource(i,g);y+=F;const W=D.injections[i];for(const j in W){const H=j.match(/^(v|f)s:#([\w-]+)$/);if(H){const ue=H[2]==="decl"?R:C;ue[j]=ue[j]||[],ue[j].push(W[j])}else T[j]=T[j]||[],T[j].push(W[j])}}return y+=LY,y=uT(y,i,R),y+=FY(b[i],T),y+=x,y=uT(y,i,C),y=AY(y,l?100:g,h),y}function kY(t){return function(n){const r={};for(const i of t){const o=i.getUniforms(n,r);Object.assign(r,o)}return r}}function IY(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(iO[e].toUpperCase(),`
`)}function NY(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(iO[r],`

`):""}function DY(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function FY(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature,` {
`),i.header&&(n+="  ".concat(i.header)),e[r]){const o=e[r];o.sort((s,a)=>s.order-a.order);for(const s of o)n+="  ".concat(s.injection,`
`)}i.footer&&(n+="  ".concat(i.footer)),n+=`}
`}return n}function UY(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[i,o]=n.split(":"),s=n.replace(/\(.+/,"");e[i][s]=Object.assign(r,{signature:o})}),e}const zY="void main() {gl_FragColor = vec4(0);}",oO=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,BY=`#version 300 es
`.concat(oO);function sO(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,o]=n;if(!e.includes(r)||!i||!o)return null;const s=o.split(";")[0];return{qualifier:r,type:i,name:s}}function aO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?BY:e>300?"#version ".concat(e,`
`).concat(oO):zY;const o=jY(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(o,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function VY(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return hr(!1),null}}function $Y(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return hr(!1),null}}function jY(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return hr(!1),null}}const GY=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,WY={name:"fp32",vs:GY,fs:null};function cT(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const cr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function HY(t,{precision:e=cr.precision}={}){return t=YY(t),"".concat(parseFloat(t.toPrecision(e)))}function Xa(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function bn(t,e,n){return qY(t,r=>Math.max(e,Math.min(n,r)))}function ss(t,e,n){return Xa(t)?t.map((r,i)=>ss(r,e[i],n)):n*e+(1-n)*t}function qa(t,e,n){const r=cr.EPSILON;n&&(cr.EPSILON=n);try{if(t===e)return!0;if(Xa(t)&&Xa(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!qa(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=cr.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{cr.EPSILON=r}}function YY(t){return Math.round(t/cr.EPSILON)*cr.EPSILON}function XY(t){return t.clone?t.clone():new Array(t.length)}function qY(t,e,n){if(Xa(t)){const r=t;n=n||XY(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}function ZY(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class uO extends ZY(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Xa(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(cr)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+HY(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!qa(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){const o=e[i];this[i]=o+r*(n[i]-o)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(cr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function KY(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function sr(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function c0(t,e,n=""){if(cr.debug&&!KY(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class QY extends uO{get x(){return this[0]}set x(e){this[0]=sr(e)}get y(){return this[1]}set y(e){this[1]=sr(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return sr(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return sr(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return cT(e>=0&&e<this.ELEMENTS,"index is out of range"),sr(this[e])}setComponent(e,n){return cT(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var Kf=1e-6,Za=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function JY(){var t=new Za(2);return Za!=Float32Array&&(t[0]=0,t[1]=0),t}function Cd(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function lO(t,e){return t[0]=-e[0],t[1]=-e[1],t}function cO(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function eX(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(function(){var t=JY();return function(e,n,r,i,o,s){var a,u;for(n||(n=2),r||(r=0),i?u=Math.min(i*n+r,e.length):u=e.length,a=r;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],o(t,t,s),e[a]=t[0],e[a+1]=t[1];return e}})();function tX(t,e,n){const r=e[0],i=e[1],o=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/o,t[1]=(n[1]*r+n[5]*i)/o,t}function fO(t,e,n){const r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o||1;return t[0]=(n[0]*r+n[4]*i+n[8]*o)/s,t[1]=(n[1]*r+n[5]*i+n[9]*o)/s,t[2]=(n[2]*r+n[6]*i+n[10]*o)/s,t}function nX(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function rX(){var t=new Za(3);return Za!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function iX(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function oX(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function sX(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function aX(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],u=n[2];return t[0]=i*u-o*a,t[1]=o*s-r*u,t[2]=r*a-i*s,t}function hO(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,t}function uX(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function lX(t,e,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=e[0],u=e[1],l=e[2],c=i*l-o*u,f=o*a-r*l,h=r*u-i*a,d=i*h-o*f,g=o*c-r*h,m=r*f-i*c,x=s*2;return c*=x,f*=x,h*=x,d*=2,g*=2,m*=2,t[0]=a+c+d,t[1]=u+f+g,t[2]=l+h+m,t}function cX(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function fX(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function hX(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function dX(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2],u=Math.sqrt(n*n+r*r+i*i),l=Math.sqrt(o*o+s*s+a*a),c=u*l,f=c&&sX(t,e)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var pX=iX;(function(){var t=rX();return function(e,n,r,i,o,s){var a,u;for(n||(n=3),r||(r=0),i?u=Math.min(i*n+r,e.length):u=e.length,a=r;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const f0=[0,0,0];let yf;class mi extends QY{static get ZERO(){return yf||(yf=new mi(0,0,0),Object.freeze(yf)),yf}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Xa(e)?this.copy(e):(cr.debug&&(sr(e),sr(n),sr(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return cr.debug&&(sr(e.x),sr(e.y),sr(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=sr(e)}angle(e){return dX(this,e)}cross(e){return aX(this,this,e),this.check()}rotateX({radians:e,origin:n=f0}){return cX(this,this,n,e),this.check()}rotateY({radians:e,origin:n=f0}){return fX(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=f0}){return hX(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return hO(this,this,e),this.check()}transformAsVector(e){return fO(this,this,e),this.check()}transformByMatrix3(e){return uX(this,this,e),this.check()}transformByMatrix2(e){return nX(this,this,e),this.check()}transformByQuaternion(e){return lX(this,this,e),this.check()}}class gX extends uO{toString(){let e="[";if(cr.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=sr(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function mX(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vX(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Jv(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7],c=e[8],f=e[9],h=e[10],d=e[11],g=e[12],m=e[13],x=e[14],_=e[15],y=n*a-r*s,b=n*u-i*s,T=n*l-o*s,R=r*u-i*a,C=r*l-o*a,D=i*l-o*u,F=c*m-f*g,W=c*x-h*g,j=c*_-d*g,H=f*x-h*m,pe=f*_-d*m,ue=h*_-d*x,se=y*ue-b*pe+T*H+R*j-C*W+D*F;return se?(se=1/se,t[0]=(a*ue-u*pe+l*H)*se,t[1]=(i*pe-r*ue-o*H)*se,t[2]=(m*D-x*C+_*R)*se,t[3]=(h*C-f*D-d*R)*se,t[4]=(u*j-s*ue-l*W)*se,t[5]=(n*ue-i*j+o*W)*se,t[6]=(x*T-g*D-_*b)*se,t[7]=(c*D-h*T+d*b)*se,t[8]=(s*pe-a*j+l*F)*se,t[9]=(r*j-n*pe-o*F)*se,t[10]=(g*C-m*T+_*y)*se,t[11]=(f*T-c*C-d*y)*se,t[12]=(a*W-s*H-u*F)*se,t[13]=(n*H-r*W+i*F)*se,t[14]=(m*b-g*R-x*y)*se,t[15]=(c*R-f*b+h*y)*se,t):null}function yX(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],l=t[8],c=t[9],f=t[10],h=t[11],d=t[12],g=t[13],m=t[14],x=t[15],_=e*s-n*o,y=e*a-r*o,b=e*u-i*o,T=n*a-r*s,R=n*u-i*s,C=r*u-i*a,D=l*g-c*d,F=l*m-f*d,W=l*x-h*d,j=c*m-f*g,H=c*x-h*g,pe=f*x-h*m;return _*pe-y*H+b*j+T*W-R*F+C*D}function as(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],c=e[7],f=e[8],h=e[9],d=e[10],g=e[11],m=e[12],x=e[13],_=e[14],y=e[15],b=n[0],T=n[1],R=n[2],C=n[3];return t[0]=b*r+T*a+R*f+C*m,t[1]=b*i+T*u+R*h+C*x,t[2]=b*o+T*l+R*d+C*_,t[3]=b*s+T*c+R*g+C*y,b=n[4],T=n[5],R=n[6],C=n[7],t[4]=b*r+T*a+R*f+C*m,t[5]=b*i+T*u+R*h+C*x,t[6]=b*o+T*l+R*d+C*_,t[7]=b*s+T*c+R*g+C*y,b=n[8],T=n[9],R=n[10],C=n[11],t[8]=b*r+T*a+R*f+C*m,t[9]=b*i+T*u+R*h+C*x,t[10]=b*o+T*l+R*d+C*_,t[11]=b*s+T*c+R*g+C*y,b=n[12],T=n[13],R=n[14],C=n[15],t[12]=b*r+T*a+R*f+C*m,t[13]=b*i+T*u+R*h+C*x,t[14]=b*o+T*l+R*d+C*_,t[15]=b*s+T*c+R*g+C*y,t}function Rd(t,e,n){var r=n[0],i=n[1],o=n[2],s,a,u,l,c,f,h,d,g,m,x,_;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*o+e[12],t[13]=e[1]*r+e[5]*i+e[9]*o+e[13],t[14]=e[2]*r+e[6]*i+e[10]*o+e[14],t[15]=e[3]*r+e[7]*i+e[11]*o+e[15]):(s=e[0],a=e[1],u=e[2],l=e[3],c=e[4],f=e[5],h=e[6],d=e[7],g=e[8],m=e[9],x=e[10],_=e[11],t[0]=s,t[1]=a,t[2]=u,t[3]=l,t[4]=c,t[5]=f,t[6]=h,t[7]=d,t[8]=g,t[9]=m,t[10]=x,t[11]=_,t[12]=s*r+c*i+g*o+e[12],t[13]=a*r+f*i+m*o+e[13],t[14]=u*r+h*i+x*o+e[14],t[15]=l*r+d*i+_*o+e[15]),t}function mb(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function _X(t,e,n,r){var i=r[0],o=r[1],s=r[2],a=Math.hypot(i,o,s),u,l,c,f,h,d,g,m,x,_,y,b,T,R,C,D,F,W,j,H,pe,ue,se,Ce;return a<Kf?null:(a=1/a,i*=a,o*=a,s*=a,u=Math.sin(n),l=Math.cos(n),c=1-l,f=e[0],h=e[1],d=e[2],g=e[3],m=e[4],x=e[5],_=e[6],y=e[7],b=e[8],T=e[9],R=e[10],C=e[11],D=i*i*c+l,F=o*i*c+s*u,W=s*i*c-o*u,j=i*o*c-s*u,H=o*o*c+l,pe=s*o*c+i*u,ue=i*s*c+o*u,se=o*s*c-i*u,Ce=s*s*c+l,t[0]=f*D+m*F+b*W,t[1]=h*D+x*F+T*W,t[2]=d*D+_*F+R*W,t[3]=g*D+y*F+C*W,t[4]=f*j+m*H+b*pe,t[5]=h*j+x*H+T*pe,t[6]=d*j+_*H+R*pe,t[7]=g*j+y*H+C*pe,t[8]=f*ue+m*se+b*Ce,t[9]=h*ue+x*se+T*Ce,t[10]=d*ue+_*se+R*Ce,t[11]=g*ue+y*se+C*Ce,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function dO(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],u=e[7],l=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=s*i+c*r,t[6]=a*i+f*r,t[7]=u*i+h*r,t[8]=l*i-o*r,t[9]=c*i-s*r,t[10]=f*i-a*r,t[11]=h*i-u*r,t}function bX(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],l=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=s*i-c*r,t[2]=a*i-f*r,t[3]=u*i-h*r,t[8]=o*r+l*i,t[9]=s*r+c*i,t[10]=a*r+f*i,t[11]=u*r+h*i,t}function pO(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],l=e[4],c=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=s*i+c*r,t[2]=a*i+f*r,t[3]=u*i+h*r,t[4]=l*i-o*r,t[5]=c*i-s*r,t[6]=f*i-a*r,t[7]=h*i-u*r,t}function wX(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,u=i+i,l=n*s,c=r*s,f=r*a,h=i*s,d=i*a,g=i*u,m=o*s,x=o*a,_=o*u;return t[0]=1-f-g,t[1]=c+_,t[2]=h-x,t[3]=0,t[4]=c-_,t[5]=1-l-g,t[6]=d+m,t[7]=0,t[8]=h+x,t[9]=d-m,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function EX(t,e,n,r,i,o,s){var a=1/(n-e),u=1/(i-r),l=1/(o-s);return t[0]=o*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o*2*u,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*u,t[10]=(s+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*l,t[15]=0,t}function SX(t,e,n,r,i){var o=1/Math.tan(e/2),s;return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(s=1/(r-i),t[10]=(i+r)*s,t[14]=2*i*r*s):(t[10]=-1,t[14]=-2*r),t}var xX=SX;function TX(t,e,n,r,i,o,s){var a=1/(e-n),u=1/(r-i),l=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*u,t[14]=(s+o)*l,t[15]=1,t}var PX=TX;function AX(t,e,n,r){var i,o,s,a,u,l,c,f,h,d,g=e[0],m=e[1],x=e[2],_=r[0],y=r[1],b=r[2],T=n[0],R=n[1],C=n[2];return Math.abs(g-T)<Kf&&Math.abs(m-R)<Kf&&Math.abs(x-C)<Kf?mX(t):(c=g-T,f=m-R,h=x-C,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=y*h-b*f,o=b*c-_*h,s=_*f-y*c,d=Math.hypot(i,o,s),d?(d=1/d,i*=d,o*=d,s*=d):(i=0,o=0,s=0),a=f*s-h*o,u=h*i-c*s,l=c*o-f*i,d=Math.hypot(a,u,l),d?(d=1/d,a*=d,u*=d,l*=d):(a=0,u=0,l=0),t[0]=i,t[1]=a,t[2]=c,t[3]=0,t[4]=o,t[5]=u,t[6]=f,t[7]=0,t[8]=s,t[9]=l,t[10]=h,t[11]=0,t[12]=-(i*g+o*m+s*x),t[13]=-(a*g+u*m+l*x),t[14]=-(c*g+f*m+h*x),t[15]=1,t)}function CX(){var t=new Za(4);return Za!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function RX(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function bc(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}(function(){var t=CX();return function(e,n,r,i,o,s){var a,u;for(n||(n=4),r||(r=0),i?u=Math.min(i*n+r,e.length):u=e.length,a=r;a<u;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();var ey;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(ey||(ey={}));const LX=45*Math.PI/180,MX=1,h0=.1,d0=500,OX=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Ar extends gX{static get IDENTITY(){return IX()}static get ZERO(){return kX()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return ey}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,o,s,a,u,l,c,f,h,d,g,m,x){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=o,this[5]=s,this[6]=a,this[7]=u,this[8]=l,this[9]=c,this[10]=f,this[11]=h,this[12]=d,this[13]=g,this[14]=m,this[15]=x,this.check()}setRowMajor(e,n,r,i,o,s,a,u,l,c,f,h,d,g,m,x){return this[0]=e,this[1]=o,this[2]=l,this[3]=d,this[4]=n,this[5]=s,this[6]=c,this[7]=g,this[8]=r,this[9]=a,this[10]=f,this[11]=m,this[12]=i,this[13]=u,this[14]=h,this[15]=x,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(OX)}fromObject(e){return this.check()}fromQuaternion(e){return wX(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:i,top:o,near:s=h0,far:a=d0}=e;return a===1/0?NX(this,n,r,i,o,s):EX(this,n,r,i,o,s,a),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return AX(this,n,r,i),this.check()}ortho(e){const{left:n,right:r,bottom:i,top:o,near:s=h0,far:a=d0}=e;return PX(this,n,r,i,o,s,a),this.check()}orthographic(e){const{fovy:n=LX,aspect:r=MX,focalDistance:i=1,near:o=h0,far:s=d0}=e;fT(n);const a=n/2,u=i*Math.tan(a),l=u*r;return this.ortho({left:-l,right:l,bottom:-u,top:u,near:o,far:s})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:o=500}=e;return fT(n),xX(this,n,r,i,o),this.check()}determinant(){return yX(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],o=1/r[1],s=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*o,e[6]=this[6]*s,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*o,e[10]=this[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],o=1/r[1],s=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=this[4]*i,e[4]=this[5]*o,e[5]=this[6]*s,e[6]=this[8]*i,e[7]=this[9]*o,e[8]=this[10]*s,e}transpose(){return vX(this,this),this.check()}invert(){return Jv(this,this),this.check()}multiplyLeft(e){return as(this,e,this),this.check()}multiplyRight(e){return as(this,this,e),this.check()}rotateX(e){return dO(this,this,e),this.check()}rotateY(e){return bX(this,this,e),this.check()}rotateZ(e){return pO(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return _X(this,this,e,n),this.check()}scale(e){return mb(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return Rd(this,this,e),this.check()}transform(e,n){return e.length===4?(n=bc(n||[-0,-0,-0,-0],e,this),c0(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let i;switch(r){case 2:i=eX(n||[-0,-0],e,this);break;case 3:i=hO(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return c0(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=tX(n||[-0,-0],e,this);break;case 3:r=fO(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return c0(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let _f,bf;function kX(){return _f||(_f=new Ar([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(_f)),_f}function IX(){return bf||(bf=new Ar,Object.freeze(bf)),bf}function fT(t){if(t>Math.PI*2)throw Error("expected radians")}function NX(t,e,n,r,i,o){const s=2*o/(n-e),a=2*o/(i-r),u=(n+e)/(n-e),l=(i+r)/(i-r),c=-1,f=-1,h=-2*o;return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=u,t[9]=l,t[10]=c,t[11]=f,t[12]=0,t[13]=0,t[14]=h,t[15]=0,t}const hT=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,DX={lightSources:{}};function p0(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.map(n=>n*e/255)}function FX(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return e?i["lighting_uAmbientLight.color"]=p0(e):i["lighting_uAmbientLight.color"]=[0,0,0],n.forEach((o,s)=>{i["lighting_uPointLight[".concat(s,"].color")]=p0(o),i["lighting_uPointLight[".concat(s,"].position")]=o.position,i["lighting_uPointLight[".concat(s,"].attenuation")]=o.attenuation||[1,0,0]}),i.lighting_uPointLightCount=n.length,r.forEach((o,s)=>{i["lighting_uDirectionalLight[".concat(s,"].color")]=p0(o),i["lighting_uDirectionalLight[".concat(s,"].direction")]=o.direction}),i.lighting_uDirectionalLightCount=r.length,i}function gO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:DX;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},FX({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n);break}return gO({lightSources:e})}return{}}const mO={name:"lights",vs:hT,fs:hT,getUniforms:gO,defines:{MAX_LIGHTS:3}},UX=new Uint8Array([0,255,255,255]),zX={pickingSelectedColor:null,pickingHighlightColor:UX,pickingActive:!1,pickingAttribute:!1};function BX(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zX;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}const VX=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,$X=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,jX={name:"picking",vs:VX,fs:$X,getUniforms:BX},vO=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,GX={};function WX(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(o=>o/255)}}function yO(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:GX;if(!("material"in t))return{};const{material:e}=t;return e?WX(e):{lighting_uEnabled:!1}}const vb={name:"gouraud-lighting",dependencies:[mO],vs:vO,defines:{LIGHTING_VERTEX:1},getUniforms:yO},HX={name:"phong-lighting",dependencies:[mO],fs:vO,defines:{LIGHTING_FRAGMENT:1},getUniforms:yO},YX=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,XX={name:"transform",vs:YX,fs:null};class wc{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new wc(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:r="",defines:i={},inject:o={},varyings:s=[],bufferMode:a=35981,transpileToGLSL100:u=!1}=e,l=this._getModuleList(e.modules),c=this._getHash(n),f=this._getHash(r),h=l.map(b=>this._getHash(b.name)).sort(),d=s.map(b=>this._getHash(b)),g=Object.keys(i).sort(),m=Object.keys(o).sort(),x=[],_=[];for(const b of g)x.push(this._getHash(b)),x.push(this._getHash(i[b]));for(const b of m)_.push(this._getHash(b)),_.push(this._getHash(o[b]));const y="".concat(c,"/").concat(f,"D").concat(x.join("/"),"M").concat(h.join("/"),"I").concat(_.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(u?"T":"");if(!this._programCache[y]){const b=OY(this.gl,{vs:n,fs:r,modules:l,inject:o,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:u});this._programCache[y]=new QM(this.gl,{hash:y,vs:b.vs,fs:b.fs,varyings:s,bufferMode:a}),this._getUniforms[y]=b.getUniforms||(T=>{}),this._useCounts[y]=0}return this._useCounts[y]++,this._programCache[y]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let o=0,s=this._defaultModules.length;o<s;++o){const a=this._defaultModules[o],u=a.name;n[i++]=a,r[u]=!0}for(let o=0,s=e.length;o<s;++o){const a=e[o],u=a.name;r[u]||(n[i++]=a,r[u]=!0)}return n.length=i,n}}const qX={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function ZX(t,e,n){const r={};let i=e.indices;for(const o in e.attributes){const s=e.attributes[o],a=KX(o,n);if(o==="indices")i=s;else if(s.constant)r[a]=s.value;else{const u=s.value,l={...s};delete l.value,r[a]=[new _t(t,u),l],QX(o,l)}}if(i){const o=i.value||i;me(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const s={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new _t(t,{data:o,target:34963}),s]}return r}function KX(t,e){const{attributeMap:n=qX}=e||{};return n&&n[t]||t}function QX(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}me(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const Qs=2,JX=1e4,eq="Model needs drawMode and vertexCount",dT=()=>{},tq={};class Cr{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=gi("model")}=n;me(pg(e)),this.id=r,this.gl=e,this.id=n.id||gi("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||wc.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:i,modules:o,defines:s,inject:a,varyings:u,bufferMode:l,transpileToGLSL100:c}=e;this.programProps={program:n,vs:r,fs:i,modules:o,defines:s,inject:a,varyings:u,bufferMode:l,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},me(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),eq)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:i,modules:o,defines:s,inject:a,varyings:u,bufferMode:l,transpileToGLSL100:c}=e;this.programProps={program:n,vs:r,fs:i,modules:o,defines:s,inject:a,varyings:u,bufferMode:l,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return me(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return me(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=ZX(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ha(e))return this;const n={};for(const r in e){const i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return fb(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:u=this.vertexArray}=e;this.setAttributes(o),this.updateModuleSettings(n),this.setUniforms(i);let l;Ae.priority>=Qs&&(l=this._logDrawCallStart(Qs));const c=this.vertexArray.getDrawParams(),{isIndexed:f=c.isIndexed,indexType:h=c.indexType,indexOffset:d=c.indexOffset,vertexArrayInstanced:g=c.isInstanced}=this.props;g&&!this.isInstanced&&Ae.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:m,instanceCount:x}=this,{onBeforeRender:_=dT,onAfterRender:y=dT}=this.props;_(),this.program.setUniforms(this.uniforms);const b=this.program.draw(Object.assign(tq,e,{logPriority:l,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:u,transformFeedback:s,isIndexed:f,indexType:h,isInstanced:m,instanceCount:x,offset:f?d:0}));return y(),Ae.priority>=Qs&&this._logDrawCallEnd(l,u,r),b}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:o}=e;r&&this._setFeedbackBuffers(r),n&&(o=Object.assign({},o,{[35977]:n})),i.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:o}))}finally{i.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ae.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:i,modules:o,inject:s,defines:a,varyings:u,bufferMode:l,transpileToGLSL100:c}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:o,inject:s,defines:a,varyings:u,bufferMode:l,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}me(n instanceof QM,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new YH(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof _t&&n.delete()}}_setAnimationProps(e){this.animated&&me(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ha(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new JM(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:JX;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),Ae.group(Qs,">>> DRAWING MODEL ".concat(this.id),{collapsed:Ae.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;const o=ZH({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:u}=Jx({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:l,count:c}=Jx({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});c>0&&Ae.log("MISSING UNIFORMS",Object.keys(l))(),u>0&&Ae.log("UNUSED UNIFORMS",Object.keys(a))();const f=QH(this.vertexArray.configuration);Ae.table(e,o)(),Ae.table(e,s)(),Ae.table(e+1,f)(),i&&i.log({logLevel:Qs,message:"Rendered to ".concat(i.id)}),Ae.groupEnd(Qs)()}}class nq{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof _t?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&me(Je(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const o=this.feedbackMap[i];i in n&&(r[o]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const o=r[i];if(typeof o=="string"){const s=n[o],{byteLength:a,usage:u,accessor:l}=s;r[i]=this._createNewBuffer(i,{byteLength:a,usage:u,accessor:l})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n;const{program:i}=r;e.transformFeedback=new JM(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const o=this.feedbackMap[i];n[i]=e.feedbackBuffers[o],r[o]=e.sourceBuffers[i],me(r[o]instanceof _t)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new _t(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const rq="transform_uSampler_",Ld="transform_uSize_",pT="transform_position";function iq(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t,s=Object.keys(n).length,a=null;const u={};let l=e,c={};if(s>0||r){const f=l.split(`
`),h=f.slice();if(f.forEach((d,g,m)=>{if(s>0){const x=lq(d,n);if(x){const{updatedLine:_,inject:y}=x;h[g]=_,c=Zv([c,y]),Object.assign(u,x.samplerTextureMap),s--}}r&&!a&&(a=uq(d,r))}),r){me(i);const d="".concat(Ld).concat(r),g="uniform vec2 ".concat(d,`;
`),m="     vec2 ".concat(pT," = transform_getPos(").concat(d,`);
     gl_Position = vec4(`).concat(pT,`, 0, 1.);
`);c=Zv([c,{"vs:#decl":g,"vs:#main-start":m}])}l=h.join(`
`)}return{vs:l,targetTextureType:a,inject:c,samplerTextureMap:u}}function oq(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let o,s;n&&({width:o,height:s}=r,i["".concat(Ld).concat(n)]=[o,s]);for(const a in e)({width:o,height:s}=e[a]),i["".concat(Ld).concat(a)]=[o,s];return i}function sq(t){return sO(t,["attribute","in"])}function aq(t){const e="".concat(rq).concat(t),n="".concat(Ld).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function uq(t,e){const n=sO(t,["varying","out"]);return n&&n.name===e?n.type:null}function lq(t,e){const n={},r=sq(t);if(!r)return null;const{type:i,name:o}=r;if(o&&e[o]){const s="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:u,uniformDeclerations:l}=aq(o),c=VY(i),f="  ".concat(i," ").concat(o," = transform_getInput(").concat(a,", ").concat(u,").").concat(c,`;
`);return n[a]=o,{updatedLine:s,inject:{"vs:#decl":l,"vs:#main-start":f},samplerTextureMap:n}}return null}const cq={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},fq="transform_output";class hq{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:o}=this.bindings[this.currentIndex],s=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),u=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const h=this.samplerTextureMap[f];a[f]=r[h]}this._setSourceTextureParameters();const c=oq({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(a,c)}return this.hasTargetTexture&&(l=!1,u.viewport=[0,0,i.width,i.height]),{attributes:s,framebuffer:i,uniforms:a,discard:l,parameters:u}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],r=mg(n);if(!e)return r;const i=r.constructor,o=$Y(this.targetTextureType),s=new i(r.length*o/4);let a=0;for(let u=0;u<r.length;u+=4)for(let l=0;l<o;l++)s[a++]=r[u+l];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof Fn)return r;const i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,o=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,i,o)=>{o[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new _t(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:i,targetTexture:o}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),o){e.targetTexture=o;const{width:s,height:a}=o,{framebuffer:u}=e;u?(u.update({attachments:{[36064]:o},resizeAttachments:!1}),u.resize({width:s,height:a})):e.framebuffer=new tn(this.gl,{id:"transform-framebuffer",width:s,height:a,attachments:{[36064]:o}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(cq)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=DW(e,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:o,targetTextureType:s,inject:a,samplerTextureMap:u}=iq({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),l=Zv([e.inject||{},a]);this.targetTextureType=s,this.samplerTextureMap=u;const c=e._fs||aO({version:ZM(i),input:this.targetTextureVarying,inputType:s,output:fq}),f=this.hasSourceTextures||this.targetTextureVarying?[XX].concat(e.modules||[]):e.modules;return{vs:i,fs:c,modules:f,uniforms:o,inject:l}}}class yb{static isSupported(e){return Je(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();me(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new Cr(n,Object.assign({},e,{fs:e.fs||aO({version:ZM(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){dq(n)&&(this.bufferTransform=new nq(e,n)),pq(n)&&(this.textureTransform=new hq(e,n)),me(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=Object.assign(n,i.getDrawOptions(n));return n}}function dq(t){return!!(!Ha(t.feedbackBuffers)||!Ha(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function pq(t){return!!(!Ha(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const gT={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class qr{static get DRAW_MODE(){return gT}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=gi("geometry"),drawMode:r=gT.TRIANGLES,attributes:i={},indices:o=null,vertexCount:s=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,me(ArrayBuffer.isView(i.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(me(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i in e){const o=e[i],{value:s,size:a,constant:u}=o;!u&&s&&a>=1&&(r=Math.min(r,s.length/a))}return me(Number.isFinite(r)),r}}const gq=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),mq=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),vq=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),yq=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),_q={POSITION:{size:3,value:new Float32Array(mq)},NORMAL:{size:3,value:new Float32Array(vq)},TEXCOORD_0:{size:2,value:new Float32Array(yq)}};class bq extends qr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=gi("cube-geometry")}=e;super({...e,id:n,indices:{size:1,value:new Uint16Array(gq)},attributes:{..._q,...e.attributes}})}}let wq=1,Eq=1;class _O{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=e,s=wq++,a={time:0,delay:n,duration:r,rate:i,repeat:o};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:o,channel:s}=i;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=Eq++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const bO="#define SMOOTH_EDGE_RADIUS 0.5",Sq=`
`.concat(bO,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),xq=`
`.concat(bO,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),Tq={name:"geometry",vs:Sq,fs:xq},at={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(at,"IDENTITY",{get:()=>($e.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const fi={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},pr={common:0,meters:1,pixels:2},mT={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Ec={DRAW:"draw",MASK:"mask"},Pq=Object.keys(at).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(at[t],";")).join(""),Aq=Object.keys(fi).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(fi[t],";")).join(""),Cq=Object.keys(pr).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(pr[t],";")).join(""),Rq="".concat(Pq,`
`).concat(Aq,`
`).concat(Cq,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}

//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function Lq(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function vg(t){let e={},n;return r=>{for(const i in r)if(!Lq(r[i],e[i])){n=t(r),e=r;break}return n}}const vT=[0,0,0,0],Mq=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],wO=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Oq=[0,0,0],EO=[0,0,0],kq=vg(Dq);function SO(t,e,n=EO){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,o=!0;switch(e===at.LNGLAT_OFFSETS||e===at.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case fi.WEB_MERCATOR:(e===at.LNGLAT||e===at.CARTESIAN)&&(i=[0,0,0],o=!1);break;case fi.WEB_MERCATOR_AUTO_OFFSET:e===at.LNGLAT?r=i:e===at.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case fi.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case fi.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:o}}function Iq(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:o,viewProjectionMatrix:s}=t,a=vT,u=vT,l=t.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:f,offsetMode:h}=SO(t,e,n);return h&&(u=t.projectPosition(c||f),l=[l[0]-u[0],l[1]-u[1],l[2]-u[2]],u[3]=1,a=bc([],u,s),o=r||o,s=as([],i,o),s=as([],s,Mq)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:u,cameraPosCommon:l,shaderCoordinateOrigin:f,geospatialOrigin:c}}function Nq({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=at.DEFAULT,coordinateOrigin:i=EO,autoWrapLongitude:o=!1}){r===at.DEFAULT&&(r=t.isGeospatial?at.LNGLAT:at.CARTESIAN);const s=kq({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return s.project_uWrapLongitude=o,s.project_uModelMatrix=n||wO,s}function Dq({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:u,geospatialOrigin:l}=Iq(t,n,r),c=t.getDistanceScales(),f=[t.width*e,t.height*e],h=bc([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,d={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:u,project_uCommonOrigin:s.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(t._pseudoMeters),project_uViewportSize:f,project_uDevicePixelRatio:e,project_uFocalDistance:h,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Oq,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:wO,project_uCameraPosition:a};if(l){const g=t.getDistanceScales(l);switch(n){case at.METER_OFFSETS:d.project_uCommonUnitsPerWorldUnit=g.unitsPerMeter,d.project_uCommonUnitsPerWorldUnit2=g.unitsPerMeter2;break;case at.LNGLAT:case at.LNGLAT_OFFSETS:t._pseudoMeters||(d.project_uCommonUnitsPerMeter=g.unitsPerMeter),d.project_uCommonUnitsPerWorldUnit=g.unitsPerDegree,d.project_uCommonUnitsPerWorldUnit2=g.unitsPerDegree2;break;case at.CARTESIAN:d.project_uCommonUnitsPerWorldUnit=[1,1,g.unitsPerMeter[2]],d.project_uCommonUnitsPerWorldUnit2=[0,0,g.unitsPerMeter2[2]];break}}return d}const Fq={};function Uq(t=Fq){return"viewport"in t?Nq(t):{}}const _b={name:"project",dependencies:[WY,Tq],vs:Rq,getUniforms:Uq},zq=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,_i={name:"project32",dependencies:[_b],vs:zq};function Bq(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ca(t,e){const n=bc([],e,t);return RX(n,n,1/n[3]),n}function yT(t,e){const n=t%e;return n<0?e+n:n}function ty(t,e,n){return t<e?e:t>n?n:t}function Vq(t){return Math.log(t)*Math.LOG2E}const bb=Math.log2||Vq;function Bi(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const $r=Math.PI,xO=$r/4,Hr=$r/180,ny=180/$r,$l=512,ry=4003e4,wf=85.051129,$q=1.5;function jq(t){return bb(t)}function Ka(t){const[e,n]=t;Bi(Number.isFinite(e)),Bi(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*Hr,i=n*Hr,o=$l*(r+$r)/(2*$r),s=$l*($r+Math.log(Math.tan(xO+i*.5)))/(2*$r);return[o,s]}function Qa(t){const[e,n]=t,r=e/$l*(2*$r)-$r,i=2*(Math.atan(Math.exp(n/$l*(2*$r)-$r))-xO);return[r*ny,i*ny]}function Gq(t){const{latitude:e}=t;Bi(Number.isFinite(e));const n=Math.cos(e*Hr);return jq(ry*n)-9}function iy(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;Bi(Number.isFinite(e)&&Number.isFinite(n));const i=$l,o=Math.cos(e*Hr),s=i/360,a=s/o,u=i/ry/o,l={unitsPerMeter:[u,u,u],metersPerUnit:[1/u,1/u,1/u],unitsPerDegree:[s,a,u],degreesPerUnit:[1/s,1/a,1/u]};if(r){const c=Hr*Math.tan(e*Hr)/o,f=s*c/2,h=i/ry*c,d=h/a*u;l.unitsPerDegree2=[0,f,h],l.unitsPerMeter2=[d,0,d]}return l}function TO(t,e){const[n,r,i]=t,[o,s,a]=e,{unitsPerMeter:u,unitsPerMeter2:l}=iy({longitude:n,latitude:r,highPrecision:!0}),c=Ka(t);c[0]+=o*(u[0]+l[0]*s),c[1]+=s*(u[1]+l[1]*s);const f=Qa(c),h=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[f[0],f[1],h]:f}function Wq(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:o,center:s}=t,a=Bq();Rd(a,a,[0,0,-i]),dO(a,a,-n*Hr),pO(a,a,r*Hr);const u=o/e;return mb(a,a,[u,u,u]),s&&Rd(a,a,oX([],s)),a}function Hq(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:o,center:s,scale:a,nearZMultiplier:u=1,farZMultiplier:l=1}=t;let{fovy:c=Md($q)}=t;r!==void 0&&(c=Md(r));const f=c*Hr,h=i*Hr,d=PO(c);let g=d;s&&(g+=s[2]*a/Math.cos(h)/n);const m=f*(.5+(o?o[1]:0)/n),x=Math.sin(m)*g/Math.sin(ty(Math.PI/2-h-m,.01,Math.PI-.01)),_=Math.sin(h)*x+g,y=g*10,b=Math.min(_*l,y);return{fov:f,aspect:e/n,focalDistance:d,near:u,far:b}}function Md(t){return 2*Math.atan(.5/t)*ny}function PO(t){return .5/Math.tan(.5*t*Hr)}function AO(t,e){const[n,r,i=0]=t;return Bi(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),Ca(e,[n,r,i,1])}function yg(t,e,n=0){const[r,i,o]=t;if(Bi(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return Ca(e,[r,i,o,1]);const s=Ca(e,[r,i,0,1]),a=Ca(e,[r,i,1,1]),u=s[2],l=a[2],c=u===l?0:((n||0)-u)/(l-u);return cO([],s,a,c)}function CO(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:o=24,offset:s=[0,0]}=t,[[a,u],[l,c]]=r,f=Yq(t.padding),h=Ka([a,ty(c,-wf,wf)]),d=Ka([l,ty(u,-wf,wf)]),g=[Math.max(Math.abs(d[0]-h[0]),i),Math.max(Math.abs(d[1]-h[1]),i)],m=[e-f.left-f.right-Math.abs(s[0])*2,n-f.top-f.bottom-Math.abs(s[1])*2];Bi(m[0]>0&&m[1]>0);const x=m[0]/g[0],_=m[1]/g[1],y=(f.right-f.left)/2/x,b=(f.top-f.bottom)/2/_,T=[(d[0]+h[0])/2+y,(d[1]+h[1])/2+b],R=Qa(T),C=Math.min(o,bb(Math.abs(Math.min(x,_))));return Bi(Number.isFinite(C)),{longitude:R[0],latitude:R[1],zoom:C}}function Yq(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Bi(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const _T=Math.PI/180;function Xq(t,e=0){const{width:n,height:r,unproject:i}=t,o={targetZ:e},s=i([0,r],o),a=i([n,r],o);let u,l;const c=t.fovy?.5*t.fovy*_T:Math.atan(.5/t.altitude),f=(90-t.pitch)*_T;return c>f-.01?(u=bT(t,0,e),l=bT(t,n,e)):(u=i([0,0],o),l=i([n,0],o)),[s,a,l,u]}function bT(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=Ca(r,[e,0,1,1]),o=Ca(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),u=cO([],i,o,a),l=Qa(u);return l.push(n),l}const wT=512;function qq(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:o,zoom:s,bearing:a=0}=t;(i<-180||i>180)&&(i=yT(i+180,360)-180),(a<-180||a>180)&&(a=yT(a+180,360)-180);const u=bb(n/wT);if(s<=u)s=u,o=0;else{const l=n/2/Math.pow(2,s),c=Qa([0,l])[1];if(o<c)o=c;else{const f=Qa([0,wT-l])[1];o>f&&(o=f)}}return{width:e,height:n,longitude:i,latitude:o,zoom:s,pitch:r,bearing:a}}const Zq=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,Kq=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,Qq=vg(rZ),Jq=vg(iZ),eZ=[0,0,0,1],tZ=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function nZ(t,e){const[n,r,i]=t,o=yg([n,r,i],e);return Number.isFinite(i)?o:[o[0],o[1],0]}function rZ({viewport:t,center:e}){return new Ar(t.viewProjectionMatrix).invert().transform(e)}function iZ({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,o=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(s=>nZ(s,r));for(const s of e){const a=s.clone().translate(new mi(t.center).negate()),u=o.map(c=>a.transform(c)),l=new Ar().ortho({left:Math.min(...u.map(c=>c[0])),right:Math.max(...u.map(c=>c[0])),bottom:Math.min(...u.map(c=>c[1])),top:Math.max(...u.map(c=>c[1])),near:Math.min(...u.map(c=>-c[2])),far:Math.max(...u.map(c=>-c[2]))});n.push(l.multiplyRight(s))}return n}function oZ(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||eZ,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=Qq({viewport:t.viewport,center:e.project_uCenter}),o=[],s=Jq({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const u=s[a],l=u.clone().translate(new mi(t.viewport.center).negate());e.project_uCoordinateSystem===at.LNGLAT&&e.project_uProjectionMode===fi.WEB_MERCATOR?(s[a]=l,o[a]=i):(s[a]=u.clone().multiplyRight(tZ),o[a]=l.transform(i))}for(let a=0;a<s.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],r["shadow_uProjectCenters[".concat(a,"]")]=o[a],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return r}const g0={name:"shadow",dependencies:[_b],vs:Zq,fs:Kq,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?oZ(t,e):{}},bi={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...jX},sZ=[_b],aZ=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function uZ(t){const e=wc.getDefaultProgramManager(t);for(const n of sZ)e.addDefaultModule(n);for(const n of aZ)e.addShaderHook(n);return e}const lZ=[255,255,255],cZ=1;let fZ=0;class hZ{constructor(e={}){w(this,"id",void 0),w(this,"color",void 0),w(this,"intensity",void 0),w(this,"type","ambient");const{color:n=lZ}=e,{intensity:r=cZ}=e;this.id=e.id||"ambient-".concat(fZ++),this.color=n,this.intensity=r}}const dZ=[255,255,255],pZ=1,gZ=[0,0,-1];let mZ=0;class ET{constructor(e={}){w(this,"id",void 0),w(this,"color",void 0),w(this,"intensity",void 0),w(this,"type","directional"),w(this,"direction",void 0),w(this,"shadow",void 0);const{color:n=dZ}=e,{intensity:r=pZ}=e,{direction:i=gZ}=e,{_shadow:o=!1}=e;this.id=e.id||"directional-".concat(mZ++),this.color=n,this.intensity=r,this.type="directional",this.direction=new mi(i).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}}class vZ{constructor(e,n={id:"pass"}){w(this,"id",void 0),w(this,"gl",void 0),w(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class _g extends vZ{constructor(...e){super(...e),w(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return zi(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:i,views:o,onViewportActive:s,clearStack:a=!0,clearCanvas:u=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;u&&_Z(l),a&&(this._lastRenderIndex=-1);const c=[];for(const f of i){const h=o&&o[f.id];s(f);const d=this._getDrawLayerParams(f,e),g=f.subViewports||[f];for(const m of g){const x=this._drawLayersInViewport(l,{target:n,moduleParameters:r,viewport:m,view:h,pass:e.pass,layers:e.layers},d);c.push(x)}}return c}_getDrawLayerParams(e,{layers:n,pass:r,layerFilter:i,cullRect:o,effects:s,moduleParameters:a}){const u=[],l=RO(this._lastRenderIndex+1),c={layer:n[0],viewport:e,isPicking:r.startsWith("picking"),renderPass:r,cullRect:o},f={};for(let h=0;h<n.length;h++){const d=n[h],g=this._shouldDrawLayer(d,c,i,f),m={shouldDrawLayer:g};g&&(m.layerRenderIndex=l(d,g),m.moduleParameters=this._getModuleParameters(d,s,r,a),m.layerParameters=this.getLayerParameters(d,h,e)),u[h]=m}return u}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:o,viewport:s,view:a},u){const l=yZ(e,{moduleParameters:r,target:o,viewport:s});if(a&&a.props.clear){const f=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;xr(e,{scissorTest:!0,scissor:l},()=>fb(e,f))}const c={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};zi(e,{viewport:l});for(let f=0;f<n.length;f++){const h=n[f],{shouldDrawLayer:d,layerRenderIndex:g,moduleParameters:m,layerParameters:x}=u[f];if(d&&h.props.pickable&&c.pickableCount++,h.isComposite)c.compositeCount++;else if(d){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,g),m.viewport=s;try{h._drawLayer({moduleParameters:m,uniforms:{layerIndex:g},parameters:x})}catch(_){h.raiseError(_,"drawing ".concat(h," to ").concat(i))}}}return c}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let s=e.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(n))return!1;n.layer=s,s=s.parent}if(r){const a=n.layer.id;if(a in i||(i[a]=r(n)),!i[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){var o;const s=Object.assign(Object.create(((o=e.internalState)===null||o===void 0?void 0:o.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Wa(this.gl)});if(n)for(const u of n){var a;Object.assign(s,(a=u.getModuleParameters)===null||a===void 0?void 0:a.call(u,e))}return Object.assign(s,this.getModuleParameters(e,n),i)}}function RO(t=0,e={}){const n={},r=(i,o)=>{const s=i.props._offset,a=i.id,u=i.parent&&i.parent.id;let l;if(u&&!(u in e)&&r(i.parent,!1),u in n){const c=n[u]=n[u]||RO(e[u],e);l=c(i,o),n[a]=c}else Number.isFinite(s)?(l=s+(e[u]||0),n[a]=null):l=t;return o&&l>=t&&(t=l+1),e[a]=l,l};return r}function yZ(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&n.id!=="default-framebuffer",o=e&&e.devicePixelRatio||Wa(t),s=i?n.height:t.drawingBufferHeight,a=r;return[a.x*o,s-(a.y+a.height)*o,a.width*o,a.height*o]}function _Z(t){const e=t.drawingBufferWidth,n=t.drawingBufferHeight;zi(t,{viewport:[0,0,e,n]}),t.clear(16640)}class bZ extends _g{constructor(e,n){super(e,n),w(this,"shadowMap",void 0),w(this,"depthBuffer",void 0),w(this,"fbo",void 0),this.shadowMap=new Fn(e,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new ma(e,{format:33189,width:1,height:1}),this.fbo=new tn(e,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(e){const n=this.fbo;xr(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=Wa(this.gl),o=r.width*i,s=r.height*i;(o!==n.width||s!==n.height)&&n.resize({width:o,height:s}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const wZ={color:[255,255,255],intensity:1},ST=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],EZ=[0,0,0,200/255];class LO{constructor(e={}){w(this,"id","lighting-effect"),w(this,"props",null),w(this,"shadowColor",EZ),w(this,"shadow",void 0),w(this,"ambientLight",null),w(this,"directionalLights",[]),w(this,"pointLights",[]),w(this,"shadowPasses",[]),w(this,"shadowMaps",[]),w(this,"dummyShadowMap",null),w(this,"programManager",void 0),w(this,"shadowMatrices",void 0);for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow)}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s}){if(!!this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=wc.getDefaultProgramManager(e),g0&&this.programManager.addDefaultModule(g0)),this.dummyShadowMap||(this.dummyShadowMap=new Fn(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(g0),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new Ar().lookAt({eye:new mi(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new bZ(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new hZ(wZ),this.directionalLights.push(new ET(ST[0]),new ET(ST[1])))}}class SZ{constructor(e={}){w(this,"_pool",[]),w(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:u}){const l=i||e&&e.constructor||Float32Array,c=n*r+o;if(ArrayBuffer.isView(e)){if(c<=e.length)return e;if(c*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,c)}let f=1/0;u&&(f=u*r+o);const h=this._allocate(l,c,a,f);return e&&s?h.set(e):a||h.fill(0,0,4),this._release(e),h}release(e){this._release(e)}_allocate(e,n,r,i){let o=Math.max(Math.ceil(n*this.opts.overAlloc),1);o>i&&(o=i);const s=this._pool,a=e.BYTES_PER_ELEMENT*o,u=s.findIndex(l=>l.byteLength>=a);if(u>=0){const l=new e(s.splice(u,1)[0],0,o);return r&&l.fill(0),l}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,o=n.findIndex(s=>s.byteLength>=i);o<0?n.push(r):(o>0||n.length<this.opts.poolSize)&&n.splice(o,0,r),n.length>this.opts.poolSize&&n.shift()}}const Ja=new SZ;function el(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function xZ(t,e){const n=t%e;return n<0?e+n:n}function TZ(t){return[t[12],t[13],t[14]]}function PZ(t){return{left:Js(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Js(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Js(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Js(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Js(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Js(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const xT=new mi;function Js(t,e,n,r){xT.set(t,e,n);const i=xT.len();return{distance:r/i,normal:new mi(-t/i,-e/i,-n/i)}}function AZ(t){return t-Math.fround(t)}let $u;function m0(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,o=(i-r)/n;$u=Ja.allocate($u,o,{type:Float32Array,size:n*2});let s=r,a=0;for(;s<i;){for(let u=0;u<n;u++){const l=t[s++];$u[a+u]=l,$u[a+u+n]=AZ(l)}a+=n*2}return $u.subarray(0,o*n*2)}const CZ=Math.PI/180,RZ=el(),TT=[0,0,0],LZ={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function MZ({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:o,near:s,far:a}){const u=t/e,l=n?new Ar().orthographic({fovy:r,aspect:u,focalDistance:i,near:s,far:a}):new Ar().perspective({fovy:r,aspect:u,near:s,far:a});if(o){const{left:c=0,right:f=0,top:h=0,bottom:d=0}=o,g=bn((c+t-f)/2,0,t)-t/2,m=bn((h+e-d)/2,0,e)-e/2;l[8]-=g*2/t,l[9]+=m*2/e}return l}class Rs{constructor(e={}){w(this,"id",void 0),w(this,"x",void 0),w(this,"y",void 0),w(this,"width",void 0),w(this,"height",void 0),w(this,"isGeospatial",void 0),w(this,"zoom",void 0),w(this,"focalDistance",void 0),w(this,"position",void 0),w(this,"modelMatrix",void 0),w(this,"distanceScales",void 0),w(this,"scale",void 0),w(this,"center",void 0),w(this,"cameraPosition",void 0),w(this,"projectionMatrix",void 0),w(this,"viewMatrix",void 0),w(this,"viewMatrixUncentered",void 0),w(this,"viewMatrixInverse",void 0),w(this,"viewProjectionMatrix",void 0),w(this,"pixelProjectionMatrix",void 0),w(this,"pixelUnprojectionMatrix",void 0),w(this,"resolution",void 0),w(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.distanceScales=e.distanceScales||LZ,this.focalDistance=e.focalDistance||1,this.position=e.position||TT,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?fi.WEB_MERCATOR:fi.WEB_MERCATOR_AUTO_OFFSET:fi.IDENTITY}equals(e){return e instanceof Rs?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&qa(e.projectionMatrix,this.projectionMatrix)&&qa(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=AO(r,this.pixelProjectionMatrix),[o,s]=i,a=n?s:this.height-s;return e.length===2?[o,a]:[o,a,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,o,s]=e,a=n?o:this.height-o,u=r&&r*this.distanceScales.unitsPerMeter[2],l=yg([i,a,s],this.pixelUnprojectionMatrix,u),[c,f,h]=this.unprojectPosition(l);return Number.isFinite(s)?[c,f,h]:Number.isFinite(r)?[c,f,r]:[c,f]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){const n=Ka(e);return n[1]=bn(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?Qa(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),o=this.unproject([0,this.height],n),s=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],o[0],s[0]),Math.min(r[1],i[1],o[1],s[1]),Math.max(r[0],i[0],o[0],s[0]),Math.max(r[1],i[1],o[1],s[1])]}getDistanceScales(e){return e?iy({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,PZ(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=Gq({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||iy({latitude:r,longitude:n}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:s}=e;let a=TT;if(o&&(a=s?new Ar(s).transformAsVector(o,[]):o),this.isGeospatial){const u=this.projectPosition([n,r,0]);this.center=new mi(a).scale(this.distanceScales.unitsPerMeter).add(u)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=RZ,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:o,fovy:s=75,near:a=.1,far:u=1e3,padding:l=null,focalDistance:c=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new Ar().multiplyRight(n).translate(new mi(this.center).negate()),this.projectionMatrix=r||MZ({width:this.width,height:this.height,orthographic:i,fovyRadians:o||s*CZ,focalDistance:c,padding:l,near:a,far:u});const f=el();as(f,f,this.projectionMatrix),as(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=Jv([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=TZ(this.viewMatrixInverse);const h=el(),d=el();mb(h,h,[this.width/2,-this.height/2,1]),Rd(h,h,[1,-1,0]),as(d,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=Jv(el(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||$e.warn("Pixel project matrix not invertible")()}}w(Rs,"displayName","Viewport");const OZ=512,kZ=4003e4,IZ=Math.PI/180;function PT(t){const e=Math.cos(t*IZ);return OZ/kZ/e}class Vi extends Rs{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,pitch:o=0,bearing:s=0,nearZMultiplier:a=.1,farZMultiplier:u=1.01,orthographic:l=!1,projectionMatrix:c,repeat:f=!1,worldOffset:h=0,legacyMeterSizes:d=!1}=e;let{width:g,height:m,altitude:x=1.5}=e;const _=Math.pow(2,i);g=g||1,m=m||1;let y,b=null;c?(x=c[5]/2,y=Md(x)):(e.fovy?(y=e.fovy,x=PO(y)):y=Md(x),b=Hq({width:g,height:m,pitch:o,fovy:y,nearZMultiplier:a,farZMultiplier:u}));let T=Wq({height:m,pitch:o,bearing:s,scale:_,altitude:x});h&&(T=new Ar().translate([512*h,0,0]).multiplyLeft(T)),super({...e,width:g,height:m,viewMatrix:T,longitude:r,latitude:n,zoom:i,...b,fovy:y,focalDistance:x}),w(this,"longitude",void 0),w(this,"latitude",void 0),w(this,"pitch",void 0),w(this,"bearing",void 0),w(this,"altitude",void 0),w(this,"fovy",void 0),w(this,"orthographic",void 0),w(this,"_subViewports",void 0),w(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=o,this.bearing=s,this.altitude=x,this.fovy=y,this.orthographic=l,this._subViewports=f?[]:null,this._pseudoMeters=d,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const o=i?new Vi({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*PT(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/PT(r);return[n,r,i]}addMetersToLngLat(e,n){return TO(e,n)}panByPosition(e,n){const r=yg(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),o=Cd([],i,lO([],r)),s=Cd([],this.center,o),[a,u]=this.unprojectFlat(s);return{longitude:a,latitude:u}}getBounds(e={}){const n=Xq(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:o,latitude:s,zoom:a}=CO({width:r,height:i,bounds:e,...n});return new Vi({width:r,height:i,longitude:o,latitude:s,zoom:a})}}w(Vi,"displayName","WebMercatorViewport");function v0(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof Vi){const[i,o,s=0]=t,a=e.getDistanceScales([i,o]);r[2]=s*a.unitsPerMeter[2]}return r}function NZ(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:s}=t;return i===at.DEFAULT&&(i=e.isGeospatial?at.LNGLAT:at.CARTESIAN),o===void 0&&(o=i),s===void 0&&(s=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}function MO(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:o}){let[s,a,u=0]=t;switch(n&&([s,a,u]=bc([],[s,a,u,1],n)),r){case at.LNGLAT:return v0([s,a,u],e,o);case at.LNGLAT_OFFSETS:return v0([s+i[0],a+i[1],u+(i[2]||0)],e,o);case at.METER_OFFSETS:return v0(TO(i,[s,a,u]),e,o);case at.CARTESIAN:default:return e.isGeospatial?[s+i[0],a+i[1],u+i[2]]:e.projectPosition([s,a,u])}}function DZ(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=NZ(e),{geospatialOrigin:u,shaderCoordinateOrigin:l,offsetMode:c}=SO(n,r,i),f=MO(t,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:c});if(c){const h=n.projectPosition(u||l);pX(f,f,h)}return f}const na={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Od=Symbol.for("component"),Ra=Symbol.for("asyncPropDefaults"),ys=Symbol.for("asyncPropOriginal"),go=Symbol.for("asyncPropResolved");function wb(t,e=()=>!0){return Array.isArray(t)?OO(t,e,[]):e(t)?[t]:[]}function OO(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?OO(i,e,n):e(i)&&n.push(i)}return n}function FZ({target:t,source:e,start:n=0,count:r=1}){const i=e.length,o=r*i;let s=0;for(let a=n;s<i;s++)t[a++]=e[s];for(;s<o;)s<o-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+o-s),s=o);return t}class UZ{constructor(e,n,r){w(this,"id",void 0),w(this,"context",void 0),w(this,"isLoaded",void 0),w(this,"persistent",void 0),w(this,"_loadCount",0),w(this,"_subscribers",new Set),w(this,"_data",void 0),w(this,"_loader",void 0),w(this,"_error",void 0),w(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=Td(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===r&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const o of this._subscribers)o.onChange(this.getData())}}class zZ{constructor({gl:e,protocol:n}){w(this,"protocol",void 0),w(this,"_context",void 0),w(this,"_resources",void 0),w(this,"_consumers",void 0),w(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let o=this._resources[e];o?o.setData(n,r):(o=new UZ(e,n,this._context),this._resources[e]=o),o.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:o,protocol:s}=this;e.startsWith(s)&&(e=e.replace(s,""),o[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=o[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const o=this._consumers,s=o[e]=o[e]||{},a=s[n]||{},u=a.resourceId&&this._resources[a.resourceId];u&&(u.unsubscribe(a),this.prune()),r&&(s[n]=a,a.onChange=i,a.resourceId=r.id,r.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const BZ="layerManager.setLayers",VZ="layerManager.activateViewport";class $Z{constructor(e,{deck:n,stats:r,viewport:i,timeline:o}={}){w(this,"layers",void 0),w(this,"context",void 0),w(this,"resourceManager",void 0),w(this,"_lastRenderedLayers",[]),w(this,"_needsRedraw",!1),w(this,"_needsUpdate",!1),w(this,"_nextLayers",null),w(this,"_debug",!1),w(this,"activateViewport",s=>{Rn(VZ,this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new zZ({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&uZ(e),stats:r||new nb({id:"deck.gl"}),viewport:i||new Rs({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new _O,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Rn(BZ,this,n,e),this._lastRenderedLayers=e;const r=wb(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const s of e)r[s.id]?$e.warn("Multiple old layers with same id ".concat(s.id))():r[s.id]=s;const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let o=!1;for(const s of i)if(s.hasUniformTransition()){o="Uniform transition in ".concat(s);break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const o=n[i.id];o===null&&$e.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let s=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),s=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}s&&this._updateSublayersRecursively(s,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=na.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=na.MATCHED,n!==e&&(e.lifecycle=na.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=na.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=na.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function fu(t,e){if(t===e)return!0;if(!t||!e)return!1;for(const n in t){const r=t[n],i=e[n];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&fu(r,i)))return!1}return!0}class jZ{constructor(e){w(this,"width",void 0),w(this,"height",void 0),w(this,"views",void 0),w(this,"viewState",void 0),w(this,"controllers",void 0),w(this,"timeline",void 0),w(this,"_viewports",void 0),w(this,"_viewportMap",void 0),w(this,"_isUpdating",void 0),w(this,"_needsRedraw",void 0),w(this,"_needsUpdate",void 0),w(this,"_eventManager",void 0),w(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let o=r.length-1;o>=0;--o){const s=r[o];if(s.containsPixel(i)){const a=e.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=wb(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!fu(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):$e.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var s;return(s=this.getView(e.id))===null||s===void 0?void 0:s.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(e,n,r,i){const o=e.controller;if(o){const s={...n,...o,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return i||(i=this._createController(e,s)),i&&i.setProps(s),i}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const o=e[i],s=this.getViewState(o),a=o.makeViewport({viewState:s,width:this.width,height:this.height});let u=n[o.id];const l=Boolean(o.controller);l&&!u&&(r=!0),(r||!l)&&u&&(u.finalize(),u=null),this.controllers[o.id]=this._updateController(o,s,a,u),this._viewports.unshift(a)}for(const i in n){const o=n[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const GZ=/([0-9]+\.?[0-9]*)(%|px)/;function no(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=GZ.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function ro(t,e){return t.relative?Math.round(t.position*e):t.position}function hn(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class _s{constructor(e){w(this,"id",void 0),w(this,"viewportInstance",void 0),w(this,"_x",void 0),w(this,"_y",void 0),w(this,"_width",void 0),w(this,"_height",void 0),w(this,"_padding",void 0),w(this,"props",void 0);const{id:n,x:r=0,y:i=0,width:o="100%",height:s="100%",padding:a=null,viewportInstance:u}=e||{};hn(!u||u instanceof Rs),this.viewportInstance=u,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=no(r),this._y=no(i),this._width=no(o),this._height=no(s),this._padding=a&&{left:no(a.left||0),right:no(a.right||0),top:no(a.top||0),bottom:no(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&fu(this.props,e.props)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:ro(this._x,e),y:ro(this._y,n),width:ro(this._width,e),height:ro(this._height,n)};return this._padding&&(r.padding={left:ro(this._padding.left,e),top:ro(this._padding.top,n),right:ro(this._padding.right,e),bottom:ro(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class Sc{constructor(e){w(this,"_inProgress",void 0),w(this,"_handle",void 0),w(this,"_timeline",void 0),w(this,"time",void 0),w(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const AT=()=>{},oy={BREAK:1,SNAP_TO_END:2,IGNORE:3},WZ=t=>t,HZ=oy.BREAK;class YZ{constructor(e){w(this,"getControllerState",void 0),w(this,"props",void 0),w(this,"propsInTransition",void 0),w(this,"transition",void 0),w(this,"onViewStateChange",void 0),w(this,"onStateChange",void 0),w(this,"_onTransitionUpdate",n=>{const{time:r,settings:{interpolator:i,startProps:o,endProps:s,duration:a,easing:u}}=n,l=u(r/a),c=i.interpolateProps(o,s,l);this.propsInTransition=this.getControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Sc(e.timeline),this.onViewStateChange=e.onViewStateChange||AT,this.onStateChange=e.onStateChange||AT}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:o,endProps:s}=this.transition.settings;i={...r,...o===oy.SNAP_TO_END?s:this.propsInTransition||r}}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&Boolean(r)}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===oy.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),o=n.transitionInterpolator,s=o.getDuration?o.getDuration(e,n):n.transitionDuration;if(s===0)return;const a=o.initializeProps(e,i);this.propsInTransition={};const u={duration:s,easing:n.transitionEasing||WZ,interpolator:o,interruption:n.transitionInterruption||HZ,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(u),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}class XZ{constructor(e){w(this,"_propsToCompare",void 0),w(this,"_propsToExtract",void 0),w(this,"_requiredProps",void 0);const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!qa(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},i={};for(const o of this._propsToExtract)(o in e||o in n)&&(r[o]=e[o],i[o]=n[o]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){!this._requiredProps||this._requiredProps.forEach(n=>{const r=e[n];hn(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const qZ=["longitude","latitude","zoom","bearing","pitch"],ZZ=["longitude","latitude","zoom"];class Eb extends XZ{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:qZ,required:ZZ},super(r.transitionProps),w(this,"opts",void 0),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:o}=this.opts;if(i&&o){const s=i(e),a=i(n),u=s.unproject(o);r.start.around=o,Object.assign(r.end,{around:a.project(u),aroundPosition:u,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const o of this._propsToExtract)i[o]=ss(e[o]||0,n[o]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...n,...i});Object.assign(i,o.panByPosition(n.aroundPosition,ss(e.around,n.around,r)))}return i}}const io={transitionDuration:0},KZ=300,Ef=t=>1-(1-t)*(1-t),ea={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},jo={};class kO{constructor(e){w(this,"props",void 0),w(this,"state",{}),w(this,"transitionManager",void 0),w(this,"eventManager",void 0),w(this,"onViewStateChange",void 0),w(this,"onStateChange",void 0),w(this,"makeViewport",void 0),w(this,"_controllerState",void 0),w(this,"_events",{}),w(this,"_interactionState",{isDragging:!1}),w(this,"_customEvents",[]),w(this,"_eventStartBlocked",null),w(this,"_panMove",!1),w(this,"invertPan",!1),w(this,"dragMode","rotate"),w(this,"inertia",0),w(this,"scrollZoom",!0),w(this,"dragPan",!0),w(this,"dragRotate",!0),w(this,"doubleClickZoom",!0),w(this,"touchZoom",!0),w(this,"touchRotate",!1),w(this,"keyboard",!0),this.transitionManager=new YZ({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.props;if(n&&n.handled)return!1;const o=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return o&&n&&n.stopPropagation(),o}isFunctionKeyPressed(e){const{srcEvent:n}=e;return Boolean(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?KZ:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:a=!0,touchRotate:u=!1,keyboard:l=!0}=e,c=Boolean(this.onViewStateChange);this.toggleEvents(ea.WHEEL,c&&r),this.toggleEvents(ea.PAN,c&&(i||o)),this.toggleEvents(ea.PINCH,c&&(a||u)),this.toggleEvents(ea.TRIPLE_PAN,c&&u),this.toggleEvents(ea.DOUBLE_TAP,c&&s),this.toggleEvents(ea.KEYBOARD,c&&l),this.scrollZoom=r,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=a,this.touchRotate=u,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const i={...e.getViewportProps(),...n},o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),o){const s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:s})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,io,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,io,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Ef},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,io,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Ef},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=e;let s=2/(1+Math.exp(-Math.abs(o*r)));o<0&&s!==0&&(s=1/s);const a=this.controllerState.zoom({pos:n,scale:s});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,io,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,io,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Ef},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return jo._startPinchRotation=e.rotation,jo._lastPinchEvent=e,this.updateViewport(r,io,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:jo._startPinchRotation-r})}return this.updateViewport(n,io,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),jo._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=jo;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let o=this.controllerState.rotateEnd();const s=Math.log2(e.scale),a=(s-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),u=Math.pow(2,s+a*n/2);o=o.zoom({pos:i,scale:u}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:Ef},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return jo._startPinchRotation=null,jo._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:s}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this;let u;const l={};switch(e.srcEvent.code){case"Minus":u=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),l.isZooming=!0;break;case"Equal":u=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),l.isZooming=!0;break;case"ArrowLeft":n?(u=a.rotateLeft(o),l.isRotating=!0):(u=a.moveLeft(i),l.isPanning=!0);break;case"ArrowRight":n?(u=a.rotateRight(o),l.isRotating=!0):(u=a.moveRight(i),l.isPanning=!0);break;case"ArrowUp":n?(u=a.rotateUp(s),l.isRotating=!0):(u=a.moveUp(i),l.isPanning=!0);break;case"ArrowDown":n?(u=a.rotateDown(s),l.isRotating=!0):(u=a.moveDown(i),l.isPanning=!0);break;default:return!1}return this.updateViewport(u,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?io:e?{...n,transitionInterpolator:new Eb({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class IO{constructor(e,n){w(this,"_viewportProps",void 0),w(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const CT=5,QZ=1.2;class JZ extends IO{constructor(e){const{width:n,height:r,latitude:i,longitude:o,zoom:s,bearing:a=0,pitch:u=0,altitude:l=1.5,position:c=[0,0,0],maxZoom:f=20,minZoom:h=0,maxPitch:d=60,minPitch:g=0,startPanLngLat:m,startZoomLngLat:x,startRotatePos:_,startBearing:y,startPitch:b,startZoom:T,normalize:R=!0}=e;hn(Number.isFinite(o)),hn(Number.isFinite(i)),hn(Number.isFinite(s)),super({width:n,height:r,latitude:i,longitude:o,zoom:s,bearing:a,pitch:u,altitude:l,maxZoom:f,minZoom:h,maxPitch:d,minPitch:g,normalize:R,position:c},{startPanLngLat:m,startZoomLngLat:x,startRotatePos:_,startBearing:y,startPitch:b,startZoom:T}),w(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:o,startPitch:s}=this.getState();if(!i||o===void 0||s===void 0)return this;let a;return e?a=this._getNewRotation(e,i,s,o):a={bearing:o+n,pitch:s+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const{maxZoom:s,minZoom:a}=this.getViewportProps();let u=i+Math.log2(r);u=bn(u,a,s);const l=this.makeViewport({...this.getViewportProps(),zoom:u});return this._getUpdatedState({zoom:u,...l.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:o}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(o-n.longitude)>180&&(r.longitude=o<0?o+360:o-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=bn(i,r,n);const{maxPitch:o,minPitch:s,pitch:a}=e;e.pitch=bn(a,s,o);const{normalize:u=!0}=e;return u&&Object.assign(e,qq(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){const o=e[0]-n[0],s=e[1]-n[1],a=e[1],u=n[1],{width:l,height:c}=this.getViewportProps(),f=o/l;let h=0;s>0?Math.abs(c-u)>CT&&(h=s/(u-c)*QZ):s<0&&u>CT&&(h=1-a/u),h=bn(h,-1,1);const{minPitch:d,maxPitch:g}=this.getViewportProps(),m=i+180*f;let x=r;return h>0?x=r+h*(g-r):h<0&&(x=r-h*(d-r)),{pitch:x,bearing:m}}}class eK extends kO{constructor(...e){super(...e),w(this,"ControllerState",JZ),w(this,"transition",{transitionDuration:300,transitionInterpolator:new Eb({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),w(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class NO extends _s{get ViewportType(){return Vi}get ControllerType(){return eK}}w(NO,"displayName","MapView");class tK extends _g{constructor(e,n){super(e,n),w(this,"maskMap",void 0),w(this,"fbo",void 0);const{mapSize:r=2048}=n;this.maskMap=new Fn(e,{width:r,height:r,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new tn(e,{id:"maskmap",width:r,height:r,attachments:{[36064]:this.maskMap}})}render(e){const n=this.gl,r=[!1,!1,!1,!1];return r[e.channel]=!0,xr(n,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:r,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return e.props.operation===Ec.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}}const nK=new Ar().lookAt({eye:[0,0,1]});function rK({width:t,height:e,near:n,far:r,padding:i}){let o=-t/2,s=t/2,a=-e/2,u=e/2;if(i){const{left:l=0,right:c=0,top:f=0,bottom:h=0}=i,d=bn((l+t-c)/2,0,t)-t/2,g=bn((f+e-h)/2,0,e)-e/2;o-=d,s-=d,a+=g,u+=g}return new Ar().ortho({left:o,right:s,bottom:a,top:u,near:n,far:r})}class iK extends Rs{constructor(e){const{width:n,height:r,near:i=.1,far:o=1e3,zoom:s=0,target:a=[0,0,0],padding:u=null,flipY:l=!0}=e,c=Array.isArray(s)?s[0]:s,f=Array.isArray(s)?s[1]:s,h=Math.min(c,f),d=Math.pow(2,h);let g;if(c!==f){const m=Math.pow(2,c),x=Math.pow(2,f);g={unitsPerMeter:[m/d,x/d,1],metersPerUnit:[d/m,d/x,1]}}super({...e,longitude:void 0,position:a,viewMatrix:nK.clone().scale([d,d*(l?-1:1),d]),projectionMatrix:rK({width:n||1,height:r||1,padding:u,near:i,far:o}),zoom:h,distanceScales:g})}projectFlat([e,n]){const{unitsPerMeter:r}=this.distanceScales;return[e*r[0],n*r[1]]}unprojectFlat([e,n]){const{metersPerUnit:r}=this.distanceScales;return[e*r[0],n*r[1]]}panByPosition(e,n){const r=yg(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),o=Cd([],i,lO([],r)),s=Cd([],this.center,o);return{target:this.unprojectFlat(s)}}}class oK extends IO{constructor(e){const{width:n,height:r,rotationX:i=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:a=0,minRotationX:u=-90,maxRotationX:l=90,minZoom:c=-1/0,maxZoom:f=1/0,startPanPosition:h,startRotatePos:d,startRotationX:g,startRotationOrbit:m,startZoomPosition:x,startZoom:_}=e;super({width:n,height:r,rotationX:i,rotationOrbit:o,target:s,zoom:a,minRotationX:u,maxRotationX:l,minZoom:c,maxZoom:f},{startPanPosition:h,startRotatePos:d,startRotationX:g,startRotationOrbit:m,startZoomPosition:x,startZoom:_}),w(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const r=this.getState().startPanPosition||n;if(!r)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:u}=this.getViewportProps();if(!i||o===void 0||s===void 0)return this;let l;if(e){let c=(e[0]-i[0])/a;const f=(e[1]-i[1])/u;(o<-90||o>90)&&(c*=-1),l={rotationX:o+f*180,rotationOrbit:s+c*180}}else l={rotationX:o+r,rotationOrbit:s+n};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{rotationOrbit:i}=r;return Math.abs(i-n.rotationOrbit)>180&&(r.rotationOrbit=i<0?i+360:i-360),r}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomPosition:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;const s=this._calculateNewZoom({scale:r,startZoom:i}),a=this.makeViewport({...this.getViewportProps(),zoom:s});return this._getUpdatedState({zoom:s,...a.panByPosition(o,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:r,minZoom:i}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);const o=n+Math.log2(e);return bn(o,i,r)}_panFromCenter(e){const{width:n,height:r,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i,maxRotationX:o,minRotationX:s,rotationOrbit:a}=e;return e.zoom=Array.isArray(i)?[bn(i[0],r,n),bn(i[1],r,n)]:bn(i,r,n),e.rotationX=bn(e.rotationX,s,o),(a<-180||a>180)&&(e.rotationOrbit=xZ(a+180,360)-180),e}}class sK extends oK{constructor(e){super(e),w(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:r,minZoom:i}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);let o=Math.log2(e);if(Array.isArray(n)){let[s,a]=n;switch(this.zoomAxis){case"X":s=bn(s+o,i,r);break;case"Y":a=bn(a+o,i,r);break;default:let u=Math.min(s+o,a+o);u<i&&(o+=i-u),u=Math.max(s+o,a+o),u>r&&(o+=r-u),s+=o,a+=o}return[s,a]}return bn(n+o,i,r)}}class aK extends kO{constructor(...e){super(...e),w(this,"ControllerState",sK),w(this,"transition",{transitionDuration:300,transitionInterpolator:new Eb(["target","zoom"])}),w(this,"dragMode","pan")}_onPanRotate(){return!1}}class DO extends _s{get ViewportType(){return iK}get ControllerType(){return aK}}w(DO,"displayName","OrthographicView");function uK({layers:t,viewport:e}){let n=null;for(const o of t){const s=o.getBounds();s&&(n?(n[0]=Math.min(n[0],s[0][0]),n[1]=Math.min(n[1],s[0][1]),n[2]=Math.max(n[2],s[1][0]),n[3]=Math.max(n[3],s[1][1])):n=[s[0][0],s[0][1],s[1][0],s[1][1]])}const r=e.getBounds();if(!n)return r;const i=cK(r);return n[2]-n[0]<i[2]-i[0]||n[3]-n[1]<i[3]-i[1]||(n[0]=Math.max(n[0],i[0]),n[1]=Math.max(n[1],i[1]),n[2]=Math.min(n[2],i[2]),n[3]=Math.min(n[3],i[3])),n}function lK({bounds:t,viewport:e,width:n,height:r}){if(t[2]<=t[0]||t[3]<=t[1])return null;const i=1;if(n-=i*2,r-=i*2,e instanceof Vi){const{longitude:a,latitude:u,zoom:l}=CO({width:n,height:r,bounds:[[t[0],t[1]],[t[2],t[3]]],maxZoom:20});return new Vi({longitude:a,latitude:u,zoom:l,x:i,y:i,width:n,height:r})}const o=[(t[0]+t[2])/2,(t[1]+t[3])/2,0],s=Math.min(20,n/(t[2]-t[0]),r/(t[3]-t[1]));return new DO({x:i,y:i}).makeViewport({width:n,height:r,viewState:{target:o,zoom:Math.log2(s)}})}function cK(t){const e={x:t[2]-t[0],y:t[3]-t[1]},n={x:t[0]+.5*e.x,y:t[1]+.5*e.y};return[n.x-e.x,n.y-e.y,n.x+e.x,n.y+e.y]}class fK{constructor(){w(this,"id","mask-effect"),w(this,"props",null),w(this,"useInPicking",!0),w(this,"dummyMaskMap",void 0),w(this,"channels",[]),w(this,"masks",null),w(this,"maskPass",void 0),w(this,"maskMap",void 0),w(this,"lastViewport",void 0)}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s}){this.dummyMaskMap||(this.dummyMaskMap=new Fn(e,{width:1,height:1}));const a=n.filter(f=>f.props.visible&&f.props.operation===Ec.MASK);if(a.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new tK(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const u=this._sortMaskChannels(a),l=i[0],c=!this.lastViewport||!this.lastViewport.equals(l);for(const f in u)this._renderChannel(u[f],{layerFilter:r,onViewportActive:o,views:s,viewport:l,viewportChanged:c})}_renderChannel(e,{layerFilter:n,onViewportActive:r,views:i,viewport:o,viewportChanged:s}){const a=this.channels[e.index];if(!a)return;const u=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((l,c)=>l!==a.layerBounds[c]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(u||s)&&(this.lastViewport=o,e.bounds=uK({layers:e.layers,viewport:o}),u||!qa(e.bounds,a.bounds))){const{maskPass:l,maskMap:c}=this,f=lK({bounds:e.bounds,viewport:o,width:c.width,height:c.height});e.maskBounds=f?f.getBounds():[0,0,1,1],l.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:n,viewports:f?[f]:[],onViewportActive:r,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const n={};let r=0;for(const i of e){const{id:o}=i.root;let s=n[o];if(!s){if(++r>4){$e.warn("Too many mask layers. The max supported is 4")();continue}s={id:o,index:this.channels.findIndex(a=>(a==null?void 0:a.id)===o),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},n[o]=s}s.layers.push(i),s.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){const o=this.channels[i];(!o||!(o.id in n))&&(this.channels[i]=null)}for(const i in n){const o=n[i];o.index<0&&(o.index=this.channels.findIndex(s=>!s),this.channels[o.index]=o)}return n}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const hK=new LO;class dK{constructor(){w(this,"effects",void 0),w(this,"_internalEffects",void 0),w(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!fu(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new fK),e.some(n=>n instanceof LO)||this._internalEffects.push(hK)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class pK extends _g{shouldDrawLayer(e){return e.props.operation===Ec.DRAW}}const RT={blendFunc:[1,0,32771,0],blendEquation:32774};class FO extends _g{constructor(...e){super(...e),w(this,"pickZ",void 0),w(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:u,width:l,height:c},cullRect:f,effects:h,pass:d="picking",pickZ:g}){const m=this.gl;this.pickZ=g;const x=g?null:{byLayer:new Map,byAlpha:[]};this._colors=x;const _=xr(m,{scissorTest:!0,scissor:[a,u,l,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...RT,blend:!g},()=>super.render({target:s,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,cullRect:f,effects:h==null?void 0:h.filter(b=>b.useInPicking),pass:d}));return this._colors=null,{decodePickingColor:x&&mK.bind(null,x),stats:_}}shouldDrawLayer(e){return e.props.pickable&&e.props.operation===Ec.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const i={...e.props.parameters};return this._colors?(Object.assign(i,RT),i.blend=!0,i.blendColor=gK(this._colors,e,r)):i.blend=!1,i}}function gK(t,e,n){const{byLayer:r,byAlpha:i}=t;let o,s=r.get(e);return s?(s.viewports.push(n),o=s.a):(o=r.size+1,o<=255?(s={a:o,layer:e,viewports:[n]},r.set(e,s),i[o]=s):($e.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function mK(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const vK="deckRenderer.renderLayers";class yK{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new pK(e),this.pickLayersPass=new FO(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||tn.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const r=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,i=n.render({...e,target:r});this._postRender(e.effects,e),this.renderCount++,Rn(vK,this,i,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){let r=null;for(const i of e)i.preRender(this.gl,n),i.postRender&&(r=i);r&&this._resizeRenderBuffers(),this.lastPostProcessEffect=r}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new tn(this.gl),new tn(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,i={inputBuffer:r[0],swapBuffer:r[1],target:null};for(const o of e)if(o.postRender){if(o===this.lastPostProcessEffect){i.target=n.target,o.postRender(this.gl,i);break}const s=o.postRender(this.gl,i);i.inputBuffer=s,i.swapBuffer=s===r[0]?r[1]:r[0]}}}const _K={pickedColor:null,pickedObjectIndex:-1};function bK({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:o}){const{x:s,y:a,width:u,height:l}=o;let c=i*i,f=-1,h=0;for(let d=0;d<l;d++){const g=d+a-r,m=g*g;if(m>c)h+=4*u;else for(let x=0;x<u;x++){if(t[h+3]-1>=0){const y=x+s-n,b=y*y+m;b<=c&&(c=b,f=h)}h+=4}}if(f>=0){const d=t.slice(f,f+4),g=e(d);if(g){const m=Math.floor(f/4/u),x=f/4-m*u;return{...g,pickedColor:d,pickedX:s+x,pickedY:a+m}}$e.error("Picked non-existent layer. Is picking buffer corrupt?")()}return _K}function wK({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const o=t.slice(r,r+4),s=o.join(",");if(!n.has(s)){const a=e(o);a?n.set(s,{...a,color:o}):$e.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function UO({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:o}){let s=e[0];e.length>1&&(s=SK((t==null?void 0:t.pickedViewports)||e,{x:r,y:i}));let a;if(s){const u=[r-s.x,i-s.y];o!==void 0&&(u[2]=o),a=s.unproject(u)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function EK(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,u=s?[s]:[];if(r==="hover"){const f=n.index,h=n.layerId,d=s?s.props.id:null;if(d!==h||a!==f){if(d!==h){const g=i.find(m=>m.props.id===h);g&&u.unshift(g)}n.layerId=d,n.index=a,n.info=null}}const l=UO(t),c=new Map;return c.set(null,l),u.forEach(f=>{let h={...l};f===s&&(h.color=o,h.index=a,h.picked=!0),h=zO({layer:f,info:h,mode:r});const d=h.layer;f===s&&r==="hover"&&(n.info=h),c.set(d.id,h),r==="hover"&&d.updateAutoHighlight(h)}),c}function zO({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function SK(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class xK{constructor(e){w(this,"gl",void 0),w(this,"pickingFBO",void 0),w(this,"depthFBO",void 0),w(this,"pickLayersPass",void 0),w(this,"layerFilter",void 0),w(this,"lastPickedInfo",void 0),w(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new FO(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},o=this.lastPickedInfo.info){const s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,u=s?r.find(h=>h.id===s):null,l=a&&i.find(h=>h.id===a)||i[0],c=l&&l.unproject([e-l.x,n-l.y]);return{...o,...{x:e,y:n,viewport:l,coordinate:c,layer:u}}}_resizeBuffer(){var e,n;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new tn(r),tn.isSupported(r,{colorBufferFloat:!0}))){const i=new tn(r);i.attach({[36064]:new Fn(r,{format:Je(r)?34836:6408,type:5126})}),this.depthFBO=i}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>r.isPickable()&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:o,radius:s=0,depth:a=1,mode:u="query",unproject3D:l,onViewportActive:c,effects:f}){const h=this._getPickable(e),d=Wa(this.gl);if(!h)return{result:[],emptyInfo:UO({viewports:r,x:i,y:o,pixelRatio:d})};this._resizeBuffer();const g=t0(this.gl,[i,o],!0),m=[g.x+Math.floor(g.width/2),g.y+Math.floor(g.height/2)],x=Math.round(s*d),{width:_,height:y}=this.pickingFBO,b=this._getPickingRect({deviceX:m[0],deviceY:m[1],deviceRadius:x,deviceWidth:_,deviceHeight:y}),T={x:i-s,y:o-s,width:s*2+1,height:s*2+1};let R;const C=[],D=new Set;for(let F=0;F<a;F++){let W;if(b){const H=this._drawAndSample({layers:h,views:n,viewports:r,onViewportActive:c,deviceRect:b,cullRect:T,effects:f,pass:"picking:".concat(u)});W=bK({...H,deviceX:m[0],deviceY:m[1],deviceRadius:x,deviceRect:b})}else W={pickedColor:null,pickedObjectIndex:-1};let j;W.pickedLayer&&l&&this.depthFBO&&(j=this._drawAndSample({layers:[W.pickedLayer],views:n,viewports:r,onViewportActive:c,deviceRect:{x:W.pickedX,y:W.pickedY,width:1,height:1},cullRect:T,effects:f,pass:"picking:".concat(u,":z")},!0).pickedColors[0]),W.pickedLayer&&F+1<a&&(D.add(W.pickedLayer),W.pickedLayer.disablePickingIndex(W.pickedObjectIndex)),R=EK({pickInfo:W,lastPickedInfo:this.lastPickedInfo,mode:u,layers:h,viewports:r,x:i,y:o,z:j,pixelRatio:d});for(const H of R.values())H.layer&&C.push(H);if(!W.pickedColor)break}for(const F of D)F.restorePickingColors();return{result:C,emptyInfo:R.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:o,width:s=1,height:a=1,mode:u="query",maxObjects:l=null,onViewportActive:c,effects:f}){const h=this._getPickable(e);if(!h)return[];this._resizeBuffer();const d=Wa(this.gl),g=t0(this.gl,[i,o],!0),m=g.x,x=g.y+g.height,_=t0(this.gl,[i+s,o+a],!0),y=_.x+_.width,b=_.y,T={x:m,y:b,width:y-m,height:x-b},R=this._drawAndSample({layers:h,views:n,viewports:r,onViewportActive:c,deviceRect:T,cullRect:{x:i,y:o,width:s,height:a},effects:f,pass:"picking:".concat(u)}),C=wK(R),D=new Map,F=Number.isFinite(l);for(let W=0;W<C.length&&!(F&&l&&D.size>=l);W++){const j=C[W];let H={color:j.pickedColor,layer:null,index:j.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:d};H=zO({layer:j.pickedLayer,info:H,mode:u}),D.has(H.object)||D.set(H.object,H)}return Array.from(D.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:o,cullRect:s,effects:a,pass:u},l=!1){const c=l?this.depthFBO:this.pickingFBO,{decodePickingColor:f}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:c,deviceRect:o,cullRect:s,effects:a,pass:u,pickZ:l}),{x:h,y:d,width:g,height:m}=o,x=new(l?Float32Array:Uint8Array)(g*m*4);return mg(c,{sourceX:h,sourceY:d,sourceWidth:g,sourceHeight:m,target:x}),{pickedColors:x,decodePickingColor:f}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:o}){const s=Math.max(0,e-r),a=Math.max(0,n-r),u=Math.min(i,e+r+1)-s,l=Math.min(o,n+r+1)-a;return u<=0||l<=0?null:{x:s,y:a,width:u,height:l}}}const TK={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class PK{constructor(e){w(this,"el",null),w(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,TK),n.appendChild(this.el))}setTooltip(e,n,r){const i=this.el;if(!!i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className),Object.assign(i.style,e.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}var hu={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var o=["","webkit","Moz","MS","ms","o"],s=n.createElement("div"),a="function",u=Math.round,l=Math.abs,c=Date.now;function f(S,P,M){return setTimeout(b(S,M),P)}function h(S,P,M){return Array.isArray(S)?(d(S,M[P],M),!0):!1}function d(S,P,M){var $;if(!!S)if(S.forEach)S.forEach(P,M);else if(S.length!==i)for($=0;$<S.length;)P.call(M,S[$],$,S),$++;else for($ in S)S.hasOwnProperty($)&&P.call(M,S[$],$,S)}function g(S,P,M){var $="DEPRECATED METHOD: "+P+`
`+M+` AT 
`;return function(){var te=new Error("get-stack-trace"),we=te&&te.stack?te.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",je=e.console&&(e.console.warn||e.console.log);return je&&je.call(e.console,$,we),S.apply(this,arguments)}}var m;typeof Object.assign!="function"?m=function(P){if(P===i||P===null)throw new TypeError("Cannot convert undefined or null to object");for(var M=Object(P),$=1;$<arguments.length;$++){var te=arguments[$];if(te!==i&&te!==null)for(var we in te)te.hasOwnProperty(we)&&(M[we]=te[we])}return M}:m=Object.assign;var x=g(function(P,M,$){for(var te=Object.keys(M),we=0;we<te.length;)(!$||$&&P[te[we]]===i)&&(P[te[we]]=M[te[we]]),we++;return P},"extend","Use `assign`."),_=g(function(P,M){return x(P,M,!0)},"merge","Use `assign`.");function y(S,P,M){var $=P.prototype,te;te=S.prototype=Object.create($),te.constructor=S,te._super=$,M&&m(te,M)}function b(S,P){return function(){return S.apply(P,arguments)}}function T(S,P){return typeof S==a?S.apply(P&&P[0]||i,P):S}function R(S,P){return S===i?P:S}function C(S,P,M){d(j(P),function($){S.addEventListener($,M,!1)})}function D(S,P,M){d(j(P),function($){S.removeEventListener($,M,!1)})}function F(S,P){for(;S;){if(S==P)return!0;S=S.parentNode}return!1}function W(S,P){return S.indexOf(P)>-1}function j(S){return S.trim().split(/\s+/g)}function H(S,P,M){if(S.indexOf&&!M)return S.indexOf(P);for(var $=0;$<S.length;){if(M&&S[$][M]==P||!M&&S[$]===P)return $;$++}return-1}function pe(S){return Array.prototype.slice.call(S,0)}function ue(S,P,M){for(var $=[],te=[],we=0;we<S.length;){var je=P?S[we][P]:S[we];H(te,je)<0&&$.push(S[we]),te[we]=je,we++}return M&&(P?$=$.sort(function(nn,pn){return nn[P]>pn[P]}):$=$.sort()),$}function se(S,P){for(var M,$,te=P[0].toUpperCase()+P.slice(1),we=0;we<o.length;){if(M=o[we],$=M?M+te:P,$ in S)return $;we++}return i}var Ce=1;function De(){return Ce++}function He(S){var P=S.ownerDocument||S;return P.defaultView||P.parentWindow||e}var ae=/mobile|tablet|ip(ad|hone|od)|android/i,ve="ontouchstart"in e,G=se(e,"PointerEvent")!==i,X=ve&&ae.test(navigator.userAgent),O="touch",q="pen",Q="mouse",de="kinect",le=25,_e=1,be=2,J=4,Pe=8,rt=1,ze=2,Ke=4,gt=8,Kt=16,wt=ze|Ke,xt=gt|Kt,Z=wt|xt,re=["x","y"],fe=["clientX","clientY"];function Te(S,P){var M=this;this.manager=S,this.callback=P,this.element=S.element,this.target=S.options.inputTarget,this.domHandler=function($){T(S.options.enable,[S])&&M.handler($)},this.init()}Te.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(He(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&D(this.element,this.evEl,this.domHandler),this.evTarget&&D(this.target,this.evTarget,this.domHandler),this.evWin&&D(He(this.element),this.evWin,this.domHandler)}};function Ne(S){var P,M=S.options.inputClass;return M?P=M:G?P=Re:X?P=Lr:ve?P=pu:P=ce,new P(S,Ye)}function Ye(S,P,M){var $=M.pointers.length,te=M.changedPointers.length,we=P&_e&&$-te===0,je=P&(J|Pe)&&$-te===0;M.isFirst=!!we,M.isFinal=!!je,we&&(S.session={}),M.eventType=P,Xe(S,M),S.emit("hammer.input",M),S.recognize(M),S.session.prevInput=M}function Xe(S,P){var M=S.session,$=P.pointers,te=$.length;M.firstInput||(M.firstInput=it(P)),te>1&&!M.firstMultiple?M.firstMultiple=it(P):te===1&&(M.firstMultiple=!1);var we=M.firstInput,je=M.firstMultiple,Qt=je?je.center:we.center,nn=P.center=ct($);P.timeStamp=c(),P.deltaTime=P.timeStamp-we.timeStamp,P.angle=Sn(Qt,nn),P.distance=un(Qt,nn),et(M,P),P.offsetDirection=Vn(P.deltaX,P.deltaY);var pn=It(P.deltaTime,P.deltaX,P.deltaY);P.overallVelocityX=pn.x,P.overallVelocityY=pn.y,P.overallVelocity=l(pn.x)>l(pn.y)?pn.x:pn.y,P.scale=je?Rr(je.pointers,$):1,P.rotation=je?Zr(je.pointers,$):0,P.maxPointers=M.prevInput?P.pointers.length>M.prevInput.maxPointers?P.pointers.length:M.prevInput.maxPointers:P.pointers.length,ut(M,P);var vr=S.element;F(P.srcEvent.target,vr)&&(vr=P.srcEvent.target),P.target=vr}function et(S,P){var M=P.center,$=S.offsetDelta||{},te=S.prevDelta||{},we=S.prevInput||{};(P.eventType===_e||we.eventType===J)&&(te=S.prevDelta={x:we.deltaX||0,y:we.deltaY||0},$=S.offsetDelta={x:M.x,y:M.y}),P.deltaX=te.x+(M.x-$.x),P.deltaY=te.y+(M.y-$.y)}function ut(S,P){var M=S.lastInterval||P,$=P.timeStamp-M.timeStamp,te,we,je,Qt;if(P.eventType!=Pe&&($>le||M.velocity===i)){var nn=P.deltaX-M.deltaX,pn=P.deltaY-M.deltaY,vr=It($,nn,pn);we=vr.x,je=vr.y,te=l(vr.x)>l(vr.y)?vr.x:vr.y,Qt=Vn(nn,pn),S.lastInterval=P}else te=M.velocity,we=M.velocityX,je=M.velocityY,Qt=M.direction;P.velocity=te,P.velocityX=we,P.velocityY=je,P.direction=Qt}function it(S){for(var P=[],M=0;M<S.pointers.length;)P[M]={clientX:u(S.pointers[M].clientX),clientY:u(S.pointers[M].clientY)},M++;return{timeStamp:c(),pointers:P,center:ct(P),deltaX:S.deltaX,deltaY:S.deltaY}}function ct(S){var P=S.length;if(P===1)return{x:u(S[0].clientX),y:u(S[0].clientY)};for(var M=0,$=0,te=0;te<P;)M+=S[te].clientX,$+=S[te].clientY,te++;return{x:u(M/P),y:u($/P)}}function It(S,P,M){return{x:P/S||0,y:M/S||0}}function Vn(S,P){return S===P?rt:l(S)>=l(P)?S<0?ze:Ke:P<0?gt:Kt}function un(S,P,M){M||(M=re);var $=P[M[0]]-S[M[0]],te=P[M[1]]-S[M[1]];return Math.sqrt($*$+te*te)}function Sn(S,P,M){M||(M=re);var $=P[M[0]]-S[M[0]],te=P[M[1]]-S[M[1]];return Math.atan2(te,$)*180/Math.PI}function Zr(S,P){return Sn(P[1],P[0],fe)+Sn(S[1],S[0],fe)}function Rr(S,P){return un(P[0],P[1],fe)/un(S[0],S[1],fe)}var z={mousedown:_e,mousemove:be,mouseup:J},I="mousedown",K="mousemove mouseup";function ce(){this.evEl=I,this.evWin=K,this.pressed=!1,Te.apply(this,arguments)}y(ce,Te,{handler:function(P){var M=z[P.type];M&_e&&P.button===0&&(this.pressed=!0),M&be&&P.which!==1&&(M=J),this.pressed&&(M&J&&(this.pressed=!1),this.callback(this.manager,M,{pointers:[P],changedPointers:[P],pointerType:Q,srcEvent:P}))}});var he={pointerdown:_e,pointermove:be,pointerup:J,pointercancel:Pe,pointerout:Pe},ye={2:O,3:q,4:Q,5:de},Le="pointerdown",Me="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Le="MSPointerDown",Me="MSPointerMove MSPointerUp MSPointerCancel");function Re(){this.evEl=Le,this.evWin=Me,Te.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y(Re,Te,{handler:function(P){var M=this.store,$=!1,te=P.type.toLowerCase().replace("ms",""),we=he[te],je=ye[P.pointerType]||P.pointerType,Qt=je==O,nn=H(M,P.pointerId,"pointerId");we&_e&&(P.button===0||Qt)?nn<0&&(M.push(P),nn=M.length-1):we&(J|Pe)&&($=!0),!(nn<0)&&(M[nn]=P,this.callback(this.manager,we,{pointers:M,changedPointers:[P],pointerType:je,srcEvent:P}),$&&M.splice(nn,1))}});var Oe={touchstart:_e,touchmove:be,touchend:J,touchcancel:Pe},qe="touchstart",Yt="touchstart touchmove touchend touchcancel";function Lt(){this.evTarget=qe,this.evWin=Yt,this.started=!1,Te.apply(this,arguments)}y(Lt,Te,{handler:function(P){var M=Oe[P.type];if(M===_e&&(this.started=!0),!!this.started){var $=xn.call(this,P,M);M&(J|Pe)&&$[0].length-$[1].length===0&&(this.started=!1),this.callback(this.manager,M,{pointers:$[0],changedPointers:$[1],pointerType:O,srcEvent:P})}}});function xn(S,P){var M=pe(S.touches),$=pe(S.changedTouches);return P&(J|Pe)&&(M=ue(M.concat($),"identifier",!0)),[M,$]}var kn={touchstart:_e,touchmove:be,touchend:J,touchcancel:Pe},Kr="touchstart touchmove touchend touchcancel";function Lr(){this.evTarget=Kr,this.targetIds={},Te.apply(this,arguments)}y(Lr,Te,{handler:function(P){var M=kn[P.type],$=Qr.call(this,P,M);!$||this.callback(this.manager,M,{pointers:$[0],changedPointers:$[1],pointerType:O,srcEvent:P})}});function Qr(S,P){var M=pe(S.touches),$=this.targetIds;if(P&(_e|be)&&M.length===1)return $[M[0].identifier]=!0,[M,M];var te,we,je=pe(S.changedTouches),Qt=[],nn=this.target;if(we=M.filter(function(pn){return F(pn.target,nn)}),P===_e)for(te=0;te<we.length;)$[we[te].identifier]=!0,te++;for(te=0;te<je.length;)$[je[te].identifier]&&Qt.push(je[te]),P&(J|Pe)&&delete $[je[te].identifier],te++;if(!!Qt.length)return[ue(we.concat(Qt),"identifier",!0),Qt]}var Jr=2500,Ac=25;function pu(){Te.apply(this,arguments);var S=b(this.handler,this);this.touch=new Lr(this.manager,S),this.mouse=new ce(this.manager,S),this.primaryTouch=null,this.lastTouches=[]}y(pu,Te,{handler:function(P,M,$){var te=$.pointerType==O,we=$.pointerType==Q;if(!(we&&$.sourceCapabilities&&$.sourceCapabilities.firesTouchEvents)){if(te)Rg.call(this,M,$);else if(we&&Lg.call(this,$))return;this.callback(P,M,$)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Rg(S,P){S&_e?(this.primaryTouch=P.changedPointers[0].identifier,No.call(this,P)):S&(J|Pe)&&No.call(this,P)}function No(S){var P=S.changedPointers[0];if(P.identifier===this.primaryTouch){var M={x:P.clientX,y:P.clientY};this.lastTouches.push(M);var $=this.lastTouches,te=function(){var we=$.indexOf(M);we>-1&&$.splice(we,1)};setTimeout(te,Jr)}}function Lg(S){for(var P=S.srcEvent.clientX,M=S.srcEvent.clientY,$=0;$<this.lastTouches.length;$++){var te=this.lastTouches[$],we=Math.abs(P-te.x),je=Math.abs(M-te.y);if(we<=Ac&&je<=Ac)return!0}return!1}var gu=se(s.style,"touchAction"),Cc=gu!==i,Rc="compute",Lc="auto",Ls="manipulation",wi="none",Yi="pan-x",Do="pan-y",Fo=Mc();function mu(S,P){this.manager=S,this.set(P)}mu.prototype={set:function(S){S==Rc&&(S=this.compute()),Cc&&this.manager.element.style&&Fo[S]&&(this.manager.element.style[gu]=S),this.actions=S.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var S=[];return d(this.manager.recognizers,function(P){T(P.options.enable,[P])&&(S=S.concat(P.getTouchAction()))}),Mg(S.join(" "))},preventDefaults:function(S){var P=S.srcEvent,M=S.offsetDirection;if(this.manager.session.prevented){P.preventDefault();return}var $=this.actions,te=W($,wi)&&!Fo[wi],we=W($,Do)&&!Fo[Do],je=W($,Yi)&&!Fo[Yi];if(te){var Qt=S.pointers.length===1,nn=S.distance<2,pn=S.deltaTime<250;if(Qt&&nn&&pn)return}if(!(je&&we)&&(te||we&&M&wt||je&&M&xt))return this.preventSrc(P)},preventSrc:function(S){this.manager.session.prevented=!0,S.preventDefault()}};function Mg(S){if(W(S,wi))return wi;var P=W(S,Yi),M=W(S,Do);return P&&M?wi:P||M?P?Yi:Do:W(S,Ls)?Ls:Lc}function Mc(){if(!Cc)return!1;var S={},P=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(M){S[M]=P?e.CSS.supports("touch-action",M):!0}),S}var Ms=1,$n=2,Xi=4,ei=8,Mr=ei,Uo=16,jn=32;function Tn(S){this.options=m({},this.defaults,S||{}),this.id=De(),this.manager=null,this.options.enable=R(this.options.enable,!0),this.state=Ms,this.simultaneous={},this.requireFail=[]}Tn.prototype={defaults:{},set:function(S){return m(this.options,S),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(S){if(h(S,"recognizeWith",this))return this;var P=this.simultaneous;return S=ks(S,this),P[S.id]||(P[S.id]=S,S.recognizeWith(this)),this},dropRecognizeWith:function(S){return h(S,"dropRecognizeWith",this)?this:(S=ks(S,this),delete this.simultaneous[S.id],this)},requireFailure:function(S){if(h(S,"requireFailure",this))return this;var P=this.requireFail;return S=ks(S,this),H(P,S)===-1&&(P.push(S),S.requireFailure(this)),this},dropRequireFailure:function(S){if(h(S,"dropRequireFailure",this))return this;S=ks(S,this);var P=H(this.requireFail,S);return P>-1&&this.requireFail.splice(P,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(S){return!!this.simultaneous[S.id]},emit:function(S){var P=this,M=this.state;function $(te){P.manager.emit(te,S)}M<ei&&$(P.options.event+Os(M)),$(P.options.event),S.additionalEvent&&$(S.additionalEvent),M>=ei&&$(P.options.event+Os(M))},tryEmit:function(S){if(this.canEmit())return this.emit(S);this.state=jn},canEmit:function(){for(var S=0;S<this.requireFail.length;){if(!(this.requireFail[S].state&(jn|Ms)))return!1;S++}return!0},recognize:function(S){var P=m({},S);if(!T(this.options.enable,[this,P])){this.reset(),this.state=jn;return}this.state&(Mr|Uo|jn)&&(this.state=Ms),this.state=this.process(P),this.state&($n|Xi|ei|Uo)&&this.tryEmit(P)},process:function(S){},getTouchAction:function(){},reset:function(){}};function Os(S){return S&Uo?"cancel":S&ei?"end":S&Xi?"move":S&$n?"start":""}function Ei(S){return S==Kt?"down":S==gt?"up":S==ze?"left":S==Ke?"right":""}function ks(S,P){var M=P.manager;return M?M.get(S):S}function er(){Tn.apply(this,arguments)}y(er,Tn,{defaults:{pointers:1},attrTest:function(S){var P=this.options.pointers;return P===0||S.pointers.length===P},process:function(S){var P=this.state,M=S.eventType,$=P&($n|Xi),te=this.attrTest(S);return $&&(M&Pe||!te)?P|Uo:$||te?M&J?P|ei:P&$n?P|Xi:$n:jn}});function Is(){er.apply(this,arguments),this.pX=null,this.pY=null}y(Is,er,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var S=this.options.direction,P=[];return S&wt&&P.push(Do),S&xt&&P.push(Yi),P},directionTest:function(S){var P=this.options,M=!0,$=S.distance,te=S.direction,we=S.deltaX,je=S.deltaY;return te&P.direction||(P.direction&wt?(te=we===0?rt:we<0?ze:Ke,M=we!=this.pX,$=Math.abs(S.deltaX)):(te=je===0?rt:je<0?gt:Kt,M=je!=this.pY,$=Math.abs(S.deltaY))),S.direction=te,M&&$>P.threshold&&te&P.direction},attrTest:function(S){return er.prototype.attrTest.call(this,S)&&(this.state&$n||!(this.state&$n)&&this.directionTest(S))},emit:function(S){this.pX=S.deltaX,this.pY=S.deltaY;var P=Ei(S.direction);P&&(S.additionalEvent=this.options.event+P),this._super.emit.call(this,S)}});function vu(){er.apply(this,arguments)}y(vu,er,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[wi]},attrTest:function(S){return this._super.attrTest.call(this,S)&&(Math.abs(S.scale-1)>this.options.threshold||this.state&$n)},emit:function(S){if(S.scale!==1){var P=S.scale<1?"in":"out";S.additionalEvent=this.options.event+P}this._super.emit.call(this,S)}});function yu(){Tn.apply(this,arguments),this._timer=null,this._input=null}y(yu,Tn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Lc]},process:function(S){var P=this.options,M=S.pointers.length===P.pointers,$=S.distance<P.threshold,te=S.deltaTime>P.time;if(this._input=S,!$||!M||S.eventType&(J|Pe)&&!te)this.reset();else if(S.eventType&_e)this.reset(),this._timer=f(function(){this.state=Mr,this.tryEmit()},P.time,this);else if(S.eventType&J)return Mr;return jn},reset:function(){clearTimeout(this._timer)},emit:function(S){this.state===Mr&&(S&&S.eventType&J?this.manager.emit(this.options.event+"up",S):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function Ns(){er.apply(this,arguments)}y(Ns,er,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[wi]},attrTest:function(S){return this._super.attrTest.call(this,S)&&(Math.abs(S.rotation)>this.options.threshold||this.state&$n)}});function Ds(){er.apply(this,arguments)}y(Ds,er,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:wt|xt,pointers:1},getTouchAction:function(){return Is.prototype.getTouchAction.call(this)},attrTest:function(S){var P=this.options.direction,M;return P&(wt|xt)?M=S.overallVelocity:P&wt?M=S.overallVelocityX:P&xt&&(M=S.overallVelocityY),this._super.attrTest.call(this,S)&&P&S.offsetDirection&&S.distance>this.options.threshold&&S.maxPointers==this.options.pointers&&l(M)>this.options.velocity&&S.eventType&J},emit:function(S){var P=Ei(S.offsetDirection);P&&this.manager.emit(this.options.event+P,S),this.manager.emit(this.options.event,S)}});function Fs(){Tn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}y(Fs,Tn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ls]},process:function(S){var P=this.options,M=S.pointers.length===P.pointers,$=S.distance<P.threshold,te=S.deltaTime<P.time;if(this.reset(),S.eventType&_e&&this.count===0)return this.failTimeout();if($&&te&&M){if(S.eventType!=J)return this.failTimeout();var we=this.pTime?S.timeStamp-this.pTime<P.interval:!0,je=!this.pCenter||un(this.pCenter,S.center)<P.posThreshold;this.pTime=S.timeStamp,this.pCenter=S.center,!je||!we?this.count=1:this.count+=1,this._input=S;var Qt=this.count%P.taps;if(Qt===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Mr,this.tryEmit()},P.interval,this),$n):Mr}return jn},failTimeout:function(){return this._timer=f(function(){this.state=jn},this.options.interval,this),jn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Mr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Or(S,P){return P=P||{},P.recognizers=R(P.recognizers,Or.defaults.preset),new Us(S,P)}Or.VERSION="2.0.7",Or.defaults={domEvents:!1,touchAction:Rc,enable:!0,inputTarget:null,inputClass:null,preset:[[Ns,{enable:!1}],[vu,{enable:!1},["rotate"]],[Ds,{direction:wt}],[Is,{direction:wt},["swipe"]],[Fs],[Fs,{event:"doubletap",taps:2},["tap"]],[yu]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Og=1,Oc=2;function Us(S,P){this.options=m({},Or.defaults,P||{}),this.options.inputTarget=this.options.inputTarget||S,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=S,this.input=Ne(this),this.touchAction=new mu(this,this.options.touchAction),_u(this,!0),d(this.options.recognizers,function(M){var $=this.add(new M[0](M[1]));M[2]&&$.recognizeWith(M[2]),M[3]&&$.requireFailure(M[3])},this)}Us.prototype={set:function(S){return m(this.options,S),S.touchAction&&this.touchAction.update(),S.inputTarget&&(this.input.destroy(),this.input.target=S.inputTarget,this.input.init()),this},stop:function(S){this.session.stopped=S?Oc:Og},recognize:function(S){var P=this.session;if(!P.stopped){this.touchAction.preventDefaults(S);var M,$=this.recognizers,te=P.curRecognizer;(!te||te&&te.state&Mr)&&(te=P.curRecognizer=null);for(var we=0;we<$.length;)M=$[we],P.stopped!==Oc&&(!te||M==te||M.canRecognizeWith(te))?M.recognize(S):M.reset(),!te&&M.state&($n|Xi|ei)&&(te=P.curRecognizer=M),we++}},get:function(S){if(S instanceof Tn)return S;for(var P=this.recognizers,M=0;M<P.length;M++)if(P[M].options.event==S)return P[M];return null},add:function(S){if(h(S,"add",this))return this;var P=this.get(S.options.event);return P&&this.remove(P),this.recognizers.push(S),S.manager=this,this.touchAction.update(),S},remove:function(S){if(h(S,"remove",this))return this;if(S=this.get(S),S){var P=this.recognizers,M=H(P,S);M!==-1&&(P.splice(M,1),this.touchAction.update())}return this},on:function(S,P){if(S!==i&&P!==i){var M=this.handlers;return d(j(S),function($){M[$]=M[$]||[],M[$].push(P)}),this}},off:function(S,P){if(S!==i){var M=this.handlers;return d(j(S),function($){P?M[$]&&M[$].splice(H(M[$],P),1):delete M[$]}),this}},emit:function(S,P){this.options.domEvents&&kg(S,P);var M=this.handlers[S]&&this.handlers[S].slice();if(!(!M||!M.length)){P.type=S,P.preventDefault=function(){P.srcEvent.preventDefault()};for(var $=0;$<M.length;)M[$](P),$++}},destroy:function(){this.element&&_u(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function _u(S,P){var M=S.element;if(!!M.style){var $;d(S.options.cssProps,function(te,we){$=se(M.style,we),P?(S.oldCssProps[$]=M.style[$],M.style[$]=te):M.style[$]=S.oldCssProps[$]||""}),P||(S.oldCssProps={})}}function kg(S,P){var M=n.createEvent("Event");M.initEvent(S,!0,!0),M.gesture=P,P.target.dispatchEvent(M)}m(Or,{INPUT_START:_e,INPUT_MOVE:be,INPUT_END:J,INPUT_CANCEL:Pe,STATE_POSSIBLE:Ms,STATE_BEGAN:$n,STATE_CHANGED:Xi,STATE_ENDED:ei,STATE_RECOGNIZED:Mr,STATE_CANCELLED:Uo,STATE_FAILED:jn,DIRECTION_NONE:rt,DIRECTION_LEFT:ze,DIRECTION_RIGHT:Ke,DIRECTION_UP:gt,DIRECTION_DOWN:Kt,DIRECTION_HORIZONTAL:wt,DIRECTION_VERTICAL:xt,DIRECTION_ALL:Z,Manager:Us,Input:Te,TouchAction:mu,TouchInput:Lr,MouseInput:ce,PointerEventInput:Re,TouchMouseInput:pu,SingleTouchInput:Lt,Recognizer:Tn,AttrRecognizer:er,Tap:Fs,Pan:Is,Swipe:Ds,Pinch:vu,Rotate:Ns,Press:yu,on:C,off:D,each:d,merge:_,extend:x,assign:m,inherit:y,bindFn:b,prefixed:se});var Ig=typeof e<"u"?e:typeof self<"u"?self:{};Ig.Hammer=Or,typeof i=="function"&&i.amd?i(function(){return Or}):t.exports?t.exports=Or:e[r]=Or})(window,document,"Hammer")})(hu);const AK=hu.exports,ri=K2({__proto__:null,default:AK},[hu.exports]),BO=1,VO=2,sy=4,CK={mousedown:BO,mousemove:VO,mouseup:sy};function RK(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function LK(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(RK(i,o=>o.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function MK(t){t.prototype.handler=function(n){let r=CK[n.type];r&BO&&n.button>=0&&(this.pressed=!0),r&VO&&n.which===0&&(r=sy),this.pressed&&(r&sy&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}LK(hu.exports.PointerEventInput);MK(hu.exports.MouseInput);const OK=hu.exports.Manager;class bg{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const kK=ri?[[ri.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[ri.Rotate,{enable:!1}],[ri.Pinch,{enable:!1}],[ri.Swipe,{enable:!1}],[ri.Pan,{threshold:0,enable:!1}],[ri.Press,{enable:!1}],[ri.Tap,{event:"doubletap",taps:2,enable:!1}],[ri.Tap,{event:"anytap",enable:!1}],[ri.Tap,{enable:!1}]]:null,LT={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},IK={doubletap:["tap"]},NK={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Sb={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},DK={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},MT={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},FK=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",va=typeof window<"u"?window:global;let ay=!1;try{const t={get passive(){return ay=!0,!0}};va.addEventListener("test",null,t),va.removeEventListener("test",null)}catch{ay=!1}const UK=FK.indexOf("firefox")!==-1,{WHEEL_EVENTS:zK}=Sb,OT="wheel",kT=4.000244140625,BK=40,VK=.25;class $K extends bg{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;va.WheelEvent&&(UK&&i.deltaMode===va.WheelEvent.DOM_DELTA_PIXEL&&(o/=va.devicePixelRatio),i.deltaMode===va.WheelEvent.DOM_DELTA_LINE&&(o*=BK)),o!==0&&o%kT===0&&(o=Math.floor(o/kT)),i.shiftKey&&o&&(o=o*VK),this.callback({type:OT,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(zK),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,ay?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===OT&&(this.options.enable=n)}}const{MOUSE_EVENTS:jK}=Sb,IT="pointermove",NT="pointerover",DT="pointerout",FT="pointerenter",UT="pointerleave";class GK extends bg{constructor(e,n,r){super(e,n,r),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(jK),this.events.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===IT&&(this.enableMoveEvent=n),e===NT&&(this.enableOverEvent=n),e===DT&&(this.enableOutEvent=n),e===FT&&(this.enableEnterEvent=n),e===UT&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(NT,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(DT,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(FT,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(UT,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(IT,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:WK}=Sb,zT="keydown",BT="keyup";class HK extends bg{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:zT,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:BT,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(WK),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===zT&&(this.enableDownEvent=n),e===BT&&(this.enableUpEvent=n)}}const VT="contextmenu";class YK extends bg{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{!this.options.enable||this.callback({type:VT,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===VT&&(this.options.enable=n)}}const uy=1,kd=2,ly=4,XK={pointerdown:uy,pointermove:kd,pointerup:ly,mousedown:uy,mousemove:kd,mouseup:ly},qK=1,ZK=2,KK=3,QK=0,JK=1,eQ=2,tQ=1,nQ=2,rQ=4;function iQ(t){const e=XK[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let o=!1,s=!1,a=!1;return e===ly||e===kd&&!Number.isFinite(n)?(o=i===qK,s=i===ZK,a=i===KK):e===kd?(o=Boolean(n&tQ),s=Boolean(n&rQ),a=Boolean(n&nQ)):e===uy&&(o=r===QK,s=r===JK,a=r===eQ),{leftButton:o,middleButton:s,rightButton:a}}function oQ(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,o=r.height/e.offsetHeight||1,s={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/o};return{center:n,offsetCenter:s}}const y0={srcElement:"root",priority:0};class sQ{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let i=n.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,o=!1){const{handlers:s,handlersByElement:a}=this;let u=y0;typeof r=="string"||r&&r.addEventListener?u={...y0,srcElement:r}:r&&(u={...y0,...r});let l=a.get(u.srcElement);l||(l=[],a.set(u.srcElement,l));const c={type:e,handler:n,srcElement:u.srcElement,priority:u.priority};i&&(c.once=!0),o&&(c.passive=!0),s.push(c),this._active=this._active||!c.passive;let f=l.length-1;for(;f>=0&&!(l[f].priority>=c.priority);)f--;l.splice(f+1,0,c)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let o=r.length-1;o>=0;o--){const s=r[o];if(s.type===e&&s.handler===n){r.splice(o,1);const a=i.get(s.srcElement);a.splice(a.indexOf(s),1),a.length===0&&i.delete(s.srcElement)}}this._active=r.some(o=>!o.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const o=()=>{e.handled=!0},s=()=>{e.handled=!0,i=!0},a=[];for(let u=0;u<r.length;u++){const{type:l,handler:c,once:f}=r[u];if(c({...e,type:l,stopPropagation:o,stopImmediatePropagation:s}),f&&a.push(r[u]),i)break}for(let u=0;u<a.length;u++){const{type:l,handler:c}=a[u];this.remove(l,c)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...iQ(e),...oQ(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const aQ={events:null,recognizers:null,recognizerOptions:{},Manager:OK,touchAction:"none",tabIndex:0};class uQ{constructor(e=null,n){this._onBasicInput=i=>{const{srcEvent:o}=i,s=NK[o.type];s&&this.manager.emit(s,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...aQ,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||kK}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(LT).forEach(i=>{const o=this.manager.get(i);o&&LT[i].forEach(s=>{o.recognizeWith(s)})});for(const i in n.recognizerOptions){const o=this.manager.get(i);if(o){const s=n.recognizerOptions[i];delete s.enable,o.set(s)}}this.wheelInput=new $K(e,this._onOtherEvent,{enable:!1}),this.moveInput=new GK(e,this._onOtherEvent,{enable:!1}),this.keyInput=new HK(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new YK(e,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const o=IK[e];o&&!this.options.recognizers&&o.forEach(s=>{const a=r.get(s);n?(a.requireFailure(e),i.dropRequireFailure(s)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,o){if(typeof e!="string"){r=n;for(const c in e)this._addEventHandler(c,e[c],r,i,o);return}const{manager:s,events:a}=this,u=MT[e]||e;let l=a.get(u);l||(l=new sQ(this),a.set(u,l),l.recognizerName=DK[u]||u,s&&s.on(u,l.handleEvent)),l.add(e,n,r,i,o),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const s in e)this._removeEventHandler(s,e[s]);return}const{events:r}=this,i=MT[e]||e,o=r.get(i);if(!!o&&(o.remove(e,n),o.isEmpty())){const{recognizerName:s}=o;let a=!1;for(const u of r.values())if(u.recognizerName===s&&!u.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}}function Go(){}const lQ=({isDragging:t})=>t?"grabbing":"grab",$O={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Go,onResize:Go,onViewStateChange:Go,onInteractionStateChange:Go,onBeforeRender:Go,onAfterRender:Go,onLoad:Go,onError:t=>$e.error(t.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:lQ,getTooltip:null,debug:!1,drawPickingColors:!1};class wg{constructor(e){w(this,"props",void 0),w(this,"width",0),w(this,"height",0),w(this,"userData",{}),w(this,"canvas",null),w(this,"viewManager",null),w(this,"layerManager",null),w(this,"effectManager",null),w(this,"deckRenderer",null),w(this,"deckPicker",null),w(this,"eventManager",null),w(this,"tooltip",null),w(this,"metrics",void 0),w(this,"animationLoop",void 0),w(this,"stats",void 0),w(this,"viewState",void 0),w(this,"cursorState",void 0),w(this,"_needsRedraw",void 0),w(this,"_pickRequest",void 0),w(this,"_lastPointerDownInfo",null),w(this,"_metricsCounter",void 0),w(this,"_onPointerMove",n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const i=n.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),w(this,"_onEvent",n=>{const r=mT[n.type],i=n.offsetCenter;if(!r||!i||!this.layerManager)return;const o=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:o,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=s,u=a&&(a[r.handler]||a.props[r.handler]),l=this.props[r.handler];let c=!1;u&&(c=u.call(a,s,n)),!c&&l&&l(s,n)}),w(this,"_onPointerDown",n=>{const r=n.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...$O,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&$e.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),yM()==="IE"&&$e.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new nb({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&Ja.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,o,s,a;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(e=this.layerManager)===null||e===void 0||e.finalize(),this.layerManager=null,(n=this.viewManager)===null||n===void 0||n.finalize(),this.viewManager=null,(r=this.effectManager)===null||r===void 0||r.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(s=this.eventManager)===null||s===void 0||s.destroy(),this.eventManager=null,(a=this.tooltip)===null||a===void 0||a.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var u;(u=this.canvas.parentElement)===null||u===void 0||u.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&$e.removed("onLayerHover","onHover")(),"onLayerClick"in e&&$e.removed("onLayerClick","onClick")(),e.initialViewState&&!fu(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),s=this.deckRenderer.needsRedraw(e);return n=n||r||i||o||s,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return hn(this.viewManager),this.viewManager.views}getViewports(e){return hn(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_pick(e,n,r){hn(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const o=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(n).timeEnd(),o}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),hn(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=o}if(r||r===0){var i;const o=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=e.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const n=e.clientWidth||e.width,r=e.clientHeight||e.height;if(n!==this.width||r!==this.height){var i;this.width=n,this.height=r,(i=this.viewManager)===null||i===void 0||i.setProps({width:n,height:r}),this.props.onResize({width:n,height:r})}}_createAnimationLoop(e){const{width:n,height:r,gl:i,glOptions:o,debug:s,onError:a,onBeforeRender:u,onAfterRender:l,useDevicePixels:c}=e;return new eY({width:n,height:r,useDevicePixels:c,autoResizeViewport:!1,gl:i,onCreateContext:f=>UM({...o,...f,canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:u,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new NO({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let o=i,s=!1;for(const a of r){var n;o=a,s=((n=a.layer)===null||n===void 0?void 0:n.onHover(a,e.event))||s}if(!s&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(o);this.tooltip.setTooltip(a,o.x,o.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,lb(e,{enable:!0,copyState:!0})),this.tooltip=new PK(this.canvas),zi(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new _O;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new uQ(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in mT)this.eventManager.on(i,this._onEvent);this.viewManager=new jZ({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new $Z(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new dK,this.deckRenderer=new yK(e),this.deckPicker=new xK(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;zi(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),$e.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=ts.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}w(wg,"defaultProps",$O);w(wg,"VERSION",sG.VERSION);class _0{constructor(e,n){w(this,"opts",void 0),w(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:i}=n;let o=r;if(r&&r.length!==i){o=new Float32Array(i);const s=n.elementOffset||0;for(let a=0;a<i;++a)o[a]=r[s+a]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function cQ(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function Qf(t){return t.stride||t.size*t.bytesPerElement}function jO(t,e){e.offset&&$e.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=Qf(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,o=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:o,stride:n}}function fQ(t,e){const n=jO(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class hQ{constructor(e,n,r){w(this,"gl",void 0),w(this,"id",void 0),w(this,"size",void 0),w(this,"settings",void 0),w(this,"value",void 0),w(this,"doublePrecision",void 0),w(this,"_buffer",void 0),w(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const i=n.logicalType||n.type,o=i===5130;let{defaultValue:s}=n;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0);let a;o?a=5126:!i&&n.isIndexed?a=e&&YM(e,At.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let u=cQ(i||a||5126);this.doublePrecision=o,o&&n.fp64===!1&&(u=Float32Array),this.value=null,this.settings={...n,defaultType:u,defaultValue:s,logicalType:i,type:a,size:this.size,bytesPerElement:u.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new _t(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*Qf(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Ja.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,o=fQ(this.getAccessor(),n||{});return r[e]=new _0(this,o.high),r["".concat(e,"64Low")]=i?new _0(this,o.low):new Float32Array(this.size),r}if(n){const r=jO(this.getAccessor(),n);return{[e]:new _0(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,o=r*i;if(n&&o&&n.length>=o){const s=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let u=0;u<o;)for(let l=0;l<i;l++){const c=n[u++];c<s[l]&&(s[l]=c),c>a[l]&&(a[l]=c)}e=[s,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof _t?r={buffer:e}:r=e;const i={...this.settings,...r};if(n.bufferAccessor=i,n.bounds=null,r.constant){let o=r.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!n.constant||!this._areValuesEqual(o,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=o}else if(r.buffer){const o=r.buffer;n.externalBuffer=o,n.constant=!1,this.value=r.value||null;const s=r.value instanceof Float64Array;i.type=r.type||o.accessor.type,i.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(s?2:1),i.stride=Qf(i)}else if(r.value){this._checkExternalBuffer(r);let o=r.value;n.externalBuffer=null,n.constant=!1,this.value=o,i.bytesPerElement=o.BYTES_PER_ELEMENT,i.stride=Qf(i);const{buffer:s,byteOffset:a}=this;this.doublePrecision&&o instanceof Float64Array&&(o=m0(o,i));const u=o.byteLength+a+i.stride*2;s.byteLength<u&&s.reallocate(u),s.setAccessor(null),s.subData({data:o,offset:a}),i.type=r.type||s.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?m0(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:r}=this,i=r.allocatedValue,o=Ja.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=o;const{buffer:s,byteOffset:a}=this;return s.byteLength<o.byteLength+a&&(s.reallocate(o.byteLength+a),n&&i&&s.subData({data:i instanceof Float64Array?m0(i,this):i,offset:a})),r.allocatedValue=o,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&$e.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e)return n[r]=i[0],n;switch(o){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let s=o;for(;--s>=0;)n[r+s]=Number.isFinite(e[s])?e[s]:i[s]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}}const $T=[],jT=[];function xc(t,e=0,n=1/0){let r=$T;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(jT.length=t.length,r=jT):r=$T,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function GO(t){return t&&t[Symbol.asyncIterator]}function WO(t,e){const{size:n,stride:r,offset:i,startIndices:o,nested:s}=e,a=t.BYTES_PER_ELEMENT,u=r?r/a:n,l=i?i/a:0,c=Math.floor((t.length-l)/u);return(f,{index:h,target:d})=>{if(!o){const _=h*u+l;for(let y=0;y<n;y++)d[y]=t[_+y];return d}const g=o[h],m=o[h+1]||c;let x;if(s){x=new Array(m-g);for(let _=g;_<m;_++){const y=_*u+l;d=new Array(n);for(let b=0;b<n;b++)d[b]=t[y+b];x[_-g]=d}}else if(u===n)x=t.subarray(g*n+l,m*n+l);else{x=new t.constructor((m-g)*n);let _=0;for(let y=g;y<m;y++){const b=y*u+l;for(let T=0;T<n;T++)x[_++]=t[b+T]}}return x}}const dQ=[],Jf=[[0,1/0]];function pQ(t,e){if(t===Jf||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let o=0;o<r;o++){const s=t[o];s[1]<e[0]?(n.push(s),i=o+1):s[0]>e[1]?n.push(s):e=[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}return n.splice(i,0,e),n}function b0(t){const{source:e,target:n,start:r=0,size:i,getData:o}=t,s=t.end||n.length,a=e.length,u=s-r;if(a>u){n.set(e.subarray(0,u),r);return}if(n.set(e,r),!o)return;let l=a;for(;l<u;){const c=o(l,e);for(let f=0;f<i;f++)n[r+l]=c[f]||0,l++}}function gQ({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return b0({source:t,target:e,size:n,getData:r}),e;let s=0,a=0;const u=r&&((c,f)=>r(c+a,f)),l=Math.min(i.length,o.length);for(let c=1;c<l;c++){const f=i[c]*n,h=o[c]*n;b0({source:t.subarray(s,f),target:e,start:a,end:h,size:n,getData:u}),s=f,a=h}return a<e.length&&b0({source:[],target:e,start:a,size:n,getData:u}),e}const mQ={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function HO(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...mQ[n],...e,...t,type:n}}function YO(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function XO(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function qO(t){t.push(t.shift())}function xb(t,e){const{doublePrecision:n,settings:r,value:i,size:o}=t,s=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*o)*s}function ZO({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:o=s=>s}){const s=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*s,u=n.byteOffset,l=n.startIndices,c=i&&l,f=xb(n,e),h=n.isConstant;if(!c&&r>=f)return;const d=h?n.value:n.getBuffer().getData({srcByteOffset:u});if(n.settings.normalized&&!h){const _=o;o=(y,b)=>n.normalizeConstant(_(y,b))}const g=h?(_,y)=>o(d,y):(_,y)=>o(d.subarray(_,_+a),y),m=t.getData({length:r}),x=new Float32Array(f);gQ({source:m,target:x,sourceStartIndices:i,targetStartIndices:l,size:a,getData:g}),t.byteLength<x.byteLength+u&&t.reallocate(x.byteLength+u),t.subData({data:x,offset:u})}class Tb extends hQ{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:Jf}),w(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(o=>e[o])]:e[n];return HO(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=pQ(this.state.updateRanges,[r,i])}else this.state.updateRanges=Jf}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=dQ}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==Jf),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this;let u=!0;if(s){for(const[l,c]of o)s.call(i,this,{data:n,startRow:l,endRow:c,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,c]of o){const f=Number.isFinite(l)?this.getVertexOffset(l):0,h=Number.isFinite(c)?this.getVertexOffset(c):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:f,endOffset:h})}this._checkAttributeArray()}else u=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),u}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const s=e;hn(ArrayBuffer.isView(s.value),"invalid ".concat(i.accessor));const a=Boolean(s.size)&&s.size!==this.size;return r.binaryAccessor=WO(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:n,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?n[e]:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:o,numInstances:s}){if(e.constant)return;const{settings:a,state:u,value:l,size:c,startIndices:f}=e,{accessor:h,transform:d}=a,g=u.binaryAccessor||(typeof h=="function"?h:o[h]);hn(typeof g=="function",'accessor "'.concat(h,'" is not a function'));let m=e.getVertexOffset(r);const{iterable:x,objectInfo:_}=xc(n,r,i);for(const y of x){_.index++;let b=g(y,_);if(d&&(b=d.call(this,b)),f){const T=(_.index<f.length-1?f[_.index+1]:s)-f[_.index];if(b&&Array.isArray(b[0])){let R=m;for(const C of b)e._normalizeValue(C,l,R),R+=c}else b&&b.length>c?l.set(b,m):(e._normalizeValue(b,_.target,0),FZ({target:l,source:_.target,start:m,count:T}));m+=T*c}else e._normalizeValue(b,l,m),m+=c}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class vQ{constructor({gl:e,attribute:n,timeline:r}){w(this,"gl",void 0),w(this,"type","interpolation"),w(this,"attributeInTransition",void 0),w(this,"settings",void 0),w(this,"attribute",void 0),w(this,"transition",void 0),w(this,"currentStartIndices",void 0),w(this,"currentLength",void 0),w(this,"transform",void 0),w(this,"buffers",void 0),this.gl=e,this.transition=new Sc(r),this.attribute=n,this.attributeInTransition=new Tb(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=_Q(e,n);const i={byteLength:0,usage:35050};this.buffers=[new _t(e,i),new _t(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:i,attribute:o}=this;qO(i);const s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)ZO({buffer:a,...s});this.currentStartIndices=o.startIndices,this.currentLength=xb(o,n),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:i[0],aTo:YO(r,o)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:r}=this.settings,{time:i}=this.transition;let o=i/n;r&&(o=r(o)),this.transform.run({uniforms:{time:o}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const yQ=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function _Q(t,e){const n=XO(e.size);return new yb(t,{vs:yQ,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class bQ{constructor({gl:e,attribute:n,timeline:r}){w(this,"gl",void 0),w(this,"type","spring"),w(this,"attributeInTransition",void 0),w(this,"settings",void 0),w(this,"attribute",void 0),w(this,"transition",void 0),w(this,"currentStartIndices",void 0),w(this,"currentLength",void 0),w(this,"texture",void 0),w(this,"framebuffer",void 0),w(this,"transform",void 0),w(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new Sc(r),this.attribute=n,this.attributeInTransition=new Tb(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=EQ(e),this.framebuffer=SQ(e,this.texture),this.transform=wQ(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new _t(e,i),new _t(e,i),new _t(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:i,attribute:o}=this,s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)ZO({buffer:a,...s});this.settings=e,this.currentStartIndices=o.startIndices,this.currentLength=xb(o,n),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:YO(r,o)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this;if(!i.update())return!1;const s=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),qO(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),mg(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function wQ(t,e,n){const r=XO(e.size);return new yb(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function EQ(t){return new Fn(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function SQ(t,e){return new tn(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:e}})}const xQ={interpolation:vQ,spring:bQ};class TQ{constructor(e,{id:n,timeline:r}){w(this,"id",void 0),w(this,"isSupported",void 0),w(this,"gl",void 0),w(this,"timeline",void 0),w(this,"transitions",void 0),w(this,"needsRedraw",void 0),w(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=yb.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const o=e[i],s=o.getTransitionSetting(n);!s||this._updateAttribute(i,o,s)}for(const i in this.transitions){const o=e[i];(!o||!o.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let o=!i||i.type!==r.type;if(o){if(!this.isSupported){$e.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const s=xQ[r.type];s?this.transitions[e]=new s({attribute:n,timeline:this.timeline,gl:this.gl}):($e.error("unsupported transition type '".concat(r.type,"'"))(),o=!1)}(o||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const GT="attributeManager.invalidate",PQ="attributeManager.updateStart",AQ="attributeManager.updateEnd",CQ="attribute.updateStart",RQ="attribute.allocate",LQ="attribute.updateEnd";class MQ{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){w(this,"id",void 0),w(this,"gl",void 0),w(this,"attributes",void 0),w(this,"updateTriggers",void 0),w(this,"needsRedraw",void 0),w(this,"userData",void 0),w(this,"stats",void 0),w(this,"attributeTransitionManager",void 0),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new TQ(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);Rn(GT,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Rn(GT,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:o={},buffers:s={},context:a={}}){let u=!1;Rn(PQ,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const c=this.attributes[l],f=c.settings.accessor;c.startIndices=r,c.numInstances=n,o[l]&&$e.removed("props.".concat(l),"data.attributes.".concat(l))(),c.setExternalBuffer(s[l])||c.setBinaryValue(typeof f=="string"?s[f]:void 0,e.startIndices)||typeof f=="string"&&!s[f]&&c.setConstantValue(o[f])||c.needsUpdate()&&(u=!0,this._updateAttribute({attribute:c,numInstances:n,data:e,props:o,context:a})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}u&&Rn(AQ,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const o in n){const s=n[o];s.needsRedraw(e)&&!r.hasAttribute(o)&&(i[o]=s)}return i}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}_add(e,n={}){for(const r in e){const i=e[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const i={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0};return new Tb(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,o=i[e];return o&&o.forEach(s=>{const a=r[s];a&&a.setNeedsUpdate(a.id,n)}),o}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(Rn(CQ,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&Rn(RQ,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,Rn(LQ,n,r))}}class OQ extends Sc{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:o}}=this,s=o(e/i);this._value=ss(n,r,s)}}const WT=1e-5;function HT(t,e,n,r,i){const o=e-t,a=(n-e)*i,u=-o*r;return a+u+o+e}function kQ(t,e,n,r,i){if(Array.isArray(n)){const o=[];for(let s=0;s<n.length;s++)o[s]=HT(t[s],e[s],n[s],r,i);return o}return HT(t,e,n,r,i)}function YT(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class IQ extends Sc{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:o=e,_currValue:s=e}=this;let a=kQ(o,s,n,r,i);const u=YT(a,n),l=YT(a,s);u<WT&&l<WT&&(a=n,this.end()),this._prevValue=s,this._currValue=a}}const NQ={interpolation:OQ,spring:IQ};class DQ{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:o}=this;if(o.has(e)){const u=o.get(e),{value:l=u.settings.fromValue}=u;n=l,this.remove(e)}if(i=HO(i),!i)return;const s=NQ[i.type];if(!s){$e.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new s(this.timeline);a.start({...i,fromValue:n,toValue:r}),o.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function FQ(t){const e=Pb(t);for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function UQ(t,e){const n=KO({newProps:t,oldProps:e,propTypes:Pb(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=BQ(t,e);let i=!1;return r||(i=VQ(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:$Q(t,e),transitionsChanged:zQ(t,e)}}function zQ(t,e){if(!t.transitions)return!1;const n={},r=Pb(t);let i=!1;for(const o in t.transitions){const s=r[o],a=s&&s.type;(a==="number"||a==="color"||a==="array")&&cy(t[o],e[o],s)&&(n[o]=!0,i=!0)}return i?n:!1}function KO({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const o of Object.keys(t))if(!(o in n)){if(!(o in e))return"".concat(i,".").concat(o," added");const s=cy(t[o],e[o],r[o]);if(s)return"".concat(i,".").concat(o," ").concat(s)}for(const o of Object.keys(e))if(!(o in n)){if(!(o in t))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(t,o)){const s=cy(t[o],e[o],r[o]);if(s)return"".concat(i,".").concat(o," ").concat(s)}}return!1}function cy(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function BQ(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function VQ(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&XT(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&XT(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function $Q(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function XT(t,e,n){let r=t.updateTriggers[n];r=r==null?{}:r;let i=e.updateTriggers[n];return i=i==null?{}:i,KO({oldProps:i,newProps:r,triggerName:n})}function Pb(t){const e=t[Od],n=e&&e.constructor;return n?n._propTypes:{}}const jQ="count(): argument not an object",GQ="count(): argument not a container";function WQ(t){if(!YQ(t))throw new Error(jQ);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(HQ(t))return Object.keys(t).length;throw new Error(GQ)}function HQ(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function YQ(t){return t!==null&&typeof t=="object"}function XQ(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const qQ={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},fy={};function ZQ(t,e){const n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof Fn)return e;e.constructor&&e.constructor.name!=="Object"&&(e={data:e});let r=null;e.compressed&&(r={[10241]:e.data.length>1?9985:9729});const i=new Fn(n,{...e,parameters:{...qQ,...r,...t.props.textureParameters}});return fy[i.id]=!0,i}function KQ(t){!t||!(t instanceof Fn)||fy[t.id]&&(t.delete(),delete fy[t.id])}const QQ={boolean:{validate(t,e){return!0},equal(t,e,n){return Boolean(t)===Boolean(e)}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||jl(t)&&(t.length===3||t.length===4)},equal(t,e,n){return w0(t,e)}},accessor:{validate(t,e){const n=Id(t);return n==="function"||n===Id(e.value)},equal(t,e,n){return typeof e=="function"?!0:w0(t,e)}},array:{validate(t,e){return e.optional&&!t||jl(t)},equal(t,e,n){return n.compare?w0(t,e):t===e}},object:{equal(t,e,n){return n.compare?fu(t,e):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>ZQ(n,t),release:t=>{KQ(t)}}};function w0(t,e){if(t===e)return!0;if(!jl(t)||!jl(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function JQ(t){const e={},n={},r={};for(const[i,o]of Object.entries(t)){const s=o==null?void 0:o.deprecatedFor;if(s)r[i]=Array.isArray(s)?s:[s];else{const a=eJ(i,o);e[i]=a,n[i]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function eJ(t,e){switch(Id(e)){case"object":return ju(t,e);case"array":return ju(t,{type:"array",value:e,compare:!1});case"boolean":return ju(t,{type:"boolean",value:e});case"number":return ju(t,{type:"number",value:e});case"function":return ju(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function ju(t,e){return"type"in e?{name:t,...QQ[e.type],...e}:"value"in e?{name:t,type:Id(e.value),...e}:{name:t,type:"object",value:e}}function jl(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Id(t){return jl(t)?"array":t===null?"null":typeof t}function tJ(t,e){const n=QO(t.constructor),r=Object.create(n);r[Od]=t,r[ys]={},r[go]={};for(let i=0;i<e.length;++i){const o=e[i];for(const s in o)r[s]=o[s]}return Object.freeze(r),r}function QO(t){const e=Nd(t,"_mergedDefaultProps");return e||(nJ(t),t._mergedDefaultProps)}function nJ(t){if(!t.prototype)return;const n=Object.getPrototypeOf(t),r=QO(n),i=Nd(t,"defaultProps")||{},o=JQ(i),s=rJ(o.defaultProps,r,t),a={...n._propTypes,...o.propTypes};oJ(s,a);const u={...n._deprecatedProps,...o.deprecatedProps};iJ(s,u),t._mergedDefaultProps=s,t._propTypes=a,t._deprecatedProps=u}function rJ(t,e,n){const r=Object.create(null);Object.assign(r,e,t);const i=aJ(n);return delete t.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}function iJ(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(n);for(const o of e[n])JO(this,o)||(this[o]=r);$e.deprecated(i,e[n].join("/"))()}})}function oJ(t,e){const n={},r={};for(const i in e){const o=e[i],{name:s,value:a}=o;o.async&&(n[s]=a,r[s]=sJ(s))}t[Ra]=n,t[ys]={},Object.defineProperties(t,r)}function sJ(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||GO(e)?this[ys][t]=e:this[go][t]=e},get(){if(this[go]){if(t in this[go])return this[go][t]||this[Ra][t];if(t in this[ys]){const e=this[Od]&&this[Od].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Ra][t]}}return this[Ra][t]}}}function JO(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Nd(t,e){return JO(t,e)&&t[e]}function aJ(t){const e=Nd(t,"layerName")||Nd(t,"componentName");return e||$e.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}let uJ=0;class Ab{constructor(...e){w(this,"id",void 0),w(this,"props",void 0),w(this,"count",void 0),this.props=tJ(this,e),this.id=this.props.id,this.count=uJ++}clone(e){const{props:n}=this,r={};for(const i in n[Ra])i in n[go]?r[i]=n[go][i]:i in n[ys]&&(r[i]=n[ys][i]);return new this.constructor({...n,...r,...e})}}w(Ab,"componentName","Component");w(Ab,"defaultProps",{});const lJ=Object.freeze({});class cJ{constructor(e){w(this,"component",void 0),w(this,"onAsyncPropUpdated",void 0),w(this,"asyncProps",void 0),w(this,"oldProps",void 0),w(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||lJ}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return Boolean(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){const n=e[go]||{},r=e[ys]||e,i=e[Ra]||{};for(const o in n){const s=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,s),n[o]=this.getAsyncProp(o)}for(const o in r){const s=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,s)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(!!this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(GO(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(o=>{o=this._postProcessValue(r,o),this._setAsyncPropValue(e,o,i),this._onResolve(e,o)}).catch(o=>{this._onError(e,o)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let o=[],s=0;for await(const a of n){const{dataTransform:u}=this.component.props;u?o=u(a,o):o=o.concat(a),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:s,endRow:o.length}]}),s=o.length,this._setAsyncPropValue(e,o,i)}this._onResolve(e,o)}_postProcessValue(e,n){const r=e.type;return r&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class fJ extends cJ{constructor({attributeManager:e,layer:n}){super(n),w(this,"attributeManager",void 0),w(this,"needsRedraw",void 0),w(this,"needsUpdate",void 0),w(this,"subLayers",void 0),w(this,"usesPickingColorCache",void 0),w(this,"changeFlags",void 0),w(this,"viewport",void 0),w(this,"uniformTransitions",void 0),w(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,n){const r=this.component.props.fetch;return r?r(n,{propName:e,layer:this.layer}):super._fetch(e,n)}_onResolve(e,n){const r=this.component.props.onDataLoad;e==="data"&&r&&r(n,{propName:e,layer:this.layer})}_onError(e,n){this.layer.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const hJ="layer.changeFlag",dJ="layer.initialize",pJ="layer.update",gJ="layer.finalize",mJ="layer.matched",qT=2**24-1,vJ=Object.freeze([]),yJ=vg(({oldViewport:t,viewport:e})=>t.equals(e));let ii=new Uint8ClampedArray(0);const _J={data:{type:"data",value:vJ,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:o})=>{const{resourceManager:s}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,o){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:o}}}let u=s.contains(t);return!u&&!i&&(s.add({resourceId:t,data:Td(t,r),persistent:!1}),u=!0),u?s.subscribe({resourceId:t,onChange:l=>{var c;return(c=n.internalState)===null||c===void 0?void 0:c.reloadAsyncProp(e,l)},consumerId:n.id,requestId:e}):Td(t,r,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:Ec.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:at.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Jn extends Ab{constructor(...e){super(...e),w(this,"internalState",null),w(this,"lifecycle",na.NO_STATE),w(this,"context",void 0),w(this,"state",void 0),w(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){hn(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=MO(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,s]=AO(r,n.pixelProjectionMatrix);return e.length===2?[i,o]:[i,o,s]}unproject(e){return hn(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){hn(this.internalState);const r=this.internalState.viewport||this.context.viewport;return DZ(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===at.DEFAULT||e===at.LNGLAT||e===at.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){hn(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:WQ(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const n=this.getAttributeManager();if(!n)return null;const{positions:r,instancePositions:i}=n.attributes;return(e=r||i)===null||e===void 0?void 0:e.getBounds()}getShaders(e){for(const n of this.props.extensions)e=XQ(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const u of r)n.invalidateAll(u);else n.invalidateAll();const{props:i,oldProps:o}=e,s=Number.isInteger(o.highlightedObjectIndex)||o.pickable,a=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(s!==a&&n){const{pickingColors:u,instancePickingColors:l}=n.attributes,c=u||l;c&&(a&&c.constant&&(c.constant=!1,n.invalidate(c.id)),!c.value&&!a&&(c.constant=!0,c.value=[0,0,0]))}}finalizeState(e){for(const r of this.getModels())r.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i;if(n&&(e.message="".concat(n,": ").concat(e.message)),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var o,s;(o=this.context)===null||o===void 0||(s=o.onError)===null||s===void 0||s.call(o,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!yJ({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();!n||(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(ii.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>qT&&$e.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),ii=Ja.allocate(ii,n,{size:3,copy:!0,maxCount:Math.max(n,qT)});const i=Math.floor(ii.length/3),o=[];for(let s=r;s<i;s++)this.encodePickingColor(s,o),ii[s*3+0]=o[0],ii[s*3+1]=o[1],ii[s*3+2]=o[2]}e.value=ii.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},o=r.getShaderAttributes(n,i);e.setAttributes(o)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;const o=i.getVertexOffset(e),s=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(s-o),offset:o})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;!r||(this.internalState.usesPickingColorCache&&r.value.buffer!==ii.buffer&&(r.value=ii.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){hn(!this.internalState),hn(Number.isFinite(this.props.coordinateSystem)),Rn(dJ,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new fJ({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>($e.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new DQ(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Rn(mJ,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.internalState.layer=this,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Rn(pJ,this,e),!e)return;const n=this.props,r=this.context,i=this.internalState,o=r.viewport,s=this._updateUniformTransition();i.propsInTransition=s,r.viewport=i.viewport||o,this.props=s;try{const a=this._getUpdateParams(),u=this.getModels();if(r.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const c of this.props.extensions)c.updateState.call(this,a,c);const l=this.getModels()[0]!==u[0];this._postUpdate(a,l)}finally{r.viewport=o,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Rn(gJ,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const s=this.props.opacity;n.opacity=Math.pow(s,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,u=a&&a(n)||[0,0];zi(o.gl,{polygonOffset:u}),xr(o.gl,r,()=>{const l={moduleParameters:e,uniforms:n,parameters:r,context:o};for(const c of this.props.extensions)c.draw.call(this,l,c);this.draw(l)})}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let o=!1;switch(i){case"dataChanged":const s=e[i],a=n[i];s&&Array.isArray(a)&&(n.dataChanged=Array.isArray(s)?a.concat(s):s,o=!0);default:n[i]||(n[i]=e[i],o=!0)}o&&Rn(hJ,this,i,e)}const r=Boolean(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const r=UQ(e,n);if(r.updateTriggersChanged)for(const o in r.updateTriggersChanged)r.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(r.transitionsChanged)for(const o in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(o,n[o],e[o],(i=e.transitions)===null||i===void 0?void 0:i[o])}return this.setChangeFlags(r)}validateProps(){FQ(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new MQ(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o==null||o.setInstanceCount(this.getNumInstances());const{autoHighlight:s,highlightedObjectIndex:a,highlightColor:u}=r;if(n||i.autoHighlight!==s||i.highlightedObjectIndex!==a||i.highlightColor!==u){const l={};s||(l.pickingSelectedColor=null),Array.isArray(u)&&(l.pickingHighlightColor=u),Number.isInteger(a)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;return n=n||i,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}w(Jn,"defaultProps",_J);w(Jn,"layerName","Layer");const bJ="compositeLayer.renderLayers";class Eg extends Jn{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||n}getSubLayerRow(e,n,r){return e.__source={parent:this,object:n,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(n.index=r.__source.index,e(r.__source.object,n)):e(r,i)}return e}getSubLayerProps(e={}){var n;const{opacity:r,pickable:i,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:u,autoHighlight:l,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:g,modelMatrix:m,extensions:x,fetch:_,operation:y,_subLayerProps:b}=this.props,T={id:"",updateTriggers:{},opacity:r,pickable:i,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:u,autoHighlight:l,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:g,modelMatrix:m,extensions:x,fetch:_,operation:y},R=b&&e.id&&b[e.id],C=R&&R.updateTriggers,D=e.id||"sublayer";if(R){const F=this.constructor._propTypes,W=e.type?e.type._propTypes:{};for(const j in R){const H=W[j]||F[j];H&&H.type==="accessor"&&(R[j]=this.getSubLayerAccessor(R[j]))}}Object.assign(T,e,R),T.id="".concat(this.props.id,"-").concat(D),T.updateTriggers={all:(n=this.props.updateTriggers)===null||n===void 0?void 0:n.all,...e.updateTriggers,...C};for(const F of x){const W=F.getSubLayerProps.call(this,F);W&&Object.assign(T,W,{updateTriggers:Object.assign(T.updateTriggers,W.updateTriggers)})}return T}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let r=this.internalState.subLayers;const i=!r||this.needsUpdate();if(i){const o=this.renderLayers();r=wb(o,Boolean),this.internalState.subLayers=r}Rn(bJ,this,i,r);for(const o of r)o.parent=this}}w(Eg,"layerName","CompositeLayer");class e3{constructor(e){w(this,"opts",void 0),w(this,"typedArrayManager",void 0),w(this,"indexStarts",[0]),w(this,"vertexStarts",[0]),w(this,"vertexCount",0),w(this,"instanceCount",0),w(this,"attributes",void 0),w(this,"_attributeDefs",void 0),w(this,"data",void 0),w(this,"getGeometry",void 0),w(this,"geometryBuffer",void 0),w(this,"buffers",void 0),w(this,"positionSize",void 0),w(this,"normalize",void 0);const{attributes:n={}}=e;this.typedArrayManager=Ja,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:n,buffers:r={},getGeometry:i,geometryBuffer:o,positionFormat:s,dataChanged:a,normalize:u=!0}=this.opts;if(this.data=n,this.getGeometry=i,this.positionSize=o&&o.size||(s==="XY"?2:3),this.buffers=r,this.normalize=u,o&&(hn(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),u||(r.positions=o)),this.geometryBuffer=r.positions,Array.isArray(a))for(const l of a)this._rebuildGeometry(l);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:n}){this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(e){const n=e.value||e;return ArrayBuffer.isView(n)?WO(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,n){const{attributes:r,buffers:i,_attributeDefs:o,typedArrayManager:s}=this;for(const a in o)if(a in i)s.release(r[a]),r[a]=null;else{const u=o[a];u.copy=n,r[a]=s.allocate(r[a],e,u)}}_forEachGeometry(e,n,r){const{data:i,getGeometry:o}=this,{iterable:s,objectInfo:a}=xc(i,n,r);for(const u of s){a.index++;const l=o?o(u,a):null;e(l,a.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:n,vertexStarts:r,instanceCount:i}=this;const{data:o,geometryBuffer:s}=this,{startRow:a=0,endRow:u=1/0}=e||{},l={};if(e||(n=[0],r=[0]),this.normalize||!s)this._forEachGeometry((f,h)=>{const d=f&&this.normalizeGeometry(f);l[h]=d,r[h+1]=r[h]+(d?this.getGeometrySize(d):0)},a,u),i=r[r.length-1];else if(r=o.startIndices,i=r[o.length]||0,ArrayBuffer.isView(s))i=i||s.length/this.positionSize;else if(s instanceof _t){const f=s.accessor.stride||this.positionSize*4;i=i||s.byteLength/f}else if(s.buffer){const f=s.stride||this.positionSize*4;i=i||s.buffer.byteLength/f}else if(s.value){const f=s.value,h=s.stride/f.BYTES_PER_ELEMENT||this.positionSize;i=i||f.length/h}this._allocate(i,Boolean(e)),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;const c={};this._forEachGeometry((f,h)=>{const d=l[h]||f;c.vertexStart=r[h],c.indexStart=n[h];const g=h<r.length-1?r[h+1]:i;c.geometrySize=g-r[h],c.geometryIndex=h,this.updateGeometryAttributes(d,c)},a,u),this.vertexCount=n[n.length-1]}}const t3=(t,e)=>{const{offsetWidth:n,offsetHeight:r}=e;return new Vi({width:n,height:r}).fitBounds(t,{})};const wJ=t=>{const e=B.exports.useRef(null),n=B.exports.useRef(null),r=qL(),[i,o]=Ul(eb),[s,a]=Ul(n7),{search:u}=KL(),l=ZL(),[c,f]=B.exports.useState();B.exports.useEffect(()=>{if(e.current&&!wd(i)){const _=t3(t.defaultBounds,e.current);o(_)}},[e.current]);const h=B.exports.useMemo(()=>{var _;return(u==null?void 0:u.status)==="OK"&&((_=u.result)==null?void 0:_.items.length)?{type:"FeatureCollection",features:u.result.items.map(y=>({...y,properties:{id:y.id,...y.properties}}))}:null},[u]),d=B.exports.useMemo(()=>Rt.Children.map(t.children,_=>_.props.id)||[],[t.children]),g=B.exports.useCallback(_=>{var b;if(!n.current)return;const y=n.current.queryRenderedFeatures(_).filter(T=>d.find(R=>T.layer.id.startsWith(R)));if(y.length>0){const T=y[0];return{node:l.getNodeById((b=T.properties)==null?void 0:b.id),feature:T}}},[t.children,l,n.current,d]),m=B.exports.useCallback(_=>{var T,R;const{point:y}=_,b=g(y);if(b){const{node:C,feature:D}=b,F=c&&(C==null?void 0:C.id)===(c==null?void 0:c.node.id)?{...c,...y}:{node:C,feature:D,...y};(T=e.current)==null||T.classList.add("hover"),f(F)}else(R=e.current)==null||R.classList.remove("hover"),f(void 0)},[g,c]),x=_=>{const y=g(_.point);if(y){const b=JSON.parse(JSON.stringify(y));f(null),a(b)}else a(null)};return ps("div",{ref:e,className:"p6o-map-container",children:[wd(i)&&ke(hg,{clickTolerance:r.isTouchDevice?10:3,ref:n,initialViewState:i,mapStyle:t.mapStyle,onClick:x,onMouseMove:m,onMove:_=>o(_.viewState),children:Rt.Children.map(t.children,_=>Rt.cloneElement(_,{data:h}))}),t.tooltip&&c&&ke(BJ,{...c,tooltip:t.tooltip}),t.popup&&n.current&&s&&ke(zJ,{selected:s,viewState:i,map:n.current,popup:t.popup,onClose:()=>a(null)})]})};function EJ(t,e,n){var r=this,i=B.exports.useRef(null),o=B.exports.useRef(0),s=B.exports.useRef(null),a=B.exports.useRef([]),u=B.exports.useRef(),l=B.exports.useRef(),c=B.exports.useRef(t),f=B.exports.useRef(!0);B.exports.useEffect(function(){c.current=t},[t]);var h=!e&&e!==0&&typeof window<"u";if(typeof t!="function")throw new TypeError("Expected a function");e=+e||0;var d=!!(n=n||{}).leading,g=!("trailing"in n)||!!n.trailing,m="maxWait"in n,x=m?Math.max(+n.maxWait||0,e):null;B.exports.useEffect(function(){return f.current=!0,function(){f.current=!1}},[]);var _=B.exports.useMemo(function(){var y=function(F){var W=a.current,j=u.current;return a.current=u.current=null,o.current=F,l.current=c.current.apply(j,W)},b=function(F,W){h&&cancelAnimationFrame(s.current),s.current=h?requestAnimationFrame(F):setTimeout(F,W)},T=function(F){if(!f.current)return!1;var W=F-i.current;return!i.current||W>=e||W<0||m&&F-o.current>=x},R=function(F){return s.current=null,g&&a.current?y(F):(a.current=u.current=null,l.current)},C=function F(){var W=Date.now();if(T(W))return R(W);if(f.current){var j=e-(W-i.current),H=m?Math.min(j,x-(W-o.current)):j;b(F,H)}},D=function(){var F=Date.now(),W=T(F);if(a.current=[].slice.call(arguments),u.current=r,i.current=F,W){if(!s.current&&f.current)return o.current=i.current,b(C,e),d?y(i.current):l.current;if(m)return b(C,e),y(i.current)}return s.current||b(C,e),l.current};return D.cancel=function(){s.current&&(h?cancelAnimationFrame(s.current):clearTimeout(s.current)),o.current=0,a.current=i.current=u.current=s.current=null},D.isPending=function(){return!!s.current},D.flush=function(){return s.current?R(Date.now()):l.current},D},[d,m,e,x,g,h]);return _}function SJ(t,e){return t===e}function ZT(t){return typeof t=="function"?function(){return t}:t}function xJ(t,e,n){var r,i,o=n&&n.equalityFn||SJ,s=(r=B.exports.useState(ZT(t)),i=r[1],[r[0],B.exports.useCallback(function(f){return i(ZT(f))},[])]),a=s[0],u=s[1],l=EJ(B.exports.useCallback(function(f){return u(f)},[u]),e,n),c=B.exports.useRef(t);return o(c.current,t)||(l(t),c.current=t),[a,l]}const TJ=typeof window<"u"?B.exports.useLayoutEffect:B.exports.useEffect;function Dd(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const PJ={position:"absolute",zIndex:-1};function n3(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>n3(n,e));if(Sg(t)){if(AJ(t))return e.style=PJ,B.exports.cloneElement(t,e);if(CJ(t))return B.exports.cloneElement(t,e)}return t}function Sg(t){return t&&typeof t=="object"&&"type"in t||!1}function AJ(t){const e=t.type,n=e&&e.defaultProps;return n&&n.mapStyle}function CJ(t){const e=t.type;return e&&e.deckGLViewProps}function hy(t){if(typeof t=="function")return B.exports.createElement(_s,{},t);if(Array.isArray(t))return t.map(hy);if(Sg(t)){if(t.type===B.exports.Fragment)return hy(t.props.children);if(Dd(t.type,_s))return t}return t}function RJ({children:t,layers:e=[],views:n=null}){const r=[],i=[],o={};return B.exports.Children.forEach(hy(t),s=>{if(Sg(s)){const a=s.type;if(Dd(a,Jn)){const u=LJ(a,s.props);i.push(u)}else r.push(s);if(Dd(a,_s)&&a!==_s&&s.props.id){const u=new a(s.props);o[u.id]=u}}else s&&r.push(s)}),Object.keys(o).length>0&&(Array.isArray(n)?n.forEach(s=>{o[s.id]=s}):n&&(o[n.id]=n),n=Object.values(o)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:n}}function LJ(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}function MJ({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},o=r.views[0].id;for(const s of t){let a=o,u=s;Sg(s)&&Dd(s.type,_s)&&(a=s.props.id||o,u=s.props.children);const l=r.getViewport(a),c=r.getViewState(a);if(l){const{x:f,y:h,width:d,height:g}=l;u=n3(u,{x:f,y:h,width:d,height:g,viewport:l,viewState:c}),i[a]||(i[a]={viewport:l,children:[]}),i[a].children.push(u)}}return Object.keys(i).map(s=>{const{viewport:a,children:u}=i[s],{x:l,y:c,width:f,height:h}=a,d={position:"absolute",left:l,top:c,width:f,height:h},g="view-".concat(s),m=B.exports.createElement("div",{key:g,id:g,style:d},...u);if(n){const x={viewport:a,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:_=>{_.viewId=s,e._onViewStateChange(_)}};return B.exports.createElement(n,{key:g,value:x},m)}return m})}const OJ={mixBlendMode:null};function kJ({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(n)for(const o in n)o in OJ?i[o]=n[o]:r[o]=n[o];return{containerStyle:r,canvasStyle:i}}function IJ(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function r3(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function NJ(t,e,n){const r=new e({...n,_customRender:i=>{t.redrawReason=i;const o=r.getViewports();t.lastRenderedViewports!==o?t.forceUpdate():r3(t)}});return r}const i3=B.exports.forwardRef((t,e)=>{const[n,r]=B.exports.useState(0),o=B.exports.useRef({control:null,version:n,forceUpdate:()=>r(R=>R+1)}).current,s=B.exports.useRef(null),a=B.exports.useRef(null),u=B.exports.useMemo(()=>RJ(t),[t.layers,t.views,t.children]);let l=!0;const c=R=>{var C;return l&&t.viewState?(o.viewStateUpdateRequested=R,null):(o.viewStateUpdateRequested=null,(C=t.onViewStateChange)===null||C===void 0?void 0:C.call(t,R))},f=R=>{if(l)o.interactionStateUpdateRequested=R;else{var C;o.interactionStateUpdateRequested=null,(C=t.onInteractionStateChange)===null||C===void 0||C.call(t,R)}},h=B.exports.useMemo(()=>{const R={...t,style:null,width:"100%",height:"100%",parent:s.current,canvas:a.current,layers:u.layers,views:u.views,onViewStateChange:c,onInteractionStateChange:f};return delete R._customRender,o.deck&&o.deck.setProps(R),R},[t]);B.exports.useEffect(()=>{const R=t.Deck||wg;return o.deck=NJ(o,R,{...h,parent:s.current,canvas:a.current}),()=>{var C;return(C=o.deck)===null||C===void 0?void 0:C.finalize()}},[]),TJ(()=>{r3(o);const{viewStateUpdateRequested:R,interactionStateUpdateRequested:C}=o;R&&c(R),C&&f(C)}),B.exports.useImperativeHandle(e,()=>IJ(o),[]);const d=o.deck&&o.deck.isInitialized?o.deck.getViewports():void 0,{ContextProvider:g,width:m,height:x,id:_,style:y}=t,{containerStyle:b,canvasStyle:T}=B.exports.useMemo(()=>kJ({width:m,height:x,style:y}),[m,x,y]);if(!o.viewStateUpdateRequested&&o.lastRenderedViewports===d||o.version!==n){o.lastRenderedViewports=d,o.version=n;const R=MJ({children:u.children,deck:o.deck,ContextProvider:g}),C=B.exports.createElement("canvas",{key:"canvas",id:_||"deckgl-overlay",ref:a,style:T});o.control=B.exports.createElement("div",{id:"".concat(_||"deckgl","-wrapper"),ref:s,style:b},[C,R])}return l=!1,o.control});i3.defaultProps=wg.defaultProps;const DJ=t=>{const e=B.exports.useRef(null),{search:n}=KL(),r=ZL(),i=B.exports.useMemo(()=>(n==null?void 0:n.result)&&n.status==="OK"&&n.result.items.length>0?n.result.items:null,[n]),o=B.exports.useMemo(()=>t.layers&&i?t.layers.reduce((a,u)=>{const l=u(i,r);return Array.isArray(l)?[...a,...l]:[...a,l]},[]):[],[i,t.layers]),s=B.exports.useCallback(a=>{const{offsetX:u,offsetY:l}=a.nativeEvent,c=e.current.pickObject({x:u,y:l,radius:3});c&&t.onClick&&t.onClick(c)},[t.onClick,e]);return ke("div",{onClick:s,children:ke(i3,{ref:e,initialViewState:t.initialViewState,controller:!0,onViewStateChange:t.onViewStateChange,layers:o,getTooltip:a=>t.tooltip({...a,graph:r,search:n}),children:ke(hg,{mapStyle:t.mapStyle})})})},FJ=t=>{const e=B.exports.useRef(null),[n,r]=Ul(eb),[i,o]=B.exports.useState(wd(n)?n:null),[s,a]=B.exports.useState(),[u]=xJ(s,200);return B.exports.useEffect(()=>{u&&r(u)},[u]),B.exports.useEffect(()=>{if(e.current&&!i){const l=t3(t.defaultBounds,e.current);o(l)}},[e.current]),B.exports.useEffect(()=>{e.current&&i&&wd(n)&&o(n)},[n]),ke("div",{ref:e,className:"p6o-map-container",children:i&&ke(DJ,{...t,initialViewState:i,onViewStateChange:l=>a(l.viewState)})})},Wue={MapLibre:wJ,MapLibreDeckGL:FJ};function UJ(t,e){e===void 0&&(e={});var n=0,r=0,i=0;return aM(t,function(o){n+=o[0],r+=o[1],i++},!0),qj([n/i,r/i],e.properties)}const o3=(t,e,n,r=[15,0,0,15])=>{var u;const[i,o]=B.exports.useState(e+r[3]),[s,a]=B.exports.useState(n+r[0]);return B.exports.useEffect(()=>o(e),[e]),B.exports.useEffect(()=>a(n),[n]),B.exports.useEffect(()=>{var l,c;if(t.current){const f=(l=t.current.firstChild)==null?void 0:l.getBoundingClientRect(),h=(c=t.current.closest(".p6o-map-container"))==null?void 0:c.getBoundingClientRect();if(f&&h){const d=f.right+r[1]>h.right,g=f.bottom+r[2]>h.bottom;d&&o(h.right-f.width-r[1]-r[3]),g&&a(h.bottom-f.height-r[0]-r[2])}}},[(u=t.current)==null?void 0:u.getBoundingClientRect()]),{top:s,left:i}},zJ=t=>{const e=qL(),n=B.exports.useRef(null),{selected:r,viewState:i,map:o,popup:s}=t,[a,u]=B.exports.useState({left:0,top:0}),{top:l,left:c}=e.size===wr.DESKTOP?o3(n,a.left,a.top):{top:0,left:0};B.exports.useEffect(()=>{var h;if(r&&e.size===wr.DESKTOP){const d=(h=UJ(r.feature))==null?void 0:h.geometry.coordinates,{x:g,y:m}=o.project(d);u({left:g,top:m})}else r&&u({left:0,top:0})},[r,i,e.size]);const f=B.exports.useMemo(()=>r?s({...t,onClose:t.onClose}):null,[r]);return f&&ps("div",{className:e.size===wr.DESKTOP?"p6o-map-popup-container":"p6o-map-popup-container-mobile",style:{zIndex:9,position:"absolute",top:l,left:c},children:[ke("button",{className:"p6o-map-popup-close",onClick:t.onClose,children:ke(Jj,{})}),ke("main",{ref:n,children:f})]})},BJ=t=>{const e=B.exports.useRef(null),{x:n,y:r,node:i,feature:o,tooltip:s}=t,{left:a,top:u}=o3(e,n,r),l=B.exports.useMemo(()=>i?s({node:i,feature:o}):null,[i,o]);return l&&ke("div",{ref:e,className:"p6o-map-tooltip-container",style:{left:a,top:u,zIndex:1},children:l})},VJ=()=>{const{current:t,...e}=O8();return Object.values(e)[0]};const Hue=t=>ke("div",{className:"p6o-controls-container",children:t.children});const Yue=()=>{const t=VJ(),[e,n]=Ul(eb),r=i=>()=>{t&&n({...e,zoom:e.zoom+i,transitionDuration:200}),t==null||t.easeTo({zoom:t.getZoom()+i})};return ps("div",{className:"p6o-zoom-container",children:[ke("button",{className:"p6o-controls-btn p6o-zoom p6o-zoom-in",tabIndex:31,"aria-label":"Zoom in",onClick:r(1),children:ke(t7,{})}),ke("button",{className:"p6o-controls-btn p6o-zoom p6o-zoom-out",tabIndex:32,"aria-label":"Zoom out",onClick:r(-1),children:ke(e7,{})})]})};function Un(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function bt(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function eh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?eh=function(n){return typeof n}:eh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},eh(t)}function St(t){bt(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||eh(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Xue(t,e){bt(2,arguments);var n=St(t),r=Un(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var i=n.getDate(),o=new Date(n.getTime());o.setMonth(n.getMonth()+r+1,0);var s=o.getDate();return i>=s?o:(n.setFullYear(o.getFullYear(),o.getMonth(),i),n)}function $J(t,e){bt(2,arguments);var n=St(t).getTime(),r=Un(e);return new Date(n+r)}var jJ={};function du(){return jJ}function s3(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}var GJ=6e4,WJ=36e5,HJ=1e3;function th(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?th=function(n){return typeof n}:th=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},th(t)}function YJ(t){return bt(1,arguments),t instanceof Date||th(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function a3(t){if(bt(1,arguments),!YJ(t)&&typeof t!="number")return!1;var e=St(t);return!isNaN(Number(e))}function XJ(t){bt(1,arguments);var e=St(t);return e.setHours(23,59,59,999),e}function que(t){bt(1,arguments);var e=St(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Zue(t){bt(1,arguments);var e=t||{},n=St(e.start),r=St(e.end),i=r.getTime(),o=[];if(!(n.getTime()<=i))throw new RangeError("Invalid interval");var s=n;for(s.setHours(0,0,0,0),s.setDate(1);s.getTime()<=i;)o.push(St(s)),s.setMonth(s.getMonth()+1);return o}function Kue(t){bt(1,arguments);var e=St(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Que(){return XJ(Date.now())}function u3(t,e){bt(2,arguments);var n=Un(e);return $J(t,-n)}var qJ=864e5;function ZJ(t){bt(1,arguments);var e=St(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/qJ)+1}function eu(t){bt(1,arguments);var e=1,n=St(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function l3(t){bt(1,arguments);var e=St(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=eu(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var s=eu(o);return e.getTime()>=i.getTime()?n+1:e.getTime()>=s.getTime()?n:n-1}function KJ(t){bt(1,arguments);var e=l3(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=eu(n);return r}var QJ=6048e5;function c3(t){bt(1,arguments);var e=St(t),n=eu(e).getTime()-KJ(e).getTime();return Math.round(n/QJ)+1}function bs(t,e){var n,r,i,o,s,a,u,l;bt(1,arguments);var c=du(),f=Un((n=(r=(i=(o=e==null?void 0:e.weekStartsOn)!==null&&o!==void 0?o:e==null||(s=e.locale)===null||s===void 0||(a=s.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(u=c.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=St(t),d=h.getUTCDay(),g=(d<f?7:0)+d-f;return h.setUTCDate(h.getUTCDate()-g),h.setUTCHours(0,0,0,0),h}function Cb(t,e){var n,r,i,o,s,a,u,l;bt(1,arguments);var c=St(t),f=c.getUTCFullYear(),h=du(),d=Un((n=(r=(i=(o=e==null?void 0:e.firstWeekContainsDate)!==null&&o!==void 0?o:e==null||(s=e.locale)===null||s===void 0||(a=s.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:h.firstWeekContainsDate)!==null&&r!==void 0?r:(u=h.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(f+1,0,d),g.setUTCHours(0,0,0,0);var m=bs(g,e),x=new Date(0);x.setUTCFullYear(f,0,d),x.setUTCHours(0,0,0,0);var _=bs(x,e);return c.getTime()>=m.getTime()?f+1:c.getTime()>=_.getTime()?f:f-1}function JJ(t,e){var n,r,i,o,s,a,u,l;bt(1,arguments);var c=du(),f=Un((n=(r=(i=(o=e==null?void 0:e.firstWeekContainsDate)!==null&&o!==void 0?o:e==null||(s=e.locale)===null||s===void 0||(a=s.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:c.firstWeekContainsDate)!==null&&r!==void 0?r:(u=c.locale)===null||u===void 0||(l=u.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&n!==void 0?n:1),h=Cb(t,e),d=new Date(0);d.setUTCFullYear(h,0,f),d.setUTCHours(0,0,0,0);var g=bs(d,e);return g}var eee=6048e5;function f3(t,e){bt(1,arguments);var n=St(t),r=bs(n,e).getTime()-JJ(n,e).getTime();return Math.round(r/eee)+1}function vt(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var tee={y:function(e,n){var r=e.getUTCFullYear(),i=r>0?r:1-r;return vt(n==="yy"?i%100:i,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):vt(r+1,2)},d:function(e,n){return vt(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return vt(e.getUTCHours()%12||12,n.length)},H:function(e,n){return vt(e.getUTCHours(),n.length)},m:function(e,n){return vt(e.getUTCMinutes(),n.length)},s:function(e,n){return vt(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,i=e.getUTCMilliseconds(),o=Math.floor(i*Math.pow(10,r-3));return vt(o,n.length)}};const oo=tee;var ta={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},nee={G:function(e,n,r){var i=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var i=e.getUTCFullYear(),o=i>0?i:1-i;return r.ordinalNumber(o,{unit:"year"})}return oo.y(e,n)},Y:function(e,n,r,i){var o=Cb(e,i),s=o>0?o:1-o;if(n==="YY"){var a=s%100;return vt(a,2)}return n==="Yo"?r.ordinalNumber(s,{unit:"year"}):vt(s,n.length)},R:function(e,n){var r=l3(e);return vt(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return vt(r,n.length)},Q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return vt(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return vt(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,r){var i=e.getUTCMonth();switch(n){case"M":case"MM":return oo.M(e,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,r){var i=e.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return vt(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,r,i){var o=f3(e,i);return n==="wo"?r.ordinalNumber(o,{unit:"week"}):vt(o,n.length)},I:function(e,n,r){var i=c3(e);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):vt(i,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):oo.d(e,n)},D:function(e,n,r){var i=ZJ(e);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):vt(i,n.length)},E:function(e,n,r){var i=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,r,i){var o=e.getUTCDay(),s=(o-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(s);case"ee":return vt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});case"eeee":default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(e,n,r,i){var o=e.getUTCDay(),s=(o-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(s);case"cc":return vt(s,n.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});case"cccc":default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(e,n,r){var i=e.getUTCDay(),o=i===0?7:i;switch(n){case"i":return String(o);case"ii":return vt(o,n.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,r){var i=e.getUTCHours(),o=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,n,r){var i=e.getUTCHours(),o;switch(i===12?o=ta.noon:i===0?o=ta.midnight:o=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,n,r){var i=e.getUTCHours(),o;switch(i>=17?o=ta.evening:i>=12?o=ta.afternoon:i>=4?o=ta.morning:o=ta.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return oo.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):oo.H(e,n)},K:function(e,n,r){var i=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):vt(i,n.length)},k:function(e,n,r){var i=e.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):vt(i,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):oo.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):oo.s(e,n)},S:function(e,n){return oo.S(e,n)},X:function(e,n,r,i){var o=i._originalDate||e,s=o.getTimezoneOffset();if(s===0)return"Z";switch(n){case"X":return QT(s);case"XXXX":case"XX":return Xo(s);case"XXXXX":case"XXX":default:return Xo(s,":")}},x:function(e,n,r,i){var o=i._originalDate||e,s=o.getTimezoneOffset();switch(n){case"x":return QT(s);case"xxxx":case"xx":return Xo(s);case"xxxxx":case"xxx":default:return Xo(s,":")}},O:function(e,n,r,i){var o=i._originalDate||e,s=o.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+KT(s,":");case"OOOO":default:return"GMT"+Xo(s,":")}},z:function(e,n,r,i){var o=i._originalDate||e,s=o.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+KT(s,":");case"zzzz":default:return"GMT"+Xo(s,":")}},t:function(e,n,r,i){var o=i._originalDate||e,s=Math.floor(o.getTime()/1e3);return vt(s,n.length)},T:function(e,n,r,i){var o=i._originalDate||e,s=o.getTime();return vt(s,n.length)}};function KT(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),o=r%60;if(o===0)return n+String(i);var s=e||"";return n+String(i)+s+vt(o,2)}function QT(t,e){if(t%60===0){var n=t>0?"-":"+";return n+vt(Math.abs(t)/60,2)}return Xo(t,e)}function Xo(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),o=vt(Math.floor(i/60),2),s=vt(i%60,2);return r+o+n+s}const ree=nee;var JT=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},h3=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},iee=function(e,n){var r=e.match(/(P+)(p+)?/)||[],i=r[1],o=r[2];if(!o)return JT(e,n);var s;switch(i){case"P":s=n.dateTime({width:"short"});break;case"PP":s=n.dateTime({width:"medium"});break;case"PPP":s=n.dateTime({width:"long"});break;case"PPPP":default:s=n.dateTime({width:"full"});break}return s.replace("{{date}}",JT(i,n)).replace("{{time}}",h3(o,n))},oee={p:h3,P:iee};const dy=oee;var see=["D","DD"],aee=["YY","YYYY"];function d3(t){return see.indexOf(t)!==-1}function p3(t){return aee.indexOf(t)!==-1}function Fd(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var uee={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lee=function(e,n,r){var i,o=uee[e];return typeof o=="string"?i=o:n===1?i=o.one:i=o.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};const cee=lee;function E0(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var fee={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hee={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dee={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pee={date:E0({formats:fee,defaultWidth:"full"}),time:E0({formats:hee,defaultWidth:"full"}),dateTime:E0({formats:dee,defaultWidth:"full"})};const gee=pee;var mee={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vee=function(e,n,r,i){return mee[e]};const yee=vee;function Gu(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,s=n!=null&&n.width?String(n.width):o;i=t.formattingValues[s]||t.formattingValues[o]}else{var a=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[u]||t.values[a]}var l=t.argumentCallback?t.argumentCallback(e):e;return i[l]}}var _ee={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},bee={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wee={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Eee={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},See={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Tee=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Pee={ordinalNumber:Tee,era:Gu({values:_ee,defaultWidth:"wide"}),quarter:Gu({values:bee,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Gu({values:wee,defaultWidth:"wide"}),day:Gu({values:Eee,defaultWidth:"wide"}),dayPeriod:Gu({values:See,defaultWidth:"wide",formattingValues:xee,defaultFormattingWidth:"wide"})};const Aee=Pee;function Wu(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;var s=o[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(a)?Ree(a,function(f){return f.test(s)}):Cee(a,function(f){return f.test(s)}),l;l=t.valueCallback?t.valueCallback(u):u,l=n.valueCallback?n.valueCallback(l):l;var c=e.slice(s.length);return{value:l,rest:c}}}function Cee(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function Ree(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function Lee(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],o=e.match(t.parsePattern);if(!o)return null;var s=t.valueCallback?t.valueCallback(o[0]):o[0];s=n.valueCallback?n.valueCallback(s):s;var a=e.slice(i.length);return{value:s,rest:a}}}var Mee=/^(\d+)(th|st|nd|rd)?/i,Oee=/\d+/i,kee={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Iee={any:[/^b/i,/^(a|c)/i]},Nee={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Dee={any:[/1/i,/2/i,/3/i,/4/i]},Fee={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Uee={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},zee={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Bee={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Vee={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$ee={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jee={ordinalNumber:Lee({matchPattern:Mee,parsePattern:Oee,valueCallback:function(e){return parseInt(e,10)}}),era:Wu({matchPatterns:kee,defaultMatchWidth:"wide",parsePatterns:Iee,defaultParseWidth:"any"}),quarter:Wu({matchPatterns:Nee,defaultMatchWidth:"wide",parsePatterns:Dee,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Wu({matchPatterns:Fee,defaultMatchWidth:"wide",parsePatterns:Uee,defaultParseWidth:"any"}),day:Wu({matchPatterns:zee,defaultMatchWidth:"wide",parsePatterns:Bee,defaultParseWidth:"any"}),dayPeriod:Wu({matchPatterns:Vee,defaultMatchWidth:"any",parsePatterns:$ee,defaultParseWidth:"any"})};const Gee=jee;var Wee={code:"en-US",formatDistance:cee,formatLong:gee,formatRelative:yee,localize:Aee,match:Gee,options:{weekStartsOn:0,firstWeekContainsDate:1}};const g3=Wee;var Hee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Yee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Xee=/^'([^]*?)'?$/,qee=/''/g,Zee=/[a-zA-Z]/;function Jue(t,e,n){var r,i,o,s,a,u,l,c,f,h,d,g,m,x,_,y,b,T;bt(2,arguments);var R=String(e),C=du(),D=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:C.locale)!==null&&r!==void 0?r:g3,F=Un((o=(s=(a=(u=n==null?void 0:n.firstWeekContainsDate)!==null&&u!==void 0?u:n==null||(l=n.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&a!==void 0?a:C.firstWeekContainsDate)!==null&&s!==void 0?s:(f=C.locale)===null||f===void 0||(h=f.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(F>=1&&F<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var W=Un((d=(g=(m=(x=n==null?void 0:n.weekStartsOn)!==null&&x!==void 0?x:n==null||(_=n.locale)===null||_===void 0||(y=_.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&m!==void 0?m:C.weekStartsOn)!==null&&g!==void 0?g:(b=C.locale)===null||b===void 0||(T=b.options)===null||T===void 0?void 0:T.weekStartsOn)!==null&&d!==void 0?d:0);if(!(W>=0&&W<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!D.localize)throw new RangeError("locale must contain localize property");if(!D.formatLong)throw new RangeError("locale must contain formatLong property");var j=St(t);if(!a3(j))throw new RangeError("Invalid time value");var H=s3(j),pe=u3(j,H),ue={firstWeekContainsDate:F,weekStartsOn:W,locale:D,_originalDate:j},se=R.match(Yee).map(function(Ce){var De=Ce[0];if(De==="p"||De==="P"){var He=dy[De];return He(Ce,D.formatLong)}return Ce}).join("").match(Hee).map(function(Ce){if(Ce==="''")return"'";var De=Ce[0];if(De==="'")return Kee(Ce);var He=ree[De];if(He)return!(n!=null&&n.useAdditionalWeekYearTokens)&&p3(Ce)&&Fd(Ce,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&d3(Ce)&&Fd(Ce,e,String(t)),He(pe,Ce,D.localize,ue);if(De.match(Zee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+De+"`");return Ce}).join("");return se}function Kee(t){var e=t.match(Xee);return e?e[1].replace(qee,"'"):t}function Qee(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function ele(t,e){bt(2,arguments);var n=St(t),r=St(e);return n.getTime()>r.getTime()}function tle(t,e){bt(2,arguments);var n=St(t),r=St(e);return n.getTime()<r.getTime()}function nh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nh=function(n){return typeof n}:nh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},nh(t)}function m3(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&py(t,e)}function py(t,e){return py=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},py(t,e)}function v3(t){var e=ete();return function(){var r=Ud(t),i;if(e){var o=Ud(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Jee(this,i)}}function Jee(t,e){return e&&(nh(e)==="object"||typeof e=="function")?e:gy(t)}function gy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ete(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ud(t){return Ud=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ud(t)}function Rb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lb(t,e,n){return e&&eP(t.prototype,e),n&&eP(t,n),t}function my(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tte=10,y3=function(){function t(){Rb(this,t),my(this,"subPriority",0)}return Lb(t,[{key:"validate",value:function(n,r){return!0}}]),t}(),nte=function(t){m3(n,t);var e=v3(n);function n(r,i,o,s,a){var u;return Rb(this,n),u=e.call(this),u.value=r,u.validateValue=i,u.setValue=o,u.priority=s,a&&(u.subPriority=a),u}return Lb(n,[{key:"validate",value:function(i,o){return this.validateValue(i,this.value,o)}},{key:"set",value:function(i,o,s){return this.setValue(i,o,this.value,s)}}]),n}(y3),rte=function(t){m3(n,t);var e=v3(n);function n(){var r;Rb(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),my(gy(r),"priority",tte),my(gy(r),"subPriority",-1),r}return Lb(n,[{key:"set",value:function(i,o){if(o.timestampIsSet)return i;var s=new Date(0);return s.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),s.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),s}}]),n}(y3);function ite(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ote(t,e,n){return e&&tP(t.prototype,e),n&&tP(t,n),t}var ht=function(){function t(){ite(this,t)}return ote(t,[{key:"run",value:function(n,r,i,o){var s=this.parse(n,r,i,o);return s?{setter:new nte(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}},{key:"validate",value:function(n,r,i){return!0}}]),t}();function rh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rh=function(n){return typeof n}:rh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},rh(t)}function ste(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ate(t,e,n){return e&&nP(t.prototype,e),n&&nP(t,n),t}function ute(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vy(t,e)}function vy(t,e){return vy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},vy(t,e)}function lte(t){var e=fte();return function(){var r=zd(t),i;if(e){var o=zd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return cte(this,i)}}function cte(t,e){return e&&(rh(e)==="object"||typeof e=="function")?e:yy(t)}function yy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zd(t){return zd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},zd(t)}function rP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var hte=function(t){ute(n,t);var e=lte(n);function n(){var r;ste(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),rP(yy(r),"priority",140),rP(yy(r),"incompatibleTokens",["R","u","t","T"]),r}return ate(n,[{key:"parse",value:function(i,o,s){switch(o){case"G":case"GG":case"GGG":return s.era(i,{width:"abbreviated"})||s.era(i,{width:"narrow"});case"GGGGG":return s.era(i,{width:"narrow"});case"GGGG":default:return s.era(i,{width:"wide"})||s.era(i,{width:"abbreviated"})||s.era(i,{width:"narrow"})}}},{key:"set",value:function(i,o,s){return o.era=s,i.setUTCFullYear(s,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(ht),qt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ui={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Zt(t,e){return t&&{value:e(t.value),rest:t.rest}}function Bt(t,e){var n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function li(t,e){var n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};var r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,o=n[3]?parseInt(n[3],10):0,s=n[5]?parseInt(n[5],10):0;return{value:r*(i*WJ+o*GJ+s*HJ),rest:e.slice(n[0].length)}}function _3(t){return Bt(qt.anyDigitsSigned,t)}function Ht(t,e){switch(t){case 1:return Bt(qt.singleDigit,e);case 2:return Bt(qt.twoDigits,e);case 3:return Bt(qt.threeDigits,e);case 4:return Bt(qt.fourDigits,e);default:return Bt(new RegExp("^\\d{1,"+t+"}"),e)}}function Bd(t,e){switch(t){case 1:return Bt(qt.singleDigitSigned,e);case 2:return Bt(qt.twoDigitsSigned,e);case 3:return Bt(qt.threeDigitsSigned,e);case 4:return Bt(qt.fourDigitsSigned,e);default:return Bt(new RegExp("^-?\\d{1,"+t+"}"),e)}}function Mb(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function b3(t,e){var n=e>0,r=n?e:1-e,i;if(r<=50)i=t||100;else{var o=r+50,s=Math.floor(o/100)*100,a=t>=o%100;i=t+s-(a?100:0)}return n?i:1-i}function w3(t){return t%400===0||t%4===0&&t%100!==0}function ih(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ih=function(n){return typeof n}:ih=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ih(t)}function dte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pte(t,e,n){return e&&iP(t.prototype,e),n&&iP(t,n),t}function gte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_y(t,e)}function _y(t,e){return _y=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},_y(t,e)}function mte(t){var e=yte();return function(){var r=Vd(t),i;if(e){var o=Vd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return vte(this,i)}}function vte(t,e){return e&&(ih(e)==="object"||typeof e=="function")?e:by(t)}function by(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vd(t){return Vd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Vd(t)}function oP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _te=function(t){gte(n,t);var e=mte(n);function n(){var r;dte(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),oP(by(r),"priority",130),oP(by(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return pte(n,[{key:"parse",value:function(i,o,s){var a=function(l){return{year:l,isTwoDigitYear:o==="yy"}};switch(o){case"y":return Zt(Ht(4,i),a);case"yo":return Zt(s.ordinalNumber(i,{unit:"year"}),a);default:return Zt(Ht(o.length,i),a)}}},{key:"validate",value:function(i,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(i,o,s){var a=i.getUTCFullYear();if(s.isTwoDigitYear){var u=b3(s.year,a);return i.setUTCFullYear(u,0,1),i.setUTCHours(0,0,0,0),i}var l=!("era"in o)||o.era===1?s.year:1-s.year;return i.setUTCFullYear(l,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function oh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?oh=function(n){return typeof n}:oh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},oh(t)}function bte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wte(t,e,n){return e&&sP(t.prototype,e),n&&sP(t,n),t}function Ete(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wy(t,e)}function wy(t,e){return wy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},wy(t,e)}function Ste(t){var e=Tte();return function(){var r=$d(t),i;if(e){var o=$d(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return xte(this,i)}}function xte(t,e){return e&&(oh(e)==="object"||typeof e=="function")?e:Ey(t)}function Ey(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $d(t){return $d=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},$d(t)}function aP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pte=function(t){Ete(n,t);var e=Ste(n);function n(){var r;bte(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),aP(Ey(r),"priority",130),aP(Ey(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return wte(n,[{key:"parse",value:function(i,o,s){var a=function(l){return{year:l,isTwoDigitYear:o==="YY"}};switch(o){case"Y":return Zt(Ht(4,i),a);case"Yo":return Zt(s.ordinalNumber(i,{unit:"year"}),a);default:return Zt(Ht(o.length,i),a)}}},{key:"validate",value:function(i,o){return o.isTwoDigitYear||o.year>0}},{key:"set",value:function(i,o,s,a){var u=Cb(i,a);if(s.isTwoDigitYear){var l=b3(s.year,u);return i.setUTCFullYear(l,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),bs(i,a)}var c=!("era"in o)||o.era===1?s.year:1-s.year;return i.setUTCFullYear(c,0,a.firstWeekContainsDate),i.setUTCHours(0,0,0,0),bs(i,a)}}]),n}(ht);function sh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?sh=function(n){return typeof n}:sh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},sh(t)}function Ate(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cte(t,e,n){return e&&uP(t.prototype,e),n&&uP(t,n),t}function Rte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sy(t,e)}function Sy(t,e){return Sy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Sy(t,e)}function Lte(t){var e=Ote();return function(){var r=jd(t),i;if(e){var o=jd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Mte(this,i)}}function Mte(t,e){return e&&(sh(e)==="object"||typeof e=="function")?e:xy(t)}function xy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ote(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jd(t){return jd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},jd(t)}function lP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var kte=function(t){Rte(n,t);var e=Lte(n);function n(){var r;Ate(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),lP(xy(r),"priority",130),lP(xy(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return Cte(n,[{key:"parse",value:function(i,o){return Bd(o==="R"?4:o.length,i)}},{key:"set",value:function(i,o,s){var a=new Date(0);return a.setUTCFullYear(s,0,4),a.setUTCHours(0,0,0,0),eu(a)}}]),n}(ht);function ah(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ah=function(n){return typeof n}:ah=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ah(t)}function Ite(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nte(t,e,n){return e&&cP(t.prototype,e),n&&cP(t,n),t}function Dte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ty(t,e)}function Ty(t,e){return Ty=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Ty(t,e)}function Fte(t){var e=zte();return function(){var r=Gd(t),i;if(e){var o=Gd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Ute(this,i)}}function Ute(t,e){return e&&(ah(e)==="object"||typeof e=="function")?e:Py(t)}function Py(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gd(t){return Gd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Gd(t)}function fP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Bte=function(t){Dte(n,t);var e=Fte(n);function n(){var r;Ite(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),fP(Py(r),"priority",130),fP(Py(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return Nte(n,[{key:"parse",value:function(i,o){return Bd(o==="u"?4:o.length,i)}},{key:"set",value:function(i,o,s){return i.setUTCFullYear(s,0,1),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function uh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?uh=function(n){return typeof n}:uh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},uh(t)}function Vte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $te(t,e,n){return e&&hP(t.prototype,e),n&&hP(t,n),t}function jte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ay(t,e)}function Ay(t,e){return Ay=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Ay(t,e)}function Gte(t){var e=Hte();return function(){var r=Wd(t),i;if(e){var o=Wd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Wte(this,i)}}function Wte(t,e){return e&&(uh(e)==="object"||typeof e=="function")?e:Cy(t)}function Cy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Wd(t){return Wd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Wd(t)}function dP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yte=function(t){jte(n,t);var e=Gte(n);function n(){var r;Vte(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),dP(Cy(r),"priority",120),dP(Cy(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return $te(n,[{key:"parse",value:function(i,o,s){switch(o){case"Q":case"QQ":return Ht(o.length,i);case"Qo":return s.ordinalNumber(i,{unit:"quarter"});case"QQQ":return s.quarter(i,{width:"abbreviated",context:"formatting"})||s.quarter(i,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(i,{width:"wide",context:"formatting"})||s.quarter(i,{width:"abbreviated",context:"formatting"})||s.quarter(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,o){return o>=1&&o<=4}},{key:"set",value:function(i,o,s){return i.setUTCMonth((s-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function lh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lh=function(n){return typeof n}:lh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},lh(t)}function Xte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qte(t,e,n){return e&&pP(t.prototype,e),n&&pP(t,n),t}function Zte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ry(t,e)}function Ry(t,e){return Ry=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Ry(t,e)}function Kte(t){var e=Jte();return function(){var r=Hd(t),i;if(e){var o=Hd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Qte(this,i)}}function Qte(t,e){return e&&(lh(e)==="object"||typeof e=="function")?e:Ly(t)}function Ly(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hd(t){return Hd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Hd(t)}function gP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ene=function(t){Zte(n,t);var e=Kte(n);function n(){var r;Xte(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),gP(Ly(r),"priority",120),gP(Ly(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return qte(n,[{key:"parse",value:function(i,o,s){switch(o){case"q":case"qq":return Ht(o.length,i);case"qo":return s.ordinalNumber(i,{unit:"quarter"});case"qqq":return s.quarter(i,{width:"abbreviated",context:"standalone"})||s.quarter(i,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(i,{width:"wide",context:"standalone"})||s.quarter(i,{width:"abbreviated",context:"standalone"})||s.quarter(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,o){return o>=1&&o<=4}},{key:"set",value:function(i,o,s){return i.setUTCMonth((s-1)*3,1),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function ch(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ch=function(n){return typeof n}:ch=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ch(t)}function tne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nne(t,e,n){return e&&mP(t.prototype,e),n&&mP(t,n),t}function rne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&My(t,e)}function My(t,e){return My=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},My(t,e)}function ine(t){var e=sne();return function(){var r=Yd(t),i;if(e){var o=Yd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return one(this,i)}}function one(t,e){return e&&(ch(e)==="object"||typeof e=="function")?e:Oy(t)}function Oy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yd(t){return Yd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Yd(t)}function vP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ane=function(t){rne(n,t);var e=ine(n);function n(){var r;tne(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),vP(Oy(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),vP(Oy(r),"priority",110),r}return nne(n,[{key:"parse",value:function(i,o,s){var a=function(l){return l-1};switch(o){case"M":return Zt(Bt(qt.month,i),a);case"MM":return Zt(Ht(2,i),a);case"Mo":return Zt(s.ordinalNumber(i,{unit:"month"}),a);case"MMM":return s.month(i,{width:"abbreviated",context:"formatting"})||s.month(i,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(i,{width:"wide",context:"formatting"})||s.month(i,{width:"abbreviated",context:"formatting"})||s.month(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,o){return o>=0&&o<=11}},{key:"set",value:function(i,o,s){return i.setUTCMonth(s,1),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function fh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fh=function(n){return typeof n}:fh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fh(t)}function une(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lne(t,e,n){return e&&yP(t.prototype,e),n&&yP(t,n),t}function cne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ky(t,e)}function ky(t,e){return ky=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},ky(t,e)}function fne(t){var e=dne();return function(){var r=Xd(t),i;if(e){var o=Xd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return hne(this,i)}}function hne(t,e){return e&&(fh(e)==="object"||typeof e=="function")?e:Iy(t)}function Iy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xd(t){return Xd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Xd(t)}function _P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pne=function(t){cne(n,t);var e=fne(n);function n(){var r;une(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),_P(Iy(r),"priority",110),_P(Iy(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return lne(n,[{key:"parse",value:function(i,o,s){var a=function(l){return l-1};switch(o){case"L":return Zt(Bt(qt.month,i),a);case"LL":return Zt(Ht(2,i),a);case"Lo":return Zt(s.ordinalNumber(i,{unit:"month"}),a);case"LLL":return s.month(i,{width:"abbreviated",context:"standalone"})||s.month(i,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(i,{width:"wide",context:"standalone"})||s.month(i,{width:"abbreviated",context:"standalone"})||s.month(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,o){return o>=0&&o<=11}},{key:"set",value:function(i,o,s){return i.setUTCMonth(s,1),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function gne(t,e,n){bt(2,arguments);var r=St(t),i=Un(e),o=f3(r,n)-i;return r.setUTCDate(r.getUTCDate()-o*7),r}function hh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hh=function(n){return typeof n}:hh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hh(t)}function mne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vne(t,e,n){return e&&bP(t.prototype,e),n&&bP(t,n),t}function yne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ny(t,e)}function Ny(t,e){return Ny=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Ny(t,e)}function _ne(t){var e=wne();return function(){var r=qd(t),i;if(e){var o=qd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return bne(this,i)}}function bne(t,e){return e&&(hh(e)==="object"||typeof e=="function")?e:Dy(t)}function Dy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qd(t){return qd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},qd(t)}function wP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ene=function(t){yne(n,t);var e=_ne(n);function n(){var r;mne(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),wP(Dy(r),"priority",100),wP(Dy(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return vne(n,[{key:"parse",value:function(i,o,s){switch(o){case"w":return Bt(qt.week,i);case"wo":return s.ordinalNumber(i,{unit:"week"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=1&&o<=53}},{key:"set",value:function(i,o,s,a){return bs(gne(i,s,a),a)}}]),n}(ht);function Sne(t,e){bt(2,arguments);var n=St(t),r=Un(e),i=c3(n)-r;return n.setUTCDate(n.getUTCDate()-i*7),n}function dh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dh=function(n){return typeof n}:dh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},dh(t)}function xne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tne(t,e,n){return e&&EP(t.prototype,e),n&&EP(t,n),t}function Pne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fy(t,e)}function Fy(t,e){return Fy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Fy(t,e)}function Ane(t){var e=Rne();return function(){var r=Zd(t),i;if(e){var o=Zd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Cne(this,i)}}function Cne(t,e){return e&&(dh(e)==="object"||typeof e=="function")?e:Uy(t)}function Uy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Zd(t){return Zd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Zd(t)}function SP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Lne=function(t){Pne(n,t);var e=Ane(n);function n(){var r;xne(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),SP(Uy(r),"priority",100),SP(Uy(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return Tne(n,[{key:"parse",value:function(i,o,s){switch(o){case"I":return Bt(qt.week,i);case"Io":return s.ordinalNumber(i,{unit:"week"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=1&&o<=53}},{key:"set",value:function(i,o,s){return eu(Sne(i,s))}}]),n}(ht);function ph(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ph=function(n){return typeof n}:ph=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ph(t)}function Mne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function One(t,e,n){return e&&xP(t.prototype,e),n&&xP(t,n),t}function kne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zy(t,e)}function zy(t,e){return zy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},zy(t,e)}function Ine(t){var e=Dne();return function(){var r=Kd(t),i;if(e){var o=Kd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Nne(this,i)}}function Nne(t,e){return e&&(ph(e)==="object"||typeof e=="function")?e:gh(t)}function gh(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Kd(t){return Kd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Kd(t)}function S0(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Fne=[31,28,31,30,31,30,31,31,30,31,30,31],Une=[31,29,31,30,31,30,31,31,30,31,30,31],zne=function(t){kne(n,t);var e=Ine(n);function n(){var r;Mne(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),S0(gh(r),"priority",90),S0(gh(r),"subPriority",1),S0(gh(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return One(n,[{key:"parse",value:function(i,o,s){switch(o){case"d":return Bt(qt.date,i);case"do":return s.ordinalNumber(i,{unit:"date"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){var s=i.getUTCFullYear(),a=w3(s),u=i.getUTCMonth();return a?o>=1&&o<=Une[u]:o>=1&&o<=Fne[u]}},{key:"set",value:function(i,o,s){return i.setUTCDate(s),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function mh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mh=function(n){return typeof n}:mh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},mh(t)}function Bne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vne(t,e,n){return e&&TP(t.prototype,e),n&&TP(t,n),t}function $ne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&By(t,e)}function By(t,e){return By=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},By(t,e)}function jne(t){var e=Wne();return function(){var r=Qd(t),i;if(e){var o=Qd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Gne(this,i)}}function Gne(t,e){return e&&(mh(e)==="object"||typeof e=="function")?e:vh(t)}function vh(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qd(t){return Qd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Qd(t)}function x0(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Hne=function(t){$ne(n,t);var e=jne(n);function n(){var r;Bne(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),x0(vh(r),"priority",90),x0(vh(r),"subpriority",1),x0(vh(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return Vne(n,[{key:"parse",value:function(i,o,s){switch(o){case"D":case"DD":return Bt(qt.dayOfYear,i);case"Do":return s.ordinalNumber(i,{unit:"date"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){var s=i.getUTCFullYear(),a=w3(s);return a?o>=1&&o<=366:o>=1&&o<=365}},{key:"set",value:function(i,o,s){return i.setUTCMonth(0,s),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function Ob(t,e,n){var r,i,o,s,a,u,l,c;bt(2,arguments);var f=du(),h=Un((r=(i=(o=(s=n==null?void 0:n.weekStartsOn)!==null&&s!==void 0?s:n==null||(a=n.locale)===null||a===void 0||(u=a.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&o!==void 0?o:f.weekStartsOn)!==null&&i!==void 0?i:(l=f.locale)===null||l===void 0||(c=l.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&r!==void 0?r:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=St(t),g=Un(e),m=d.getUTCDay(),x=g%7,_=(x+7)%7,y=(_<h?7:0)+g-m;return d.setUTCDate(d.getUTCDate()+y),d}function yh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?yh=function(n){return typeof n}:yh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},yh(t)}function Yne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xne(t,e,n){return e&&PP(t.prototype,e),n&&PP(t,n),t}function qne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vy(t,e)}function Vy(t,e){return Vy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Vy(t,e)}function Zne(t){var e=Qne();return function(){var r=Jd(t),i;if(e){var o=Jd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Kne(this,i)}}function Kne(t,e){return e&&(yh(e)==="object"||typeof e=="function")?e:$y(t)}function $y(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jd(t){return Jd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Jd(t)}function AP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Jne=function(t){qne(n,t);var e=Zne(n);function n(){var r;Yne(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),AP($y(r),"priority",90),AP($y(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return Xne(n,[{key:"parse",value:function(i,o,s){switch(o){case"E":case"EE":case"EEE":return s.day(i,{width:"abbreviated",context:"formatting"})||s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(i,{width:"wide",context:"formatting"})||s.day(i,{width:"abbreviated",context:"formatting"})||s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,o){return o>=0&&o<=6}},{key:"set",value:function(i,o,s,a){return i=Ob(i,s,a),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function _h(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_h=function(n){return typeof n}:_h=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_h(t)}function ere(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tre(t,e,n){return e&&CP(t.prototype,e),n&&CP(t,n),t}function nre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jy(t,e)}function jy(t,e){return jy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},jy(t,e)}function rre(t){var e=ore();return function(){var r=ep(t),i;if(e){var o=ep(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return ire(this,i)}}function ire(t,e){return e&&(_h(e)==="object"||typeof e=="function")?e:Gy(t)}function Gy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ore(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ep(t){return ep=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ep(t)}function RP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var sre=function(t){nre(n,t);var e=rre(n);function n(){var r;ere(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),RP(Gy(r),"priority",90),RP(Gy(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return tre(n,[{key:"parse",value:function(i,o,s,a){var u=function(c){var f=Math.floor((c-1)/7)*7;return(c+a.weekStartsOn+6)%7+f};switch(o){case"e":case"ee":return Zt(Ht(o.length,i),u);case"eo":return Zt(s.ordinalNumber(i,{unit:"day"}),u);case"eee":return s.day(i,{width:"abbreviated",context:"formatting"})||s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})||s.day(i,{width:"abbreviated",context:"formatting"})||s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(i,o){return o>=0&&o<=6}},{key:"set",value:function(i,o,s,a){return i=Ob(i,s,a),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function bh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bh=function(n){return typeof n}:bh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bh(t)}function are(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ure(t,e,n){return e&&LP(t.prototype,e),n&&LP(t,n),t}function lre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wy(t,e)}function Wy(t,e){return Wy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Wy(t,e)}function cre(t){var e=hre();return function(){var r=tp(t),i;if(e){var o=tp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return fre(this,i)}}function fre(t,e){return e&&(bh(e)==="object"||typeof e=="function")?e:Hy(t)}function Hy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tp(t){return tp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},tp(t)}function MP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var dre=function(t){lre(n,t);var e=cre(n);function n(){var r;are(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),MP(Hy(r),"priority",90),MP(Hy(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return ure(n,[{key:"parse",value:function(i,o,s,a){var u=function(c){var f=Math.floor((c-1)/7)*7;return(c+a.weekStartsOn+6)%7+f};switch(o){case"c":case"cc":return Zt(Ht(o.length,i),u);case"co":return Zt(s.ordinalNumber(i,{unit:"day"}),u);case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"})||s.day(i,{width:"short",context:"standalone"})||s.day(i,{width:"narrow",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"})||s.day(i,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})||s.day(i,{width:"abbreviated",context:"standalone"})||s.day(i,{width:"short",context:"standalone"})||s.day(i,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(i,o){return o>=0&&o<=6}},{key:"set",value:function(i,o,s,a){return i=Ob(i,s,a),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function pre(t,e){bt(2,arguments);var n=Un(e);n%7===0&&(n=n-7);var r=1,i=St(t),o=i.getUTCDay(),s=n%7,a=(s+7)%7,u=(a<r?7:0)+n-o;return i.setUTCDate(i.getUTCDate()+u),i}function wh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wh=function(n){return typeof n}:wh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},wh(t)}function gre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mre(t,e,n){return e&&OP(t.prototype,e),n&&OP(t,n),t}function vre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yy(t,e)}function Yy(t,e){return Yy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Yy(t,e)}function yre(t){var e=bre();return function(){var r=np(t),i;if(e){var o=np(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return _re(this,i)}}function _re(t,e){return e&&(wh(e)==="object"||typeof e=="function")?e:Xy(t)}function Xy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function np(t){return np=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},np(t)}function kP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wre=function(t){vre(n,t);var e=yre(n);function n(){var r;gre(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),kP(Xy(r),"priority",90),kP(Xy(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return mre(n,[{key:"parse",value:function(i,o,s){var a=function(l){return l===0?7:l};switch(o){case"i":case"ii":return Ht(o.length,i);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return Zt(s.day(i,{width:"abbreviated",context:"formatting"})||s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"}),a);case"iiiii":return Zt(s.day(i,{width:"narrow",context:"formatting"}),a);case"iiiiii":return Zt(s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"}),a);case"iiii":default:return Zt(s.day(i,{width:"wide",context:"formatting"})||s.day(i,{width:"abbreviated",context:"formatting"})||s.day(i,{width:"short",context:"formatting"})||s.day(i,{width:"narrow",context:"formatting"}),a)}}},{key:"validate",value:function(i,o){return o>=1&&o<=7}},{key:"set",value:function(i,o,s){return i=pre(i,s),i.setUTCHours(0,0,0,0),i}}]),n}(ht);function Eh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Eh=function(n){return typeof n}:Eh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Eh(t)}function Ere(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sre(t,e,n){return e&&IP(t.prototype,e),n&&IP(t,n),t}function xre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qy(t,e)}function qy(t,e){return qy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},qy(t,e)}function Tre(t){var e=Are();return function(){var r=rp(t),i;if(e){var o=rp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Pre(this,i)}}function Pre(t,e){return e&&(Eh(e)==="object"||typeof e=="function")?e:Zy(t)}function Zy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Are(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rp(t){return rp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},rp(t)}function NP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Cre=function(t){xre(n,t);var e=Tre(n);function n(){var r;Ere(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),NP(Zy(r),"priority",80),NP(Zy(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return Sre(n,[{key:"parse",value:function(i,o,s){switch(o){case"a":case"aa":case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"})||s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})||s.dayPeriod(i,{width:"abbreviated",context:"formatting"})||s.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,o,s){return i.setUTCHours(Mb(s),0,0,0),i}}]),n}(ht);function Sh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Sh=function(n){return typeof n}:Sh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Sh(t)}function Rre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lre(t,e,n){return e&&DP(t.prototype,e),n&&DP(t,n),t}function Mre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ky(t,e)}function Ky(t,e){return Ky=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Ky(t,e)}function Ore(t){var e=Ire();return function(){var r=ip(t),i;if(e){var o=ip(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return kre(this,i)}}function kre(t,e){return e&&(Sh(e)==="object"||typeof e=="function")?e:Qy(t)}function Qy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ire(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ip(t){return ip=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ip(t)}function FP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Nre=function(t){Mre(n,t);var e=Ore(n);function n(){var r;Rre(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),FP(Qy(r),"priority",80),FP(Qy(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return Lre(n,[{key:"parse",value:function(i,o,s){switch(o){case"b":case"bb":case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"})||s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})||s.dayPeriod(i,{width:"abbreviated",context:"formatting"})||s.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,o,s){return i.setUTCHours(Mb(s),0,0,0),i}}]),n}(ht);function xh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xh=function(n){return typeof n}:xh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xh(t)}function Dre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fre(t,e,n){return e&&UP(t.prototype,e),n&&UP(t,n),t}function Ure(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jy(t,e)}function Jy(t,e){return Jy=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Jy(t,e)}function zre(t){var e=Vre();return function(){var r=op(t),i;if(e){var o=op(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Bre(this,i)}}function Bre(t,e){return e&&(xh(e)==="object"||typeof e=="function")?e:e_(t)}function e_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function op(t){return op=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},op(t)}function zP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $re=function(t){Ure(n,t);var e=zre(n);function n(){var r;Dre(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),zP(e_(r),"priority",80),zP(e_(r),"incompatibleTokens",["a","b","t","T"]),r}return Fre(n,[{key:"parse",value:function(i,o,s){switch(o){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"})||s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})||s.dayPeriod(i,{width:"abbreviated",context:"formatting"})||s.dayPeriod(i,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(i,o,s){return i.setUTCHours(Mb(s),0,0,0),i}}]),n}(ht);function Th(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Th=function(n){return typeof n}:Th=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Th(t)}function jre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gre(t,e,n){return e&&BP(t.prototype,e),n&&BP(t,n),t}function Wre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&t_(t,e)}function t_(t,e){return t_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},t_(t,e)}function Hre(t){var e=Xre();return function(){var r=sp(t),i;if(e){var o=sp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Yre(this,i)}}function Yre(t,e){return e&&(Th(e)==="object"||typeof e=="function")?e:n_(t)}function n_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xre(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sp(t){return sp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},sp(t)}function VP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qre=function(t){Wre(n,t);var e=Hre(n);function n(){var r;jre(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),VP(n_(r),"priority",70),VP(n_(r),"incompatibleTokens",["H","K","k","t","T"]),r}return Gre(n,[{key:"parse",value:function(i,o,s){switch(o){case"h":return Bt(qt.hour12h,i);case"ho":return s.ordinalNumber(i,{unit:"hour"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=1&&o<=12}},{key:"set",value:function(i,o,s){var a=i.getUTCHours()>=12;return a&&s<12?i.setUTCHours(s+12,0,0,0):!a&&s===12?i.setUTCHours(0,0,0,0):i.setUTCHours(s,0,0,0),i}}]),n}(ht);function Ph(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ph=function(n){return typeof n}:Ph=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ph(t)}function Zre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kre(t,e,n){return e&&$P(t.prototype,e),n&&$P(t,n),t}function Qre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r_(t,e)}function r_(t,e){return r_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},r_(t,e)}function Jre(t){var e=tie();return function(){var r=ap(t),i;if(e){var o=ap(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return eie(this,i)}}function eie(t,e){return e&&(Ph(e)==="object"||typeof e=="function")?e:i_(t)}function i_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ap(t){return ap=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ap(t)}function jP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var nie=function(t){Qre(n,t);var e=Jre(n);function n(){var r;Zre(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),jP(i_(r),"priority",70),jP(i_(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return Kre(n,[{key:"parse",value:function(i,o,s){switch(o){case"H":return Bt(qt.hour23h,i);case"Ho":return s.ordinalNumber(i,{unit:"hour"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=0&&o<=23}},{key:"set",value:function(i,o,s){return i.setUTCHours(s,0,0,0),i}}]),n}(ht);function Ah(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ah=function(n){return typeof n}:Ah=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ah(t)}function rie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function iie(t,e,n){return e&&GP(t.prototype,e),n&&GP(t,n),t}function oie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o_(t,e)}function o_(t,e){return o_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},o_(t,e)}function sie(t){var e=uie();return function(){var r=up(t),i;if(e){var o=up(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return aie(this,i)}}function aie(t,e){return e&&(Ah(e)==="object"||typeof e=="function")?e:s_(t)}function s_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function up(t){return up=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},up(t)}function WP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var lie=function(t){oie(n,t);var e=sie(n);function n(){var r;rie(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),WP(s_(r),"priority",70),WP(s_(r),"incompatibleTokens",["h","H","k","t","T"]),r}return iie(n,[{key:"parse",value:function(i,o,s){switch(o){case"K":return Bt(qt.hour11h,i);case"Ko":return s.ordinalNumber(i,{unit:"hour"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=0&&o<=11}},{key:"set",value:function(i,o,s){var a=i.getUTCHours()>=12;return a&&s<12?i.setUTCHours(s+12,0,0,0):i.setUTCHours(s,0,0,0),i}}]),n}(ht);function Ch(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ch=function(n){return typeof n}:Ch=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ch(t)}function cie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fie(t,e,n){return e&&HP(t.prototype,e),n&&HP(t,n),t}function hie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a_(t,e)}function a_(t,e){return a_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},a_(t,e)}function die(t){var e=gie();return function(){var r=lp(t),i;if(e){var o=lp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return pie(this,i)}}function pie(t,e){return e&&(Ch(e)==="object"||typeof e=="function")?e:u_(t)}function u_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lp(t){return lp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},lp(t)}function YP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mie=function(t){hie(n,t);var e=die(n);function n(){var r;cie(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),YP(u_(r),"priority",70),YP(u_(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return fie(n,[{key:"parse",value:function(i,o,s){switch(o){case"k":return Bt(qt.hour24h,i);case"ko":return s.ordinalNumber(i,{unit:"hour"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=1&&o<=24}},{key:"set",value:function(i,o,s){var a=s<=24?s%24:s;return i.setUTCHours(a,0,0,0),i}}]),n}(ht);function Rh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rh=function(n){return typeof n}:Rh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Rh(t)}function vie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yie(t,e,n){return e&&XP(t.prototype,e),n&&XP(t,n),t}function _ie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l_(t,e)}function l_(t,e){return l_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},l_(t,e)}function bie(t){var e=Eie();return function(){var r=cp(t),i;if(e){var o=cp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return wie(this,i)}}function wie(t,e){return e&&(Rh(e)==="object"||typeof e=="function")?e:c_(t)}function c_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Eie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function cp(t){return cp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},cp(t)}function qP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Sie=function(t){_ie(n,t);var e=bie(n);function n(){var r;vie(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),qP(c_(r),"priority",60),qP(c_(r),"incompatibleTokens",["t","T"]),r}return yie(n,[{key:"parse",value:function(i,o,s){switch(o){case"m":return Bt(qt.minute,i);case"mo":return s.ordinalNumber(i,{unit:"minute"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=0&&o<=59}},{key:"set",value:function(i,o,s){return i.setUTCMinutes(s,0,0),i}}]),n}(ht);function Lh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Lh=function(n){return typeof n}:Lh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Lh(t)}function xie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tie(t,e,n){return e&&ZP(t.prototype,e),n&&ZP(t,n),t}function Pie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f_(t,e)}function f_(t,e){return f_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},f_(t,e)}function Aie(t){var e=Rie();return function(){var r=fp(t),i;if(e){var o=fp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Cie(this,i)}}function Cie(t,e){return e&&(Lh(e)==="object"||typeof e=="function")?e:h_(t)}function h_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fp(t){return fp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},fp(t)}function KP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Lie=function(t){Pie(n,t);var e=Aie(n);function n(){var r;xie(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),KP(h_(r),"priority",50),KP(h_(r),"incompatibleTokens",["t","T"]),r}return Tie(n,[{key:"parse",value:function(i,o,s){switch(o){case"s":return Bt(qt.second,i);case"so":return s.ordinalNumber(i,{unit:"second"});default:return Ht(o.length,i)}}},{key:"validate",value:function(i,o){return o>=0&&o<=59}},{key:"set",value:function(i,o,s){return i.setUTCSeconds(s,0),i}}]),n}(ht);function Mh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mh=function(n){return typeof n}:Mh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Mh(t)}function Mie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oie(t,e,n){return e&&QP(t.prototype,e),n&&QP(t,n),t}function kie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d_(t,e)}function d_(t,e){return d_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},d_(t,e)}function Iie(t){var e=Die();return function(){var r=hp(t),i;if(e){var o=hp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Nie(this,i)}}function Nie(t,e){return e&&(Mh(e)==="object"||typeof e=="function")?e:p_(t)}function p_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Die(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hp(t){return hp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},hp(t)}function JP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Fie=function(t){kie(n,t);var e=Iie(n);function n(){var r;Mie(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),JP(p_(r),"priority",30),JP(p_(r),"incompatibleTokens",["t","T"]),r}return Oie(n,[{key:"parse",value:function(i,o){var s=function(u){return Math.floor(u*Math.pow(10,-o.length+3))};return Zt(Ht(o.length,i),s)}},{key:"set",value:function(i,o,s){return i.setUTCMilliseconds(s),i}}]),n}(ht);function Oh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Oh=function(n){return typeof n}:Oh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Oh(t)}function Uie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zie(t,e,n){return e&&e2(t.prototype,e),n&&e2(t,n),t}function Bie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g_(t,e)}function g_(t,e){return g_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},g_(t,e)}function Vie(t){var e=jie();return function(){var r=dp(t),i;if(e){var o=dp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return $ie(this,i)}}function $ie(t,e){return e&&(Oh(e)==="object"||typeof e=="function")?e:m_(t)}function m_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dp(t){return dp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},dp(t)}function t2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Gie=function(t){Bie(n,t);var e=Vie(n);function n(){var r;Uie(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),t2(m_(r),"priority",10),t2(m_(r),"incompatibleTokens",["t","T","x"]),r}return zie(n,[{key:"parse",value:function(i,o){switch(o){case"X":return li(ui.basicOptionalMinutes,i);case"XX":return li(ui.basic,i);case"XXXX":return li(ui.basicOptionalSeconds,i);case"XXXXX":return li(ui.extendedOptionalSeconds,i);case"XXX":default:return li(ui.extended,i)}}},{key:"set",value:function(i,o,s){return o.timestampIsSet?i:new Date(i.getTime()-s)}}]),n}(ht);function kh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kh=function(n){return typeof n}:kh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},kh(t)}function Wie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hie(t,e,n){return e&&n2(t.prototype,e),n&&n2(t,n),t}function Yie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v_(t,e)}function v_(t,e){return v_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},v_(t,e)}function Xie(t){var e=Zie();return function(){var r=pp(t),i;if(e){var o=pp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return qie(this,i)}}function qie(t,e){return e&&(kh(e)==="object"||typeof e=="function")?e:y_(t)}function y_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pp(t){return pp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},pp(t)}function r2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Kie=function(t){Yie(n,t);var e=Xie(n);function n(){var r;Wie(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),r2(y_(r),"priority",10),r2(y_(r),"incompatibleTokens",["t","T","X"]),r}return Hie(n,[{key:"parse",value:function(i,o){switch(o){case"x":return li(ui.basicOptionalMinutes,i);case"xx":return li(ui.basic,i);case"xxxx":return li(ui.basicOptionalSeconds,i);case"xxxxx":return li(ui.extendedOptionalSeconds,i);case"xxx":default:return li(ui.extended,i)}}},{key:"set",value:function(i,o,s){return o.timestampIsSet?i:new Date(i.getTime()-s)}}]),n}(ht);function Ih(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ih=function(n){return typeof n}:Ih=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ih(t)}function Qie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jie(t,e,n){return e&&i2(t.prototype,e),n&&i2(t,n),t}function eoe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&__(t,e)}function __(t,e){return __=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},__(t,e)}function toe(t){var e=roe();return function(){var r=gp(t),i;if(e){var o=gp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return noe(this,i)}}function noe(t,e){return e&&(Ih(e)==="object"||typeof e=="function")?e:b_(t)}function b_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function roe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gp(t){return gp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},gp(t)}function o2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ioe=function(t){eoe(n,t);var e=toe(n);function n(){var r;Qie(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),o2(b_(r),"priority",40),o2(b_(r),"incompatibleTokens","*"),r}return Jie(n,[{key:"parse",value:function(i){return _3(i)}},{key:"set",value:function(i,o,s){return[new Date(s*1e3),{timestampIsSet:!0}]}}]),n}(ht);function Nh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Nh=function(n){return typeof n}:Nh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Nh(t)}function ooe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function soe(t,e,n){return e&&s2(t.prototype,e),n&&s2(t,n),t}function aoe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w_(t,e)}function w_(t,e){return w_=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},w_(t,e)}function uoe(t){var e=coe();return function(){var r=mp(t),i;if(e){var o=mp(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return loe(this,i)}}function loe(t,e){return e&&(Nh(e)==="object"||typeof e=="function")?e:E_(t)}function E_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function coe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mp(t){return mp=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},mp(t)}function a2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var foe=function(t){aoe(n,t);var e=uoe(n);function n(){var r;ooe(this,n);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o)),a2(E_(r),"priority",20),a2(E_(r),"incompatibleTokens","*"),r}return soe(n,[{key:"parse",value:function(i){return _3(i)}},{key:"set",value:function(i,o,s){return[new Date(s),{timestampIsSet:!0}]}}]),n}(ht),hoe={G:new hte,y:new _te,Y:new Pte,R:new kte,u:new Bte,Q:new Yte,q:new ene,M:new ane,L:new pne,w:new Ene,I:new Lne,d:new zne,D:new Hne,E:new Jne,e:new sre,c:new dre,i:new wre,a:new Cre,b:new Nre,B:new $re,h:new qre,H:new nie,K:new lie,k:new mie,m:new Sie,s:new Lie,S:new Fie,X:new Gie,x:new Kie,t:new ioe,T:new foe};function Dh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dh=function(n){return typeof n}:Dh=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Dh(t)}function u2(t,e){var n;if(typeof Symbol>"u"||t[Symbol.iterator]==null){if(Array.isArray(t)||(n=doe(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,a;return{s:function(){n=t[Symbol.iterator]()},n:function(){var l=n.next();return o=l.done,l},e:function(l){s=!0,a=l},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(s)throw a}}}}function doe(t,e){if(!!t){if(typeof t=="string")return l2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l2(t,e)}}function l2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var poe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,goe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,moe=/^'([^]*?)'?$/,voe=/''/g,yoe=/\S/,_oe=/[a-zA-Z]/;function boe(t,e,n,r){var i,o,s,a,u,l,c,f,h,d,g,m,x,_,y,b,T,R;bt(3,arguments);var C=String(t),D=String(e),F=du(),W=(i=(o=r==null?void 0:r.locale)!==null&&o!==void 0?o:F.locale)!==null&&i!==void 0?i:g3;if(!W.match)throw new RangeError("locale must contain match property");var j=Un((s=(a=(u=(l=r==null?void 0:r.firstWeekContainsDate)!==null&&l!==void 0?l:r==null||(c=r.locale)===null||c===void 0||(f=c.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&u!==void 0?u:F.firstWeekContainsDate)!==null&&a!==void 0?a:(h=F.locale)===null||h===void 0||(d=h.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(j>=1&&j<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var H=Un((g=(m=(x=(_=r==null?void 0:r.weekStartsOn)!==null&&_!==void 0?_:r==null||(y=r.locale)===null||y===void 0||(b=y.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&x!==void 0?x:F.weekStartsOn)!==null&&m!==void 0?m:(T=F.locale)===null||T===void 0||(R=T.options)===null||R===void 0?void 0:R.weekStartsOn)!==null&&g!==void 0?g:0);if(!(H>=0&&H<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(D==="")return C===""?St(n):new Date(NaN);var pe={firstWeekContainsDate:j,weekStartsOn:H,locale:W},ue=[new rte],se=D.match(goe).map(function(be){var J=be[0];if(J in dy){var Pe=dy[J];return Pe(be,W.formatLong)}return be}).join("").match(poe),Ce=[],De=u2(se),He;try{var ae=function(){var J=He.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&p3(J)&&Fd(J,D,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&d3(J)&&Fd(J,D,t);var Pe=J[0],rt=hoe[Pe];if(rt){var ze=rt.incompatibleTokens;if(Array.isArray(ze)){var Ke=Ce.find(function(Kt){return ze.includes(Kt.token)||Kt.token===Pe});if(Ke)throw new RangeError("The format string mustn't contain `".concat(Ke.fullToken,"` and `").concat(J,"` at the same time"))}else if(rt.incompatibleTokens==="*"&&Ce.length>0)throw new RangeError("The format string mustn't contain `".concat(J,"` and any other token at the same time"));Ce.push({token:Pe,fullToken:J});var gt=rt.run(C,J,W.match,pe);if(!gt)return{v:new Date(NaN)};ue.push(gt.setter),C=gt.rest}else{if(Pe.match(_oe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Pe+"`");if(J==="''"?J="'":Pe==="'"&&(J=woe(J)),C.indexOf(J)===0)C=C.slice(J.length);else return{v:new Date(NaN)}}};for(De.s();!(He=De.n()).done;){var ve=ae();if(Dh(ve)==="object")return ve.v}}catch(be){De.e(be)}finally{De.f()}if(C.length>0&&yoe.test(C))return new Date(NaN);var G=ue.map(function(be){return be.priority}).sort(function(be,J){return J-be}).filter(function(be,J,Pe){return Pe.indexOf(be)===J}).map(function(be){return ue.filter(function(J){return J.priority===be}).sort(function(J,Pe){return Pe.subPriority-J.subPriority})}).map(function(be){return be[0]}),X=St(n);if(isNaN(X.getTime()))return new Date(NaN);var O=u3(X,s3(X)),q={},Q=u2(G),de;try{for(Q.s();!(de=Q.n()).done;){var le=de.value;if(!le.validate(O,pe))return new Date(NaN);var _e=le.set(O,q,pe);Array.isArray(_e)?(O=_e[0],Qee(q,_e[1])):O=_e}}catch(be){Q.e(be)}finally{Q.f()}return O}function woe(t){return t.match(moe)[1].replace(voe,"'")}function nle(t,e,n){return bt(2,arguments),a3(boe(t,e,new Date,n))}const Eoe=`#define SHADER_NAME arc-layer-vertex-shader

attribute vec3 positions;
attribute vec4 instanceSourceColors;
attribute vec4 instanceTargetColors;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceTargetPositions64Low;
attribute vec3 instancePickingColors;
attribute float instanceWidths;
attribute float instanceHeights;
attribute float instanceTilts;

uniform bool greatCircle;
uniform bool useShortestPath;
uniform float numSegments;
uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;
varying float isValid;

float paraboloid(float distance, float sourceZ, float targetZ, float ratio) {
  // d: distance on the xy plane
  // r: ratio of the current point
  // p: ratio of the peak of the arc
  // h: height multiplier
  // z = f(r) = sqrt(r * (p * 2 - r)) * d * h
  // f(0) = 0
  // f(1) = dz

  float deltaZ = targetZ - sourceZ;
  float dh = distance * instanceHeights;
  if (dh == 0.0) {
    return sourceZ + deltaZ * ratio;
  }
  float unitZ = deltaZ / dh;
  float p2 = unitZ * unitZ + 1.0;

  // sqrt does not deal with negative values, manually flip source and target if delta.z < 0
  float dir = step(deltaZ, 0.0);
  float z0 = mix(sourceZ, targetZ, dir);
  float r = mix(ratio, 1.0 - ratio, dir);
  return sqrt(r * (p2 - r)) * dh + z0;
}

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));
}

vec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {
  float distance = length(source.xy - target.xy);
  float z = paraboloid(distance, source.z, target.z, segmentRatio);

  float tiltAngle = radians(instanceTilts);
  vec2 tiltDirection = normalize(target.xy - source.xy);
  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);

  return vec3(
    mix(source.xy, target.xy, segmentRatio) + tilt,
    z * cos(tiltAngle)
  );
}

/* Great circle interpolation
 * http://www.movable-type.co.uk/scripts/latlong.html
 */
float getAngularDist (vec2 source, vec2 target) {
  vec2 sourceRadians = radians(source);
  vec2 targetRadians = radians(target);
  vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);
  vec2 shd_sq = sin_half_delta * sin_half_delta;

  float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;
  return 2.0 * asin(sqrt(a));
}

vec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {
  vec2 lngLat;

  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  if(abs(angularDist - PI) < 0.001) {
    lngLat = (1.0 - t) * source.xy + t * target.xy;
  } else {
    float a = sin((1.0 - t) * angularDist);
    float b = sin(t * angularDist);
    vec3 p = source3D.yxz * a + target3D.yxz * b;
    lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));
  }

  float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);

  return vec3(lngLat, z);
}

/* END GREAT CIRCLE */

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  float segmentIndex = positions.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));
  float nextSegmentRatio = getSegmentRatio(min(numSegments - 1.0, segmentIndex + 1.0));

  // if it's the first point, use next - current as direction
  // otherwise use current - prev
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  isValid = 1.0;

  uv = vec2(segmentRatio, positions.y);
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  vec4 curr;
  vec4 next;
  vec3 source;
  vec3 target;

  if ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));
    target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));
    float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);

    vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);
    vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);
    vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);

    if (abs(currPos.x - prevPos.x) > 180.0) {
      indexDir = -1.0;
      isValid = 0.0;
    } else if (abs(currPos.x - nextPos.x) > 180.0) {
      indexDir = 1.0;
      isValid = 0.0;
    }
    nextPos = indexDir < 0.0 ? prevPos : nextPos;
    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;

    if (isValid == 0.0) {
      // split at the 180th meridian
      nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;
      float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);
      currPos = mix(currPos, nextPos, t);
      segmentRatio = mix(segmentRatio, nextSegmentRatio, t);
    }

    vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);
    vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);
  
    curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);
    next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));
  
  } else {
    vec3 source_world = instanceSourcePositions;
    vec3 target_world = instanceTargetPositions;
    if (useShortestPath) {
      source_world.x = mod(source_world.x + 180., 360.0) - 180.;
      target_world.x = mod(target_world.x + 180., 360.0) - 180.;

      float deltaLng = target_world.x - source_world.x;
      if (deltaLng > 180.) target_world.x -= 360.;
      if (deltaLng < -180.) source_world.x -= 360.;
    }
    source = project_position(source_world, instanceSourcePositions64Low);
    target = project_position(target_world, instanceTargetPositions64Low);

    // common x at longitude=-180
    float antiMeridianX = 0.0;

    if (useShortestPath) {
      if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
        antiMeridianX = -(project_uCoordinateOrigin.x + 180.) / 360. * TILE_SIZE;
      }
      float thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);

      if (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {
        isValid = 0.0;
        indexDir = sign(segmentRatio - thresholdRatio);
        segmentRatio = thresholdRatio;
      }
    }

    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;
    vec3 currPos = interpolateFlat(source, target, segmentRatio);
    vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);

    if (useShortestPath) {
      if (nextPos.x < antiMeridianX) {
        currPos.x += TILE_SIZE;
        nextPos.x += TILE_SIZE;
      }
    }

    curr = project_common_position_to_clipspace(vec4(currPos, 1.0));
    next = project_common_position_to_clipspace(vec4(nextPos, 1.0));
    geometry.position = vec4(currPos, 1.0);
  }

  // Multiply out width and clamp to limits
  // mercator pixels are interpreted as screen pixels
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  vec3 offset = vec3(
    getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);
  vColor = vec4(color.rgb, color.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Soe=`#define SHADER_NAME arc-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;
varying float isValid;

void main(void) {
  if (isValid == 0.0) {
    discard;
  }

  gl_FragColor = vColor;
  geometry.uv = uv;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,vp=[0,0,0,255],xoe={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getSourceColor:{type:"accessor",value:vp},getTargetColor:{type:"accessor",value:vp},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class E3 extends Jn{constructor(...e){super(...e),w(this,"state",void 0)}getShaders(){return super.getShaders({vs:Eoe,fs:Soe,modules:[_i,bi]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getSourceColor",defaultValue:vp},instanceTargetColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getTargetColor",defaultValue:vp},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{widthUnits:n,widthScale:r,widthMinPixels:i,widthMaxPixels:o,greatCircle:s,wrapLongitude:a}=this.props;this.state.model.setUniforms(e).setUniforms({greatCircle:s,widthUnits:pr[n],widthScale:r,widthMinPixels:i,widthMaxPixels:o,useShortestPath:a}).draw()}_getModel(e){let n=[];for(let o=0;o<50;o++)n=n.concat([o,1,0,o,-1,0]);const i=new Cr(e,{...this.getShaders(),id:this.props.id,geometry:new qr({drawMode:5,attributes:{positions:new Float32Array(n)}}),isInstanced:!0});return i.setUniforms({numSegments:50}),i}}w(E3,"layerName","ArcLayer");w(E3,"defaultProps",xoe);const Toe=new Uint16Array([0,2,1,0,3,2]),Poe=new Float32Array([0,1,0,0,1,0,1,1]);function Aoe(t,e){if(!e)return Coe(t);const n=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),r=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),i=Math.ceil(n/e)+1,o=Math.ceil(r/e)+1,s=(i-1)*(o-1)*6,a=new Uint32Array(s),u=new Float32Array(i*o*2),l=new Float64Array(i*o*3);let c=0,f=0;for(let h=0;h<i;h++){const d=h/(i-1);for(let g=0;g<o;g++){const m=g/(o-1),x=Roe(t,d,m);l[c*3+0]=x[0],l[c*3+1]=x[1],l[c*3+2]=x[2]||0,u[c*2+0]=d,u[c*2+1]=1-m,h>0&&g>0&&(a[f++]=c-o,a[f++]=c-o-1,a[f++]=c-1,a[f++]=c-o,a[f++]=c-1,a[f++]=c),c++}}return{vertexCount:s,positions:l,indices:a,texCoords:u}}function Coe(t){const e=new Float64Array(12);for(let n=0;n<t.length;n++)e[n*3+0]=t[n][0],e[n*3+1]=t[n][1],e[n*3+2]=t[n][2]||0;return{vertexCount:6,positions:e,indices:Toe,texCoords:Poe}}function Roe(t,e,n){return ss(ss(t[0],t[1],n),ss(t[3],t[2],n),e)}const Loe=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,Moe=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,Ooe=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  return mix(transparentColor, vec4(color, 1.0), alpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(Moe,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`),koe={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:at.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};class S3 extends Jn{constructor(...e){super(...e),w(this,"state",void 0)}getShaders(){return super.getShaders({vs:Loe,fs:Ooe,modules:[_i,bi]})}initializeState(){const e=this.getAttributeManager();e.remove(["instancePickingColors"]);const n=!0;e.add({indices:{size:1,isIndexed:!0,update:r=>r.value=this.state.mesh.indices,noAlloc:n},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:r=>r.value=this.state.mesh.positions,noAlloc:n},texCoords:{size:2,update:r=>r.value=this.state.mesh.texCoords,noAlloc:n}})}updateState({props:e,oldProps:n,changeFlags:r}){const i=this.getAttributeManager();if(r.extensionsChanged){var o;const{gl:s}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(s),i.invalidateAll()}if(e.bounds!==n.bounds){const s=this.state.mesh,a=this._createMesh();this.state.model.setVertexCount(a.vertexCount);for(const u in a)s&&s[u]!==a[u]&&i.invalidate(u);this.setState({mesh:a,...this._getCoordinateUniforms()})}else e._imageCoordinateSystem!==n._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(e){const{image:n}=this.props,r=e.info;if(!r.color||!n)return r.bitmap=null,r;const{width:i,height:o}=n;r.index=0;const s=Ioe(r.color),a=[Math.floor(s[0]*i),Math.floor(s[1]*o)];return r.bitmap={size:{width:i,height:o},uv:s,pixel:a},r}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(e){super._updateAutoHighlight({...e,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:e}=this.props;let n=e;return c2(e)&&(n=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]),Aoe(n,this.context.viewport.resolution)}_getModel(e){return e?new Cr(e,{...this.getShaders(),id:this.props.id,geometry:new qr({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(e){const{uniforms:n,moduleParameters:r}=e,{model:i,coordinateConversion:o,bounds:s,disablePicking:a}=this.state,{image:u,desaturate:l,transparentColor:c,tintColor:f}=this.props;r.pickingActive&&a||u&&i&&i.setUniforms(n).setUniforms({bitmapTexture:u,desaturate:l,transparentColor:c.map(h=>h/255),tintColor:f.slice(0,3).map(h=>h/255),coordinateConversion:o,bounds:s}).draw()}_getCoordinateUniforms(){const{LNGLAT:e,CARTESIAN:n,DEFAULT:r}=at;let{_imageCoordinateSystem:i}=this.props;if(i!==r){const{bounds:o}=this.props;if(!c2(o))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const s=this.context.viewport.resolution?e:n;if(i=i===e?e:n,i===e&&s===n)return{coordinateConversion:-1,bounds:o};if(i===n&&s===e){const a=Ka([o[0],o[1]]),u=Ka([o[2],o[3]]);return{coordinateConversion:1,bounds:[a[0],a[1],u[0],u[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}w(S3,"layerName","BitmapLayer");w(S3,"defaultProps",koe);function Ioe(t){const[e,n,r]=t,i=(r&240)/256,o=(r&15)/16;return[(e+o)/256,(n+i)/256]}function c2(t){return Number.isFinite(t[0])}const Noe=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  // convert size in meters to pixels, then scaled and clamp
 
  // project meters to pixels and clamp to limits 
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );

  // scale icon height to match instanceSize
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;

  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,Doe=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);

  // if colorMode == 0, use pixel color from the texture
  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  // Take the global opacity and the alpha from vColor into account for the alpha component
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,Foe=1024,Uoe=4,f2=()=>{},h2={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function zoe(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function Boe(t,e,n,r){return n===e.width&&r===e.height?e:(t.canvas.height=r,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,r),t.canvas)}function Gl(t){return t&&(t.id||t.url)}function Voe(t,e,n,r){const i=t.width,o=t.height,s=new Fn(t.gl,{width:e,height:n,parameters:r});return AW(t,s,{targetY:0,width:i,height:o}),t.delete(),s}function d2(t,e,n){for(let r=0;r<e.length;r++){const{icon:i,xOffset:o}=e[r],s=Gl(i);t[s]={...i,x:o,y:n}}}function $oe({icons:t,buffer:e,mapping:n={},xOffset:r=0,yOffset:i=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let u=0;u<t.length;u++){const l=t[u],c=Gl(l);if(!n[c]){const{height:f,width:h}=l;r+h+e>s&&(d2(n,a,i),r=0,i=o+i+e,o=0,a=[]),a.push({icon:l,xOffset:r}),r=r+h+e,o=Math.max(o,f)}}return a.length>0&&d2(n,a,i),{mapping:n,rowHeight:o,xOffset:r,yOffset:i,canvasWidth:s,canvasHeight:zoe(o+i+e)}}function joe(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:i,objectInfo:o}=xc(t);for(const s of i){o.index++;const a=e(s,o),u=Gl(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!r[u]&&(!n[u]||a.url!==n[u].url)&&(r[u]={...a,source:s,sourceIndex:o.index})}return r}class Goe{constructor(e,{onUpdate:n=f2,onError:r=f2}){w(this,"gl",void 0),w(this,"onUpdate",void 0),w(this,"onError",void 0),w(this,"_loadOptions",null),w(this,"_texture",null),w(this,"_externalTexture",null),w(this,"_mapping",{}),w(this,"_textureParameters",null),w(this,"_pendingCount",0),w(this,"_autoPacking",!1),w(this,"_xOffset",0),w(this,"_yOffset",0),w(this,"_rowHeight",0),w(this,"_buffer",Uoe),w(this,"_canvasWidth",Foe),w(this,"_canvasHeight",0),w(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=r}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?Gl(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:i,textureParameters:o}){if(e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),i&&(this._mapping=i),r){var s;(s=this._texture)===null||s===void 0||s.delete(),this._texture=null,this._externalTexture=r}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const r=Object.values(joe(e,n,this._mapping)||{});if(r.length>0){const{mapping:i,xOffset:o,yOffset:s,rowHeight:a,canvasHeight:u}=$oe({icons:r,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=i,this._xOffset=o,this._yOffset=s,this._canvasHeight=u,this._texture||(this._texture=new Fn(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||h2})),this._texture.height!==this._canvasHeight&&(this._texture=Voe(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||h2)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(r)}}_loadIcons(e){const n=this._canvas.getContext("2d");for(const r of e)this._pendingCount++,Td(r.url,OM,this._loadOptions).then(i=>{const o=Gl(r),{x:s,y:a,width:u,height:l}=this._mapping[o],c=Boe(n,i,u,l);this._texture.setSubImageData({data:c,x:s,y:a,width:u,height:l}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const x3=[0,0,0,255],Woe={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:x3},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class xg extends Jn{constructor(...e){super(...e),w(this,"state",void 0)}getShaders(){return super.getShaders({vs:Noe,fs:Doe,modules:[_i,bi]})}initializeState(){this.state={iconManager:new Goe(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:x3},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:a,data:u,getIcon:l,textureParameters:c}=n,{iconManager:f}=this.state,h=s||this.internalState.isAsyncPropLoading("iconAtlas");if(f.setProps({loadOptions:n.loadOptions,autoPacking:!h,iconAtlas:s,iconMapping:h?a:null,textureParameters:c}),h?r.iconMapping!==n.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&f.packIcons(u,l),i.extensionsChanged){var d;const{gl:g}=this.context;(d=this.state.model)===null||d===void 0||d.delete(),this.state.model=this._getModel(g),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:u}=this.state,l=u.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:pr[o],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:s,alphaCutoff:a}).draw()}_getModel(e){const n=[-1,-1,-1,1,1,1,1,-1];return new Cr(e,{...this.getShaders(),id:this.props.id,geometry:new qr({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const r=(n=this.getCurrentLayer())===null||n===void 0?void 0:n.props.onIconError;r?r(e):$e.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:r,anchorX:i=n/2,anchorY:o=r/2}=this.state.iconManager.getIconMapping(e);return[n/2-i,r/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:r,width:i,height:o}=this.state.iconManager.getIconMapping(e);return[n,r,i,o]}}w(xg,"defaultProps",Woe);w(xg,"layerName","IconLayer");const Hoe=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      // Line is not split, abort
      gl_Position = vec4(0.);
      return;
    }
  }

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  
  // linear interpolation of source & target to pick right coord
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  // Multiply out width and clamp to limits
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Yoe=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,Xoe=[0,0,0,255],qoe={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getColor:{type:"accessor",value:Xoe},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class T3 extends Jn{getShaders(){return super.getShaders({vs:Hoe,fs:Yoe,modules:[_i,bi]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{widthUnits:n,widthScale:r,widthMinPixels:i,widthMaxPixels:o,wrapLongitude:s}=this.props;this.state.model.setUniforms(e).setUniforms({widthUnits:pr[n],widthScale:r,widthMinPixels:i,widthMaxPixels:o,useShortestPath:s?1:0}).draw(),s&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(e){const n=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new Cr(e,{...this.getShaders(),id:this.props.id,geometry:new qr({drawMode:5,attributes:{positions:new Float32Array(n)}}),isInstanced:!0})}}w(T3,"layerName","LineLayer");w(T3,"defaultProps",qoe);const Zoe=`#define SHADER_NAME point-cloud-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceNormals;
attribute vec4 instanceColors;
attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusPixels;
uniform int sizeUnits;

varying vec4 vColor;
varying vec2 unitPosition;

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.normal = project_normal(instanceNormals);

  // position on the containing square in [-1, 1] space
  unitPosition = positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  // Find the center of the point and add the current vertex
  vec3 offset = vec3(positions.xy * project_size_to_pixel(radiusPixels, sizeUnits), 0.0);
  DECKGL_FILTER_SIZE(offset, geometry);

  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);
  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply lighting
  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);

  // Apply opacity to instance color, or return instance picking color
  vColor = vec4(lightColor, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Koe=`#define SHADER_NAME point-cloud-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 unitPosition;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition);

  if (distToCenter > 1.0) {
    discard;
  }

  gl_FragColor = vColor;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,P3=[0,0,0,255],A3=[0,0,1],Qoe={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:t=>t.position},getNormal:{type:"accessor",value:A3},getColor:{type:"accessor",value:P3},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};function Joe(t){const{header:e,attributes:n}=t;!e||!n||(t.length=e.vertexCount,n.POSITION&&(n.instancePositions=n.POSITION),n.NORMAL&&(n.instanceNormals=n.NORMAL),n.COLOR_0&&(n.instanceColors=n.COLOR_0))}class C3 extends Jn{getShaders(){return super.getShaders({vs:Zoe,fs:Koe,modules:[_i,vb,bi]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:A3},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:P3}})}updateState(e){const{changeFlags:n,props:r}=e;if(super.updateState(e),n.extensionsChanged){var i;const{gl:o}=this.context;(i=this.state.model)===null||i===void 0||i.delete(),this.state.model=this._getModel(o),this.getAttributeManager().invalidateAll()}n.dataChanged&&Joe(r.data)}draw({uniforms:e}){const{pointSize:n,sizeUnits:r}=this.props;this.state.model.setUniforms(e).setUniforms({sizeUnits:pr[r],radiusPixels:n}).draw()}_getModel(e){const n=[];for(let r=0;r<3;r++){const i=r/3*Math.PI*2;n.push(Math.cos(i)*2,Math.sin(i)*2,0)}return new Cr(e,{...this.getShaders(),id:this.props.id,geometry:new qr({drawMode:4,attributes:{positions:new Float32Array(n)}}),isInstanced:!0})}}w(C3,"layerName","PointCloudLayer");w(C3,"defaultProps",Qoe);const ese=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  
  // Multiply out line width and clamp to limits
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;

  // Expand geometry to accomodate edge smoothing
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;

  // position on the containing square in [-1, 1] space
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  }

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,tse=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (filled) {
    gl_FragColor = vFillColor;
  } else {
    discard;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,p2=[0,0,0,255],nse={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:p2},getLineColor:{type:"accessor",value:p2},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class kb extends Jn{getShaders(){return super.getShaders({vs:ese,fs:tse,modules:[_i,bi]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,stroked:s,filled:a,billboard:u,antialiasing:l,lineWidthUnits:c,lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:s?1:0,filled:a,billboard:u,antialiasing:l,radiusUnits:pr[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:pr[c],lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}_getModel(e){const n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new Cr(e,{...this.getShaders(),id:this.props.id,geometry:new qr({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0})}}w(kb,"defaultProps",nse);w(kb,"layerName","ScatterplotLayer");const Ib={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function Nb(t,e,n={}){return rse(t,n)!==e?(ose(t,n),!0):!1}function rse(t,e={}){return Math.sign(ise(t,e))}function ise(t,e={}){const{start:n=0,end:r=t.length}=e,i=e.size||2;let o=0;for(let s=n,a=r-i;s<r;s+=i)o+=(t[s]-t[a])*(t[s+1]+t[a+1]),a=s;return o/2}function ose(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,o=(r-n)/i,s=Math.floor(o/2);for(let a=0;a<s;++a){const u=n+a*i,l=n+(o-1-a)*i;for(let c=0;c<i;++c){const f=t[u+c];t[u+c]=t[l+c],t[l+c]=f}}}function jr(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let o=0;o<n;o++)if(t[r-n+o]!==e[o]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function S_(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function Wl(t,e,n,r,i=[]){const o=r+e*n;for(let s=0;s<n;s++)i[s]=t[o+s];return i}function x_(t,e,n,r,i=[]){let o,s;if(n&8)o=(r[3]-t[1])/(e[1]-t[1]),s=3;else if(n&4)o=(r[1]-t[1])/(e[1]-t[1]),s=1;else if(n&2)o=(r[2]-t[0])/(e[0]-t[0]),s=2;else if(n&1)o=(r[0]-t[0])/(e[0]-t[0]),s=0;else return null;for(let a=0;a<t.length;a++)i[a]=(s&1)===a?r[s]:o*(e[a]-t[a])+t[a];return i}function Fh(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function R3(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:s=0,endIndex:a=t.length}=e||{},u=(a-s)/n;let l=[];const c=[l],f=Wl(t,0,n,s);let h,d;const g=M3(f,i,o,[]),m=[];jr(l,f);for(let x=1;x<u;x++){for(h=Wl(t,x,n,s,h),d=Fh(h,g);d;){x_(f,h,d,g,m);const _=Fh(m,g);_&&(x_(f,m,_,g,m),d=_),jr(l,m),S_(f,m),ase(g,i,d),r&&l.length>n&&(l=[],c.push(l),jr(l,f)),d=Fh(h,g)}jr(l,h),S_(f,h)}return r?c:c[0]}const g2=0,sse=1;function Sf(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function L3(t,e=null,n){if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:s=!1}=n||{},a=[],u=[{pos:t,types:s?new Array(t.length/r).fill(sse):null,holes:e||[]}],l=[[],[]];let c=[];for(;u.length;){const{pos:f,types:h,holes:d}=u.shift();use(f,r,d[0]||f.length,l),c=M3(l[0],i,o,c);const g=Fh(l[1],c);if(g){let m=m2(f,h,r,0,d[0]||f.length,c,g);const x={pos:m[0].pos,types:m[0].types,holes:[]},_={pos:m[1].pos,types:m[1].types,holes:[]};u.push(x,_);for(let y=0;y<d.length;y++)m=m2(f,h,r,d[y],d[y+1]||f.length,c,g),m[0]&&(x.holes.push(x.pos.length),x.pos=Sf(x.pos,m[0].pos),s&&(x.types=Sf(x.types,m[0].types))),m[1]&&(_.holes.push(_.pos.length),_.pos=Sf(_.pos,m[1].pos),s&&(_.types=Sf(_.types,m[1].types)))}else{const m={positions:f};s&&(m.edgeTypes=h),d.length&&(m.holeIndices=d),a.push(m)}}return a}function m2(t,e,n,r,i,o,s){const a=(i-r)/n,u=[],l=[],c=[],f=[],h=[];let d,g,m;const x=Wl(t,a-1,n,r);let _=Math.sign(s&8?x[1]-o[3]:x[0]-o[2]),y=e&&e[a-1],b=0,T=0;for(let R=0;R<a;R++)d=Wl(t,R,n,r,d),g=Math.sign(s&8?d[1]-o[3]:d[0]-o[2]),m=e&&e[r/n+R],g&&_&&_!==g&&(x_(x,d,s,o,h),jr(u,h)&&c.push(y),jr(l,h)&&f.push(y)),g<=0?(jr(u,d)&&c.push(m),b-=g):c.length&&(c[c.length-1]=g2),g>=0?(jr(l,d)&&f.push(m),T+=g):f.length&&(f[f.length-1]=g2),S_(x,d),_=g,y=m;return[b?{pos:u,types:e&&c}:null,T?{pos:l,types:e&&f}:null]}function M3(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],o=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=o,r[2]=i+e,r[3]=o+e,r}function ase(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function use(t,e,n,r){let i=1/0,o=-1/0,s=1/0,a=-1/0;for(let u=0;u<n;u+=e){const l=t[u],c=t[u+1];i=l<i?l:i,o=l>o?l:o,s=c<s?c:s,a=c>a?c:a}return r[0][0]=i,r[0][1]=s,r[1][0]=o,r[1][1]=a,r}const lse=85.051129;function cse(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:o=!0}=e||{},s=t.slice(r,i);O3(s,n,0,i-r);const a=R3(s,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const u of a)k3(u,n);return a}function fse(t,e=null,n){const{size:r=2,normalize:i=!0,edgeTypes:o=!1}=n||{};e=e||[];const s=[],a=[];let u=0,l=0;for(let f=0;f<=e.length;f++){const h=e[f]||t.length,d=l,g=hse(t,r,u,h);for(let m=g;m<h;m++)s[l++]=t[m];for(let m=u;m<g;m++)s[l++]=t[m];O3(s,r,d,l),dse(s,r,d,l,n==null?void 0:n.maxLatitude),u=h,a[f]=l}a.pop();const c=L3(s,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const f of c)k3(f.positions,r);return c}function hse(t,e,n,r){let i=-1,o=-1;for(let s=n+1;s<r;s+=e){const a=Math.abs(t[s]);a>i&&(i=a,o=s-1)}return o}function dse(t,e,n,r,i=lse){const o=t[n],s=t[r-e];if(Math.abs(o-s)>180){const a=Wl(t,0,e,n);a[0]+=Math.round((s-o)/360)*360,jr(t,a),a[1]=Math.sign(a[1])*i,jr(t,a),a[0]=o,jr(t,a)}}function O3(t,e,n,r){let i=t[0],o;for(let s=n;s<r;s+=e){o=t[s];const a=o-i;(a>180||a<-180)&&(o-=Math.round(a/360)*360),t[s]=i=o}}function k3(t,e){let n;const r=t.length/e;for(let o=0;o<r&&(n=t[o*e],(n+180)%360===0);o++);const i=-Math.round(n/360)*360;if(i!==0)for(let o=0;o<r;o++)t[o*e]+=i}class pse extends qr{constructor(e){const{id:n=gi("column-geometry")}=e,{indices:r,attributes:i}=gse(e);super({...e,id:n,indices:r,attributes:i})}}function gse(t){const{radius:e,height:n=1,nradial:r=10}=t;let{vertices:i}=t;i&&($e.assert(i.length>=r),i=i.flatMap(d=>[d[0],d[1]]),Nb(i,Ib.COUNTER_CLOCKWISE));const o=n>0,s=r+1,a=o?s*3+1:r,u=Math.PI*2/r,l=new Uint16Array(o?r*3*2:0),c=new Float32Array(a*3),f=new Float32Array(a*3);let h=0;if(o){for(let d=0;d<s;d++){const g=d*u,m=d%r,x=Math.sin(g),_=Math.cos(g);for(let y=0;y<2;y++)c[h+0]=i?i[m*2]:_*e,c[h+1]=i?i[m*2+1]:x*e,c[h+2]=(1/2-y)*n,f[h+0]=i?i[m*2]:_,f[h+1]=i?i[m*2+1]:x,h+=3}c[h+0]=c[h-3],c[h+1]=c[h-2],c[h+2]=c[h-1],h+=3}for(let d=o?0:1;d<s;d++){const g=Math.floor(d/2)*Math.sign(.5-d%2),m=g*u,x=(g+r)%r,_=Math.sin(m),y=Math.cos(m);c[h+0]=i?i[x*2]:y*e,c[h+1]=i?i[x*2+1]:_*e,c[h+2]=n/2,f[h+2]=1,h+=3}if(o){let d=0;for(let g=0;g<r;g++)l[d++]=g*2+0,l[d++]=g*2+2,l[d++]=g*2+0,l[d++]=g*2+1,l[d++]=g*2+1,l[d++]=g*2+3}return{indices:l,attributes:{POSITION:{size:3,value:c},NORMAL:{size:3,value:f}}}}const mse=`#version 300 es

#define SHADER_NAME column-layer-vertex-shader

in vec3 positions;
in vec3 normals;

in vec3 instancePositions;
in float instanceElevations;
in vec3 instancePositions64Low;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in float instanceStrokeWidths;

in vec3 instancePickingColors;

// Custom uniforms
uniform float opacity;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform bool extruded;
uniform bool stroked;
uniform bool isStroke;
uniform float coverage;
uniform float elevationScale;
uniform float edgeDistance;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform int radiusUnits;
uniform int widthUnits;

// Result
out vec4 vColor;
#ifdef FLAT_SHADING
out vec4 position_commonspace;
#endif

void main(void) {
  geometry.worldPosition = instancePositions;

  vec4 color = isStroke ? instanceLineColors : instanceFillColors;
  // rotate primitive position and normal
  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));

  // calculate elevation, if 3d not enabled set to 0
  // cylindar gemoetry height are between -1.0 to 1.0, transform it to between 0, 1
  float elevation = 0.0;
  // calculate stroke offset
  float strokeOffsetRatio = 1.0;

  if (extruded) {
    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;
  } else if (stroked) {
    float widthPixels = clamp(
      project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
      widthMinPixels, widthMaxPixels) / 2.0;
    float halfOffset = project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);
    if (isStroke) {
      strokeOffsetRatio -= sign(positions.z) * halfOffset;
    } else {
      strokeOffsetRatio -= halfOffset;
    }
  }

  // if alpha == 0.0 or z < 0.0, do not render element
  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);
  float dotRadius = radius * coverage * shouldRender;

  geometry.pickingColor = instancePickingColors;

  // project center of column
  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);
  vec3 centroidPosition64Low = instancePositions64Low;
  vec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius;
  if (radiusUnits == UNIT_METERS) {
    offset = project_size(offset);
  }
  vec3 pos = vec3(offset, 0.);
  DECKGL_FILTER_SIZE(pos, geometry);

  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);
  geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Light calculations
  if (extruded && !isStroke) {
#ifdef FLAT_SHADING
    position_commonspace = geometry.position;
    vColor = vec4(color.rgb, color.a * opacity);
#else
    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);
    vColor = vec4(lightColor, color.a * opacity);
#endif
  } else {
    vColor = vec4(color.rgb, color.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,vse=`#version 300 es
#define SHADER_NAME column-layer-fragment-shader

precision highp float;

uniform vec3 project_uCameraPosition;
uniform bool extruded;
uniform bool isStroke;

out vec4 fragColor;

in vec4 vColor;
#ifdef FLAT_SHADING
in vec4 position_commonspace;
#endif

void main(void) {
  fragColor = vColor;
#ifdef FLAT_SHADING
  if (extruded && !isStroke && !picking_uActive) {
    vec3 normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
    fragColor.rgb = lighting_getLightColor(vColor.rgb, project_uCameraPosition, position_commonspace.xyz, normal);
  }
#endif
  DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,yp=[0,0,0,255],yse={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},radiusUnits:"meters",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:t=>t.position},getFillColor:{type:"accessor",value:yp},getLineColor:{type:"accessor",value:yp},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Db extends Jn{getShaders(){const{gl:e}=this.context,n=!Je(e),r={},i=this.props.flatShading&&YM(e,At.GLSL_DERIVATIVES);return i&&(r.FLAT_SHADING=1),super.getShaders({vs:mse,fs:vse,defines:r,transpileToGLSL100:n,modules:[_i,i?HX:vb,bi]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getFillColor",defaultValue:yp},instanceLineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getLineColor",defaultValue:yp},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e,o=i.extensionsChanged||n.flatShading!==r.flatShading;if(o){var s;const{gl:a}=this.context;(s=this.state.model)===null||s===void 0||s.delete(),this.state.model=this._getModel(a),this.getAttributeManager().invalidateAll()}(o||n.diskResolution!==r.diskResolution||n.vertices!==r.vertices||(n.extruded||n.stroked)!==(r.extruded||r.stroked))&&this._updateGeometry(n)}getGeometry(e,n,r){const i=new pse({radius:1,height:r?2:0,vertices:n,nradial:e});let o=0;if(n)for(let s=0;s<e;s++){const a=n[s],u=Math.sqrt(a[0]*a[0]+a[1]*a[1]);o+=u/e}else o=1;return this.setState({edgeDistance:Math.cos(Math.PI/e)*o}),i}_getModel(e){return new Cr(e,{...this.getShaders(),id:this.props.id,isInstanced:!0})}_updateGeometry({diskResolution:e,vertices:n,extruded:r,stroked:i}){const o=this.getGeometry(e,n,r||i);this.setState({fillVertexCount:o.attributes.POSITION.value.length/3,wireframeVertexCount:o.indices.value.length}),this.state.model.setProps({geometry:o})}draw({uniforms:e}){const{lineWidthUnits:n,lineWidthScale:r,lineWidthMinPixels:i,lineWidthMaxPixels:o,radiusUnits:s,elevationScale:a,extruded:u,filled:l,stroked:c,wireframe:f,offset:h,coverage:d,radius:g,angle:m}=this.props,{model:x,fillVertexCount:_,wireframeVertexCount:y,edgeDistance:b}=this.state;x.setUniforms(e).setUniforms({radius:g,angle:m/180*Math.PI,offset:h,extruded:u,stroked:c,coverage:d,elevationScale:a,edgeDistance:b,radiusUnits:pr[s],widthUnits:pr[n],widthScale:r,widthMinPixels:i,widthMaxPixels:o}),u&&f&&(x.setProps({isIndexed:!0}),x.setVertexCount(y).setDrawMode(1).setUniforms({isStroke:!0}).draw()),l&&(x.setProps({isIndexed:!1}),x.setVertexCount(_).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!u&&c&&(x.setProps({isIndexed:!1}),x.setVertexCount(_*2/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}}w(Db,"layerName","ColumnLayer");w(Db,"defaultProps",yse);const _se={cellSize:{type:"number",min:0,value:1e3},offset:{type:"array",value:[1,1]}};class I3 extends Db{getGeometry(e){return new bq}draw({uniforms:e}){const{elevationScale:n,extruded:r,offset:i,coverage:o,cellSize:s,angle:a,radiusUnits:u}=this.props;this.state.model.setUniforms(e).setUniforms({radius:s/2,radiusUnits:pr[u],angle:a,offset:i,extruded:r,coverage:o,elevationScale:n,edgeDistance:1,isWireframe:!1}).draw()}}w(I3,"layerName","GridCellLayer");w(I3,"defaultProps",_se);function bse(t,e,n,r){let i;if(Array.isArray(t[0])){const o=t.length*e;i=new Array(o);for(let s=0;s<t.length;s++)for(let a=0;a<e;a++)i[s*e+a]=t[s][a]||0}else i=t;return n?R3(i,{size:e,gridResolution:n}):r?cse(i,{size:e}):i}const wse=1,Ese=2,T0=4;class Sse extends e3{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?bse(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(v2(e)){let r=0;for(const i of e)r+=this.getGeometrySize(i);return r}const n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&v2(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){const r=this.attributes.segmentTypes,i=e?this.isClosed(e):!1,{vertexStart:o,geometrySize:s}=n;r.fill(0,o,o+s),i?(r[o]=T0,r[o+s-2]=T0):(r[o]+=wse,r[o+s-2]+=Ese),r[o+s-1]=T0}_updatePositions(e,n){const{positions:r}=this.attributes;if(!r||!e)return;const{vertexStart:i,geometrySize:o}=n,s=new Array(3);for(let a=i,u=0;u<o;a++,u++)this.getPointOnPath(e,u,s),r[a*3]=s[0],r[a*3+1]=s[1],r[a*3+2]=s[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n,r=[]){const{positionSize:i}=this;n*i>=e.length&&(n+=1-e.length/i);const o=n*i;return r[0]=e[o],r[1]=e[o+1],r[2]=i===3&&e[o+2]||0,r}isClosed(e){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:n}=this,r=e.length-n;return e[0]===e[r]&&e[1]===e[r+1]&&(n===2||e[2]===e[r+2])}}function v2(t){return Array.isArray(t[0])}const xse=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}

// calculate line join positions
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  // side of the segment - -1: left, 0: center, 1: right
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);

  // tangent of the corner
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  // direction of the corner
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  // direction of the segment
  vec2 dir = isEnd ? dirA : dirB;
  // direction of the extrusion
  vec2 perp = isEnd ? perpA : perpB;
  // length of the segment
  float L = isEnd ? lenA : lenB;

  // A = angle of the corner
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));

  // -1: right, 1: left
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);

  // relative position to the corner:
  // -1: inside (smaller side of the angle)
  // 0: center
  // 1: outside (bigger side of the angle)
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  // trim if inside corner extends further than the line segment
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);

  // special treatment for start cap and end cap
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;

  // extend out a triangle to envelope the round cap
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }

  // Generate variables for fragment shader
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}

// In clipspace extrusion, if a line extends behind the camera, clip it to avoid visual artifacts
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    // Extrude in clipspace
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    // Extrude in commonspace
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Tse=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
/*
 * vPathPosition represents the relative coordinates of the current fragment on the path segment.
 * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.
 * vPathPosition.y - position along the length of the path, between [0, L / width].
 */
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    // if joint is rounded, test distance from the corner
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    // trim miter
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,N3=[0,0,0,255],Pse={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:N3},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},P0={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class Tg extends Jn{constructor(...e){super(...e),w(this,"state",void 0)}getShaders(){return super.getShaders({vs:xse,fs:Tse,modules:[_i,bi]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:P0,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:P0,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:P0,defaultValue:N3},instancePickingColors:{size:3,type:5121,accessor:(r,{index:i,target:o})=>this.encodePickingColor(r&&r.__source?r.__source.index:i,o)}}),this.setState({pathTesselator:new Sse({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:n,changeFlags:r}=e,i=this.getAttributeManager();if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){const{pathTesselator:a}=this.state,u=n.data.attributes||{};a.updateGeometry({data:n.data,geometryBuffer:u.getPath,buffers:u,normalize:!n._pathType,loop:n._pathType==="loop",getGeometry:n.getPath,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:r.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),r.dataChanged||i.invalidateAll()}if(r.extensionsChanged){var s;const{gl:a}=this.context;(s=this.state.model)===null||s===void 0||s.delete(),this.state.model=this._getModel(a),i.invalidateAll()}}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(o=>o.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else this._disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:n,capRounded:r,billboard:i,miterLimit:o,widthUnits:s,widthScale:a,widthMinPixels:u,widthMaxPixels:l}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:pr[s],widthScale:a,miterLimit:o,widthMinPixels:u,widthMaxPixels:l}).draw()}_getModel(e){const n=[0,1,2,1,4,2,1,3,4,3,5,4],r=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new Cr(e,{...this.getShaders(),id:this.props.id,geometry:new qr({drawMode:4,attributes:{indices:new Uint16Array(n),positions:{value:new Float32Array(r),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}}w(Tg,"defaultProps",Pse);w(Tg,"layerName","PathLayer");var Fb={exports:{}};Fb.exports=Pg;Fb.exports.default=Pg;function Pg(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,o=D3(t,0,i,n,!0),s=[];if(!o||o.next===o.prev)return s;var a,u,l,c,f,h,d;if(r&&(o=Mse(t,e,o,n)),t.length>80*n){a=l=t[0],u=c=t[1];for(var g=n;g<i;g+=n)f=t[g],h=t[g+1],f<a&&(a=f),h<u&&(u=h),f>l&&(l=f),h>c&&(c=h);d=Math.max(l-a,c-u),d=d!==0?32767/d:0}return Hl(o,s,n,a,u,d,0),s}function D3(t,e,n,r,i){var o,s;if(i===A_(t,e,n,r)>0)for(o=e;o<n;o+=r)s=y2(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=y2(o,t[o],t[o+1],s);return s&&Ag(s,s.next)&&(Xl(s),s=s.next),s}function ws(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(Ag(n,n.next)||Vt(n.prev,n,n.next)===0)){if(Xl(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Hl(t,e,n,r,i,o,s){if(!!t){!s&&o&&Dse(t,r,i,o);for(var a=t,u,l;t.prev!==t.next;){if(u=t.prev,l=t.next,o?Cse(t,r,i,o):Ase(t)){e.push(u.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),Xl(t),t=l.next,a=l.next;continue}if(t=l,t===a){s?s===1?(t=Rse(ws(t),e,n),Hl(t,e,n,r,i,o,2)):s===2&&Lse(t,e,n,r,i,o):Hl(ws(t),e,n,r,i,o,1);break}}}}function Ase(t){var e=t.prev,n=t,r=t.next;if(Vt(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,s=r.x,a=e.y,u=n.y,l=r.y,c=i<o?i<s?i:s:o<s?o:s,f=a<u?a<l?a:l:u<l?u:l,h=i>o?i>s?i:s:o>s?o:s,d=a>u?a>l?a:l:u>l?u:l,g=r.next;g!==e;){if(g.x>=c&&g.x<=h&&g.y>=f&&g.y<=d&&ya(i,a,o,u,s,l,g.x,g.y)&&Vt(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Cse(t,e,n,r){var i=t.prev,o=t,s=t.next;if(Vt(i,o,s)>=0)return!1;for(var a=i.x,u=o.x,l=s.x,c=i.y,f=o.y,h=s.y,d=a<u?a<l?a:l:u<l?u:l,g=c<f?c<h?c:h:f<h?f:h,m=a>u?a>l?a:l:u>l?u:l,x=c>f?c>h?c:h:f>h?f:h,_=T_(d,g,e,n,r),y=T_(m,x,e,n,r),b=t.prevZ,T=t.nextZ;b&&b.z>=_&&T&&T.z<=y;){if(b.x>=d&&b.x<=m&&b.y>=g&&b.y<=x&&b!==i&&b!==s&&ya(a,c,u,f,l,h,b.x,b.y)&&Vt(b.prev,b,b.next)>=0||(b=b.prevZ,T.x>=d&&T.x<=m&&T.y>=g&&T.y<=x&&T!==i&&T!==s&&ya(a,c,u,f,l,h,T.x,T.y)&&Vt(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;b&&b.z>=_;){if(b.x>=d&&b.x<=m&&b.y>=g&&b.y<=x&&b!==i&&b!==s&&ya(a,c,u,f,l,h,b.x,b.y)&&Vt(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;T&&T.z<=y;){if(T.x>=d&&T.x<=m&&T.y>=g&&T.y<=x&&T!==i&&T!==s&&ya(a,c,u,f,l,h,T.x,T.y)&&Vt(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function Rse(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Ag(i,o)&&F3(i,r,r.next,o)&&Yl(i,o)&&Yl(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),Xl(r),Xl(r.next),r=t=o),r=r.next}while(r!==t);return ws(r)}function Lse(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&zse(s,a)){var u=U3(s,a);s=ws(s,s.next),u=ws(u,u.next),Hl(s,e,n,r,i,o,0),Hl(u,e,n,r,i,o,0);return}a=a.next}s=s.next}while(s!==t)}function Mse(t,e,n,r){var i=[],o,s,a,u,l;for(o=0,s=e.length;o<s;o++)a=e[o]*r,u=o<s-1?e[o+1]*r:t.length,l=D3(t,a,u,r,!1),l===l.next&&(l.steiner=!0),i.push(Use(l));for(i.sort(Ose),o=0;o<i.length;o++)n=kse(i[o],n);return n}function Ose(t,e){return t.x-e.x}function kse(t,e){var n=Ise(t,e);if(!n)return e;var r=U3(n,t);return ws(r,r.next),ws(n,n.next)}function Ise(t,e){var n=e,r=t.x,i=t.y,o=-1/0,s;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>o&&(o=a,s=n.x<n.next.x?n:n.next,a===r))return s}n=n.next}while(n!==e);if(!s)return null;var u=s,l=s.x,c=s.y,f=1/0,h;n=s;do r>=n.x&&n.x>=l&&r!==n.x&&ya(i<c?r:o,i,l,c,i<c?o:r,i,n.x,n.y)&&(h=Math.abs(i-n.y)/(r-n.x),Yl(n,t)&&(h<f||h===f&&(n.x>s.x||n.x===s.x&&Nse(s,n)))&&(s=n,f=h)),n=n.next;while(n!==u);return s}function Nse(t,e){return Vt(t.prev,t,e.prev)<0&&Vt(e.next,t,t.next)<0}function Dse(t,e,n,r){var i=t;do i.z===0&&(i.z=T_(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Fse(i)}function Fse(t){var e,n,r,i,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<l&&(a++,r=r.nextZ,!!r);e++);for(u=l;a>0||u>0&&r;)a!==0&&(u===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(s>1);return t}function T_(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Use(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function ya(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function zse(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Bse(t,e)&&(Yl(t,e)&&Yl(e,t)&&Vse(t,e)&&(Vt(t.prev,t,e.prev)||Vt(t,e.prev,e))||Ag(t,e)&&Vt(t.prev,t,t.next)>0&&Vt(e.prev,e,e.next)>0)}function Vt(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ag(t,e){return t.x===e.x&&t.y===e.y}function F3(t,e,n,r){var i=Tf(Vt(t,e,n)),o=Tf(Vt(t,e,r)),s=Tf(Vt(n,r,t)),a=Tf(Vt(n,r,e));return!!(i!==o&&s!==a||i===0&&xf(t,n,e)||o===0&&xf(t,r,e)||s===0&&xf(n,t,r)||a===0&&xf(n,e,r))}function xf(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Tf(t){return t>0?1:t<0?-1:0}function Bse(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&F3(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Yl(t,e){return Vt(t.prev,t,t.next)<0?Vt(t,e,t.next)>=0&&Vt(t,t.prev,e)>=0:Vt(t,e,t.prev)<0||Vt(t,t.next,e)<0}function Vse(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function U3(t,e){var n=new P_(t.i,t.x,t.y),r=new P_(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function y2(t,e,n,r){var i=new P_(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Xl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P_(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Pg.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(A_(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,c=a<u-1?e[a+1]*n:t.length;s-=Math.abs(A_(t,l,c,n))}var f=0;for(a=0;a<r.length;a+=3){var h=r[a]*n,d=r[a+1]*n,g=r[a+2]*n;f+=Math.abs((t[h]-t[g])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[g+1]-t[h+1]))}return s===0&&f===0?0:Math.abs((f-s)/s)};function A_(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}Pg.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};const Pf=Ib.CLOCKWISE,_2=Ib.COUNTER_CLOCKWISE,mo={isClosed:!0};function $se(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function tl(t){return"positions"in t?t.positions:t}function Uh(t){return"holeIndices"in t?t.holeIndices:null}function jse(t){return Array.isArray(t[0])}function Gse(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function Wse(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function Hse(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}function b2(t,e,n,r,i){let o=e;const s=n.length;for(let a=0;a<s;a++)for(let u=0;u<r;u++)t[o++]=n[a][u]||0;if(!Wse(n))for(let a=0;a<r;a++)t[o++]=n[0][a]||0;return mo.start=e,mo.end=o,mo.size=r,Nb(t,i,mo),o}function w2(t,e,n,r,i=0,o,s){o=o||n.length;const a=o-i;if(a<=0)return e;let u=e;for(let l=0;l<a;l++)t[u++]=n[i+l];if(!Hse(n,r,i,o))for(let l=0;l<r;l++)t[u++]=n[i+l];return mo.start=e,mo.end=u,mo.size=r,Nb(t,s,mo),u}function z3(t,e){$se(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:o}=t;if(o){let s=0;for(let a=0;a<=o.length;a++)s=w2(n,s,i,e,o[a-1],o[a],a===0?Pf:_2),r.push(s);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!jse(t))return w2(n,0,t,e,0,n.length,Pf),n;if(!Gse(t)){let i=0;for(const[o,s]of t.entries())i=b2(n,i,s,e,o===0?Pf:_2),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return b2(n,0,t,e,Pf),n}function Yse(t,e,n){let r=Uh(t);r&&(r=r.map(o=>o/e));let i=tl(t);if(n){const o=i.length;i=i.slice();const s=[];for(let a=0;a<o;a+=e){s[0]=i[a],s[1]=i[a+1];const u=n(s);i[a]=u[0],i[a+1]=u[1]}}return Fb.exports(i,r,e)}class Xse extends e3{constructor(e){const{fp64:n,IndexType:r=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:r,size:1}}})}get(e){const{attributes:n}=this;return e==="indices"?n.indices&&n.indices.subarray(0,this.vertexCount):n[e]}updateGeometry(e){super.updateGeometry(e);const n=this.buffers.indices;if(n)this.vertexCount=(n.value||n).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const n=z3(e,this.positionSize);return this.opts.resolution?L3(tl(n),Uh(n),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?fse(tl(n),Uh(n),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):n}return e}getGeometrySize(e){if(E2(e)){let n=0;for(const r of e)n+=this.getGeometrySize(r);return n}return tl(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,n){if(e&&E2(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i,n.indexStart=this.indexStarts[n.geometryIndex+1]}else this._updateIndices(e,n),this._updatePositions(e,n),this._updateVertexValid(e,n)}_updateIndices(e,{geometryIndex:n,vertexStart:r,indexStart:i}){const{attributes:o,indexStarts:s,typedArrayManager:a}=this;let u=o.indices;if(!u||!e)return;let l=i;const c=Yse(e,this.positionSize,this.opts.preproject);u=a.allocate(u,i+c.length,{copy:!0});for(let f=0;f<c.length;f++)u[l++]=c[f]+r;s[n+1]=i+c.length,o.indices=u}_updatePositions(e,{vertexStart:n,geometrySize:r}){const{attributes:{positions:i},positionSize:o}=this;if(!i||!e)return;const s=tl(e);for(let a=n,u=0;u<r;a++,u++){const l=s[u*o],c=s[u*o+1],f=o>2?s[u*o+2]:0;i[a*3]=l,i[a*3+1]=c,i[a*3+2]=f}}_updateVertexValid(e,{vertexStart:n,geometrySize:r}){const{positionSize:i}=this,o=this.attributes.vertexValid,s=e&&Uh(e);if(e&&e.edgeTypes?o.set(e.edgeTypes,n):o.fill(1,n,n+r),s)for(let a=0;a<s.length;a++)o[n+s[a]/i-1]=0;o[n+r-1]=0}}function E2(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const B3=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,qse=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(B3,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),Zse=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(B3,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),Kse=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,_p=[0,0,0,255],Qse={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:_p},getLineColor:{type:"accessor",value:_p},material:!0},Af={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class Cg extends Jn{constructor(...e){super(...e),w(this,"state",void 0)}getShaders(e){return super.getShaders({vs:e==="top"?qse:Zse,fs:Kse,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[_i,vb,bi]})}get wrapLongitude(){return!1}initializeState(){const{gl:e,viewport:n}=this.context;let{coordinateSystem:r}=this.props;n.isGeospatial&&r===at.DEFAULT&&(r=at.LNGLAT),this.setState({numInstances:0,polygonTesselator:new Xse({preproject:r===at.LNGLAT&&n.projectFlat.bind(n),fp64:this.use64bitPositions(),IndexType:!e||hb(e,At.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const i=this.getAttributeManager(),o=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:Af,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,transition:Af,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Af,accessor:"getFillColor",defaultValue:_p,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Af,accessor:"getLineColor",defaultValue:_p,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(s,{index:a,target:u})=>this.encodePickingColor(s&&s.__source?s.__source.index:a,u),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(o=>o.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else this._disablePickingIndex(e)}draw({uniforms:e}){const{extruded:n,filled:r,wireframe:i,elevationScale:o}=this.props,{topModel:s,sideModel:a,polygonTesselator:u}=this.state,l={...e,extruded:Boolean(n),elevationScale:o};a&&(a.setInstanceCount(u.instanceCount-1),a.setUniforms(l),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),r&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),s&&(s.setVertexCount(u.vertexCount),s.setUniforms(l).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:n,oldProps:r,changeFlags:i}=e,o=this.getAttributeManager();if(i.extensionsChanged||n.filled!==r.filled||n.extruded!==r.extruded){var a;(a=this.state.models)===null||a===void 0||a.forEach(u=>u.delete()),this.setState(this._getModels(this.context.gl)),o.invalidateAll()}}updateGeometry({props:e,oldProps:n,changeFlags:r}){if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:o}=this.state,s=e.data.attributes||{};o.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:s.getPolygon,buffers:s,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){const{id:n,filled:r,extruded:i}=this.props;let o,s;if(r){const a=this.getShaders("top");a.defines.NON_INSTANCED_MODEL=1,o=new Cr(e,{...a,id:"".concat(n,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(s=new Cr(e,{...this.getShaders("side"),id:"".concat(n,"-side"),geometry:new qr({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),s.userData.excludeAttributes={indices:!0}),{models:[s,o].filter(Boolean),topModel:o,sideModel:s}}calculateIndices(e){const{polygonTesselator:n}=this.state;e.startIndices=n.indexStarts,e.value=n.get("indices")}calculatePositions(e){const{polygonTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}w(Cg,"defaultProps",Qse);w(Cg,"layerName","SolidPolygonLayer");function V3({data:t,getIndex:e,dataRange:n,replace:r}){const{startRow:i=0,endRow:o=1/0}=n,s=t.length;let a=s,u=s;for(let h=0;h<s;h++){const d=e(t[h]);if(a>h&&d>=i&&(a=h),d>=o){u=h;break}}let l=a;const f=u-a!==r.length?t.slice(u):void 0;for(let h=0;h<r.length;h++)t[l++]=r[h];if(f){for(let h=0;h<f.length;h++)t[l++]=f[h];t.length=l}return{startRow:a,endRow:a+r.length}}const $3=[0,0,0,255],Jse=[0,0,0,255],eae={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:Jse},getLineColor:{type:"accessor",value:$3},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class j3 extends Eg{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&$e.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:e}){const n=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getPolygon);if(n&&Array.isArray(e.dataChanged)){const r=this.state.paths.slice(),i=e.dataChanged.map(o=>V3({data:r,getIndex:s=>s.__source.index,dataRange:o,replace:this._getPaths(o)}));this.setState({paths:r,pathsDiff:i})}else n&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(e={}){const{data:n,getPolygon:r,positionFormat:i,_normalize:o}=this.props,s=[],a=i==="XY"?2:3,{startRow:u,endRow:l}=e,{iterable:c,objectInfo:f}=xc(n,u,l);for(const h of c){f.index++;let d=r(h,f);o&&(d=z3(d,a));const{holeIndices:g}=d,m=d.positions||d;if(g)for(let x=0;x<=g.length;x++){const _=m.slice(g[x-1]||0,g[x]||m.length);s.push(this.getSubLayerRow({path:_},h,f.index))}else s.push(this.getSubLayerRow({path:m},h,f.index))}return s}renderLayers(){const{data:e,_dataDiff:n,stroked:r,filled:i,extruded:o,wireframe:s,_normalize:a,_windingOrder:u,elevationScale:l,transitions:c,positionFormat:f}=this.props,{lineWidthUnits:h,lineWidthScale:d,lineWidthMinPixels:g,lineWidthMaxPixels:m,lineJointRounded:x,lineMiterLimit:_,lineDashJustified:y}=this.props,{getFillColor:b,getLineColor:T,getLineWidth:R,getLineDashArray:C,getElevation:D,getPolygon:F,updateTriggers:W,material:j}=this.props,{paths:H,pathsDiff:pe}=this.state,ue=this.getSubLayerClass("fill",Cg),se=this.getSubLayerClass("stroke",Tg),Ce=this.shouldRenderSubLayer("fill",H)&&new ue({_dataDiff:n,extruded:o,elevationScale:l,filled:i,wireframe:s,_normalize:a,_windingOrder:u,getElevation:D,getFillColor:b,getLineColor:o&&s?T:$3,material:j,transitions:c},this.getSubLayerProps({id:"fill",updateTriggers:W&&{getPolygon:W.getPolygon,getElevation:W.getElevation,getFillColor:W.getFillColor,lineColors:o&&s,getLineColor:W.getLineColor}}),{data:e,positionFormat:f,getPolygon:F}),De=!o&&r&&this.shouldRenderSubLayer("stroke",H)&&new se({_dataDiff:pe&&(()=>pe),widthUnits:h,widthScale:d,widthMinPixels:g,widthMaxPixels:m,jointRounded:x,miterLimit:_,dashJustified:y,_pathType:"loop",transitions:c&&{getWidth:c.getLineWidth,getColor:c.getLineColor,getPath:c.getPolygon},getColor:this.getSubLayerAccessor(T),getWidth:this.getSubLayerAccessor(R),getDashArray:this.getSubLayerAccessor(C)},this.getSubLayerProps({id:"stroke",updateTriggers:W&&{getWidth:W.getLineWidth,getColor:W.getLineColor,getDashArray:W.getLineDashArray}}),{data:H,positionFormat:f,getPath:He=>He.path});return[!o&&Ce,De,o&&Ce]}}w(j3,"layerName","PolygonLayer");w(j3,"defaultProps",eae);function tae(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,r=t.featureIds.value[n];return n!==-1?nae(t,r,n):null}function nae(t,e,n){const r={properties:{...t.properties[e]}};for(const i in t.numericProps)r.properties[i]=t.numericProps[i].value[n];return r}function rae(t,e){const n={points:null,lines:null,polygons:null};for(const r in n){const i=t[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(i.length*3);const o=[];for(let s=0;s<i.length;s++)e(i[s],o),n[r][s*3+0]=o[0],n[r][s*3+1]=o[1],n[r][s*3+2]=o[2]}return n}const iae=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;

    // if enable sdf (signed distance fields)
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }

    // Take the global opacity and the alpha from color into account for the alpha component
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,S2=192/256,x2=[],oae={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class Ub extends xg{constructor(...e){super(...e),w(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:iae}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:r,target:i})=>this.encodePickingColor(r,i)}})}updateState(e){super.updateState(e);const{props:n,oldProps:r}=e;let{outlineColor:i}=n;i!==r.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!n.sdf&&n.outlineWidth&&$e.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:r,outlineWidth:i}=this.props,{outlineColor:o}=this.state;e.uniforms={...e.uniforms,buffer:S2,outlineBuffer:i?Math.max(r,S2*(1-i)):-1,gamma:r,sdf:Boolean(n),outlineColor:o},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):x2}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):x2}}w(Ub,"defaultProps",oae);w(Ub,"layerName","MultiIconLayer");var zb={exports:{}};zb.exports=Tc;zb.exports.default=Tc;var La=1e20;function Tc(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=e===void 0?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var s=this.size=this.fontSize+this.buffer*2,a=s+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(s/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function sae(t,e,n,r,i,o,s){o.fill(La,0,e*n),s.fill(0,0,e*n);for(var a=(e-r)/2,u=0;u<i;u++)for(var l=0;l<r;l++){var c=(u+a)*e+l+a,f=t.data[4*(u*r+l)+3]/255;if(f===1)o[c]=0,s[c]=La;else if(f===0)o[c]=La,s[c]=0;else{var h=Math.max(0,.5-f),d=Math.max(0,f-.5);o[c]=h*h,s[c]=d*d}}}function aae(t,e,n,r,i,o,s){for(var a=0;a<e*n;a++){var u=Math.sqrt(r[a])-Math.sqrt(i[a]);t[a]=Math.round(255-255*(u/o+s))}}Tc.prototype._draw=function(t,e){var n=this.ctx.measureText(t),r=n.width,i=2*this.buffer,o,s,a,u,l,c,f,h;e&&this.useMetrics?(l=Math.floor(n.actualBoundingBoxAscent),h=this.buffer+Math.ceil(n.actualBoundingBoxAscent),c=this.buffer,f=this.buffer,s=Math.min(this.size,Math.ceil(n.actualBoundingBoxRight-n.actualBoundingBoxLeft)),u=Math.min(this.size-c,Math.ceil(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)),o=s+i,a=u+i,this.ctx.textBaseline="alphabetic"):(o=s=this.size,a=u=this.size,l=19*this.fontSize/24,c=f=0,h=this.middle,this.ctx.textBaseline="middle");var d;s&&u&&(this.ctx.clearRect(f,c,s,u),this.ctx.fillText(t,this.buffer,h),d=this.ctx.getImageData(f,c,s,u));var g=new Uint8ClampedArray(o*a);return sae(d,o,a,s,u,this.gridOuter,this.gridInner),T2(this.gridOuter,o,a,this.f,this.v,this.z),T2(this.gridInner,o,a,this.f,this.v,this.z),aae(g,o,a,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:g,metrics:{width:s,height:u,sdfWidth:o,sdfHeight:a,top:l,left:0,advance:r}}};Tc.prototype.draw=function(t){return this._draw(t,!1).data};Tc.prototype.drawWithMetrics=function(t){return this._draw(t,!0)};function T2(t,e,n,r,i,o){for(var s=0;s<e;s++)P2(t,s,e,n,r,i,o);for(var a=0;a<n;a++)P2(t,a*e,1,e,r,i,o)}function P2(t,e,n,r,i,o,s){var a,u,l,c;for(o[0]=0,s[0]=-La,s[1]=La,a=0;a<r;a++)i[a]=t[e+a*n];for(a=1,u=0,l=0;a<r;a++){do c=o[u],l=(i[a]-i[c]+a*a-c*c)/(a-c)/2;while(l<=s[u]&&--u>-1);u++,o[u]=a,s[u]=l,s[u+1]=La}for(a=0,u=0;a<r;a++){for(;s[u+1]<a;)u++;c=o[u],t[e+a*n]=i[c]+(a-c)*(a-c)}}const uae=32,lae=[];function cae(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function fae({characterSet:t,getFontWidth:e,fontHeight:n,buffer:r,maxCanvasWidth:i,mapping:o={},xOffset:s=0,yOffset:a=0}){let u=0,l=s;for(const f of t)if(!o[f]){const h=e(f);l+h+r*2>i&&(l=0,u++),o[f]={x:l+r,y:a+u*(n+r*2)+r,width:h,height:n},l+=h+r*2}const c=n+r*2;return{mapping:o,xOffset:l,yOffset:a+u*c,canvasHeight:cae(a+(u+1)*c)}}function G3(t,e,n,r){let i=0;for(let s=e;s<n;s++){var o;const a=t[s];i+=((o=r[a])===null||o===void 0?void 0:o.width)||0}return i}function W3(t,e,n,r,i,o){let s=e,a=0;for(let u=e;u<n;u++){const l=G3(t,u,u+1,i);a+l>r&&(s<u&&o.push(u),s=u,a=0),a+=l}return a}function hae(t,e,n,r,i,o){let s=e,a=e,u=e,l=0;for(let c=e;c<n;c++)if((t[c]===" "||t[c+1]===" "||c+1===n)&&(u=c+1),u>a){let f=G3(t,a,u,i);l+f>r&&(s<a&&(o.push(a),s=a,l=0),f>r&&(f=W3(t,a,u,r,i,o),s=o[o.length-1])),a=u,l+=f}return l}function dae(t,e,n,r,i=0,o){o===void 0&&(o=t.length);const s=[];return e==="break-all"?W3(t,i,o,n,r,s):hae(t,i,o,n,r,s),s}function pae(t,e,n,r,i,o){let s=0,a=0;for(let u=e;u<n;u++){const l=t[u],c=r[l];c?(a||(a=c.height),i[u]=s+c.width/2,s+=c.width):($e.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),i[u]=s,s+=uae)}o[0]=s,o[1]=a}function A2(t,e,n,r,i){const o=Array.from(t),s=o.length,a=new Array(s),u=new Array(s),l=new Array(s),c=(n==="break-word"||n==="break-all")&&isFinite(r)&&r>0,f=[0,0],h=[0,0];let d=0,g=0,m=0;for(let x=0;x<=s;x++){const _=o[x];if((_===`
`||x===s)&&(m=x),m>g){const y=c?dae(o,n,r,i,g,m):lae;for(let b=0;b<=y.length;b++){const T=b===0?g:y[b-1],R=b<y.length?y[b]:m;pae(o,T,R,i,a,h);for(let C=T;C<R;C++)u[C]=d+h[1]/2,l[C]=h[0];d=d+h[1]*e,f[0]=Math.max(f[0],h[0])}g=m}_===`
`&&(a[g]=0,u[g]=0,l[g]=0,g++)}return f[1]=d,{x:a,y:u,rowWidth:l,size:f}}function gae({value:t,length:e,stride:n,offset:r,startIndices:i,characterSet:o}){const s=t.BYTES_PER_ELEMENT,a=n?n/s:1,u=r?r/s:0,l=i[e]||Math.ceil((t.length-u)/a),c=o&&new Set,f=new Array(e);let h=t;if(a>1||u>0){const d=t.constructor;h=new d(l);for(let g=0;g<l;g++)h[g]=t[g*a+u]}for(let d=0;d<e;d++){const g=i[d],m=i[d+1]||l,x=h.subarray(g,m);f[d]=String.fromCodePoint.apply(null,x),c&&x.forEach(c.add,c)}if(c)for(const d of c)o.add(String.fromCodePoint(d));return{texts:f,characterCount:l}}class H3{constructor(e=5){w(this,"limit",void 0),w(this,"_cache",{}),w(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}function mae(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}const _l={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:mae(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},C2=1024,vae=.9,R2=1.2,Y3=3;let bp=new H3(Y3);function yae(t,e){let n;typeof e=="string"?n=new Set(Array.from(e)):n=new Set(e);const r=bp.get(t);if(!r)return n;for(const i in r.mapping)n.has(i)&&n.delete(i);return n}function _ae(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function L2(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function bae(t){$e.assert(Number.isFinite(t)&&t>=Y3,"Invalid cache limit"),bp=new H3(t)}class wae{constructor(){w(this,"props",{..._l}),w(this,"_key",void 0),w(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return R2}setProps(e={}){Object.assign(this.props,e);const n=this._key;this._key=this._getKey();const r=yae(this._key,this.props.characterSet),i=bp.get(this._key);if(i&&r.size===0){this._key!==n&&(this._atlas=i);return}const o=this._generateFontAtlas(this._key,r,i);this._atlas=o,bp.set(this._key,o)}_generateFontAtlas(e,n,r){const{fontFamily:i,fontWeight:o,fontSize:s,buffer:a,sdf:u,radius:l,cutoff:c}=this.props;let f=r&&r.data;f||(f=document.createElement("canvas"),f.width=C2);const h=f.getContext("2d");L2(h,i,s,o);const{mapping:d,canvasHeight:g,xOffset:m,yOffset:x}=fae({getFontWidth:_=>h.measureText(_).width,fontHeight:s*R2,buffer:a,characterSet:n,maxCanvasWidth:C2,...r&&{mapping:r.mapping,xOffset:r.xOffset,yOffset:r.yOffset}});if(f.height!==g){const _=h.getImageData(0,0,f.width,f.height);f.height=g,h.putImageData(_,0,0)}if(L2(h,i,s,o),u){const _=new zb.exports(s,a,l,c,i,o),y=h.getImageData(0,0,_.size,_.size);for(const b of n)_ae(_.draw(b),y),h.putImageData(y,d[b].x-a,d[b].y+a)}else for(const _ of n)h.fillText(_,d[_].x,d[_].y+s*vae);return{xOffset:m,yOffset:x,mapping:d,data:f,width:f.width,height:f.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:r,buffer:i,sdf:o,radius:s,cutoff:a}=this.props;return o?"".concat(e," ").concat(n," ").concat(r," ").concat(i," ").concat(s," ").concat(a):"".concat(e," ").concat(n," ").concat(r," ").concat(i)}}const Eae=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;

  // convert size in meters to pixels, then scaled and clamp

  // project meters to pixels and clamp to limits
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,Sae=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,xae={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class Bb extends Jn{constructor(...e){super(...e),w(this,"state",void 0)}getShaders(){return super.getShaders({vs:Eae,fs:Sae,modules:[_i,bi]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var r;const{gl:i}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props;let{padding:u}=this.props;u.length<4&&(u=[u[0],u[1],u[0],u[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:Boolean(a),padding:u,sizeUnits:pr[i],sizeScale:r,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(e){const n=[0,0,1,0,1,1,0,1];return new Cr(e,{...this.getShaders(),id:this.props.id,geometry:new qr({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}}w(Bb,"defaultProps",xae);w(Bb,"layerName","TextBackgroundLayer");const M2={start:1,middle:0,end:-1},O2={top:1,center:0,bottom:-1},A0=[0,0,0,255],Tae=1,Pae={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:A0},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:_l.characterSet},fontFamily:_l.fontFamily,fontWeight:_l.fontWeight,lineHeight:Tae,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:A0},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:A0},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Vb extends Eg{constructor(...e){super(...e),w(this,"state",void 0),w(this,"getBoundingRect",(n,r)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:u,getTextAnchor:l,getAlignmentBaseline:c}=this.props,f=o(n,r)||"",{size:[h,d]}=A2(f,u,s,a,i),g=M2[typeof l=="function"?l(n,r):l],m=O2[typeof c=="function"?c(n,r):c];return[(g-1)*h/2,(m-1)*d/2,h,d]}),w(this,"getIconOffsets",(n,r)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:u,getTextAnchor:l,getAlignmentBaseline:c}=this.props,f=o(n,r)||"",{x:h,y:d,rowWidth:g,size:[m,x]}=A2(f,u,s,a,i),_=M2[typeof l=="function"?l(n,r):l],y=O2[typeof c=="function"?c(n,r):c],b=h.length,T=new Array(b*2);let R=0;for(let C=0;C<b;C++){const D=(1-_)*(m-g[C])/2;T[R++]=(_-1)*m/2+D+h[C],T[R++]=(y-1)*x/2+d[C]}return T})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new wae}}updateState(e){const{props:n,oldProps:r,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==r.lineHeight||n.wordBreak!==r.wordBreak||n.maxWidth!==r.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:r}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,s={...e,characterSet:o,fontFamily:n,fontWeight:r};if(!i.mapping)return i.setProps(s),!0;for(const a in s)if(s[a]!==i.props[a])return i.setProps(s),!0;return!1}_updateText(){var e;const{data:n,characterSet:r}=this.props,i=(e=n.attributes)===null||e===void 0?void 0:e.getText;let{getText:o}=this.props,s=n.startIndices,a;const u=r==="auto"&&new Set;if(i&&s){const{texts:l,characterCount:c}=gae({...ArrayBuffer.isView(i)?{value:i}:i,length:n.length,startIndices:s,characterSet:u});a=c,o=(f,{index:h})=>l[h]}else{const{iterable:l,objectInfo:c}=xc(n);s=[0],a=0;for(const f of l){c.index++;const h=Array.from(o(f,c)||"");u&&h.forEach(u.add,u),a+=h.length,s.push(a)}}this.setState({getText:o,startIndices:s,numInstances:a,characterSet:u||r})}renderLayers(){const{startIndices:e,numInstances:n,getText:r,fontAtlasManager:{scale:i,texture:o,mapping:s},styleVersion:a}=this.state,{data:u,_dataDiff:l,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:g,getBackgroundColor:m,getBorderColor:x,getBorderWidth:_,backgroundPadding:y,background:b,billboard:T,fontSettings:R,outlineWidth:C,outlineColor:D,sizeScale:F,sizeUnits:W,sizeMinPixels:j,sizeMaxPixels:H,transitions:pe,updateTriggers:ue}=this.props,se=this.getSubLayerClass("characters",Ub),Ce=this.getSubLayerClass("background",Bb);return[b&&new Ce({getFillColor:m,getLineColor:x,getLineWidth:_,padding:y,getPosition:c,getSize:h,getAngle:d,getPixelOffset:g,billboard:T,sizeScale:F/this.state.fontAtlasManager.props.fontSize,sizeUnits:W,sizeMinPixels:j,sizeMaxPixels:H,transitions:pe&&{getPosition:pe.getPosition,getAngle:pe.getAngle,getSize:pe.getSize,getFillColor:pe.getBackgroundColor,getLineColor:pe.getBorderColor,getLineWidth:pe.getBorderWidth,getPixelOffset:pe.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:ue.getPosition,getAngle:ue.getAngle,getSize:ue.getSize,getFillColor:ue.getBackgroundColor,getLineColor:ue.getBorderColor,getLineWidth:ue.getBorderWidth,getPixelOffset:ue.getPixelOffset,getBoundingRect:{getText:ue.getText,getTextAnchor:ue.getTextAnchor,getAlignmentBaseline:ue.getAlignmentBaseline,styleVersion:a}}}),{data:u.attributes&&u.attributes.background?{length:u.length,attributes:u.attributes.background}:u,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new se({sdf:R.sdf,smoothing:Number.isFinite(R.smoothing)?R.smoothing:_l.smoothing,outlineWidth:C,outlineColor:D,iconAtlas:o,iconMapping:s,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:g,billboard:T,sizeScale:F*i,sizeUnits:W,sizeMinPixels:j*i,sizeMaxPixels:H*i,transitions:pe&&{getPosition:pe.getPosition,getAngle:pe.getAngle,getColor:pe.getColor,getSize:pe.getSize,getPixelOffset:pe.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:ue.getText,getPosition:ue.getPosition,getAngle:ue.getAngle,getColor:ue.getColor,getSize:ue.getSize,getPixelOffset:ue.getPixelOffset,getIconOffsets:{getText:ue.getText,getTextAnchor:ue.getTextAnchor,getAlignmentBaseline:ue.getAlignmentBaseline,styleVersion:a}}}),{data:u,_dataDiff:l,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:r})]}static set fontAtlasCacheLimit(e){bae(e)}}w(Vb,"defaultProps",Pae);w(Vb,"layerName","TextLayer");const zh={circle:{type:kb,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:xg,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:Vb,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},Bh={type:Tg,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},C_={type:Cg,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Hu({type:t,props:e}){const n={};for(const r in e)n[r]=t.defaultProps[e[r]];return n}function C0(t,e){const{transitions:n,updateTriggers:r}=t.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const o in e){const s=e[o];let a=t.props[o];o.startsWith("get")&&(a=t.getSubLayerAccessor(a),i.updateTriggers[s]=r[o],n&&(i.transitions[s]=n[o])),i[s]=a}return i}function Aae(t){if(Array.isArray(t))return t;switch($e.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return $e.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}function k2(t,e,n={}){const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=t.length}=n;for(let s=i;s<o;s++){const a=t[s];$e.assert(a&&a.geometry,"GeoJSON does not have geometry");const{geometry:u}=a;if(u.type==="GeometryCollection"){$e.assert(Array.isArray(u.geometries),"GeoJSON does not have geometries array");const{geometries:l}=u;for(let c=0;c<l.length;c++){const f=l[c];I2(f,r,e,a,s)}}else I2(u,r,e,a,s)}return r}function I2(t,e,n,r,i){const{type:o,coordinates:s}=t,{pointFeatures:a,lineFeatures:u,polygonFeatures:l,polygonOutlineFeatures:c}=e;if(!Rae(o,s)){$e.warn("".concat(o," coordinates are malformed"))();return}switch(o){case"Point":a.push(n({geometry:t},r,i));break;case"MultiPoint":s.forEach(f=>{a.push(n({geometry:{type:"Point",coordinates:f}},r,i))});break;case"LineString":u.push(n({geometry:t},r,i));break;case"MultiLineString":s.forEach(f=>{u.push(n({geometry:{type:"LineString",coordinates:f}},r,i))});break;case"Polygon":l.push(n({geometry:t},r,i)),s.forEach(f=>{c.push(n({geometry:{type:"LineString",coordinates:f}},r,i))});break;case"MultiPolygon":s.forEach(f=>{l.push(n({geometry:{type:"Polygon",coordinates:f}},r,i)),f.forEach(h=>{c.push(n({geometry:{type:"LineString",coordinates:h}},r,i))})});break}}const Cae={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function Rae(t,e){let n=Cae[t];for($e.assert(n,"Unknown GeoJSON type ".concat(t));e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}function X3(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function Cf(t){return t.geometry.coordinates}function Lae(t,e){const n=X3(),{pointFeatures:r,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:s}=t;return n.points.data=r,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=Cf,n.lines.data=i,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=Cf,n.polygons.data=o,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=Cf,n.polygonsOutline.data=s,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=Cf,n}function Mae(t,e){const n=X3(),{points:r,lines:i,polygons:o}=t,s=rae(t,e);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{...r.attributes,getPosition:r.positions,instancePickingColors:{size:3,value:s.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:s.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygons._normalize=!1,o.triangles&&(n.polygons.data.attributes.indices=o.triangles.value),n.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:s.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},n.polygonsOutline._pathType="open",n}const Oae=["points","linestrings","polygons"],kae={...Hu(zh.circle),...Hu(zh.icon),...Hu(zh.text),...Hu(Bh),...Hu(C_),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class q3 extends Eg{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:e,changeFlags:n}){if(!n.dataChanged)return;const{data:r}=this.props,i=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:i}),i?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}_updateStateBinary({props:e,changeFlags:n}){const r=Mae(e.data,this.encodePickingColor);this.setState({layerProps:r})}_updateStateJSON({props:e,changeFlags:n}){const r=Aae(e.data),i=this.getSubLayerRow.bind(this);let o={};const s={};if(Array.isArray(n.dataChanged)){const u=this.state.features;for(const l in u)o[l]=u[l].slice(),s[l]=[];for(const l of n.dataChanged){const c=k2(r,i,l);for(const f in u)s[f].push(V3({data:o[f],getIndex:h=>h.__source.index,dataRange:l,replace:c[f]}))}}else o=k2(r,i);const a=Lae(o,s);this.setState({features:o,featuresDiff:s,layerProps:a})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r,sourceLayer:i}=n;return n.featureType=Oae.find(o=>i.id.startsWith("".concat(this.id,"-").concat(o,"-"))),r>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(n.index=this.props.data.points.globalFeatureIds.value[r]),n}_updateAutoHighlight(e){const n="".concat(this.id,"-points-"),r=e.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(n)===r&&i.updateAutoHighlight(e)}_renderPolygonLayer(){const{extruded:e,wireframe:n}=this.props,{layerProps:r}=this.state,i="polygons-fill",o=this.shouldRenderSubLayer(i,r.polygons.data)&&this.getSubLayerClass(i,C_.type);if(o){const s=C0(this,C_.props),a=e&&n;return a||delete s.getLineColor,s.updateTriggers.lineColors=a,new o(s,this.getSubLayerProps({id:i,updateTriggers:s.updateTriggers}),r.polygons)}return null}_renderLineLayers(){const{extruded:e,stroked:n}=this.props,{layerProps:r}=this.state,i="polygons-stroke",o="linestrings",s=!e&&n&&this.shouldRenderSubLayer(i,r.polygonsOutline.data)&&this.getSubLayerClass(i,Bh.type),a=this.shouldRenderSubLayer(o,r.lines.data)&&this.getSubLayerClass(o,Bh.type);if(s||a){const u=C0(this,Bh.props);return[s&&new s(u,this.getSubLayerProps({id:i,updateTriggers:u.updateTriggers}),r.polygonsOutline),a&&new a(u,this.getSubLayerProps({id:o,updateTriggers:u.updateTriggers}),r.lines)]}return null}_renderPointLayers(){const{pointType:e}=this.props,{layerProps:n,binary:r}=this.state;let{highlightedObjectIndex:i}=this.props;!r&&Number.isFinite(i)&&(i=n.points.data.findIndex(a=>a.__source.index===i));const o=new Set(e.split("+")),s=[];for(const a of o){const u="points-".concat(a),l=zh[a],c=l&&this.shouldRenderSubLayer(u,n.points.data)&&this.getSubLayerClass(u,l.type);if(c){const f=C0(this,l.props);let h=n.points;if(a==="text"&&r){const{instancePickingColors:d,...g}=h.data.attributes;h={...h,data:{...h.data,attributes:g}}}s.push(new c(f,this.getSubLayerProps({id:u,updateTriggers:f.updateTriggers,highlightedObjectIndex:i}),h))}}return s}renderLayers(){const{extruded:e}=this.props,n=this._renderPolygonLayer(),r=this._renderLineLayers(),i=this._renderPointLayers();return[!e&&n,r,i,e&&n]}getSubLayerAccessor(e){const{binary:n}=this.state;return!n||typeof e!="function"?super.getSubLayerAccessor(e):(r,i)=>{const{data:o,index:s}=i,a=tae(o,s);return e(a,i)}}}w(q3,"layerName","GeoJsonLayer");w(q3,"defaultProps",kae);function Vh(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Iae(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Z3(t){let e,n,r;t.length!==2?(e=Vh,n=(a,u)=>Vh(t(a),u),r=(a,u)=>t(a)-u):(e=t===Vh||t===Iae?t:Nae,n=t,r=t);function i(a,u,l=0,c=a.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:s,right:o}}function Nae(){return 0}function Dae(t){return t===null?NaN:+t}const Fae=Z3(Vh),Uae=Fae.right;Z3(Dae).center;const zae=Uae;var R_=Math.sqrt(50),L_=Math.sqrt(10),M_=Math.sqrt(2);function Bae(t,e,n){var r,i=-1,o,s,a;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),(a=K3(t,e,n))===0||!isFinite(a))return[];if(a>0){let u=Math.round(t/a),l=Math.round(e/a);for(u*a<t&&++u,l*a>e&&--l,s=new Array(o=l-u+1);++i<o;)s[i]=(u+i)*a}else{a=-a;let u=Math.round(t*a),l=Math.round(e*a);for(u/a<t&&++u,l/a>e&&--l,s=new Array(o=l-u+1);++i<o;)s[i]=(u+i)/a}return r&&s.reverse(),s}function K3(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=R_?10:o>=L_?5:o>=M_?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=R_?10:o>=L_?5:o>=M_?2:1)}function Vae(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=R_?i*=10:o>=L_?i*=5:o>=M_&&(i*=2),e<t?-i:i}function $ae(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function $b(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Q3(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Pc(){}var ql=.7,wp=1/ql,Ma="\\s*([+-]?\\d+)\\s*",Zl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jae=/^#([0-9a-f]{3,8})$/,Gae=new RegExp(`^rgb\\(${Ma},${Ma},${Ma}\\)$`),Wae=new RegExp(`^rgb\\(${pi},${pi},${pi}\\)$`),Hae=new RegExp(`^rgba\\(${Ma},${Ma},${Ma},${Zl}\\)$`),Yae=new RegExp(`^rgba\\(${pi},${pi},${pi},${Zl}\\)$`),Xae=new RegExp(`^hsl\\(${Zl},${pi},${pi}\\)$`),qae=new RegExp(`^hsla\\(${Zl},${pi},${pi},${Zl}\\)$`),N2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$b(Pc,Kl,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:D2,formatHex:D2,formatHex8:Zae,formatHsl:Kae,formatRgb:F2,toString:F2});function D2(){return this.rgb().formatHex()}function Zae(){return this.rgb().formatHex8()}function Kae(){return J3(this).formatHsl()}function F2(){return this.rgb().formatRgb()}function Kl(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=jae.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?U2(e):n===3?new Yn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Rf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Rf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Gae.exec(t))?new Yn(e[1],e[2],e[3],1):(e=Wae.exec(t))?new Yn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Hae.exec(t))?Rf(e[1],e[2],e[3],e[4]):(e=Yae.exec(t))?Rf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Xae.exec(t))?V2(e[1],e[2]/100,e[3]/100,1):(e=qae.exec(t))?V2(e[1],e[2]/100,e[3]/100,e[4]):N2.hasOwnProperty(t)?U2(N2[t]):t==="transparent"?new Yn(NaN,NaN,NaN,0):null}function U2(t){return new Yn(t>>16&255,t>>8&255,t&255,1)}function Rf(t,e,n,r){return r<=0&&(t=e=n=NaN),new Yn(t,e,n,r)}function Qae(t){return t instanceof Pc||(t=Kl(t)),t?(t=t.rgb(),new Yn(t.r,t.g,t.b,t.opacity)):new Yn}function O_(t,e,n,r){return arguments.length===1?Qae(t):new Yn(t,e,n,r==null?1:r)}function Yn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}$b(Yn,O_,Q3(Pc,{brighter(t){return t=t==null?wp:Math.pow(wp,t),new Yn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ql:Math.pow(ql,t),new Yn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Yn(us(this.r),us(this.g),us(this.b),Ep(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:z2,formatHex:z2,formatHex8:Jae,formatRgb:B2,toString:B2}));function z2(){return`#${ns(this.r)}${ns(this.g)}${ns(this.b)}`}function Jae(){return`#${ns(this.r)}${ns(this.g)}${ns(this.b)}${ns((isNaN(this.opacity)?1:this.opacity)*255)}`}function B2(){const t=Ep(this.opacity);return`${t===1?"rgb(":"rgba("}${us(this.r)}, ${us(this.g)}, ${us(this.b)}${t===1?")":`, ${t})`}`}function Ep(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function us(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ns(t){return t=us(t),(t<16?"0":"")+t.toString(16)}function V2(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Vr(t,e,n,r)}function J3(t){if(t instanceof Vr)return new Vr(t.h,t.s,t.l,t.opacity);if(t instanceof Pc||(t=Kl(t)),!t)return new Vr;if(t instanceof Vr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Vr(s,a,u,t.opacity)}function eue(t,e,n,r){return arguments.length===1?J3(t):new Vr(t,e,n,r==null?1:r)}function Vr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}$b(Vr,eue,Q3(Pc,{brighter(t){return t=t==null?wp:Math.pow(wp,t),new Vr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ql:Math.pow(ql,t),new Vr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Yn(R0(t>=240?t-240:t+120,i,r),R0(t,i,r),R0(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Vr($2(this.h),Lf(this.s),Lf(this.l),Ep(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ep(this.opacity);return`${t===1?"hsl(":"hsla("}${$2(this.h)}, ${Lf(this.s)*100}%, ${Lf(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $2(t){return t=(t||0)%360,t<0?t+360:t}function Lf(t){return Math.max(0,Math.min(1,t||0))}function R0(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const jb=t=>()=>t;function tue(t,e){return function(n){return t+n*e}}function nue(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function rue(t){return(t=+t)==1?ek:function(e,n){return n-e?nue(e,n,t):jb(isNaN(e)?n:e)}}function ek(t,e){var n=e-t;return n?tue(t,n):jb(isNaN(t)?e:t)}const j2=function t(e){var n=rue(e);function r(i,o){var s=n((i=O_(i)).r,(o=O_(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),l=ek(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=t,r}(1);function iue(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function oue(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function sue(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Gb(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function aue(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Sp(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function uue(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Gb(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var k_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,L0=new RegExp(k_.source,"g");function lue(t){return function(){return t}}function cue(t){return function(e){return t(e)+""}}function fue(t,e){var n=k_.lastIndex=L0.lastIndex=0,r,i,o,s=-1,a=[],u=[];for(t=t+"",e=e+"";(r=k_.exec(t))&&(i=L0.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:Sp(r,i)})),n=L0.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?cue(u[0].x):lue(e):(e=u.length,function(l){for(var c=0,f;c<e;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Gb(t,e){var n=typeof e,r;return e==null||n==="boolean"?jb(e):(n==="number"?Sp:n==="string"?(r=Kl(e))?(e=r,j2):fue:e instanceof Kl?j2:e instanceof Date?aue:oue(e)?iue:Array.isArray(e)?sue:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?uue:Sp)(t,e)}function hue(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function due(t){return function(){return t}}function pue(t){return+t}var G2=[0,1];function _a(t){return t}function I_(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:due(isNaN(e)?NaN:.5)}function gue(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function mue(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=I_(i,r),o=n(s,o)):(r=I_(r,i),o=n(o,s)),function(a){return o(r(a))}}function vue(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=I_(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var u=zae(t,a,1,r)-1;return o[u](i[u](a))}}function yue(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function _ue(){var t=G2,e=G2,n=Gb,r,i,o,s=_a,a,u,l;function c(){var h=Math.min(t.length,e.length);return s!==_a&&(s=gue(t[0],t[h-1])),a=h>2?vue:mue,u=l=null,f}function f(h){return h==null||isNaN(h=+h)?o:(u||(u=a(t.map(r),e,n)))(r(s(h)))}return f.invert=function(h){return s(i((l||(l=a(e,t.map(r),Sp)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,pue),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=hue,c()},f.clamp=function(h){return arguments.length?(s=h?!0:_a,c()):s!==_a},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,d){return r=h,i=d,c()}}function bue(){return _ue()(_a,_a)}function wue(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function xp(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function tu(t){return t=xp(Math.abs(t)),t?t[1]:NaN}function Eue(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function Sue(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var xue=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tp(t){if(!(e=xue.exec(t)))throw new Error("invalid format: "+t);var e;return new Wb({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Tp.prototype=Wb.prototype;function Wb(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Wb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Tue(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var tk;function Pue(t,e){var n=xp(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(tk=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+xp(t,Math.max(0,e+o-1))[0]}function W2(t,e){var n=xp(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const H2={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:wue,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>W2(t*100,e),r:W2,s:Pue,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Y2(t){return t}var X2=Array.prototype.map,q2=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Aue(t){var e=t.grouping===void 0||t.thousands===void 0?Y2:Eue(X2.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Y2:Sue(X2.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f){f=Tp(f);var h=f.fill,d=f.align,g=f.sign,m=f.symbol,x=f.zero,_=f.width,y=f.comma,b=f.precision,T=f.trim,R=f.type;R==="n"?(y=!0,R="g"):H2[R]||(b===void 0&&(b=12),T=!0,R="g"),(x||h==="0"&&d==="=")&&(x=!0,h="0",d="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",D=m==="$"?r:/[%p]/.test(R)?s:"",F=H2[R],W=/[defgprs%]/.test(R);b=b===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function j(H){var pe=C,ue=D,se,Ce,De;if(R==="c")ue=F(H)+ue,H="";else{H=+H;var He=H<0||1/H<0;if(H=isNaN(H)?u:F(Math.abs(H),b),T&&(H=Tue(H)),He&&+H==0&&g!=="+"&&(He=!1),pe=(He?g==="("?g:a:g==="-"||g==="("?"":g)+pe,ue=(R==="s"?q2[8+tk/3]:"")+ue+(He&&g==="("?")":""),W){for(se=-1,Ce=H.length;++se<Ce;)if(De=H.charCodeAt(se),48>De||De>57){ue=(De===46?i+H.slice(se+1):H.slice(se))+ue,H=H.slice(0,se);break}}}y&&!x&&(H=e(H,1/0));var ae=pe.length+H.length+ue.length,ve=ae<_?new Array(_-ae+1).join(h):"";switch(y&&x&&(H=e(ve+H,ve.length?_-ue.length:1/0),ve=""),d){case"<":H=pe+H+ue+ve;break;case"=":H=pe+ve+H+ue;break;case"^":H=ve.slice(0,ae=ve.length>>1)+pe+H+ue+ve.slice(ae);break;default:H=ve+pe+H+ue;break}return o(H)}return j.toString=function(){return f+""},j}function c(f,h){var d=l((f=Tp(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(tu(h)/3)))*3,m=Math.pow(10,-g),x=q2[8+g/3];return function(_){return d(m*_)+x}}return{format:l,formatPrefix:c}}var Mf,nk,rk;Cue({thousands:",",grouping:[3],currency:["$",""]});function Cue(t){return Mf=Aue(t),nk=Mf.format,rk=Mf.formatPrefix,Mf}function Rue(t){return Math.max(0,-tu(Math.abs(t)))}function Lue(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(tu(e)/3)))*3-tu(Math.abs(t)))}function Mue(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,tu(e)-tu(t))+1}function Oue(t,e,n,r){var i=Vae(t,e,n),o;switch(r=Tp(r==null?",f":r),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Lue(i,s))&&(r.precision=o),rk(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Mue(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Rue(i))&&(r.precision=o-(r.type==="%")*2);break}}return nk(r)}function kue(t){var e=t.domain;return t.ticks=function(n){var r=e();return Bae(r[0],r[r.length-1],n==null?10:n)},t.tickFormat=function(n,r){var i=e();return Oue(i[0],i[i.length-1],n==null?10:n,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],u,l,c=10;for(a<s&&(l=s,s=a,a=l,l=i,i=o,o=l);c-- >0;){if(l=K3(s,a,n),l===u)return r[i]=s,r[o]=a,e(r);if(l>0)s=Math.floor(s/l)*l,a=Math.ceil(a/l)*l;else if(l<0)s=Math.ceil(s*l)/l,a=Math.floor(a*l)/l;else break;u=l}return t},t}function Iue(){var t=bue();return t.copy=function(){return yue(t,Iue())},$ae.apply(t,arguments),kue(t)}var Hb={};Hb.remove=Nue;var $h=[{base:" ",chars:"\xA0"},{base:"0",chars:"\u07C0"},{base:"A",chars:"\u24B6\uFF21\xC0\xC1\xC2\u1EA6\u1EA4\u1EAA\u1EA8\xC3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\xC4\u01DE\u1EA2\xC5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F"},{base:"AA",chars:"\uA732"},{base:"AE",chars:"\xC6\u01FC\u01E2"},{base:"AO",chars:"\uA734"},{base:"AU",chars:"\uA736"},{base:"AV",chars:"\uA738\uA73A"},{base:"AY",chars:"\uA73C"},{base:"B",chars:"\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0181"},{base:"C",chars:"\u24B8\uFF23\uA73E\u1E08\u0106C\u0108\u010A\u010C\xC7\u0187\u023B"},{base:"D",chars:"\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018A\u0189\u1D05\uA779"},{base:"Dh",chars:"\xD0"},{base:"DZ",chars:"\u01F1\u01C4"},{base:"Dz",chars:"\u01F2\u01C5"},{base:"E",chars:"\u025B\u24BA\uFF25\xC8\xC9\xCA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\xCB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E\u1D07"},{base:"F",chars:"\uA77C\u24BB\uFF26\u1E1E\u0191\uA77B"},{base:"G",chars:"\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E\u0262"},{base:"H",chars:"\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D"},{base:"I",chars:"\u24BE\uFF29\xCC\xCD\xCE\u0128\u012A\u012C\u0130\xCF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197"},{base:"J",chars:"\u24BF\uFF2A\u0134\u0248\u0237"},{base:"K",chars:"\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2"},{base:"L",chars:"\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780"},{base:"LJ",chars:"\u01C7"},{base:"Lj",chars:"\u01C8"},{base:"M",chars:"\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C\u03FB"},{base:"N",chars:"\uA7A4\u0220\u24C3\uFF2E\u01F8\u0143\xD1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u019D\uA790\u1D0E"},{base:"NJ",chars:"\u01CA"},{base:"Nj",chars:"\u01CB"},{base:"O",chars:"\u24C4\uFF2F\xD2\xD3\xD4\u1ED2\u1ED0\u1ED6\u1ED4\xD5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\xD6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\xD8\u01FE\u0186\u019F\uA74A\uA74C"},{base:"OE",chars:"\u0152"},{base:"OI",chars:"\u01A2"},{base:"OO",chars:"\uA74E"},{base:"OU",chars:"\u0222"},{base:"P",chars:"\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754"},{base:"Q",chars:"\u24C6\uFF31\uA756\uA758\u024A"},{base:"R",chars:"\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782"},{base:"S",chars:"\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784"},{base:"T",chars:"\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786"},{base:"Th",chars:"\xDE"},{base:"TZ",chars:"\uA728"},{base:"U",chars:"\u24CA\uFF35\xD9\xDA\xDB\u0168\u1E78\u016A\u1E7A\u016C\xDC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244"},{base:"V",chars:"\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245"},{base:"VY",chars:"\uA760"},{base:"W",chars:"\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72"},{base:"X",chars:"\u24CD\uFF38\u1E8A\u1E8C"},{base:"Y",chars:"\u24CE\uFF39\u1EF2\xDD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE"},{base:"Z",chars:"\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762"},{base:"a",chars:"\u24D0\uFF41\u1E9A\xE0\xE1\xE2\u1EA7\u1EA5\u1EAB\u1EA9\xE3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\xE4\u01DF\u1EA3\xE5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250\u0251"},{base:"aa",chars:"\uA733"},{base:"ae",chars:"\xE6\u01FD\u01E3"},{base:"ao",chars:"\uA735"},{base:"au",chars:"\uA737"},{base:"av",chars:"\uA739\uA73B"},{base:"ay",chars:"\uA73D"},{base:"b",chars:"\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253\u0182"},{base:"c",chars:"\uFF43\u24D2\u0107\u0109\u010B\u010D\xE7\u1E09\u0188\u023C\uA73F\u2184"},{base:"d",chars:"\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\u018B\u13E7\u0501\uA7AA"},{base:"dh",chars:"\xF0"},{base:"dz",chars:"\u01F3\u01C6"},{base:"e",chars:"\u24D4\uFF45\xE8\xE9\xEA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\xEB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u01DD"},{base:"f",chars:"\u24D5\uFF46\u1E1F\u0192"},{base:"ff",chars:"\uFB00"},{base:"fi",chars:"\uFB01"},{base:"fl",chars:"\uFB02"},{base:"ffi",chars:"\uFB03"},{base:"ffl",chars:"\uFB04"},{base:"g",chars:"\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\uA77F\u1D79"},{base:"h",chars:"\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265"},{base:"hv",chars:"\u0195"},{base:"i",chars:"\u24D8\uFF49\xEC\xED\xEE\u0129\u012B\u012D\xEF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131"},{base:"j",chars:"\u24D9\uFF4A\u0135\u01F0\u0249"},{base:"k",chars:"\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3"},{base:"l",chars:"\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747\u026D"},{base:"lj",chars:"\u01C9"},{base:"m",chars:"\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F"},{base:"n",chars:"\u24DD\uFF4E\u01F9\u0144\xF1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5\u043B\u0509"},{base:"nj",chars:"\u01CC"},{base:"o",chars:"\u24DE\uFF4F\xF2\xF3\xF4\u1ED3\u1ED1\u1ED7\u1ED5\xF5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\xF6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\xF8\u01FF\uA74B\uA74D\u0275\u0254\u1D11"},{base:"oe",chars:"\u0153"},{base:"oi",chars:"\u01A3"},{base:"oo",chars:"\uA74F"},{base:"ou",chars:"\u0223"},{base:"p",chars:"\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755\u03C1"},{base:"q",chars:"\u24E0\uFF51\u024B\uA757\uA759"},{base:"r",chars:"\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783"},{base:"s",chars:"\u24E2\uFF53\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B\u0282"},{base:"ss",chars:"\xDF"},{base:"t",chars:"\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787"},{base:"th",chars:"\xFE"},{base:"tz",chars:"\uA729"},{base:"u",chars:"\u24E4\uFF55\xF9\xFA\xFB\u0169\u1E79\u016B\u1E7B\u016D\xFC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289"},{base:"v",chars:"\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C"},{base:"vy",chars:"\uA761"},{base:"w",chars:"\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73"},{base:"x",chars:"\u24E7\uFF58\u1E8B\u1E8D"},{base:"y",chars:"\u24E8\uFF59\u1EF3\xFD\u0177\u1EF9\u0233\u1E8F\xFF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF"},{base:"z",chars:"\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763"}],Yb={};for(var Of=0;Of<$h.length;Of+=1)for(var Z2=$h[Of].chars,M0=0;M0<Z2.length;M0+=1)Yb[Z2[M0]]=$h[Of].base;function Nue(t){return t.replace(/[^\u0000-\u007e]/g,function(e){return Yb[e]||e})}Hb.replacementList=$h;Hb.diacriticsMap=Yb;function rle(t){return pc({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(t)}function ile(t){return pc({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"}}]})(t)}export{E3 as A,Vue as B,Hue as C,Qw as D,zue as E,u6 as F,ej as G,nD as H,U6 as L,Wue as M,$ue as N,Bue as O,jue as P,Rt as R,_d as S,Yue as Z,ke as a,KL as b,dc as c,Hb as d,Zue as e,kb as f,q3 as g,Que as h,ele as i,ps as j,Jue as k,Iue as l,ile as m,Gue as n,rle as o,nle as p,tle as q,B as r,Xue as s,Kue as t,ZL as u,que as v,L6 as w,Fue as x,Due as y,Uue as z};
